function aT(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var oT={exports:{}},af={},uT={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),DN=Symbol.for("react.portal"),SN=Symbol.for("react.fragment"),NN=Symbol.for("react.strict_mode"),RN=Symbol.for("react.profiler"),kN=Symbol.for("react.provider"),PN=Symbol.for("react.context"),ON=Symbol.for("react.forward_ref"),LN=Symbol.for("react.suspense"),FN=Symbol.for("react.memo"),BN=Symbol.for("react.lazy"),ey=Symbol.iterator;function MN(t){return t===null||typeof t!="object"?null:(t=ey&&t[ey]||t["@@iterator"],typeof t=="function"?t:null)}var lT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cT=Object.assign,dT={};function Uo(t,e,r){this.props=t,this.context=e,this.refs=dT,this.updater=r||lT}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hT(){}hT.prototype=Uo.prototype;function wg(t,e,r){this.props=t,this.context=e,this.refs=dT,this.updater=r||lT}var Ig=wg.prototype=new hT;Ig.constructor=wg;cT(Ig,Uo.prototype);Ig.isPureReactComponent=!0;var ty=Array.isArray,fT=Object.prototype.hasOwnProperty,Cg={current:null},pT={key:!0,ref:!0,__self:!0,__source:!0};function mT(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)fT.call(e,n)&&!pT.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:nc,type:t,key:i,ref:a,props:s,_owner:Cg.current}}function jN(t,e){return{$$typeof:nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dg(t){return typeof t=="object"&&t!==null&&t.$$typeof===nc}function UN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ry=/\/+/g;function Op(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UN(""+t.key):e.toString(36)}function Cd(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case nc:case DN:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Op(a,0):n,ty(s)?(r="",t!=null&&(r=t.replace(ry,"$&/")+"/"),Cd(s,e,r,"",function(c){return c})):s!=null&&(Dg(s)&&(s=jN(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ry,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",ty(t))for(var o=0;o<t.length;o++){i=t[o];var u=n+Op(i,o);a+=Cd(i,e,r,u,s)}else if(u=MN(t),typeof u=="function")for(t=u.call(t),o=0;!(i=t.next()).done;)i=i.value,u=n+Op(i,o++),a+=Cd(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Zc(t,e,r){if(t==null)return t;var n=[],s=0;return Cd(t,n,"","",function(i){return e.call(r,i,s++)}),n}function VN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sr={current:null},Dd={transition:null},qN={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:Dd,ReactCurrentOwner:Cg};function gT(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Zc,forEach:function(t,e,r){Zc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Zc(t,function(){e++}),e},toArray:function(t){return Zc(t,function(e){return e})||[]},only:function(t){if(!Dg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Uo;we.Fragment=SN;we.Profiler=RN;we.PureComponent=wg;we.StrictMode=NN;we.Suspense=LN;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qN;we.act=gT;we.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=cT({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Cg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)fT.call(e,u)&&!pT.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:nc,type:t.type,key:s,ref:i,props:n,_owner:a}};we.createContext=function(t){return t={$$typeof:PN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kN,_context:t},t.Consumer=t};we.createElement=mT;we.createFactory=function(t){var e=mT.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:ON,render:t}};we.isValidElement=Dg;we.lazy=function(t){return{$$typeof:BN,_payload:{_status:-1,_result:t},_init:VN}};we.memo=function(t,e){return{$$typeof:FN,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Dd.transition;Dd.transition={};try{t()}finally{Dd.transition=e}};we.unstable_act=gT;we.useCallback=function(t,e){return sr.current.useCallback(t,e)};we.useContext=function(t){return sr.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return sr.current.useDeferredValue(t)};we.useEffect=function(t,e){return sr.current.useEffect(t,e)};we.useId=function(){return sr.current.useId()};we.useImperativeHandle=function(t,e,r){return sr.current.useImperativeHandle(t,e,r)};we.useInsertionEffect=function(t,e){return sr.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return sr.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return sr.current.useMemo(t,e)};we.useReducer=function(t,e,r){return sr.current.useReducer(t,e,r)};we.useRef=function(t){return sr.current.useRef(t)};we.useState=function(t){return sr.current.useState(t)};we.useSyncExternalStore=function(t,e,r){return sr.current.useSyncExternalStore(t,e,r)};we.useTransition=function(){return sr.current.useTransition()};we.version="18.3.1";uT.exports=we;var M=uT.exports;const ET=sf(M),HN=aT({__proto__:null,default:ET},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N=M,zN=Symbol.for("react.element"),GN=Symbol.for("react.fragment"),WN=Object.prototype.hasOwnProperty,KN=$N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YN={key:!0,ref:!0,__self:!0,__source:!0};function yT(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)WN.call(e,n)&&!YN.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:zN,type:t,key:i,ref:a,props:s,_owner:KN.current}}af.Fragment=GN;af.jsx=yT;af.jsxs=yT;oT.exports=af;var d=oT.exports,_T={exports:{}},kr={},bT={exports:{}},vT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,j){var U=Z.length;Z.push(j);e:for(;0<U;){var W=U-1>>>1,ne=Z[W];if(0<s(ne,j))Z[W]=j,Z[U]=ne,U=W;else break e}}function r(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var j=Z[0],U=Z.pop();if(U!==j){Z[0]=U;e:for(var W=0,ne=Z.length,K=ne>>>1;W<K;){var se=2*(W+1)-1,Ee=Z[se],fe=se+1,de=Z[fe];if(0>s(Ee,U))fe<ne&&0>s(de,Ee)?(Z[W]=de,Z[fe]=U,W=fe):(Z[W]=Ee,Z[se]=U,W=se);else if(fe<ne&&0>s(de,U))Z[W]=de,Z[fe]=U,W=fe;else break e}}return j}function s(Z,j){var U=Z.sortIndex-j.sortIndex;return U!==0?U:Z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],c=[],h=1,p=null,m=3,E=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Z){for(var j=r(c);j!==null;){if(j.callback===null)n(c);else if(j.startTime<=Z)n(c),j.sortIndex=j.expirationTime,e(u,j);else break;j=r(c)}}function O(Z){if(_=!1,T(Z),!v)if(r(u)!==null)v=!0,_e(B);else{var j=r(c);j!==null&&Ie(O,j.startTime-Z)}}function B(Z,j){v=!1,_&&(_=!1,w(I),I=-1),E=!0;var U=m;try{for(T(j),p=r(u);p!==null&&(!(p.expirationTime>j)||Z&&!k());){var W=p.callback;if(typeof W=="function"){p.callback=null,m=p.priorityLevel;var ne=W(p.expirationTime<=j);j=t.unstable_now(),typeof ne=="function"?p.callback=ne:p===r(u)&&n(u),T(j)}else n(u);p=r(u)}if(p!==null)var K=!0;else{var se=r(c);se!==null&&Ie(O,se.startTime-j),K=!1}return K}finally{p=null,m=U,E=!1}}var V=!1,N=null,I=-1,D=5,A=-1;function k(){return!(t.unstable_now()-A<D)}function F(){if(N!==null){var Z=t.unstable_now();A=Z;var j=!0;try{j=N(!0,Z)}finally{j?R():(V=!1,N=null)}}else V=!1}var R;if(typeof b=="function")R=function(){b(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,oe=Q.port2;Q.port1.onmessage=F,R=function(){oe.postMessage(null)}}else R=function(){x(F,0)};function _e(Z){N=Z,V||(V=!0,R())}function Ie(Z,j){I=x(function(){Z(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){v||E||(v=!0,_e(B))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var U=m;m=j;try{return Z()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,j){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var U=m;m=Z;try{return j()}finally{m=U}},t.unstable_scheduleCallback=function(Z,j,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,Z){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=U+ne,Z={id:h++,callback:j,priorityLevel:Z,startTime:U,expirationTime:ne,sortIndex:-1},U>W?(Z.sortIndex=U,e(c,Z),r(u)===null&&Z===r(c)&&(_?(w(I),I=-1):_=!0,Ie(O,U-W))):(Z.sortIndex=ne,e(u,Z),v||E||(v=!0,_e(B))),Z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(Z){var j=m;return function(){var U=m;m=j;try{return Z.apply(this,arguments)}finally{m=U}}}})(vT);bT.exports=vT;var QN=bT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN=M,Nr=QN;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TT=new Set,yl={};function na(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(yl[t]=e,t=0;t<e.length;t++)TT.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,JN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ny={},sy={};function ZN(t){return Om.call(sy,t)?!0:Om.call(ny,t)?!1:JN.test(t)?sy[t]=!0:(ny[t]=!0,!1)}function e3(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t3(t,e,r,n){if(e===null||typeof e>"u"||e3(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ir(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sg=/[\-:]([a-z])/g;function Ng(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sg,Ng);Ot[e]=new ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sg,Ng);Ot[e]=new ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sg,Ng);Ot[e]=new ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rg(t,e,r,n){var s=Ot.hasOwnProperty(e)?Ot[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t3(e,r,s,n)&&(r=null),n||s===null?ZN(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var rs=XN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=Symbol.for("react.element"),Pa=Symbol.for("react.portal"),Oa=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Lm=Symbol.for("react.profiler"),AT=Symbol.for("react.provider"),xT=Symbol.for("react.context"),Pg=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Bm=Symbol.for("react.suspense_list"),Og=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),wT=Symbol.for("react.offscreen"),iy=Symbol.iterator;function _u(t){return t===null||typeof t!="object"?null:(t=iy&&t[iy]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,Lp;function ju(t){if(Lp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Lp=e&&e[1]||""}return`
`+Lp+t}var Fp=!1;function Bp(t,e){if(!t||Fp)return"";Fp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=o);break}}}finally{Fp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ju(t):""}function r3(t){switch(t.tag){case 5:return ju(t.type);case 16:return ju("Lazy");case 13:return ju("Suspense");case 19:return ju("SuspenseList");case 0:case 2:case 15:return t=Bp(t.type,!1),t;case 11:return t=Bp(t.type.render,!1),t;case 1:return t=Bp(t.type,!0),t;default:return""}}function Mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oa:return"Fragment";case Pa:return"Portal";case Lm:return"Profiler";case kg:return"StrictMode";case Fm:return"Suspense";case Bm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xT:return(t.displayName||"Context")+".Consumer";case AT:return(t._context.displayName||"Context")+".Provider";case Pg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Og:return e=t.displayName||null,e!==null?e:Mm(t.type)||"Memo";case gs:e=t._payload,t=t._init;try{return Mm(t(e))}catch{}}return null}function n3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mm(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s3(t){var e=IT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function td(t){t._valueTracker||(t._valueTracker=s3(t))}function CT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=IT(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jm(t,e){var r=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ay(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Qs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DT(t,e){e=e.checked,e!=null&&Rg(t,"checked",e,!1)}function Um(t,e){DT(t,e);var r=Qs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vm(t,e.type,r):e.hasOwnProperty("defaultValue")&&Vm(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function oy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Vm(t,e,r){(e!=="number"||eh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Uu=Array.isArray;function Xa(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Qs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(Uu(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Qs(r)}}function ST(t,e){var r=Qs(e.value),n=Qs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function ly(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rd,RT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rd=rd||document.createElement("div"),rd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _l(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i3=["Webkit","ms","Moz","O"];Object.keys(Xu).forEach(function(t){i3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xu[e]=Xu[t]})});function kT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Xu.hasOwnProperty(t)&&Xu[t]?(""+e).trim():e+"px"}function PT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=kT(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var a3=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $m(t,e){if(e){if(a3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function zm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gm=null;function Lg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wm=null,Ja=null,Za=null;function cy(t){if(t=ac(t)){if(typeof Wm!="function")throw Error(re(280));var e=t.stateNode;e&&(e=df(e),Wm(t.stateNode,t.type,e))}}function OT(t){Ja?Za?Za.push(t):Za=[t]:Ja=t}function LT(){if(Ja){var t=Ja,e=Za;if(Za=Ja=null,cy(t),e)for(t=0;t<e.length;t++)cy(e[t])}}function FT(t,e){return t(e)}function BT(){}var Mp=!1;function MT(t,e,r){if(Mp)return t(e,r);Mp=!0;try{return FT(t,e,r)}finally{Mp=!1,(Ja!==null||Za!==null)&&(BT(),LT())}}function bl(t,e){var r=t.stateNode;if(r===null)return null;var n=df(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var Km=!1;if(Wn)try{var bu={};Object.defineProperty(bu,"passive",{get:function(){Km=!0}}),window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{Km=!1}function o3(t,e,r,n,s,i,a,o,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var Ju=!1,th=null,rh=!1,Ym=null,u3={onError:function(t){Ju=!0,th=t}};function l3(t,e,r,n,s,i,a,o,u){Ju=!1,th=null,o3.apply(u3,arguments)}function c3(t,e,r,n,s,i,a,o,u){if(l3.apply(this,arguments),Ju){if(Ju){var c=th;Ju=!1,th=null}else throw Error(re(198));rh||(rh=!0,Ym=c)}}function sa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function jT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dy(t){if(sa(t)!==t)throw Error(re(188))}function d3(t){var e=t.alternate;if(!e){if(e=sa(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return dy(s),t;if(i===n)return dy(s),e;i=i.sibling}throw Error(re(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function UT(t){return t=d3(t),t!==null?VT(t):null}function VT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VT(t);if(e!==null)return e;t=t.sibling}return null}var qT=Nr.unstable_scheduleCallback,hy=Nr.unstable_cancelCallback,h3=Nr.unstable_shouldYield,f3=Nr.unstable_requestPaint,ct=Nr.unstable_now,p3=Nr.unstable_getCurrentPriorityLevel,Fg=Nr.unstable_ImmediatePriority,HT=Nr.unstable_UserBlockingPriority,nh=Nr.unstable_NormalPriority,m3=Nr.unstable_LowPriority,$T=Nr.unstable_IdlePriority,of=null,yn=null;function g3(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(of,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:_3,E3=Math.log,y3=Math.LN2;function _3(t){return t>>>=0,t===0?32:31-(E3(t)/y3|0)|0}var nd=64,sd=4194304;function Vu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Vu(o):(i&=a,i!==0&&(n=Vu(i)))}else a=r&~s,a!==0?n=Vu(a):i!==0&&(n=Vu(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-en(e),s=1<<r,n|=t[r],e&=~s;return n}function b3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v3(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-en(i),o=1<<a,u=s[a];u===-1?(!(o&r)||o&n)&&(s[a]=b3(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}}function Qm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zT(){var t=nd;return nd<<=1,!(nd&4194240)&&(nd=64),t}function jp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=r}function T3(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-en(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Bg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-en(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var je=0;function GT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WT,Mg,KT,YT,QT,Xm=!1,id=[],Ls=null,Fs=null,Bs=null,vl=new Map,Tl=new Map,_s=[],A3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fy(t,e){switch(t){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":vl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(e.pointerId)}}function vu(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ac(e),e!==null&&Mg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function x3(t,e,r,n,s){switch(e){case"focusin":return Ls=vu(Ls,t,e,r,n,s),!0;case"dragenter":return Fs=vu(Fs,t,e,r,n,s),!0;case"mouseover":return Bs=vu(Bs,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return vl.set(i,vu(vl.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Tl.set(i,vu(Tl.get(i)||null,t,e,r,n,s)),!0}return!1}function XT(t){var e=Ni(t.target);if(e!==null){var r=sa(e);if(r!==null){if(e=r.tag,e===13){if(e=jT(r),e!==null){t.blockedOn=e,QT(t.priority,function(){KT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Jm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Gm=n,r.target.dispatchEvent(n),Gm=null}else return e=ac(r),e!==null&&Mg(e),t.blockedOn=r,!1;e.shift()}return!0}function py(t,e,r){Sd(t)&&r.delete(e)}function w3(){Xm=!1,Ls!==null&&Sd(Ls)&&(Ls=null),Fs!==null&&Sd(Fs)&&(Fs=null),Bs!==null&&Sd(Bs)&&(Bs=null),vl.forEach(py),Tl.forEach(py)}function Tu(t,e){t.blockedOn===e&&(t.blockedOn=null,Xm||(Xm=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,w3)))}function Al(t){function e(s){return Tu(s,t)}if(0<id.length){Tu(id[0],t);for(var r=1;r<id.length;r++){var n=id[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ls!==null&&Tu(Ls,t),Fs!==null&&Tu(Fs,t),Bs!==null&&Tu(Bs,t),vl.forEach(e),Tl.forEach(e),r=0;r<_s.length;r++)n=_s[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<_s.length&&(r=_s[0],r.blockedOn===null);)XT(r),r.blockedOn===null&&_s.shift()}var eo=rs.ReactCurrentBatchConfig,ih=!0;function I3(t,e,r,n){var s=je,i=eo.transition;eo.transition=null;try{je=1,jg(t,e,r,n)}finally{je=s,eo.transition=i}}function C3(t,e,r,n){var s=je,i=eo.transition;eo.transition=null;try{je=4,jg(t,e,r,n)}finally{je=s,eo.transition=i}}function jg(t,e,r,n){if(ih){var s=Jm(t,e,r,n);if(s===null)Yp(t,e,n,ah,r),fy(t,n);else if(x3(s,t,e,r,n))n.stopPropagation();else if(fy(t,n),e&4&&-1<A3.indexOf(t)){for(;s!==null;){var i=ac(s);if(i!==null&&WT(i),i=Jm(t,e,r,n),i===null&&Yp(t,e,n,ah,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Yp(t,e,n,null,r)}}var ah=null;function Jm(t,e,r,n){if(ah=null,t=Lg(n),t=Ni(t),t!==null)if(e=sa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=jT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ah=t,null}function JT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p3()){case Fg:return 1;case HT:return 4;case nh:case m3:return 16;case $T:return 536870912;default:return 16}default:return 16}}var Is=null,Ug=null,Nd=null;function ZT(){if(Nd)return Nd;var t,e=Ug,r=e.length,n,s="value"in Is?Is.value:Is.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Nd=s.slice(t,1<n?1-n:void 0)}function Rd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ad(){return!0}function my(){return!1}function Pr(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ad:my,this.isPropagationStopped=my,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),e}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=Pr(Vo),ic=st({},Vo,{view:0,detail:0}),D3=Pr(ic),Up,Vp,Au,uf=st({},ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Au&&(Au&&t.type==="mousemove"?(Up=t.screenX-Au.screenX,Vp=t.screenY-Au.screenY):Vp=Up=0,Au=t),Up)},movementY:function(t){return"movementY"in t?t.movementY:Vp}}),gy=Pr(uf),S3=st({},uf,{dataTransfer:0}),N3=Pr(S3),R3=st({},ic,{relatedTarget:0}),qp=Pr(R3),k3=st({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),P3=Pr(k3),O3=st({},Vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),L3=Pr(O3),F3=st({},Vo,{data:0}),Ey=Pr(F3),B3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function U3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=j3[t])?!!e[t]:!1}function qg(){return U3}var V3=st({},ic,{key:function(t){if(t.key){var e=B3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qg,charCode:function(t){return t.type==="keypress"?Rd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),q3=Pr(V3),H3=st({},uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yy=Pr(H3),$3=st({},ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qg}),z3=Pr($3),G3=st({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),W3=Pr(G3),K3=st({},uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y3=Pr(K3),Q3=[9,13,27,32],Hg=Wn&&"CompositionEvent"in window,Zu=null;Wn&&"documentMode"in document&&(Zu=document.documentMode);var X3=Wn&&"TextEvent"in window&&!Zu,eA=Wn&&(!Hg||Zu&&8<Zu&&11>=Zu),_y=" ",by=!1;function tA(t,e){switch(t){case"keyup":return Q3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function J3(t,e){switch(t){case"compositionend":return rA(e);case"keypress":return e.which!==32?null:(by=!0,_y);case"textInput":return t=e.data,t===_y&&by?null:t;default:return null}}function Z3(t,e){if(La)return t==="compositionend"||!Hg&&tA(t,e)?(t=ZT(),Nd=Ug=Is=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eA&&e.locale!=="ko"?null:e.data;default:return null}}var e4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e4[t.type]:e==="textarea"}function nA(t,e,r,n){OT(n),e=oh(e,"onChange"),0<e.length&&(r=new Vg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var el=null,xl=null;function t4(t){pA(t,0)}function lf(t){var e=Ma(t);if(CT(e))return t}function r4(t,e){if(t==="change")return e}var sA=!1;if(Wn){var Hp;if(Wn){var $p="oninput"in document;if(!$p){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),$p=typeof Ty.oninput=="function"}Hp=$p}else Hp=!1;sA=Hp&&(!document.documentMode||9<document.documentMode)}function Ay(){el&&(el.detachEvent("onpropertychange",iA),xl=el=null)}function iA(t){if(t.propertyName==="value"&&lf(xl)){var e=[];nA(e,xl,t,Lg(t)),MT(t4,e)}}function n4(t,e,r){t==="focusin"?(Ay(),el=e,xl=r,el.attachEvent("onpropertychange",iA)):t==="focusout"&&Ay()}function s4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lf(xl)}function i4(t,e){if(t==="click")return lf(e)}function a4(t,e){if(t==="input"||t==="change")return lf(e)}function o4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:o4;function wl(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Om.call(e,s)||!nn(t[s],e[s]))return!1}return!0}function xy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wy(t,e){var r=xy(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xy(r)}}function aA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oA(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=eh(t.document)}return e}function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function u4(t){var e=oA(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&aA(r.ownerDocument.documentElement,r)){if(n!==null&&$g(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=wy(r,i);var a=wy(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l4=Wn&&"documentMode"in document&&11>=document.documentMode,Fa=null,Zm=null,tl=null,e0=!1;function Iy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;e0||Fa==null||Fa!==eh(n)||(n=Fa,"selectionStart"in n&&$g(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),tl&&wl(tl,n)||(tl=n,n=oh(Zm,"onSelect"),0<n.length&&(e=new Vg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fa)))}function od(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ba={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},zp={},uA={};Wn&&(uA=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function cf(t){if(zp[t])return zp[t];if(!Ba[t])return t;var e=Ba[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in uA)return zp[t]=e[r];return t}var lA=cf("animationend"),cA=cf("animationiteration"),dA=cf("animationstart"),hA=cf("transitionend"),fA=new Map,Cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){fA.set(t,e),na(e,[t])}for(var Gp=0;Gp<Cy.length;Gp++){var Wp=Cy[Gp],c4=Wp.toLowerCase(),d4=Wp[0].toUpperCase()+Wp.slice(1);ni(c4,"on"+d4)}ni(lA,"onAnimationEnd");ni(cA,"onAnimationIteration");ni(dA,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(hA,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h4=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function Dy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,c3(n,e,void 0,t),t.currentTarget=null}function pA(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==i&&s.isPropagationStopped())break e;Dy(s,o,c),i=u}else for(a=0;a<n.length;a++){if(o=n[a],u=o.instance,c=o.currentTarget,o=o.listener,u!==i&&s.isPropagationStopped())break e;Dy(s,o,c),i=u}}}if(rh)throw t=Ym,rh=!1,Ym=null,t}function Ge(t,e){var r=e[i0];r===void 0&&(r=e[i0]=new Set);var n=t+"__bubble";r.has(n)||(mA(e,t,2,!1),r.add(n))}function Kp(t,e,r){var n=0;e&&(n|=4),mA(r,t,n,e)}var ud="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[ud]){t[ud]=!0,TT.forEach(function(r){r!=="selectionchange"&&(h4.has(r)||Kp(r,!1,t),Kp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ud]||(e[ud]=!0,Kp("selectionchange",!1,e))}}function mA(t,e,r,n){switch(JT(e)){case 1:var s=I3;break;case 4:s=C3;break;default:s=jg}r=s.bind(null,e,r,t),s=void 0,!Km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Yp(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ni(o),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}o=o.parentNode}}n=n.return}MT(function(){var c=i,h=Lg(r),p=[];e:{var m=fA.get(t);if(m!==void 0){var E=Vg,v=t;switch(t){case"keypress":if(Rd(r)===0)break e;case"keydown":case"keyup":E=q3;break;case"focusin":v="focus",E=qp;break;case"focusout":v="blur",E=qp;break;case"beforeblur":case"afterblur":E=qp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=N3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=z3;break;case lA:case cA:case dA:E=P3;break;case hA:E=W3;break;case"scroll":E=D3;break;case"wheel":E=Y3;break;case"copy":case"cut":case"paste":E=L3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=yy}var _=(e&4)!==0,x=!_&&t==="scroll",w=_?m!==null?m+"Capture":null:m;_=[];for(var b=c,T;b!==null;){T=b;var O=T.stateNode;if(T.tag===5&&O!==null&&(T=O,w!==null&&(O=bl(b,w),O!=null&&_.push(Cl(b,O,T)))),x)break;b=b.return}0<_.length&&(m=new E(m,v,null,r,h),p.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",m&&r!==Gm&&(v=r.relatedTarget||r.fromElement)&&(Ni(v)||v[Kn]))break e;if((E||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,E?(v=r.relatedTarget||r.toElement,E=c,v=v?Ni(v):null,v!==null&&(x=sa(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(E=null,v=c),E!==v)){if(_=gy,O="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(_=yy,O="onPointerLeave",w="onPointerEnter",b="pointer"),x=E==null?m:Ma(E),T=v==null?m:Ma(v),m=new _(O,b+"leave",E,r,h),m.target=x,m.relatedTarget=T,O=null,Ni(h)===c&&(_=new _(w,b+"enter",v,r,h),_.target=T,_.relatedTarget=x,O=_),x=O,E&&v)t:{for(_=E,w=v,b=0,T=_;T;T=va(T))b++;for(T=0,O=w;O;O=va(O))T++;for(;0<b-T;)_=va(_),b--;for(;0<T-b;)w=va(w),T--;for(;b--;){if(_===w||w!==null&&_===w.alternate)break t;_=va(_),w=va(w)}_=null}else _=null;E!==null&&Sy(p,m,E,_,!1),v!==null&&x!==null&&Sy(p,x,v,_,!0)}}e:{if(m=c?Ma(c):window,E=m.nodeName&&m.nodeName.toLowerCase(),E==="select"||E==="input"&&m.type==="file")var B=r4;else if(vy(m))if(sA)B=a4;else{B=s4;var V=n4}else(E=m.nodeName)&&E.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(B=i4);if(B&&(B=B(t,c))){nA(p,B,r,h);break e}V&&V(t,m,c),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Vm(m,"number",m.value)}switch(V=c?Ma(c):window,t){case"focusin":(vy(V)||V.contentEditable==="true")&&(Fa=V,Zm=c,tl=null);break;case"focusout":tl=Zm=Fa=null;break;case"mousedown":e0=!0;break;case"contextmenu":case"mouseup":case"dragend":e0=!1,Iy(p,r,h);break;case"selectionchange":if(l4)break;case"keydown":case"keyup":Iy(p,r,h)}var N;if(Hg)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else La?tA(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(eA&&r.locale!=="ko"&&(La||I!=="onCompositionStart"?I==="onCompositionEnd"&&La&&(N=ZT()):(Is=h,Ug="value"in Is?Is.value:Is.textContent,La=!0)),V=oh(c,I),0<V.length&&(I=new Ey(I,t,null,r,h),p.push({event:I,listeners:V}),N?I.data=N:(N=rA(r),N!==null&&(I.data=N)))),(N=X3?J3(t,r):Z3(t,r))&&(c=oh(c,"onBeforeInput"),0<c.length&&(h=new Ey("onBeforeInput","beforeinput",null,r,h),p.push({event:h,listeners:c}),h.data=N))}pA(p,e)})}function Cl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function oh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=bl(t,r),i!=null&&n.unshift(Cl(t,i,s)),i=bl(t,e),i!=null&&n.push(Cl(t,i,s))),t=t.return}return n}function va(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sy(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,u=o.alternate,c=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&c!==null&&(o=c,s?(u=bl(r,i),u!=null&&a.unshift(Cl(r,u,o))):s||(u=bl(r,i),u!=null&&a.push(Cl(r,u,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var f4=/\r\n?/g,p4=/\u0000|\uFFFD/g;function Ny(t){return(typeof t=="string"?t:""+t).replace(f4,`
`).replace(p4,"")}function ld(t,e,r){if(e=Ny(e),Ny(t)!==e&&r)throw Error(re(425))}function uh(){}var t0=null,r0=null;function n0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var s0=typeof setTimeout=="function"?setTimeout:void 0,m4=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,g4=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(t){return Ry.resolve(null).then(t).catch(E4)}:s0;function E4(t){setTimeout(function(){throw t})}function Qp(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Al(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Al(e)}function Ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ky(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var qo=Math.random().toString(36).slice(2),fn="__reactFiber$"+qo,Dl="__reactProps$"+qo,Kn="__reactContainer$"+qo,i0="__reactEvents$"+qo,y4="__reactListeners$"+qo,_4="__reactHandles$"+qo;function Ni(t){var e=t[fn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Kn]||r[fn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ky(t);t!==null;){if(r=t[fn])return r;t=ky(t)}return e}t=r,r=t.parentNode}return null}function ac(t){return t=t[fn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function df(t){return t[Dl]||null}var a0=[],ja=-1;function si(t){return{current:t}}function We(t){0>ja||(t.current=a0[ja],a0[ja]=null,ja--)}function $e(t,e){ja++,a0[ja]=t.current,t.current=e}var Xs={},Gt=si(Xs),Er=si(!1),Ui=Xs;function fo(t,e){var r=t.type.contextTypes;if(!r)return Xs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yr(t){return t=t.childContextTypes,t!=null}function lh(){We(Er),We(Gt)}function Py(t,e,r){if(Gt.current!==Xs)throw Error(re(168));$e(Gt,e),$e(Er,r)}function gA(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(re(108,n3(t)||"Unknown",s));return st({},r,n)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xs,Ui=Gt.current,$e(Gt,t),$e(Er,Er.current),!0}function Oy(t,e,r){var n=t.stateNode;if(!n)throw Error(re(169));r?(t=gA(t,e,Ui),n.__reactInternalMemoizedMergedChildContext=t,We(Er),We(Gt),$e(Gt,t)):We(Er),$e(Er,r)}var Fn=null,hf=!1,Xp=!1;function EA(t){Fn===null?Fn=[t]:Fn.push(t)}function b4(t){hf=!0,EA(t)}function ii(){if(!Xp&&Fn!==null){Xp=!0;var t=0,e=je;try{var r=Fn;for(je=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Fn=null,hf=!1}catch(s){throw Fn!==null&&(Fn=Fn.slice(t+1)),qT(Fg,ii),s}finally{je=e,Xp=!1}}return null}var Ua=[],Va=0,dh=null,hh=0,Or=[],Lr=0,Vi=null,Mn=1,jn="";function bi(t,e){Ua[Va++]=hh,Ua[Va++]=dh,dh=t,hh=e}function yA(t,e,r){Or[Lr++]=Mn,Or[Lr++]=jn,Or[Lr++]=Vi,Vi=t;var n=Mn;t=jn;var s=32-en(n)-1;n&=~(1<<s),r+=1;var i=32-en(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Mn=1<<32-en(e)+s|r<<s|n,jn=i+t}else Mn=1<<i|r<<s|n,jn=t}function zg(t){t.return!==null&&(bi(t,1),yA(t,1,0))}function Gg(t){for(;t===dh;)dh=Ua[--Va],Ua[Va]=null,hh=Ua[--Va],Ua[Va]=null;for(;t===Vi;)Vi=Or[--Lr],Or[Lr]=null,jn=Or[--Lr],Or[Lr]=null,Mn=Or[--Lr],Or[Lr]=null}var Sr=null,Cr=null,Xe=!1,Jr=null;function _A(t,e){var r=Fr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ly(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sr=t,Cr=Ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Vi!==null?{id:Mn,overflow:jn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Sr=t,Cr=null,!0):!1;default:return!1}}function o0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function u0(t){if(Xe){var e=Cr;if(e){var r=e;if(!Ly(t,e)){if(o0(t))throw Error(re(418));e=Ms(r.nextSibling);var n=Sr;e&&Ly(t,e)?_A(n,r):(t.flags=t.flags&-4097|2,Xe=!1,Sr=t)}}else{if(o0(t))throw Error(re(418));t.flags=t.flags&-4097|2,Xe=!1,Sr=t}}}function Fy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sr=t}function cd(t){if(t!==Sr)return!1;if(!Xe)return Fy(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!n0(t.type,t.memoizedProps)),e&&(e=Cr)){if(o0(t))throw bA(),Error(re(418));for(;e;)_A(t,e),e=Ms(e.nextSibling)}if(Fy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Cr=Ms(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=Sr?Ms(t.stateNode.nextSibling):null;return!0}function bA(){for(var t=Cr;t;)t=Ms(t.nextSibling)}function po(){Cr=Sr=null,Xe=!1}function Wg(t){Jr===null?Jr=[t]:Jr.push(t)}var v4=rs.ReactCurrentBatchConfig;function xu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function dd(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function By(t){var e=t._init;return e(t._payload)}function vA(t){function e(w,b){if(t){var T=w.deletions;T===null?(w.deletions=[b],w.flags|=16):T.push(b)}}function r(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function n(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=qs(w,b),w.index=0,w.sibling=null,w}function i(w,b,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<b?(w.flags|=2,b):T):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,b,T,O){return b===null||b.tag!==6?(b=sm(T,w.mode,O),b.return=w,b):(b=s(b,T),b.return=w,b)}function u(w,b,T,O){var B=T.type;return B===Oa?h(w,b,T.props.children,O,T.key):b!==null&&(b.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===gs&&By(B)===b.type)?(O=s(b,T.props),O.ref=xu(w,b,T),O.return=w,O):(O=Md(T.type,T.key,T.props,null,w.mode,O),O.ref=xu(w,b,T),O.return=w,O)}function c(w,b,T,O){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=im(T,w.mode,O),b.return=w,b):(b=s(b,T.children||[]),b.return=w,b)}function h(w,b,T,O,B){return b===null||b.tag!==7?(b=Oi(T,w.mode,O,B),b.return=w,b):(b=s(b,T),b.return=w,b)}function p(w,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=sm(""+b,w.mode,T),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ed:return T=Md(b.type,b.key,b.props,null,w.mode,T),T.ref=xu(w,null,b),T.return=w,T;case Pa:return b=im(b,w.mode,T),b.return=w,b;case gs:var O=b._init;return p(w,O(b._payload),T)}if(Uu(b)||_u(b))return b=Oi(b,w.mode,T,null),b.return=w,b;dd(w,b)}return null}function m(w,b,T,O){var B=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return B!==null?null:o(w,b,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ed:return T.key===B?u(w,b,T,O):null;case Pa:return T.key===B?c(w,b,T,O):null;case gs:return B=T._init,m(w,b,B(T._payload),O)}if(Uu(T)||_u(T))return B!==null?null:h(w,b,T,O,null);dd(w,T)}return null}function E(w,b,T,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(T)||null,o(b,w,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ed:return w=w.get(O.key===null?T:O.key)||null,u(b,w,O,B);case Pa:return w=w.get(O.key===null?T:O.key)||null,c(b,w,O,B);case gs:var V=O._init;return E(w,b,T,V(O._payload),B)}if(Uu(O)||_u(O))return w=w.get(T)||null,h(b,w,O,B,null);dd(b,O)}return null}function v(w,b,T,O){for(var B=null,V=null,N=b,I=b=0,D=null;N!==null&&I<T.length;I++){N.index>I?(D=N,N=null):D=N.sibling;var A=m(w,N,T[I],O);if(A===null){N===null&&(N=D);break}t&&N&&A.alternate===null&&e(w,N),b=i(A,b,I),V===null?B=A:V.sibling=A,V=A,N=D}if(I===T.length)return r(w,N),Xe&&bi(w,I),B;if(N===null){for(;I<T.length;I++)N=p(w,T[I],O),N!==null&&(b=i(N,b,I),V===null?B=N:V.sibling=N,V=N);return Xe&&bi(w,I),B}for(N=n(w,N);I<T.length;I++)D=E(N,w,I,T[I],O),D!==null&&(t&&D.alternate!==null&&N.delete(D.key===null?I:D.key),b=i(D,b,I),V===null?B=D:V.sibling=D,V=D);return t&&N.forEach(function(k){return e(w,k)}),Xe&&bi(w,I),B}function _(w,b,T,O){var B=_u(T);if(typeof B!="function")throw Error(re(150));if(T=B.call(T),T==null)throw Error(re(151));for(var V=B=null,N=b,I=b=0,D=null,A=T.next();N!==null&&!A.done;I++,A=T.next()){N.index>I?(D=N,N=null):D=N.sibling;var k=m(w,N,A.value,O);if(k===null){N===null&&(N=D);break}t&&N&&k.alternate===null&&e(w,N),b=i(k,b,I),V===null?B=k:V.sibling=k,V=k,N=D}if(A.done)return r(w,N),Xe&&bi(w,I),B;if(N===null){for(;!A.done;I++,A=T.next())A=p(w,A.value,O),A!==null&&(b=i(A,b,I),V===null?B=A:V.sibling=A,V=A);return Xe&&bi(w,I),B}for(N=n(w,N);!A.done;I++,A=T.next())A=E(N,w,I,A.value,O),A!==null&&(t&&A.alternate!==null&&N.delete(A.key===null?I:A.key),b=i(A,b,I),V===null?B=A:V.sibling=A,V=A);return t&&N.forEach(function(F){return e(w,F)}),Xe&&bi(w,I),B}function x(w,b,T,O){if(typeof T=="object"&&T!==null&&T.type===Oa&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ed:e:{for(var B=T.key,V=b;V!==null;){if(V.key===B){if(B=T.type,B===Oa){if(V.tag===7){r(w,V.sibling),b=s(V,T.props.children),b.return=w,w=b;break e}}else if(V.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===gs&&By(B)===V.type){r(w,V.sibling),b=s(V,T.props),b.ref=xu(w,V,T),b.return=w,w=b;break e}r(w,V);break}else e(w,V);V=V.sibling}T.type===Oa?(b=Oi(T.props.children,w.mode,O,T.key),b.return=w,w=b):(O=Md(T.type,T.key,T.props,null,w.mode,O),O.ref=xu(w,b,T),O.return=w,w=O)}return a(w);case Pa:e:{for(V=T.key;b!==null;){if(b.key===V)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){r(w,b.sibling),b=s(b,T.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else e(w,b);b=b.sibling}b=im(T,w.mode,O),b.return=w,w=b}return a(w);case gs:return V=T._init,x(w,b,V(T._payload),O)}if(Uu(T))return v(w,b,T,O);if(_u(T))return _(w,b,T,O);dd(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(r(w,b.sibling),b=s(b,T),b.return=w,w=b):(r(w,b),b=sm(T,w.mode,O),b.return=w,w=b),a(w)):r(w,b)}return x}var mo=vA(!0),TA=vA(!1),fh=si(null),ph=null,qa=null,Kg=null;function Yg(){Kg=qa=ph=null}function Qg(t){var e=fh.current;We(fh),t._currentValue=e}function l0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function to(t,e){ph=t,Kg=qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mr=!0),t.firstContext=null)}function Ur(t){var e=t._currentValue;if(Kg!==t)if(t={context:t,memoizedValue:e,next:null},qa===null){if(ph===null)throw Error(re(308));qa=t,ph.dependencies={lanes:0,firstContext:t}}else qa=qa.next=t;return e}var Ri=null;function Xg(t){Ri===null?Ri=[t]:Ri.push(t)}function AA(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Xg(e)):(r.next=s.next,s.next=r),e.interleaved=r,Yn(t,n)}function Yn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Es=!1;function Jg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function js(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ke&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Yn(t,r)}return s=n.interleaved,s===null?(e.next=e,Xg(n)):(e.next=s.next,s.next=e),n.interleaved=e,Yn(t,r)}function kd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bg(t,r)}}function My(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function mh(t,e,r,n){var s=t.updateQueue;Es=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,c=u.next;u.next=null,a===null?i=c:a.next=c,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,h=c=u=null,o=i;do{var m=o.lane,E=o.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:E,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,_=o;switch(m=e,E=r,_.tag){case 1:if(v=_.payload,typeof v=="function"){p=v.call(E,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,m=typeof v=="function"?v.call(E,p,m):v,m==null)break e;p=st({},p,m);break e;case 2:Es=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else E={eventTime:E,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=E,u=p):h=h.next=E,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hi|=a,t.lanes=a,t.memoizedState=p}}function jy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(re(191,s));s.call(n)}}}var oc={},_n=si(oc),Sl=si(oc),Nl=si(oc);function ki(t){if(t===oc)throw Error(re(174));return t}function Zg(t,e){switch($e(Nl,e),$e(Sl,t),$e(_n,oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hm(e,t)}We(_n),$e(_n,e)}function go(){We(_n),We(Sl),We(Nl)}function wA(t){ki(Nl.current);var e=ki(_n.current),r=Hm(e,t.type);e!==r&&($e(Sl,t),$e(_n,r))}function e2(t){Sl.current===t&&(We(_n),We(Sl))}var Ze=si(0);function gh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jp=[];function t2(){for(var t=0;t<Jp.length;t++)Jp[t]._workInProgressVersionPrimary=null;Jp.length=0}var Pd=rs.ReactCurrentDispatcher,Zp=rs.ReactCurrentBatchConfig,qi=0,rt=null,yt=null,wt=null,Eh=!1,rl=!1,Rl=0,T4=0;function jt(){throw Error(re(321))}function r2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!nn(t[r],e[r]))return!1;return!0}function n2(t,e,r,n,s,i){if(qi=i,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pd.current=t===null||t.memoizedState===null?I4:C4,t=r(n,s),rl){i=0;do{if(rl=!1,Rl=0,25<=i)throw Error(re(301));i+=1,wt=yt=null,e.updateQueue=null,Pd.current=D4,t=r(n,s)}while(rl)}if(Pd.current=yh,e=yt!==null&&yt.next!==null,qi=0,wt=yt=rt=null,Eh=!1,e)throw Error(re(300));return t}function s2(){var t=Rl!==0;return Rl=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?rt.memoizedState=wt=t:wt=wt.next=t,wt}function Vr(){if(yt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=wt===null?rt.memoizedState:wt.next;if(e!==null)wt=e,yt=t;else{if(t===null)throw Error(re(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},wt===null?rt.memoizedState=wt=t:wt=wt.next=t}return wt}function kl(t,e){return typeof e=="function"?e(t):e}function em(t){var e=Vr(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=yt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,u=null,c=i;do{var h=c.lane;if((qi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=p,a=n):u=u.next=p,rt.lanes|=h,Hi|=h}c=c.next}while(c!==null&&c!==i);u===null?a=n:u.next=o,nn(n,e.memoizedState)||(mr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,rt.lanes|=i,Hi|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function tm(t){var e=Vr(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);nn(i,e.memoizedState)||(mr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function IA(){}function CA(t,e){var r=rt,n=Vr(),s=e(),i=!nn(n.memoizedState,s);if(i&&(n.memoizedState=s,mr=!0),n=n.queue,i2(NA.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,Pl(9,SA.bind(null,r,n,s,e),void 0,null),Dt===null)throw Error(re(349));qi&30||DA(r,e,s)}return s}function DA(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function SA(t,e,r,n){e.value=r,e.getSnapshot=n,RA(e)&&kA(t)}function NA(t,e,r){return r(function(){RA(e)&&kA(t)})}function RA(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!nn(t,r)}catch{return!0}}function kA(t){var e=Yn(t,1);e!==null&&tn(e,t,1,-1)}function Uy(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:t},e.queue=t,t=t.dispatch=w4.bind(null,rt,t),[e.memoizedState,t]}function Pl(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function PA(){return Vr().memoizedState}function Od(t,e,r,n){var s=dn();rt.flags|=t,s.memoizedState=Pl(1|e,r,void 0,n===void 0?null:n)}function ff(t,e,r,n){var s=Vr();n=n===void 0?null:n;var i=void 0;if(yt!==null){var a=yt.memoizedState;if(i=a.destroy,n!==null&&r2(n,a.deps)){s.memoizedState=Pl(e,r,i,n);return}}rt.flags|=t,s.memoizedState=Pl(1|e,r,i,n)}function Vy(t,e){return Od(8390656,8,t,e)}function i2(t,e){return ff(2048,8,t,e)}function OA(t,e){return ff(4,2,t,e)}function LA(t,e){return ff(4,4,t,e)}function FA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BA(t,e,r){return r=r!=null?r.concat([t]):null,ff(4,4,FA.bind(null,e,t),r)}function a2(){}function MA(t,e){var r=Vr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&r2(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function jA(t,e){var r=Vr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&r2(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function UA(t,e,r){return qi&21?(nn(r,e)||(r=zT(),rt.lanes|=r,Hi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mr=!0),t.memoizedState=r)}function A4(t,e){var r=je;je=r!==0&&4>r?r:4,t(!0);var n=Zp.transition;Zp.transition={};try{t(!1),e()}finally{je=r,Zp.transition=n}}function VA(){return Vr().memoizedState}function x4(t,e,r){var n=Vs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qA(t))HA(e,r);else if(r=AA(t,e,r,n),r!==null){var s=er();tn(r,t,n,s),$A(r,e,n)}}function w4(t,e,r){var n=Vs(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qA(t))HA(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,nn(o,a)){var u=e.interleaved;u===null?(s.next=s,Xg(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=AA(t,e,s,n),r!==null&&(s=er(),tn(r,t,n,s),$A(r,e,n))}}function qA(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function HA(t,e){rl=Eh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function $A(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bg(t,r)}}var yh={readContext:Ur,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},I4={readContext:Ur,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Ur,useEffect:Vy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Od(4194308,4,FA.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Od(4194308,4,t,e)},useInsertionEffect:function(t,e){return Od(4,2,t,e)},useMemo:function(t,e){var r=dn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=dn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=x4.bind(null,rt,t),[n.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:Uy,useDebugValue:a2,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=Uy(!1),e=t[0];return t=A4.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=rt,s=dn();if(Xe){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),Dt===null)throw Error(re(349));qi&30||DA(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Vy(NA.bind(null,n,i,t),[t]),n.flags|=2048,Pl(9,SA.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=dn(),e=Dt.identifierPrefix;if(Xe){var r=jn,n=Mn;r=(n&~(1<<32-en(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Rl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=T4++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C4={readContext:Ur,useCallback:MA,useContext:Ur,useEffect:i2,useImperativeHandle:BA,useInsertionEffect:OA,useLayoutEffect:LA,useMemo:jA,useReducer:em,useRef:PA,useState:function(){return em(kl)},useDebugValue:a2,useDeferredValue:function(t){var e=Vr();return UA(e,yt.memoizedState,t)},useTransition:function(){var t=em(kl)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:IA,useSyncExternalStore:CA,useId:VA,unstable_isNewReconciler:!1},D4={readContext:Ur,useCallback:MA,useContext:Ur,useEffect:i2,useImperativeHandle:BA,useInsertionEffect:OA,useLayoutEffect:LA,useMemo:jA,useReducer:tm,useRef:PA,useState:function(){return tm(kl)},useDebugValue:a2,useDeferredValue:function(t){var e=Vr();return yt===null?e.memoizedState=t:UA(e,yt.memoizedState,t)},useTransition:function(){var t=tm(kl)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:IA,useSyncExternalStore:CA,useId:VA,unstable_isNewReconciler:!1};function Yr(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function c0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:st({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var pf={isMounted:function(t){return(t=t._reactInternals)?sa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=er(),s=Vs(t),i=zn(n,s);i.payload=e,r!=null&&(i.callback=r),e=js(t,i,s),e!==null&&(tn(e,t,s,n),kd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=er(),s=Vs(t),i=zn(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=js(t,i,s),e!==null&&(tn(e,t,s,n),kd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=er(),n=Vs(t),s=zn(r,n);s.tag=2,e!=null&&(s.callback=e),e=js(t,s,n),e!==null&&(tn(e,t,n,r),kd(e,t,n))}};function qy(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!wl(r,n)||!wl(s,i):!0}function zA(t,e,r){var n=!1,s=Xs,i=e.contextType;return typeof i=="object"&&i!==null?i=Ur(i):(s=yr(e)?Ui:Gt.current,n=e.contextTypes,i=(n=n!=null)?fo(t,s):Xs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&pf.enqueueReplaceState(e,e.state,null)}function d0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Jg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ur(i):(i=yr(e)?Ui:Gt.current,s.context=fo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(c0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pf.enqueueReplaceState(s,s.state,null),mh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var r="",n=e;do r+=r3(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function h0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var S4=typeof WeakMap=="function"?WeakMap:Map;function GA(t,e,r){r=zn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){bh||(bh=!0,T0=n),h0(t,e)},r}function WA(t,e,r){r=zn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){h0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){h0(t,e),typeof n!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function $y(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new S4;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=H4.bind(null,t,e,r),e.then(t,t))}function zy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gy(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=zn(-1,1),e.tag=2,js(r,e,1))),r.lanes|=1),t)}var N4=rs.ReactCurrentOwner,mr=!1;function Qt(t,e,r,n){e.child=t===null?TA(e,null,r,n):mo(e,t.child,r,n)}function Wy(t,e,r,n,s){r=r.render;var i=e.ref;return to(e,s),n=n2(t,e,r,n,i,s),r=s2(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(Xe&&r&&zg(e),e.flags|=1,Qt(t,e,n,s),e.child)}function Ky(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!p2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,KA(t,e,i,n,s)):(t=Md(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:wl,r(a,n)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=qs(i,n),t.ref=e.ref,t.return=e,e.child=t}function KA(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(wl(i,n)&&t.ref===e.ref)if(mr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(mr=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return f0(t,e,r,n,s)}function YA(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e($a,Tr),Tr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e($a,Tr),Tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$e($a,Tr),Tr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,$e($a,Tr),Tr|=n;return Qt(t,e,s,r),e.child}function QA(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function f0(t,e,r,n,s){var i=yr(r)?Ui:Gt.current;return i=fo(e,i),to(e,s),r=n2(t,e,r,n,i,s),n=s2(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(Xe&&n&&zg(e),e.flags|=1,Qt(t,e,r,s),e.child)}function Yy(t,e,r,n,s){if(yr(r)){var i=!0;ch(e)}else i=!1;if(to(e,s),e.stateNode===null)Ld(t,e),zA(e,r,n),d0(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ur(c):(c=yr(r)?Ui:Gt.current,c=fo(e,c));var h=r.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||u!==c)&&Hy(e,a,n,c),Es=!1;var m=e.memoizedState;a.state=m,mh(e,n,a,s),u=e.memoizedState,o!==n||m!==u||Er.current||Es?(typeof h=="function"&&(c0(e,r,h,n),u=e.memoizedState),(o=Es||qy(e,r,o,n,m,u,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,xA(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Yr(e.type,o),a.props=c,p=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Ur(u):(u=yr(r)?Ui:Gt.current,u=fo(e,u));var E=r.getDerivedStateFromProps;(h=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==u)&&Hy(e,a,n,u),Es=!1,m=e.memoizedState,a.state=m,mh(e,n,a,s);var v=e.memoizedState;o!==p||m!==v||Er.current||Es?(typeof E=="function"&&(c0(e,r,E,n),v=e.memoizedState),(c=Es||qy(e,r,c,n,m,v,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),a.props=n,a.state=v,a.context=u,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return p0(t,e,r,n,i,s)}function p0(t,e,r,n,s,i){QA(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&Oy(e,r,!1),Qn(t,e,i);n=e.stateNode,N4.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=mo(e,t.child,null,i),e.child=mo(e,null,o,i)):Qt(t,e,o,i),e.memoizedState=n.state,s&&Oy(e,r,!0),e.child}function XA(t){var e=t.stateNode;e.pendingContext?Py(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Py(t,e.context,!1),Zg(t,e.containerInfo)}function Qy(t,e,r,n,s){return po(),Wg(s),e.flags|=256,Qt(t,e,r,n),e.child}var m0={dehydrated:null,treeContext:null,retryLane:0};function g0(t){return{baseLanes:t,cachePool:null,transitions:null}}function JA(t,e,r){var n=e.pendingProps,s=Ze.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ze,s&1),t===null)return u0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ef(a,n,0,null),t=Oi(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=g0(r),e.memoizedState=m0,t):o2(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return R4(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=qs(s,u),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=qs(o,i):(i=Oi(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?g0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=m0,n}return i=t.child,t=i.sibling,n=qs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function o2(t,e){return e=Ef({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hd(t,e,r,n){return n!==null&&Wg(n),mo(e,t.child,null,r),t=o2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R4(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=rm(Error(re(422))),hd(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ef({mode:"visible",children:n.children},s,0,null),i=Oi(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&mo(e,t.child,null,a),e.child.memoizedState=g0(a),e.memoizedState=m0,i);if(!(e.mode&1))return hd(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(re(419)),n=rm(i,n,void 0),hd(t,e,a,n)}if(o=(a&t.childLanes)!==0,mr||o){if(n=Dt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yn(t,s),tn(n,t,s,-1))}return f2(),n=rm(Error(re(421))),hd(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cr=Ms(s.nextSibling),Sr=e,Xe=!0,Jr=null,t!==null&&(Or[Lr++]=Mn,Or[Lr++]=jn,Or[Lr++]=Vi,Mn=t.id,jn=t.overflow,Vi=e),e=o2(e,n.children),e.flags|=4096,e)}function Xy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),l0(t.return,e,r)}function nm(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ZA(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Qt(t,e,n.children,r),n=Ze.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xy(t,r,e);else if(t.tag===19)Xy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($e(Ze,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&gh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),nm(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}nm(e,!0,r,null,i);break;case"together":nm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ld(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Hi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=qs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=qs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function k4(t,e,r){switch(e.tag){case 3:XA(e),po();break;case 5:wA(e);break;case 1:yr(e.type)&&ch(e);break;case 4:Zg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;$e(fh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($e(Ze,Ze.current&1),e.flags|=128,null):r&e.child.childLanes?JA(t,e,r):($e(Ze,Ze.current&1),t=Qn(t,e,r),t!==null?t.sibling:null);$e(Ze,Ze.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ZA(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ze,Ze.current),n)break;return null;case 22:case 23:return e.lanes=0,YA(t,e,r)}return Qn(t,e,r)}var ex,E0,tx,rx;ex=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};E0=function(){};tx=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ki(_n.current);var i=null;switch(r){case"input":s=jm(t,s),n=jm(t,n),i=[];break;case"select":s=st({},s,{value:void 0}),n=st({},n,{value:void 0}),i=[];break;case"textarea":s=qm(t,s),n=qm(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=uh)}$m(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ge("scroll",t),i||o===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};rx=function(t,e,r,n){r!==n&&(e.flags|=4)};function wu(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function P4(t,e,r){var n=e.pendingProps;switch(Gg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return yr(e.type)&&lh(),Ut(e),null;case 3:return n=e.stateNode,go(),We(Er),We(Gt),t2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(w0(Jr),Jr=null))),E0(t,e),Ut(e),null;case 5:e2(e);var s=ki(Nl.current);if(r=e.type,t!==null&&e.stateNode!=null)tx(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(re(166));return Ut(e),null}if(t=ki(_n.current),cd(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[fn]=e,n[Dl]=i,t=(e.mode&1)!==0,r){case"dialog":Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":case"embed":Ge("load",n);break;case"video":case"audio":for(s=0;s<qu.length;s++)Ge(qu[s],n);break;case"source":Ge("error",n);break;case"img":case"image":case"link":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"input":ay(n,i),Ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",n);break;case"textarea":uy(n,i),Ge("invalid",n)}$m(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&ld(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ld(n.textContent,o,t),s=["children",""+o]):yl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ge("scroll",n)}switch(r){case"input":td(n),oy(n,i,!0);break;case"textarea":td(n),ly(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=uh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[fn]=e,t[Dl]=n,ex(t,e,!1,!1),e.stateNode=t;e:{switch(a=zm(r,n),r){case"dialog":Ge("cancel",t),Ge("close",t),s=n;break;case"iframe":case"object":case"embed":Ge("load",t),s=n;break;case"video":case"audio":for(s=0;s<qu.length;s++)Ge(qu[s],t);s=n;break;case"source":Ge("error",t),s=n;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=n;break;case"details":Ge("toggle",t),s=n;break;case"input":ay(t,n),s=jm(t,n),Ge("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=st({},n,{value:void 0}),Ge("invalid",t);break;case"textarea":uy(t,n),s=qm(t,n),Ge("invalid",t);break;default:s=n}$m(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?PT(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&RT(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&_l(t,u):typeof u=="number"&&_l(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ge("scroll",t):u!=null&&Rg(t,i,u,a))}switch(r){case"input":td(t),oy(t,n,!1);break;case"textarea":td(t),ly(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Qs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Xa(t,!!n.multiple,i,!1):n.defaultValue!=null&&Xa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=uh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)rx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(re(166));if(r=ki(Nl.current),ki(_n.current),cd(e)){if(n=e.stateNode,r=e.memoizedProps,n[fn]=e,(i=n.nodeValue!==r)&&(t=Sr,t!==null))switch(t.tag){case 3:ld(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ld(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[fn]=e,e.stateNode=n}return Ut(e),null;case 13:if(We(Ze),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&Cr!==null&&e.mode&1&&!(e.flags&128))bA(),po(),e.flags|=98560,i=!1;else if(i=cd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[fn]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),i=!1}else Jr!==null&&(w0(Jr),Jr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?_t===0&&(_t=3):f2())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return go(),E0(t,e),t===null&&Il(e.stateNode.containerInfo),Ut(e),null;case 10:return Qg(e.type._context),Ut(e),null;case 17:return yr(e.type)&&lh(),Ut(e),null;case 19:if(We(Ze),i=e.memoizedState,i===null)return Ut(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)wu(i,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=gh(t),a!==null){for(e.flags|=128,wu(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $e(Ze,Ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>yo&&(e.flags|=128,n=!0,wu(i,!1),e.lanes=4194304)}else{if(!n)if(t=gh(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),wu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Xe)return Ut(e),null}else 2*ct()-i.renderingStartTime>yo&&r!==1073741824&&(e.flags|=128,n=!0,wu(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,r=Ze.current,$e(Ze,n?r&1|2:r&1),e):(Ut(e),null);case 22:case 23:return h2(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Tr&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function O4(t,e){switch(Gg(e),e.tag){case 1:return yr(e.type)&&lh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return go(),We(Er),We(Gt),t2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return e2(e),null;case 13:if(We(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ze),null;case 4:return go(),null;case 10:return Qg(e.type._context),null;case 22:case 23:return h2(),null;case 24:return null;default:return null}}var fd=!1,Ht=!1,L4=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ha(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ot(t,e,n)}else r.current=null}function y0(t,e,r){try{r()}catch(n){ot(t,e,n)}}var Jy=!1;function F4(t,e){if(t0=ih,t=oA(),$g(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,u=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var E;p!==r||s!==0&&p.nodeType!==3||(o=a+s),p!==i||n!==0&&p.nodeType!==3||(u=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(E=p.firstChild)!==null;)m=p,p=E;for(;;){if(p===t)break t;if(m===r&&++c===s&&(o=a),m===i&&++h===n&&(u=a),(E=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=E}r=o===-1||u===-1?null:{start:o,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(r0={focusedElem:t,selectionRange:r},ih=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,x=v.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?_:Yr(e.type,_),x);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(O){ot(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return v=Jy,Jy=!1,v}function nl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&y0(e,r,i)}s=s.next}while(s!==n)}}function mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function _0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function nx(t){var e=t.alternate;e!==null&&(t.alternate=null,nx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Dl],delete e[i0],delete e[y4],delete e[_4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sx(t){return t.tag===5||t.tag===3||t.tag===4}function Zy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function b0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=uh));else if(n!==4&&(t=t.child,t!==null))for(b0(t,e,r),t=t.sibling;t!==null;)b0(t,e,r),t=t.sibling}function v0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(v0(t,e,r),t=t.sibling;t!==null;)v0(t,e,r),t=t.sibling}var Rt=null,Qr=!1;function ds(t,e,r){for(r=r.child;r!==null;)ix(t,e,r),r=r.sibling}function ix(t,e,r){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(of,r)}catch{}switch(r.tag){case 5:Ht||Ha(r,e);case 6:var n=Rt,s=Qr;Rt=null,ds(t,e,r),Rt=n,Qr=s,Rt!==null&&(Qr?(t=Rt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Rt.removeChild(r.stateNode));break;case 18:Rt!==null&&(Qr?(t=Rt,r=r.stateNode,t.nodeType===8?Qp(t.parentNode,r):t.nodeType===1&&Qp(t,r),Al(t)):Qp(Rt,r.stateNode));break;case 4:n=Rt,s=Qr,Rt=r.stateNode.containerInfo,Qr=!0,ds(t,e,r),Rt=n,Qr=s;break;case 0:case 11:case 14:case 15:if(!Ht&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&y0(r,e,a),s=s.next}while(s!==n)}ds(t,e,r);break;case 1:if(!Ht&&(Ha(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ot(r,e,o)}ds(t,e,r);break;case 21:ds(t,e,r);break;case 22:r.mode&1?(Ht=(n=Ht)||r.memoizedState!==null,ds(t,e,r),Ht=n):ds(t,e,r);break;default:ds(t,e,r)}}function e_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new L4),e.forEach(function(n){var s=z4.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Gr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Rt=o.stateNode,Qr=!1;break e;case 3:Rt=o.stateNode.containerInfo,Qr=!0;break e;case 4:Rt=o.stateNode.containerInfo,Qr=!0;break e}o=o.return}if(Rt===null)throw Error(re(160));ix(i,a,s),Rt=null,Qr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){ot(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ax(e,t),e=e.sibling}function ax(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gr(e,t),ln(t),n&4){try{nl(3,t,t.return),mf(3,t)}catch(_){ot(t,t.return,_)}try{nl(5,t,t.return)}catch(_){ot(t,t.return,_)}}break;case 1:Gr(e,t),ln(t),n&512&&r!==null&&Ha(r,r.return);break;case 5:if(Gr(e,t),ln(t),n&512&&r!==null&&Ha(r,r.return),t.flags&32){var s=t.stateNode;try{_l(s,"")}catch(_){ot(t,t.return,_)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&DT(s,i),zm(o,a);var c=zm(o,i);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];h==="style"?PT(s,p):h==="dangerouslySetInnerHTML"?RT(s,p):h==="children"?_l(s,p):Rg(s,h,p,c)}switch(o){case"input":Um(s,i);break;case"textarea":ST(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Xa(s,!!i.multiple,E,!1):m!==!!i.multiple&&(i.defaultValue!=null?Xa(s,!!i.multiple,i.defaultValue,!0):Xa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dl]=i}catch(_){ot(t,t.return,_)}}break;case 6:if(Gr(e,t),ln(t),n&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){ot(t,t.return,_)}}break;case 3:if(Gr(e,t),ln(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(_){ot(t,t.return,_)}break;case 4:Gr(e,t),ln(t);break;case 13:Gr(e,t),ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(c2=ct())),n&4&&e_(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Ht=(c=Ht)||h,Gr(e,t),Ht=c):Gr(e,t),ln(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ce=t,h=t.child;h!==null;){for(p=ce=h;ce!==null;){switch(m=ce,E=m.child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Ha(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){ot(n,r,_)}}break;case 5:Ha(m,m.return);break;case 22:if(m.memoizedState!==null){r_(p);continue}}E!==null?(E.return=m,ce=E):r_(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=kT("display",a))}catch(_){ot(t,t.return,_)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(_){ot(t,t.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gr(e,t),ln(t),n&4&&e_(t);break;case 21:break;default:Gr(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sx(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_l(s,""),n.flags&=-33);var i=Zy(t);v0(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Zy(t);b0(t,o,a);break;default:throw Error(re(161))}}catch(u){ot(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B4(t,e,r){ce=t,ox(t)}function ox(t,e,r){for(var n=(t.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||fd;if(!a){var o=s.alternate,u=o!==null&&o.memoizedState!==null||Ht;o=fd;var c=Ht;if(fd=a,(Ht=u)&&!c)for(ce=s;ce!==null;)a=ce,u=a.child,a.tag===22&&a.memoizedState!==null?n_(s):u!==null?(u.return=a,ce=u):n_(s);for(;i!==null;)ce=i,ox(i),i=i.sibling;ce=s,fd=o,Ht=c}t_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):t_(t)}}function t_(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||mf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ht)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Yr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jy(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}jy(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Al(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Ht||e.flags&512&&_0(e)}catch(m){ot(e,e.return,m)}}if(e===t){ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,ce=r;break}ce=e.return}}function r_(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ce=r;break}ce=e.return}}function n_(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mf(4,e)}catch(u){ot(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){ot(e,s,u)}}var i=e.return;try{_0(e)}catch(u){ot(e,i,u)}break;case 5:var a=e.return;try{_0(e)}catch(u){ot(e,a,u)}}}catch(u){ot(e,e.return,u)}if(e===t){ce=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ce=o;break}ce=e.return}}var M4=Math.ceil,_h=rs.ReactCurrentDispatcher,u2=rs.ReactCurrentOwner,Mr=rs.ReactCurrentBatchConfig,ke=0,Dt=null,mt=null,Pt=0,Tr=0,$a=si(0),_t=0,Ol=null,Hi=0,gf=0,l2=0,sl=null,hr=null,c2=0,yo=1/0,Pn=null,bh=!1,T0=null,Us=null,pd=!1,Cs=null,vh=0,il=0,A0=null,Fd=-1,Bd=0;function er(){return ke&6?ct():Fd!==-1?Fd:Fd=ct()}function Vs(t){return t.mode&1?ke&2&&Pt!==0?Pt&-Pt:v4.transition!==null?(Bd===0&&(Bd=zT()),Bd):(t=je,t!==0||(t=window.event,t=t===void 0?16:JT(t.type)),t):1}function tn(t,e,r,n){if(50<il)throw il=0,A0=null,Error(re(185));sc(t,r,n),(!(ke&2)||t!==Dt)&&(t===Dt&&(!(ke&2)&&(gf|=r),_t===4&&bs(t,Pt)),_r(t,n),r===1&&ke===0&&!(e.mode&1)&&(yo=ct()+500,hf&&ii()))}function _r(t,e){var r=t.callbackNode;v3(t,e);var n=sh(t,t===Dt?Pt:0);if(n===0)r!==null&&hy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&hy(r),e===1)t.tag===0?b4(s_.bind(null,t)):EA(s_.bind(null,t)),g4(function(){!(ke&6)&&ii()}),r=null;else{switch(GT(n)){case 1:r=Fg;break;case 4:r=HT;break;case 16:r=nh;break;case 536870912:r=$T;break;default:r=nh}r=mx(r,ux.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ux(t,e){if(Fd=-1,Bd=0,ke&6)throw Error(re(327));var r=t.callbackNode;if(ro()&&t.callbackNode!==r)return null;var n=sh(t,t===Dt?Pt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Th(t,n);else{e=n;var s=ke;ke|=2;var i=cx();(Dt!==t||Pt!==e)&&(Pn=null,yo=ct()+500,Pi(t,e));do try{V4();break}catch(o){lx(t,o)}while(!0);Yg(),_h.current=i,ke=s,mt!==null?e=0:(Dt=null,Pt=0,e=_t)}if(e!==0){if(e===2&&(s=Qm(t),s!==0&&(n=s,e=x0(t,s))),e===1)throw r=Ol,Pi(t,0),bs(t,n),_r(t,ct()),r;if(e===6)bs(t,n);else{if(s=t.current.alternate,!(n&30)&&!j4(s)&&(e=Th(t,n),e===2&&(i=Qm(t),i!==0&&(n=i,e=x0(t,i))),e===1))throw r=Ol,Pi(t,0),bs(t,n),_r(t,ct()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(re(345));case 2:vi(t,hr,Pn);break;case 3:if(bs(t,n),(n&130023424)===n&&(e=c2+500-ct(),10<e)){if(sh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=s0(vi.bind(null,t,hr,Pn),e);break}vi(t,hr,Pn);break;case 4:if(bs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-en(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*M4(n/1960))-n,10<n){t.timeoutHandle=s0(vi.bind(null,t,hr,Pn),n);break}vi(t,hr,Pn);break;case 5:vi(t,hr,Pn);break;default:throw Error(re(329))}}}return _r(t,ct()),t.callbackNode===r?ux.bind(null,t):null}function x0(t,e){var r=sl;return t.current.memoizedState.isDehydrated&&(Pi(t,e).flags|=256),t=Th(t,e),t!==2&&(e=hr,hr=r,e!==null&&w0(e)),t}function w0(t){hr===null?hr=t:hr.push.apply(hr,t)}function j4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!nn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~l2,e&=~gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-en(e),n=1<<r;t[r]=-1,e&=~n}}function s_(t){if(ke&6)throw Error(re(327));ro();var e=sh(t,0);if(!(e&1))return _r(t,ct()),null;var r=Th(t,e);if(t.tag!==0&&r===2){var n=Qm(t);n!==0&&(e=n,r=x0(t,n))}if(r===1)throw r=Ol,Pi(t,0),bs(t,e),_r(t,ct()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vi(t,hr,Pn),_r(t,ct()),null}function d2(t,e){var r=ke;ke|=1;try{return t(e)}finally{ke=r,ke===0&&(yo=ct()+500,hf&&ii())}}function $i(t){Cs!==null&&Cs.tag===0&&!(ke&6)&&ro();var e=ke;ke|=1;var r=Mr.transition,n=je;try{if(Mr.transition=null,je=1,t)return t()}finally{je=n,Mr.transition=r,ke=e,!(ke&6)&&ii()}}function h2(){Tr=$a.current,We($a)}function Pi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,m4(r)),mt!==null)for(r=mt.return;r!==null;){var n=r;switch(Gg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&lh();break;case 3:go(),We(Er),We(Gt),t2();break;case 5:e2(n);break;case 4:go();break;case 13:We(Ze);break;case 19:We(Ze);break;case 10:Qg(n.type._context);break;case 22:case 23:h2()}r=r.return}if(Dt=t,mt=t=qs(t.current,null),Pt=Tr=e,_t=0,Ol=null,l2=gf=Hi=0,hr=sl=null,Ri!==null){for(e=0;e<Ri.length;e++)if(r=Ri[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Ri=null}return t}function lx(t,e){do{var r=mt;try{if(Yg(),Pd.current=yh,Eh){for(var n=rt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Eh=!1}if(qi=0,wt=yt=rt=null,rl=!1,Rl=0,u2.current=null,r===null||r.return===null){_t=1,Ol=e,mt=null;break}e:{var i=t,a=r.return,o=r,u=e;if(e=Pt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=o,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=zy(a);if(E!==null){E.flags&=-257,Gy(E,a,o,i,e),E.mode&1&&$y(i,c,e),e=E,u=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(u),e.updateQueue=_}else v.add(u);break e}else{if(!(e&1)){$y(i,c,e),f2();break e}u=Error(re(426))}}else if(Xe&&o.mode&1){var x=zy(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Gy(x,a,o,i,e),Wg(Eo(u,o));break e}}i=u=Eo(u,o),_t!==4&&(_t=2),sl===null?sl=[i]:sl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=GA(i,u,e);My(i,w);break e;case 1:o=u;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Us===null||!Us.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=WA(i,o,e);My(i,O);break e}}i=i.return}while(i!==null)}hx(r)}catch(B){e=B,mt===r&&r!==null&&(mt=r=r.return);continue}break}while(!0)}function cx(){var t=_h.current;return _h.current=yh,t===null?yh:t}function f2(){(_t===0||_t===3||_t===2)&&(_t=4),Dt===null||!(Hi&268435455)&&!(gf&268435455)||bs(Dt,Pt)}function Th(t,e){var r=ke;ke|=2;var n=cx();(Dt!==t||Pt!==e)&&(Pn=null,Pi(t,e));do try{U4();break}catch(s){lx(t,s)}while(!0);if(Yg(),ke=r,_h.current=n,mt!==null)throw Error(re(261));return Dt=null,Pt=0,_t}function U4(){for(;mt!==null;)dx(mt)}function V4(){for(;mt!==null&&!h3();)dx(mt)}function dx(t){var e=px(t.alternate,t,Tr);t.memoizedProps=t.pendingProps,e===null?hx(t):mt=e,u2.current=null}function hx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=O4(r,e),r!==null){r.flags&=32767,mt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,mt=null;return}}else if(r=P4(r,e,Tr),r!==null){mt=r;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);_t===0&&(_t=5)}function vi(t,e,r){var n=je,s=Mr.transition;try{Mr.transition=null,je=1,q4(t,e,r,n)}finally{Mr.transition=s,je=n}return null}function q4(t,e,r,n){do ro();while(Cs!==null);if(ke&6)throw Error(re(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(T3(t,i),t===Dt&&(mt=Dt=null,Pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pd||(pd=!0,mx(nh,function(){return ro(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Mr.transition,Mr.transition=null;var a=je;je=1;var o=ke;ke|=4,u2.current=null,F4(t,r),ax(r,t),u4(r0),ih=!!t0,r0=t0=null,t.current=r,B4(r),f3(),ke=o,je=a,Mr.transition=i}else t.current=r;if(pd&&(pd=!1,Cs=t,vh=s),i=t.pendingLanes,i===0&&(Us=null),g3(r.stateNode),_r(t,ct()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(bh)throw bh=!1,t=T0,T0=null,t;return vh&1&&t.tag!==0&&ro(),i=t.pendingLanes,i&1?t===A0?il++:(il=0,A0=t):il=0,ii(),null}function ro(){if(Cs!==null){var t=GT(vh),e=Mr.transition,r=je;try{if(Mr.transition=null,je=16>t?16:t,Cs===null)var n=!1;else{if(t=Cs,Cs=null,vh=0,ke&6)throw Error(re(331));var s=ke;for(ke|=4,ce=t.current;ce!==null;){var i=ce,a=i.child;if(ce.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(ce=c;ce!==null;){var h=ce;switch(h.tag){case 0:case 11:case 15:nl(8,h,i)}var p=h.child;if(p!==null)p.return=h,ce=p;else for(;ce!==null;){h=ce;var m=h.sibling,E=h.return;if(nx(h),h===c){ce=null;break}if(m!==null){m.return=E,ce=m;break}ce=E}}}var v=i.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}ce=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ce=a;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,ce=w;break e}ce=i.return}}var b=t.current;for(ce=b;ce!==null;){a=ce;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,ce=T;else e:for(a=b;ce!==null;){if(o=ce,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:mf(9,o)}}catch(B){ot(o,o.return,B)}if(o===a){ce=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,ce=O;break e}ce=o.return}}if(ke=s,ii(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(of,t)}catch{}n=!0}return n}finally{je=r,Mr.transition=e}}return!1}function i_(t,e,r){e=Eo(r,e),e=GA(t,e,1),t=js(t,e,1),e=er(),t!==null&&(sc(t,1,e),_r(t,e))}function ot(t,e,r){if(t.tag===3)i_(t,t,r);else for(;e!==null;){if(e.tag===3){i_(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Us===null||!Us.has(n))){t=Eo(r,t),t=WA(e,t,1),e=js(e,t,1),t=er(),e!==null&&(sc(e,1,t),_r(e,t));break}}e=e.return}}function H4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&r,Dt===t&&(Pt&r)===r&&(_t===4||_t===3&&(Pt&130023424)===Pt&&500>ct()-c2?Pi(t,0):l2|=r),_r(t,e)}function fx(t,e){e===0&&(t.mode&1?(e=sd,sd<<=1,!(sd&130023424)&&(sd=4194304)):e=1);var r=er();t=Yn(t,e),t!==null&&(sc(t,e,r),_r(t,r))}function $4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),fx(t,r)}function z4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(e),fx(t,r)}var px;px=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Er.current)mr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return mr=!1,k4(t,e,r);mr=!!(t.flags&131072)}else mr=!1,Xe&&e.flags&1048576&&yA(e,hh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ld(t,e),t=e.pendingProps;var s=fo(e,Gt.current);to(e,r),s=n2(null,e,n,t,s,r);var i=s2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yr(n)?(i=!0,ch(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jg(e),s.updater=pf,e.stateNode=s,s._reactInternals=e,d0(e,n,t,r),e=p0(null,e,n,!0,i,r)):(e.tag=0,Xe&&i&&zg(e),Qt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ld(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=W4(n),t=Yr(n,t),s){case 0:e=f0(null,e,n,t,r);break e;case 1:e=Yy(null,e,n,t,r);break e;case 11:e=Wy(null,e,n,t,r);break e;case 14:e=Ky(null,e,n,Yr(n.type,t),r);break e}throw Error(re(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),f0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),Yy(t,e,n,s,r);case 3:e:{if(XA(e),t===null)throw Error(re(387));n=e.pendingProps,i=e.memoizedState,s=i.element,xA(t,e),mh(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Eo(Error(re(423)),e),e=Qy(t,e,n,r,s);break e}else if(n!==s){s=Eo(Error(re(424)),e),e=Qy(t,e,n,r,s);break e}else for(Cr=Ms(e.stateNode.containerInfo.firstChild),Sr=e,Xe=!0,Jr=null,r=TA(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(po(),n===s){e=Qn(t,e,r);break e}Qt(t,e,n,r)}e=e.child}return e;case 5:return wA(e),t===null&&u0(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,n0(n,s)?a=null:i!==null&&n0(n,i)&&(e.flags|=32),QA(t,e),Qt(t,e,a,r),e.child;case 6:return t===null&&u0(e),null;case 13:return JA(t,e,r);case 4:return Zg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=mo(e,null,n,r):Qt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),Wy(t,e,n,s,r);case 7:return Qt(t,e,e.pendingProps,r),e.child;case 8:return Qt(t,e,e.pendingProps.children,r),e.child;case 12:return Qt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,$e(fh,n._currentValue),n._currentValue=a,i!==null)if(nn(i.value,a)){if(i.children===s.children&&!Er.current){e=Qn(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=zn(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),l0(i.return,r,e),o.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(re(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),l0(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Qt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,to(e,r),s=Ur(s),n=n(s),e.flags|=1,Qt(t,e,n,r),e.child;case 14:return n=e.type,s=Yr(n,e.pendingProps),s=Yr(n.type,s),Ky(t,e,n,s,r);case 15:return KA(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Yr(n,s),Ld(t,e),e.tag=1,yr(n)?(t=!0,ch(e)):t=!1,to(e,r),zA(e,n,s),d0(e,n,s,r),p0(null,e,n,!0,t,r);case 19:return ZA(t,e,r);case 22:return YA(t,e,r)}throw Error(re(156,e.tag))};function mx(t,e){return qT(t,e)}function G4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,e,r,n){return new G4(t,e,r,n)}function p2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W4(t){if(typeof t=="function")return p2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pg)return 11;if(t===Og)return 14}return 2}function qs(t,e){var r=t.alternate;return r===null?(r=Fr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Md(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")p2(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Oa:return Oi(r.children,s,i,e);case kg:a=8,s|=8;break;case Lm:return t=Fr(12,r,e,s|2),t.elementType=Lm,t.lanes=i,t;case Fm:return t=Fr(13,r,e,s),t.elementType=Fm,t.lanes=i,t;case Bm:return t=Fr(19,r,e,s),t.elementType=Bm,t.lanes=i,t;case wT:return Ef(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AT:a=10;break e;case xT:a=9;break e;case Pg:a=11;break e;case Og:a=14;break e;case gs:a=16,n=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Fr(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Oi(t,e,r,n){return t=Fr(7,t,n,e),t.lanes=r,t}function Ef(t,e,r,n){return t=Fr(22,t,n,e),t.elementType=wT,t.lanes=r,t.stateNode={isHidden:!1},t}function sm(t,e,r){return t=Fr(6,t,null,e),t.lanes=r,t}function im(t,e,r){return e=Fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K4(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function m2(t,e,r,n,s,i,a,o,u){return t=new K4(t,e,r,o,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jg(i),t}function Y4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function gx(t){if(!t)return Xs;t=t._reactInternals;e:{if(sa(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(yr(r))return gA(t,r,e)}return e}function Ex(t,e,r,n,s,i,a,o,u){return t=m2(r,n,!0,t,s,i,a,o,u),t.context=gx(null),r=t.current,n=er(),s=Vs(r),i=zn(n,s),i.callback=e??null,js(r,i,s),t.current.lanes=s,sc(t,s,n),_r(t,n),t}function yf(t,e,r,n){var s=e.current,i=er(),a=Vs(s);return r=gx(r),e.context===null?e.context=r:e.pendingContext=r,e=zn(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=js(s,e,a),t!==null&&(tn(t,s,a,i),kd(t,s,a)),a}function Ah(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function g2(t,e){a_(t,e),(t=t.alternate)&&a_(t,e)}function Q4(){return null}var yx=typeof reportError=="function"?reportError:function(t){console.error(t)};function E2(t){this._internalRoot=t}_f.prototype.render=E2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));yf(t,e,null,null)};_f.prototype.unmount=E2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$i(function(){yf(null,t,null,null)}),e[Kn]=null}};function _f(t){this._internalRoot=t}_f.prototype.unstable_scheduleHydration=function(t){if(t){var e=YT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<_s.length&&e!==0&&e<_s[r].priority;r++);_s.splice(r,0,t),r===0&&XT(t)}};function y2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o_(){}function X4(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Ah(a);i.call(c)}}var a=Ex(e,n,t,0,null,!1,!1,"",o_);return t._reactRootContainer=a,t[Kn]=a.current,Il(t.nodeType===8?t.parentNode:t),$i(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=Ah(u);o.call(c)}}var u=m2(t,0,!1,null,null,!1,!1,"",o_);return t._reactRootContainer=u,t[Kn]=u.current,Il(t.nodeType===8?t.parentNode:t),$i(function(){yf(e,u,r,n)}),u}function vf(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var u=Ah(a);o.call(u)}}yf(e,a,t,s)}else a=X4(r,e,t,s,n);return Ah(a)}WT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Vu(e.pendingLanes);r!==0&&(Bg(e,r|1),_r(e,ct()),!(ke&6)&&(yo=ct()+500,ii()))}break;case 13:$i(function(){var n=Yn(t,1);if(n!==null){var s=er();tn(n,t,1,s)}}),g2(t,1)}};Mg=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var r=er();tn(e,t,134217728,r)}g2(t,134217728)}};KT=function(t){if(t.tag===13){var e=Vs(t),r=Yn(t,e);if(r!==null){var n=er();tn(r,t,e,n)}g2(t,e)}};YT=function(){return je};QT=function(t,e){var r=je;try{return je=t,e()}finally{je=r}};Wm=function(t,e,r){switch(e){case"input":if(Um(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=df(n);if(!s)throw Error(re(90));CT(n),Um(n,s)}}}break;case"textarea":ST(t,r);break;case"select":e=r.value,e!=null&&Xa(t,!!r.multiple,e,!1)}};FT=d2;BT=$i;var J4={usingClientEntryPoint:!1,Events:[ac,Ma,df,OT,LT,d2]},Iu={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z4={bundleType:Iu.bundleType,version:Iu.version,rendererPackageName:Iu.rendererPackageName,rendererConfig:Iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UT(t),t===null?null:t.stateNode},findFiberByHostInstance:Iu.findFiberByHostInstance||Q4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{of=md.inject(Z4),yn=md}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J4;kr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y2(e))throw Error(re(200));return Y4(t,e,null,r)};kr.createRoot=function(t,e){if(!y2(t))throw Error(re(299));var r=!1,n="",s=yx;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=m2(t,1,!1,null,null,r,!1,n,s),t[Kn]=e.current,Il(t.nodeType===8?t.parentNode:t),new E2(e)};kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=UT(e),t=t===null?null:t.stateNode,t};kr.flushSync=function(t){return $i(t)};kr.hydrate=function(t,e,r){if(!bf(e))throw Error(re(200));return vf(null,t,e,!0,r)};kr.hydrateRoot=function(t,e,r){if(!y2(t))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=yx;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Ex(e,null,t,1,r??null,s,!1,i,a),t[Kn]=e.current,Il(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new _f(e)};kr.render=function(t,e,r){if(!bf(e))throw Error(re(200));return vf(null,t,e,!1,r)};kr.unmountComponentAtNode=function(t){if(!bf(t))throw Error(re(40));return t._reactRootContainer?($i(function(){vf(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};kr.unstable_batchedUpdates=d2;kr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!bf(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return vf(t,e,r,!1,n)};kr.version="18.3.1-next-f1338f8080-20240426";function _x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_x)}catch(t){console.error(t)}}_x(),_T.exports=kr;var eR=_T.exports,bx,u_=eR;bx=u_.createRoot,u_.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ll.apply(this,arguments)}var Ds;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ds||(Ds={}));const l_="popstate";function tR(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return I0("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:xh(s)}return nR(e,r,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rR(){return Math.random().toString(36).substr(2,8)}function c_(t,e){return{usr:t.state,key:t.key,idx:e}}function I0(t,e,r,n){return r===void 0&&(r=null),Ll({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ho(e):e,{state:r,key:e&&e.key||n||rR()})}function xh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ho(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nR(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=Ds.Pop,u=null,c=h();c==null&&(c=0,a.replaceState(Ll({},a.state,{idx:c}),""));function h(){return(a.state||{idx:null}).idx}function p(){o=Ds.Pop;let x=h(),w=x==null?null:x-c;c=x,u&&u({action:o,location:_.location,delta:w})}function m(x,w){o=Ds.Push;let b=I0(_.location,x,w);c=h()+1;let T=c_(b,c),O=_.createHref(b);try{a.pushState(T,"",O)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(O)}i&&u&&u({action:o,location:_.location,delta:1})}function E(x,w){o=Ds.Replace;let b=I0(_.location,x,w);c=h();let T=c_(b,c),O=_.createHref(b);a.replaceState(T,"",O),i&&u&&u({action:o,location:_.location,delta:0})}function v(x){let w=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof x=="string"?x:xh(x);return b=b.replace(/ $/,"%20"),ht(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let _={get action(){return o},get location(){return t(s,a)},listen(x){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(l_,p),u=x,()=>{s.removeEventListener(l_,p),u=null}},createHref(x){return e(s,x)},createURL:v,encodeLocation(x){let w=v(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:E,go(x){return a.go(x)}};return _}var d_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(d_||(d_={}));function sR(t,e,r){return r===void 0&&(r="/"),iR(t,e,r,!1)}function iR(t,e,r,n){let s=typeof e=="string"?Ho(e):e,i=_2(s.pathname||"/",r);if(i==null)return null;let a=Tx(t);aR(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let c=ER(i);o=mR(a[u],c,n)}return o}function Tx(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let u={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(ht(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let c=Hs([n,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(ht(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Tx(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:fR(c,i.index),routesMeta:h})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let u of Ax(i.path))s(i,a,u)}),e}function Ax(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Ax(n.join("/")),o=[];return o.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&o.push(...a),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function aR(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:pR(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const oR=/^:[\w-]+$/,uR=3,lR=2,cR=1,dR=10,hR=-2,h_=t=>t==="*";function fR(t,e){let r=t.split("/"),n=r.length;return r.some(h_)&&(n+=hR),e&&(n+=lR),r.filter(s=>!h_(s)).reduce((s,i)=>s+(oR.test(i)?uR:i===""?cR:dR),n)}function pR(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function mR(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let u=n[o],c=o===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=f_({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!p&&c&&r&&!n[n.length-1].route.index&&(p=f_({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Hs([i,p.pathname]),pathnameBase:vR(Hs([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Hs([i,p.pathnameBase]))}return a}function f_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=gR(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,h,p)=>{let{paramName:m,isOptional:E}=h;if(m==="*"){let _=o[p]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const v=o[p];return E&&!v?c[m]=void 0:c[m]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function gR(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),vx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(n.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function ER(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function yR(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Ho(t):t;return{pathname:r?r.startsWith("/")?r:_R(r,e):e,search:TR(n),hash:AR(s)}}function _R(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function am(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bR(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function b2(t,e){let r=bR(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function v2(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Ho(t):(s=Ll({},t),ht(!s.pathname||!s.pathname.includes("?"),am("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),am("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),am("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}o=p>=0?e[p]:"/"}let u=yR(s,o),c=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const Hs=t=>t.join("/").replace(/\/\/+/g,"/"),vR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xx=["post","put","patch","delete"];new Set(xx);const wR=["get",...xx];new Set(wR);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fl.apply(this,arguments)}const T2=M.createContext(null),IR=M.createContext(null),ai=M.createContext(null),Tf=M.createContext(null),In=M.createContext({outlet:null,matches:[],isDataRoute:!1}),wx=M.createContext(null);function CR(t,e){let{relative:r}=e===void 0?{}:e;$o()||ht(!1);let{basename:n,navigator:s}=M.useContext(ai),{hash:i,pathname:a,search:o}=Cx(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:Hs([n,a])),s.createHref({pathname:u,search:o,hash:i})}function $o(){return M.useContext(Tf)!=null}function zo(){return $o()||ht(!1),M.useContext(Tf).location}function Ix(t){M.useContext(ai).static||M.useLayoutEffect(t)}function uc(){let{isDataRoute:t}=M.useContext(In);return t?qR():DR()}function DR(){$o()||ht(!1);let t=M.useContext(T2),{basename:e,future:r,navigator:n}=M.useContext(ai),{matches:s}=M.useContext(In),{pathname:i}=zo(),a=JSON.stringify(b2(s,r.v7_relativeSplatPath)),o=M.useRef(!1);return Ix(()=>{o.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let p=v2(c,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Hs([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,a,i,t])}const SR=M.createContext(null);function NR(t){let e=M.useContext(In).outlet;return e&&M.createElement(SR.Provider,{value:t},e)}function A2(){let{matches:t}=M.useContext(In),e=t[t.length-1];return e?e.params:{}}function Cx(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=M.useContext(ai),{matches:s}=M.useContext(In),{pathname:i}=zo(),a=JSON.stringify(b2(s,n.v7_relativeSplatPath));return M.useMemo(()=>v2(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function RR(t,e){return kR(t,e)}function kR(t,e,r,n){$o()||ht(!1);let{navigator:s}=M.useContext(ai),{matches:i}=M.useContext(In),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=zo(),h;if(e){var p;let x=typeof e=="string"?Ho(e):e;u==="/"||(p=x.pathname)!=null&&p.startsWith(u)||ht(!1),h=x}else h=c;let m=h.pathname||"/",E=m;if(u!=="/"){let x=u.replace(/^\//,"").split("/");E="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=sR(t,{pathname:E}),_=BR(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Hs([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Hs([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return e&&_?M.createElement(Tf.Provider,{value:{location:Fl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ds.Pop}},_):_}function PR(){let t=VR(),e=xR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),r?M.createElement("pre",{style:s},r):null,null)}const OR=M.createElement(PR,null);class LR extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?M.createElement(In.Provider,{value:this.props.routeContext},M.createElement(wx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FR(t){let{routeContext:e,match:r,children:n}=t,s=M.useContext(T2);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),M.createElement(In.Provider,{value:e},n)}function BR(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);h>=0||ht(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:m,errors:E}=r,v=p.route.loader&&m[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||v){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((h,p,m)=>{let E,v=!1,_=null,x=null;r&&(E=o&&p.route.id?o[p.route.id]:void 0,_=p.route.errorElement||OR,u&&(c<0&&m===0?(v=!0,x=null):c===m&&(v=!0,x=p.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,m+1)),b=()=>{let T;return E?T=_:v?T=x:p.route.Component?T=M.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=h,M.createElement(FR,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:r!=null},children:T})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?M.createElement(LR,{location:r.location,revalidation:r.revalidation,component:_,error:E,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var Dx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Dx||{}),wh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wh||{});function MR(t){let e=M.useContext(T2);return e||ht(!1),e}function jR(t){let e=M.useContext(IR);return e||ht(!1),e}function UR(t){let e=M.useContext(In);return e||ht(!1),e}function Sx(t){let e=UR(),r=e.matches[e.matches.length-1];return r.route.id||ht(!1),r.route.id}function VR(){var t;let e=M.useContext(wx),r=jR(wh.UseRouteError),n=Sx(wh.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function qR(){let{router:t}=MR(Dx.UseNavigateStable),e=Sx(wh.UseNavigateStable),r=M.useRef(!1);return Ix(()=>{r.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Fl({fromRouteId:e},i)))},[t,e])}const p_={};function HR(t,e){p_[e]||(p_[e]=!0,console.warn(e))}const m_=(t,e,r)=>HR(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function $R(t,e){t!=null&&t.v7_startTransition||m_("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&m_("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function x2(t){let{to:e,replace:r,state:n,relative:s}=t;$o()||ht(!1);let{future:i,static:a}=M.useContext(ai),{matches:o}=M.useContext(In),{pathname:u}=zo(),c=uc(),h=v2(e,b2(o,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(p),{replace:r,state:n,relative:s}),[c,p,s,r,n]),null}function Nx(t){return NR(t.context)}function lr(t){ht(!1)}function zR(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Ds.Pop,navigator:i,static:a=!1,future:o}=t;$o()&&ht(!1);let u=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:u,navigator:i,static:a,future:Fl({v7_relativeSplatPath:!1},o)}),[u,o,i,a]);typeof n=="string"&&(n=Ho(n));let{pathname:h="/",search:p="",hash:m="",state:E=null,key:v="default"}=n,_=M.useMemo(()=>{let x=_2(h,u);return x==null?null:{location:{pathname:x,search:p,hash:m,state:E,key:v},navigationType:s}},[u,h,p,m,E,v,s]);return _==null?null:M.createElement(ai.Provider,{value:c},M.createElement(Tf.Provider,{children:r,value:_}))}function GR(t){let{children:e,location:r}=t;return RR(C0(e),r)}new Promise(()=>{});function C0(t,e){e===void 0&&(e=[]);let r=[];return M.Children.forEach(t,(n,s)=>{if(!M.isValidElement(n))return;let i=[...e,s];if(n.type===M.Fragment){r.push.apply(r,C0(n.props.children,i));return}n.type!==lr&&ht(!1),!n.props.index||!n.props.children||ht(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=C0(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D0(){return D0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D0.apply(this,arguments)}function WR(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function KR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YR(t,e){return t.button===0&&(!e||e==="_self")&&!KR(t)}const QR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XR="6";try{window.__reactRouterVersion=XR}catch{}const JR="startTransition",g_=HN[JR];function ZR(t){let{basename:e,children:r,future:n,window:s}=t,i=M.useRef();i.current==null&&(i.current=tR({window:s,v5Compat:!0}));let a=i.current,[o,u]=M.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},h=M.useCallback(p=>{c&&g_?g_(()=>u(p)):u(p)},[u,c]);return M.useLayoutEffect(()=>a.listen(h),[a,h]),M.useEffect(()=>$R(n),[n]),M.createElement(zR,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const ek=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$t=M.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:u,to:c,preventScrollReset:h,viewTransition:p}=e,m=WR(e,QR),{basename:E}=M.useContext(ai),v,_=!1;if(typeof c=="string"&&tk.test(c)&&(v=c,ek))try{let T=new URL(window.location.href),O=c.startsWith("//")?new URL(T.protocol+c):new URL(c),B=_2(O.pathname,E);O.origin===T.origin&&B!=null?c=B+O.search+O.hash:_=!0}catch{}let x=CR(c,{relative:s}),w=rk(c,{replace:a,state:o,target:u,preventScrollReset:h,relative:s,viewTransition:p});function b(T){n&&n(T),T.defaultPrevented||w(T)}return M.createElement("a",D0({},m,{href:v||x,onClick:_||i?n:b,ref:r,target:u}))});var E_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(E_||(E_={}));var y_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(y_||(y_={}));function rk(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,u=uc(),c=zo(),h=Cx(t,{relative:a});return M.useCallback(p=>{if(YR(p,r)){p.preventDefault();let m=n!==void 0?n:xh(c)===xh(h);u(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,u,h,n,s,r,t,i,a,o])}var __={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},nk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},kx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|o>>4;let m=(o&15)<<2|c>>6,E=c&63;u||(E=64,a||(m=64)),n.push(r[h],r[p],r[m],r[E])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||p==null)throw new sk;const m=i<<2|o>>4;if(n.push(m),c!==64){const E=o<<4&240|c>>2;if(n.push(E),p!==64){const v=c<<6&192|p;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ik=function(t){const e=Rx(t);return kx.encodeByteArray(e,!0)},Px=function(t){return ik(t).replace(/\./g,"")},Ox=function(t){try{return kx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=()=>ak().__FIREBASE_DEFAULTS__,uk=()=>{if(typeof process>"u"||typeof __>"u")return;const t=__.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ox(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return ok()||uk()||lk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ck=t=>{var e,r;return(r=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Lx=()=>{var t;return(t=Af())===null||t===void 0?void 0:t.config},Fx=t=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function fk(){var t;const e=(t=Af())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ek(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Bx(){return!fk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mx(){try{return typeof indexedDB=="object"}catch{return!1}}function yk(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="FirebaseError";class Cn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=_k,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?bk(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Cn(s,o,n)}}function bk(t,e){return t.replace(vk,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const vk=/\{\$([^}]+)}/g;function Tk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(b_(i)&&b_(a)){if(!Bl(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function b_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $u(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Ak(t,e){const r=new xk(t,e);return r.subscribe.bind(r)}class xk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");wk(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=om),s.error===void 0&&(s.error=om),s.complete===void 0&&(s.complete=om);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class zi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new dk;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dk(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ck(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ck(t){return t===Ti?void 0:t}function Dk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Ik(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const Nk={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Rk=Ce.INFO,kk={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},Pk=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=kk[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class w2{constructor(e){this.name=e,this._logLevel=Rk,this._logHandler=Pk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const Ok=(t,e)=>e.some(r=>t instanceof r);let v_,T_;function Lk(){return v_||(v_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fk(){return T_||(T_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,S0=new WeakMap,Ux=new WeakMap,um=new WeakMap,I2=new WeakMap;function Bk(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r($s(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&jx.set(r,t)}).catch(()=>{}),I2.set(e,t),e}function Mk(t){if(S0.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});S0.set(t,e)}let N0={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return S0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ux.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return $s(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jk(t){N0=t(N0)}function Uk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(lm(this),e,...r);return Ux.set(n,e.sort?e.sort():[e]),$s(n)}:Fk().includes(t)?function(...e){return t.apply(lm(this),e),$s(jx.get(this))}:function(...e){return $s(t.apply(lm(this),e))}}function Vk(t){return typeof t=="function"?Uk(t):(t instanceof IDBTransaction&&Mk(t),Ok(t,Lk())?new Proxy(t,N0):t)}function $s(t){if(t instanceof IDBRequest)return Bk(t);if(um.has(t))return um.get(t);const e=Vk(t);return e!==t&&(um.set(t,e),I2.set(e,t)),e}const lm=t=>I2.get(t);function qk(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=$s(a);return n&&a.addEventListener("upgradeneeded",u=>{n($s(a.result),u.oldVersion,u.newVersion,$s(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),o.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const Hk=["get","getKey","getAll","getAllKeys","count"],$k=["put","add","delete","clear"],cm=new Map;function A_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cm.get(e))return cm.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=$k.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Hk.includes(r)))return;const i=async function(a,...o){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&u.done]))[0]};return cm.set(e,i),i}jk(t=>({...t,get:(e,r,n)=>A_(e,r)||t.get(e,r,n),has:(e,r)=>!!A_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Gk(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Gk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const R0="@firebase/app",x_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new w2("@firebase/app"),Wk="@firebase/app-compat",Kk="@firebase/analytics-compat",Yk="@firebase/analytics",Qk="@firebase/app-check-compat",Xk="@firebase/app-check",Jk="@firebase/auth",Zk="@firebase/auth-compat",e6="@firebase/database",t6="@firebase/data-connect",r6="@firebase/database-compat",n6="@firebase/functions",s6="@firebase/functions-compat",i6="@firebase/installations",a6="@firebase/installations-compat",o6="@firebase/messaging",u6="@firebase/messaging-compat",l6="@firebase/performance",c6="@firebase/performance-compat",d6="@firebase/remote-config",h6="@firebase/remote-config-compat",f6="@firebase/storage",p6="@firebase/storage-compat",m6="@firebase/firestore",g6="@firebase/vertexai-preview",E6="@firebase/firestore-compat",y6="firebase",_6="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="[DEFAULT]",b6={[R0]:"fire-core",[Wk]:"fire-core-compat",[Yk]:"fire-analytics",[Kk]:"fire-analytics-compat",[Xk]:"fire-app-check",[Qk]:"fire-app-check-compat",[Jk]:"fire-auth",[Zk]:"fire-auth-compat",[e6]:"fire-rtdb",[t6]:"fire-data-connect",[r6]:"fire-rtdb-compat",[n6]:"fire-fn",[s6]:"fire-fn-compat",[i6]:"fire-iid",[a6]:"fire-iid-compat",[o6]:"fire-fcm",[u6]:"fire-fcm-compat",[l6]:"fire-perf",[c6]:"fire-perf-compat",[d6]:"fire-rc",[h6]:"fire-rc-compat",[f6]:"fire-gcs",[p6]:"fire-gcs-compat",[m6]:"fire-fst",[E6]:"fire-fst-compat",[g6]:"fire-vertex","fire-js":"fire-js",[y6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,v6=new Map,P0=new Map;function w_(t,e){try{t.container.addComponent(e)}catch(r){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _o(t){const e=t.name;if(P0.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;P0.set(e,t);for(const r of Ih.values())w_(r,t);for(const r of v6.values())w_(r,t);return!0}function C2(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new lc("app","Firebase",T6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=_6;function Vx(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:k0,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw zs.create("bad-app-name",{appName:String(s)});if(r||(r=Lx()),!r)throw zs.create("no-options");const i=Ih.get(s);if(i){if(Bl(r,i.options)&&Bl(n,i.config))return i;throw zs.create("duplicate-app",{appName:s})}const a=new Sk(s);for(const u of P0.values())a.addComponent(u);const o=new A6(r,n,a);return Ih.set(s,o),o}function x6(t=k0){const e=Ih.get(t);if(!e&&t===k0&&Lx())return Vx();if(!e)throw zs.create("no-app",{appName:t});return e}function Gs(t,e,r){var n;let s=(n=b6[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(o.join(" "));return}_o(new zi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="firebase-heartbeat-database",I6=1,Ml="firebase-heartbeat-store";let dm=null;function qx(){return dm||(dm=qk(w6,I6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ml)}catch(r){console.warn(r)}}}}).catch(t=>{throw zs.create("idb-open",{originalErrorMessage:t.message})})),dm}async function C6(t){try{const r=(await qx()).transaction(Ml),n=await r.objectStore(Ml).get(Hx(t));return await r.done,n}catch(e){if(e instanceof Cn)Xn.warn(e.message);else{const r=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(r.message)}}}async function I_(t,e){try{const n=(await qx()).transaction(Ml,"readwrite");await n.objectStore(Ml).put(e,Hx(t)),await n.done}catch(r){if(r instanceof Cn)Xn.warn(r.message);else{const n=zs.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Xn.warn(n.message)}}}function Hx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=1024,S6=30*24*60*60*1e3;class N6{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new k6(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=C_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=S6}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Xn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=C_(),{heartbeatsToSend:n,unsentEntries:s}=R6(this._heartbeatsCache.heartbeats),i=Px(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Xn.warn(r),""}}}function C_(){return new Date().toISOString().substring(0,10)}function R6(t,e=D6){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),D_(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),D_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class k6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mx()?yk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await C6(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return I_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return I_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function D_(t){return Px(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){_o(new zi("platform-logger",e=>new zk(e),"PRIVATE")),_o(new zi("heartbeat",e=>new N6(e),"PRIVATE")),Gs(R0,x_,t),Gs(R0,x_,"esm2017"),Gs("fire-js","")}P6("");var O6="firebase",L6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(O6,L6,"app");function D2(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function $x(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F6=$x,zx=new lc("auth","Firebase",$x());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new w2("@firebase/auth");function B6(t,...e){Ch.logLevel<=Ce.WARN&&Ch.warn(`Auth (${Go}): ${t}`,...e)}function jd(t,...e){Ch.logLevel<=Ce.ERROR&&Ch.error(`Auth (${Go}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw S2(t,...e)}function bn(t,...e){return S2(t,...e)}function Gx(t,e,r){const n=Object.assign(Object.assign({},F6()),{[e]:r});return new lc("auth","Firebase",n).create(e,{appName:t.name})}function Gn(t){return Gx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S2(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return zx.create(t,...e)}function ye(t,e,...r){if(!t)throw S2(e,...r)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jd(e),new Error(e)}function Jn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function M6(){return S_()==="http:"||S_()==="https:"}function S_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M6()||mk()||"connection"in navigator)?navigator.onLine:!0}function U6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,r){this.shortDelay=e,this.longDelay=r,Jn(r>e,"Short delay should be less than long delay!"),this.isMobile=hk()||gk()}get(){return j6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=new dc(3e4,6e4);function oi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ns(t,e,r,n,s={}){return Kx(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=cc(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return pk()||(c.referrerPolicy="no-referrer"),Wx.fetch()(Yx(t,t.config.apiHost,r,o),c)})}async function Kx(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},V6),e);try{const s=new $6(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw gd(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[u,c]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw gd(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw gd(t,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Gx(t,h,c);sn(t,h)}}catch(s){if(s instanceof Cn)throw s;sn(t,"network-request-failed",{message:String(s)})}}async function hc(t,e,r,n,s={}){const i=await ns(t,e,r,n,s);return"mfaPendingCredential"in i&&sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Yx(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?N2(t.config,s):`${t.config.apiScheme}://${s}`}function H6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(bn(this.auth,"network-request-failed")),q6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gd(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=bn(t,e,n);return s.customData._tokenResponse=r,s}function N_(t){return t!==void 0&&t.enterprise!==void 0}class z6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return H6(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function G6(t,e){return ns(t,"GET","/v2/recaptchaConfig",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(t,e){return ns(t,"POST","/v1/accounts:delete",e)}async function Qx(t,e){return ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K6(t,e=!1){const r=lt(t),n=await r.getIdToken(e),s=R2(n);ye(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:al(hm(s.auth_time)),issuedAtTime:al(hm(s.iat)),expirationTime:al(hm(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hm(t){return Number(t)*1e3}function R2(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ox(r);return s?JSON.parse(s):(jd("Failed to decode base64 JWT payload"),null)}catch(s){return jd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function R_(t){const e=R2(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Cn&&Y6(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Y6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=al(this.lastLoginAt),this.creationTime=al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await bo(t,Qx(r,{idToken:n}));ye(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Xx(i.providerUserInfo):[],o=J6(t.providerData,a),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new L0(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function X6(t){const e=lt(t);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J6(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Xx(t){return t.map(e=>{var{providerId:r}=e,n=D2(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e){const r=await Kx(t,{},async()=>{const n=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Yx(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Wx.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function eP(t,e){return ns(t,"POST","/v2/accounts:revokeToken",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const r=R_(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await Z6(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new no;return n&&(ye(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(ye(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=D2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new L0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await bo(this,this.stsTokenManager.getToken(this.auth,e));return ye(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return K6(this,e)}reload(){return X6(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Dh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Gn(this.auth));const e=await this.getIdToken();return await bo(this,W6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,u,c,h;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,E=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,v=(a=r.photoURL)!==null&&a!==void 0?a:void 0,_=(o=r.tenantId)!==null&&o!==void 0?o:void 0,x=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,w=(c=r.createdAt)!==null&&c!==void 0?c:void 0,b=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:O,isAnonymous:B,providerData:V,stsTokenManager:N}=r;ye(T&&N,e,"internal-error");const I=no.fromJSON(this.name,N);ye(typeof T=="string",e,"internal-error"),hs(p,e.name),hs(m,e.name),ye(typeof O=="boolean",e,"internal-error"),ye(typeof B=="boolean",e,"internal-error"),hs(E,e.name),hs(v,e.name),hs(_,e.name),hs(x,e.name),hs(w,e.name),hs(b,e.name);const D=new Vn({uid:T,auth:e,email:m,emailVerified:O,displayName:p,isAnonymous:B,photoURL:v,phoneNumber:E,tenantId:_,stsTokenManager:I,createdAt:w,lastLoginAt:b});return V&&Array.isArray(V)&&(D.providerData=V.map(A=>Object.assign({},A))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,r,n=!1){const s=new no;s.updateFromServerResponse(r);const i=new Vn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Dh(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Xx(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new no;o.updateFromIdToken(n);const u=new Vn({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new Map;function qn(t){Jn(t instanceof Function,"Expected a class definition");let e=k_.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Jx.type="NONE";const P_=Jx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e,r){return`firebase:${t}:${e}:${r}`}class so{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ud(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ud("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new so(qn(P_),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||qn(P_);const a=Ud(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const h=await c._get(a);if(h){const p=Vn._fromJSON(e,h);c!==i&&(o=p),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new so(i,e,n):(i=u[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new so(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sw(e))return"Blackberry";if(iw(e))return"Webos";if(ew(e))return"Safari";if((e.includes("chrome/")||tw(e))&&!e.includes("edge/"))return"Chrome";if(nw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Zx(t=vt()){return/firefox\//i.test(t)}function ew(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tw(t=vt()){return/crios\//i.test(t)}function rw(t=vt()){return/iemobile/i.test(t)}function nw(t=vt()){return/android/i.test(t)}function sw(t=vt()){return/blackberry/i.test(t)}function iw(t=vt()){return/webos/i.test(t)}function k2(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tP(t=vt()){var e;return k2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rP(){return Ek()&&document.documentMode===10}function aw(t=vt()){return k2(t)||nw(t)||iw(t)||sw(t)||/windows phone/i.test(t)||rw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e=[]){let r;switch(t){case"Browser":r=O_(vt());break;case"Worker":r=`${O_(vt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Go}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const u=e(i);a(u)}catch(u){o(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(t,e={}){return ns(t,"GET","/v2/passwordPolicy",oi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=6;class aP{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:iP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new nP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=qn(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Qx(this,{idToken:e}),n=await Vn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(mn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Gn(this));const r=e?lt(e):null;return r&&ye(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sP(this),r=new aP(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await eP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&qn(e)||this._popupRedirectResolver;ye(r,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[qn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&B6(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function ia(t){return lt(t)}class L_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ak(r=>this.observer=r)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uP(t){xf=t}function uw(t){return xf.loadJS(t)}function lP(){return xf.recaptchaEnterpriseScript}function cP(){return xf.gapiScript}function dP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hP="recaptcha-enterprise",fP="NO_RECAPTCHA";class pP{constructor(e){this.type=hP,this.auth=ia(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{G6(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new z6(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(u=>{o(u)})})}function s(i,a,o){const u=window.grecaptcha;N_(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(fP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&N_(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lP();u.length!==0&&(u+=o),uw(u).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function F_(t,e,r,n=!1){const s=new pP(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function F0(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await F_(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await F_(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t,e){const r=C2(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Bl(i,e??{}))return s;sn(s,"already-initialized")}return r.initialize({options:e})}function gP(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function EP(t,e,r){const n=ia(t);ye(n._canInitEmulator,n,"emulator-config-failed"),ye(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=lw(e),{host:a,port:o}=yP(e),u=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),_P()}function lw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yP(t){const e=lw(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:B_(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:B_(a)}}}function B_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _P(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,r){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function bP(t,e){return ns(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e){return hc(t,"POST","/v1/accounts:signInWithPassword",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}async function AP(t,e){return hc(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends P2{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new jl(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new jl(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F0(e,r,"signInWithPassword",vP);case"emailLink":return TP(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F0(e,n,"signUpPassword",bP);case"emailLink":return AP(e,{idToken:r,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return hc(t,"POST","/v1/accounts:signInWithIdp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="http://localhost";class Gi extends P2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):sn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=D2(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Gi(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return io(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,io(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,io(e,r)}buildRequest(){const e={requestUri:xP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=cc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IP(t){const e=Hu($u(t)).link,r=e?Hu($u(e)).deep_link_id:null,n=Hu($u(t)).deep_link_id;return(n?Hu($u(n)).link:null)||n||r||e||t}class O2{constructor(e){var r,n,s,i,a,o;const u=Hu($u(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,p=wP((s=u.mode)!==null&&s!==void 0?s:null);ye(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=IP(e);try{return new O2(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,r){return jl._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=O2.parseLink(r);return ye(n,"argument-error"),jl._fromEmailAndCode(e,n.code,n.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends cw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends fc{constructor(){super("facebook.com")}static credential(e){return Gi._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Gi._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ts.credential(r,n)}catch{return null}}}Ts.GOOGLE_SIGN_IN_METHOD="google.com";Ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends fc{constructor(){super("github.com")}static credential(e){return Gi._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.GITHUB_SIGN_IN_METHOD="github.com";As.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends fc{constructor(){super("twitter.com")}static credential(e,r){return Gi._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return xs.credential(r,n)}catch{return null}}}xs.TWITTER_SIGN_IN_METHOD="twitter.com";xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,e){return hc(t,"POST","/v1/accounts:signUp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Vn._fromIdTokenResponse(e,n,s),a=M_(n);return new Wi({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=M_(n);return new Wi({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function M_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Cn{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Sh(e,r,n,s)}}function dw(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(t,i,e,n):i})}async function DP(t,e,r=!1){const n=await bo(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Wi._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e,r=!1){const{auth:n}=t;if(mn(n.app))return Promise.reject(Gn(n));const s="reauthenticate";try{const i=await bo(t,dw(n,s,e,t),r);ye(i.idToken,n,"internal-error");const a=R2(i.idToken);ye(a,n,"internal-error");const{sub:o}=a;return ye(t.uid===o,n,"user-mismatch"),Wi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(t,e,r=!1){if(mn(t.app))return Promise.reject(Gn(t));const n="signIn",s=await dw(t,n,e),i=await Wi._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function NP(t,e){return hw(ia(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(t){const e=ia(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RP(t,e,r){if(mn(t.app))return Promise.reject(Gn(t));const n=ia(t),a=await F0(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&fw(t),u}),o=await Wi._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function kP(t,e,r){return mn(t.app)?Promise.reject(Gn(t)):NP(lt(t),Wo.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&fw(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(t,e){return ns(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j_(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=lt(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await bo(n,PP(n.auth,i));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:u})=>u==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t,e){return lt(t).setPersistence(e)}function LP(t,e,r,n){return lt(t).onIdTokenChanged(e,r,n)}function FP(t,e,r){return lt(t).beforeAuthStateChanged(e,r)}function BP(t,e,r,n){return lt(t).onAuthStateChanged(e,r,n)}function MP(t){return lt(t).signOut()}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=1e3,UP=10;class mw extends pw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);rP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UP):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},jP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}mw.type="LOCAL";const gw=mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew extends pw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Ew.type="SESSION";const yw=Ew;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new wf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),u=await VP(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,u)=>{const c=L2("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function HP(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function $P(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GP(){return _w()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebaseLocalStorageDb",WP=1,Rh="firebaseLocalStorage",vw="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function If(t,e){return t.transaction([Rh],e?"readwrite":"readonly").objectStore(Rh)}function KP(){const t=indexedDB.deleteDatabase(bw);return new pc(t).toPromise()}function B0(){const t=indexedDB.open(bw,WP);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Rh,{keyPath:vw})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Rh)?e(n):(n.close(),await KP(),e(await B0()))})})}async function U_(t,e,r){const n=If(t,!0).put({[vw]:e,value:r});return new pc(n).toPromise()}async function YP(t,e){const r=If(t,!1).get(e),n=await new pc(r).toPromise();return n===void 0?null:n.value}function V_(t,e){const r=If(t,!0).delete(e);return new pc(r).toPromise()}const QP=800,XP=3;class Tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await B0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>XP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _w()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(GP()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await $P(),!this.activeServiceWorker)return;this.sender=new qP(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B0();return await U_(e,Nh,"1"),await V_(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>U_(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>YP(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>V_(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=If(s,!1).getAll();return new pc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tw.type="LOCAL";const JP=Tw;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){return e?qn(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2 extends P2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,r){return io(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function e5(t){return hw(t.auth,new F2(t),t.bypassAuthState)}function t5(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),SP(r,new F2(t),t.bypassAuthState)}async function r5(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),DP(r,new F2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e5;case"linkViaPopup":case"linkViaRedirect":return r5;case"reauthViaPopup":case"reauthViaRedirect":return t5;default:sn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=new dc(2e3,1e4);class za extends Aw{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,za.currentPopupAction&&za.currentPopupAction.cancel(),za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=L2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n5.get())};e()}}za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="pendingRedirect",Vd=new Map;class i5 extends Aw{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const n=await a5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a5(t,e){const r=l5(e),n=u5(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function o5(t,e){Vd.set(t._key(),e)}function u5(t){return qn(t._redirectPersistence)}function l5(t){return Ud(s5,t.config.apiKey,t.name)}async function c5(t,e,r=!1){if(mn(t.app))return Promise.reject(Gn(t));const n=ia(t),s=ZP(n,e),a=await new i5(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=10*60*1e3;class h5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f5(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!xw(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(bn(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d5&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(e))}saveEventToCache(e){this.cachedEventUids.add(q_(e)),this.lastProcessedEventTime=Date.now()}}function q_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e={}){return ns(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g5=/^https?/;async function E5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await p5(t);for(const r of e)try{if(y5(r))return}catch{}sn(t,"unauthorized-domain")}function y5(t){const e=O0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!g5.test(r))return!1;if(m5.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new dc(3e4,6e4);function H_(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function b5(t){return new Promise((e,r)=>{var n,s,i;function a(){H_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H_(),r(bn(t,"network-request-failed"))},timeout:_5.get()})}if(!((s=(n=vn().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vn().gapi)===null||i===void 0)&&i.load)a();else{const o=dP("iframefcb");return vn()[o]=()=>{gapi.load?a():r(bn(t,"network-request-failed"))},uw(`${cP()}?onload=${o}`).catch(u=>r(u))}}).catch(e=>{throw qd=null,e})}let qd=null;function v5(t){return qd=qd||b5(t),qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new dc(5e3,15e3),A5="__/auth/iframe",x5="emulator/auth/iframe",w5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},I5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C5(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?N2(e,x5):`https://${t.config.authDomain}/${A5}`,n={apiKey:e.apiKey,appName:t.name,v:Go},s=I5.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${cc(n).slice(1)}`}async function D5(t){const e=await v5(t),r=vn().gapi;return ye(r,t,"internal-error"),e.open({where:document.body,url:C5(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w5,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=bn(t,"network-request-failed"),o=vn().setTimeout(()=>{i(a)},T5.get());function u(){vn().clearTimeout(o),s(n)}n.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N5=500,R5=600,k5="_blank",P5="http://localhost";class $_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O5(t,e,r,n=N5,s=R5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const u=Object.assign(Object.assign({},S5),{width:n.toString(),height:s.toString(),top:i,left:a}),c=vt().toLowerCase();r&&(o=tw(c)?k5:r),Zx(c)&&(e=e||P5,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[E,v])=>`${m}${E}=${v},`,"");if(tP(c)&&o!=="_self")return L5(e||"",o),new $_(null);const p=window.open(e||"",o,h);ye(p,t,"popup-blocked");try{p.focus()}catch{}return new $_(p)}function L5(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="__/auth/handler",B5="emulator/auth/handler",M5=encodeURIComponent("fac");async function z_(t,e,r,n,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Go,eventId:s};if(e instanceof cw){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Tk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof fc){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await t._getAppCheckToken(),c=u?`#${M5}=${encodeURIComponent(u)}`:"";return`${j5(t)}?${cc(o).slice(1)}${c}`}function j5({config:t}){return t.emulator?N2(t,B5):`https://${t.authDomain}/${F5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class U5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yw,this._completeRedirectFn=c5,this._overrideRedirectResult=o5}async _openPopup(e,r,n,s){var i;Jn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await z_(e,r,n,O0(),s);return O5(e,a,L2())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await z_(e,r,n,O0(),s);return HP(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await D5(e),n=new h5(e);return r.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(fm,{type:fm},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[fm];a!==void 0&&r(!!a),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=E5(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return aw()||ew()||k2()}}const V5=U5;var G_="@firebase/auth",W_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $5(t){_o(new zi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ow(t)},c=new oP(n,s,i,u);return gP(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),_o(new zi("auth-internal",e=>{const r=ia(e.getProvider("auth").getImmediate());return(n=>new q5(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(G_,W_,H5(t)),Gs(G_,W_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=5*60,G5=Fx("authIdTokenMaxAge")||z5;let K_=null;const W5=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>G5)return;const s=r==null?void 0:r.token;K_!==s&&(K_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K5(t=x6()){const e=C2(t,"auth");if(e.isInitialized())return e.getImmediate();const r=mP(t,{popupRedirectResolver:V5,persistence:[JP,gw,yw]}),n=Fx("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=W5(i.toString());FP(r,a,()=>a(r.currentUser)),LP(r,o=>a(o))}}const s=ck("auth");return s&&EP(r,`http://${s}`),r}function Y5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uP({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=bn("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",Y5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$5("Browser");var Y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,ww;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function D(){}D.prototype=I.prototype,N.D=I.prototype,N.prototype=new D,N.prototype.constructor=N,N.C=function(A,k,F){for(var R=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)R[Q-2]=arguments[Q];return I.prototype[k].apply(A,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,D){D||(D=0);var A=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)A[k]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(k=0;16>k;++k)A[k]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=N.g[0],D=N.g[1],k=N.g[2];var F=N.g[3],R=I+(F^D&(k^F))+A[0]+3614090360&4294967295;I=D+(R<<7&4294967295|R>>>25),R=F+(k^I&(D^k))+A[1]+3905402710&4294967295,F=I+(R<<12&4294967295|R>>>20),R=k+(D^F&(I^D))+A[2]+606105819&4294967295,k=F+(R<<17&4294967295|R>>>15),R=D+(I^k&(F^I))+A[3]+3250441966&4294967295,D=k+(R<<22&4294967295|R>>>10),R=I+(F^D&(k^F))+A[4]+4118548399&4294967295,I=D+(R<<7&4294967295|R>>>25),R=F+(k^I&(D^k))+A[5]+1200080426&4294967295,F=I+(R<<12&4294967295|R>>>20),R=k+(D^F&(I^D))+A[6]+2821735955&4294967295,k=F+(R<<17&4294967295|R>>>15),R=D+(I^k&(F^I))+A[7]+4249261313&4294967295,D=k+(R<<22&4294967295|R>>>10),R=I+(F^D&(k^F))+A[8]+1770035416&4294967295,I=D+(R<<7&4294967295|R>>>25),R=F+(k^I&(D^k))+A[9]+2336552879&4294967295,F=I+(R<<12&4294967295|R>>>20),R=k+(D^F&(I^D))+A[10]+4294925233&4294967295,k=F+(R<<17&4294967295|R>>>15),R=D+(I^k&(F^I))+A[11]+2304563134&4294967295,D=k+(R<<22&4294967295|R>>>10),R=I+(F^D&(k^F))+A[12]+1804603682&4294967295,I=D+(R<<7&4294967295|R>>>25),R=F+(k^I&(D^k))+A[13]+4254626195&4294967295,F=I+(R<<12&4294967295|R>>>20),R=k+(D^F&(I^D))+A[14]+2792965006&4294967295,k=F+(R<<17&4294967295|R>>>15),R=D+(I^k&(F^I))+A[15]+1236535329&4294967295,D=k+(R<<22&4294967295|R>>>10),R=I+(k^F&(D^k))+A[1]+4129170786&4294967295,I=D+(R<<5&4294967295|R>>>27),R=F+(D^k&(I^D))+A[6]+3225465664&4294967295,F=I+(R<<9&4294967295|R>>>23),R=k+(I^D&(F^I))+A[11]+643717713&4294967295,k=F+(R<<14&4294967295|R>>>18),R=D+(F^I&(k^F))+A[0]+3921069994&4294967295,D=k+(R<<20&4294967295|R>>>12),R=I+(k^F&(D^k))+A[5]+3593408605&4294967295,I=D+(R<<5&4294967295|R>>>27),R=F+(D^k&(I^D))+A[10]+38016083&4294967295,F=I+(R<<9&4294967295|R>>>23),R=k+(I^D&(F^I))+A[15]+3634488961&4294967295,k=F+(R<<14&4294967295|R>>>18),R=D+(F^I&(k^F))+A[4]+3889429448&4294967295,D=k+(R<<20&4294967295|R>>>12),R=I+(k^F&(D^k))+A[9]+568446438&4294967295,I=D+(R<<5&4294967295|R>>>27),R=F+(D^k&(I^D))+A[14]+3275163606&4294967295,F=I+(R<<9&4294967295|R>>>23),R=k+(I^D&(F^I))+A[3]+4107603335&4294967295,k=F+(R<<14&4294967295|R>>>18),R=D+(F^I&(k^F))+A[8]+1163531501&4294967295,D=k+(R<<20&4294967295|R>>>12),R=I+(k^F&(D^k))+A[13]+2850285829&4294967295,I=D+(R<<5&4294967295|R>>>27),R=F+(D^k&(I^D))+A[2]+4243563512&4294967295,F=I+(R<<9&4294967295|R>>>23),R=k+(I^D&(F^I))+A[7]+1735328473&4294967295,k=F+(R<<14&4294967295|R>>>18),R=D+(F^I&(k^F))+A[12]+2368359562&4294967295,D=k+(R<<20&4294967295|R>>>12),R=I+(D^k^F)+A[5]+4294588738&4294967295,I=D+(R<<4&4294967295|R>>>28),R=F+(I^D^k)+A[8]+2272392833&4294967295,F=I+(R<<11&4294967295|R>>>21),R=k+(F^I^D)+A[11]+1839030562&4294967295,k=F+(R<<16&4294967295|R>>>16),R=D+(k^F^I)+A[14]+4259657740&4294967295,D=k+(R<<23&4294967295|R>>>9),R=I+(D^k^F)+A[1]+2763975236&4294967295,I=D+(R<<4&4294967295|R>>>28),R=F+(I^D^k)+A[4]+1272893353&4294967295,F=I+(R<<11&4294967295|R>>>21),R=k+(F^I^D)+A[7]+4139469664&4294967295,k=F+(R<<16&4294967295|R>>>16),R=D+(k^F^I)+A[10]+3200236656&4294967295,D=k+(R<<23&4294967295|R>>>9),R=I+(D^k^F)+A[13]+681279174&4294967295,I=D+(R<<4&4294967295|R>>>28),R=F+(I^D^k)+A[0]+3936430074&4294967295,F=I+(R<<11&4294967295|R>>>21),R=k+(F^I^D)+A[3]+3572445317&4294967295,k=F+(R<<16&4294967295|R>>>16),R=D+(k^F^I)+A[6]+76029189&4294967295,D=k+(R<<23&4294967295|R>>>9),R=I+(D^k^F)+A[9]+3654602809&4294967295,I=D+(R<<4&4294967295|R>>>28),R=F+(I^D^k)+A[12]+3873151461&4294967295,F=I+(R<<11&4294967295|R>>>21),R=k+(F^I^D)+A[15]+530742520&4294967295,k=F+(R<<16&4294967295|R>>>16),R=D+(k^F^I)+A[2]+3299628645&4294967295,D=k+(R<<23&4294967295|R>>>9),R=I+(k^(D|~F))+A[0]+4096336452&4294967295,I=D+(R<<6&4294967295|R>>>26),R=F+(D^(I|~k))+A[7]+1126891415&4294967295,F=I+(R<<10&4294967295|R>>>22),R=k+(I^(F|~D))+A[14]+2878612391&4294967295,k=F+(R<<15&4294967295|R>>>17),R=D+(F^(k|~I))+A[5]+4237533241&4294967295,D=k+(R<<21&4294967295|R>>>11),R=I+(k^(D|~F))+A[12]+1700485571&4294967295,I=D+(R<<6&4294967295|R>>>26),R=F+(D^(I|~k))+A[3]+2399980690&4294967295,F=I+(R<<10&4294967295|R>>>22),R=k+(I^(F|~D))+A[10]+4293915773&4294967295,k=F+(R<<15&4294967295|R>>>17),R=D+(F^(k|~I))+A[1]+2240044497&4294967295,D=k+(R<<21&4294967295|R>>>11),R=I+(k^(D|~F))+A[8]+1873313359&4294967295,I=D+(R<<6&4294967295|R>>>26),R=F+(D^(I|~k))+A[15]+4264355552&4294967295,F=I+(R<<10&4294967295|R>>>22),R=k+(I^(F|~D))+A[6]+2734768916&4294967295,k=F+(R<<15&4294967295|R>>>17),R=D+(F^(k|~I))+A[13]+1309151649&4294967295,D=k+(R<<21&4294967295|R>>>11),R=I+(k^(D|~F))+A[4]+4149444226&4294967295,I=D+(R<<6&4294967295|R>>>26),R=F+(D^(I|~k))+A[11]+3174756917&4294967295,F=I+(R<<10&4294967295|R>>>22),R=k+(I^(F|~D))+A[2]+718787259&4294967295,k=F+(R<<15&4294967295|R>>>17),R=D+(F^(k|~I))+A[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+F&4294967295}n.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var D=I-this.blockSize,A=this.B,k=this.h,F=0;F<I;){if(k==0)for(;F<=D;)s(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<I;)if(A[k++]=N.charCodeAt(F++),k==this.blockSize){s(this,A),k=0;break}}else for(;F<I;)if(A[k++]=N[F++],k==this.blockSize){s(this,A),k=0;break}}this.h=k,this.o+=I},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var D=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=D&255,D/=256;for(this.u(N),N=Array(16),I=D=0;4>I;++I)for(var A=0;32>A;A+=8)N[D++]=this.g[I]>>>A&255;return N};function i(N,I){var D=o;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=I(N)}function a(N,I){this.h=I;for(var D=[],A=!0,k=N.length-1;0<=k;k--){var F=N[k]|0;A&&F==I||(D[k]=F,A=!1)}this.g=D}var o={};function u(N){return-128<=N&&128>N?i(N,function(I){return new a([I|0],0>I?-1:0)}):new a([N|0],0>N?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return x(c(-N));for(var I=[],D=1,A=0;N>=D;A++)I[A]=N/D|0,D*=4294967296;return new a(I,0)}function h(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return x(h(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=c(Math.pow(I,8)),A=p,k=0;k<N.length;k+=8){var F=Math.min(8,N.length-k),R=parseInt(N.substring(k,k+F),I);8>F?(F=c(Math.pow(I,F)),A=A.j(F).add(c(R))):(A=A.j(D),A=A.add(c(R)))}return A}var p=u(0),m=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(_(this))return-x(this).m();for(var N=0,I=1,D=0;D<this.g.length;D++){var A=this.i(D);N+=(0<=A?A:4294967296+A)*I,I*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(v(this))return"0";if(_(this))return"-"+x(this).toString(N);for(var I=c(Math.pow(N,6)),D=this,A="";;){var k=O(D,I).g;D=w(D,k.j(I));var F=((0<D.g.length?D.g[0]:D.h)>>>0).toString(N);if(D=k,v(D))return F+A;for(;6>F.length;)F="0"+F;A=F+A}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function v(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function _(N){return N.h==-1}t.l=function(N){return N=w(this,N),_(N)?-1:v(N)?0:1};function x(N){for(var I=N.g.length,D=[],A=0;A<I;A++)D[A]=~N.g[A];return new a(D,~N.h).add(m)}t.abs=function(){return _(this)?x(this):this},t.add=function(N){for(var I=Math.max(this.g.length,N.g.length),D=[],A=0,k=0;k<=I;k++){var F=A+(this.i(k)&65535)+(N.i(k)&65535),R=(F>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);A=R>>>16,F&=65535,R&=65535,D[k]=R<<16|F}return new a(D,D[D.length-1]&-2147483648?-1:0)};function w(N,I){return N.add(x(I))}t.j=function(N){if(v(this)||v(N))return p;if(_(this))return _(N)?x(this).j(x(N)):x(x(this).j(N));if(_(N))return x(this.j(x(N)));if(0>this.l(E)&&0>N.l(E))return c(this.m()*N.m());for(var I=this.g.length+N.g.length,D=[],A=0;A<2*I;A++)D[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<N.g.length;k++){var F=this.i(A)>>>16,R=this.i(A)&65535,Q=N.i(k)>>>16,oe=N.i(k)&65535;D[2*A+2*k]+=R*oe,b(D,2*A+2*k),D[2*A+2*k+1]+=F*oe,b(D,2*A+2*k+1),D[2*A+2*k+1]+=R*Q,b(D,2*A+2*k+1),D[2*A+2*k+2]+=F*Q,b(D,2*A+2*k+2)}for(A=0;A<I;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=I;A<2*I;A++)D[A]=0;return new a(D,0)};function b(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function T(N,I){this.g=N,this.h=I}function O(N,I){if(v(I))throw Error("division by zero");if(v(N))return new T(p,p);if(_(N))return I=O(x(N),I),new T(x(I.g),x(I.h));if(_(I))return I=O(N,x(I)),new T(x(I.g),I.h);if(30<N.g.length){if(_(N)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var D=m,A=I;0>=A.l(N);)D=B(D),A=B(A);var k=V(D,1),F=V(A,1);for(A=V(A,2),D=V(D,2);!v(A);){var R=F.add(A);0>=R.l(N)&&(k=k.add(D),F=R),A=V(A,1),D=V(D,1)}return I=w(N,k.j(I)),new T(k,I)}for(k=p;0<=N.l(I);){for(D=Math.max(1,Math.floor(N.m()/I.m())),A=Math.ceil(Math.log(D)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),F=c(D),R=F.j(I);_(R)||0<R.l(N);)D-=A,F=c(D),R=F.j(I);v(F)&&(F=m),k=k.add(F),N=w(N,R)}return new T(k,N)}t.A=function(N){return O(this,N).h},t.and=function(N){for(var I=Math.max(this.g.length,N.g.length),D=[],A=0;A<I;A++)D[A]=this.i(A)&N.i(A);return new a(D,this.h&N.h)},t.or=function(N){for(var I=Math.max(this.g.length,N.g.length),D=[],A=0;A<I;A++)D[A]=this.i(A)|N.i(A);return new a(D,this.h|N.h)},t.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),D=[],A=0;A<I;A++)D[A]=this.i(A)^N.i(A);return new a(D,this.h^N.h)};function B(N){for(var I=N.g.length+1,D=[],A=0;A<I;A++)D[A]=N.i(A)<<1|N.i(A-1)>>>31;return new a(D,N.h)}function V(N,I){var D=I>>5;I%=32;for(var A=N.g.length-D,k=[],F=0;F<A;F++)k[F]=0<I?N.i(F+D)>>>I|N.i(F+D+1)<<32-I:N.i(F+D);return new a(k,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,ww=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Li=a}).apply(typeof Y_<"u"?Y_:typeof self<"u"?self:typeof window<"u"?window:{});var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iw,zu,Cw,Hd,M0,Dw,Sw,Nw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,y){return l==Array.prototype||l==Object.prototype||(l[g]=y.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ed=="object"&&Ed];for(var g=0;g<l.length;++g){var y=l[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var n=r(this);function s(l,g){if(g)e:{var y=n;l=l.split(".");for(var C=0;C<l.length-1;C++){var H=l[C];if(!(H in y))break e;y=y[H]}l=l[l.length-1],C=y[l],g=g(C),g!=C&&g!=null&&e(y,l,{configurable:!0,writable:!0,value:g})}}function i(l,g){l instanceof String&&(l+="");var y=0,C=!1,H={next:function(){if(!C&&y<l.length){var z=y++;return{value:g(z,l[z]),done:!1}}return C=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(l){return l||function(){return i(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function u(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function c(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function h(l,g,y){return l.call.apply(l.bind,arguments)}function p(l,g,y){if(!l)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,C),l.apply(g,H)}}return function(){return l.apply(g,arguments)}}function m(l,g,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function E(l,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),l.apply(this,C)}}function v(l,g){function y(){}y.prototype=g.prototype,l.aa=g.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(C,H,z){for(var ae=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ae[qe-2]=arguments[qe];return g.prototype[H].apply(C,ae)}}function _(l){const g=l.length;if(0<g){const y=Array(g);for(let C=0;C<g;C++)y[C]=l[C];return y}return[]}function x(l,g){for(let y=1;y<arguments.length;y++){const C=arguments[y];if(u(C)){const H=l.length||0,z=C.length||0;l.length=H+z;for(let ae=0;ae<z;ae++)l[H+ae]=C[ae]}else l.push(C)}}class w{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=o.navigator;return l&&(l=l.userAgent)?l:""}function O(l){return O[" "](l),l}O[" "]=function(){};var B=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(l,g,y){for(const C in l)g.call(y,l[C],C,l)}function N(l,g){for(const y in l)g.call(void 0,l[y],y,l)}function I(l){const g={};for(const y in l)g[y]=l[y];return g}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,g){let y,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(y in C)l[y]=C[y];for(let z=0;z<D.length;z++)y=D[z],Object.prototype.hasOwnProperty.call(C,y)&&(l[y]=C[y])}}function k(l){var g=1;l=l.split(":");const y=[];for(;0<g&&l.length;)y.push(l.shift()),g--;return l.length&&y.push(l.join(":")),y}function F(l){o.setTimeout(()=>{throw l},0)}function R(){var l=j;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class Q{constructor(){this.h=this.g=null}add(g,y){const C=oe.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var oe=new w(()=>new _e,l=>l.reset());class _e{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,Z=!1,j=new Q,U=()=>{const l=o.Promise.resolve(void 0);Ie=()=>{l.then(W)}};var W=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(y){F(y)}var g=oe;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}Z=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};o.addEventListener("test",y,g),o.removeEventListener("test",y,g)}catch{}return l}();function Ee(l,g){if(K.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,C=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if(B){e:{try{O(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else y=="mouseover"?g=l.fromElement:y=="mouseout"&&(g=l.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:fe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ee.aa.h.call(this)}}v(Ee,K);var fe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function ar(l,g,y,C,H){this.listener=l,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=H,this.key=++Oe,this.da=this.fa=!1}function St(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Et(l){this.src=l,this.g={},this.h=0}Et.prototype.add=function(l,g,y,C,H){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var ae=ma(l,g,C,H);return-1<ae?(g=l[ae],y||(g.fa=!1)):(g=new ar(g,this.src,z,!!C,H),g.fa=y,l.push(g)),g};function as(l,g){var y=g.type;if(y in l.g){var C=l.g[y],H=Array.prototype.indexOf.call(C,g,void 0),z;(z=0<=H)&&Array.prototype.splice.call(C,H,1),z&&(St(g),l.g[y].length==0&&(delete l.g[y],l.h--))}}function ma(l,g,y,C){for(var H=0;H<l.length;++H){var z=l[H];if(!z.da&&z.listener==g&&z.capture==!!y&&z.ha==C)return H}return-1}var ga="closure_lm_"+(1e6*Math.random()|0),os={};function hi(l,g,y,C,H){if(Array.isArray(g)){for(var z=0;z<g.length;z++)hi(l,g[z],y,C,H);return null}return y=sE(y),l&&l[de]?l.K(g,y,c(C)?!!C.capture:!!C,H):ZS(l,g,y,!1,C,H)}function ZS(l,g,y,C,H,z){if(!g)throw Error("Invalid event type");var ae=c(H)?!!H.capture:!!H,qe=gp(l);if(qe||(l[ga]=qe=new Et(l)),y=qe.add(g,y,C,ae,z),y.proxy)return y;if(C=eN(),y.proxy=C,C.src=l,C.listener=y,l.addEventListener)se||(H=ae),H===void 0&&(H=!1),l.addEventListener(g.toString(),C,H);else if(l.attachEvent)l.attachEvent(nE(g.toString()),C);else if(l.addListener&&l.removeListener)l.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function eN(){function l(y){return g.call(l.src,l.listener,y)}const g=tN;return l}function rE(l,g,y,C,H){if(Array.isArray(g))for(var z=0;z<g.length;z++)rE(l,g[z],y,C,H);else C=c(C)?!!C.capture:!!C,y=sE(y),l&&l[de]?(l=l.i,g=String(g).toString(),g in l.g&&(z=l.g[g],y=ma(z,y,C,H),-1<y&&(St(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete l.g[g],l.h--)))):l&&(l=gp(l))&&(g=l.g[g.toString()],l=-1,g&&(l=ma(g,y,C,H)),(y=-1<l?g[l]:null)&&mp(y))}function mp(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[de])as(g.i,l);else{var y=l.type,C=l.proxy;g.removeEventListener?g.removeEventListener(y,C,l.capture):g.detachEvent?g.detachEvent(nE(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=gp(g))?(as(y,l),y.h==0&&(y.src=null,g[ga]=null)):St(l)}}}function nE(l){return l in os?os[l]:os[l]="on"+l}function tN(l,g){if(l.da)l=!0;else{g=new Ee(g,this);var y=l.listener,C=l.ha||l.src;l.fa&&mp(l),l=y.call(C,g)}return l}function gp(l){return l=l[ga],l instanceof Et?l:null}var Ep="__closure_events_fn_"+(1e9*Math.random()>>>0);function sE(l){return typeof l=="function"?l:(l[Ep]||(l[Ep]=function(g){return l.handleEvent(g)}),l[Ep])}function Ft(){ne.call(this),this.i=new Et(this),this.M=this,this.F=null}v(Ft,ne),Ft.prototype[de]=!0,Ft.prototype.removeEventListener=function(l,g,y,C){rE(this,l,g,y,C)};function Kt(l,g){var y,C=l.F;if(C)for(y=[];C;C=C.F)y.push(C);if(l=l.M,C=g.type||g,typeof g=="string")g=new K(g,l);else if(g instanceof K)g.target=g.target||l;else{var H=g;g=new K(C,l),A(g,H)}if(H=!0,y)for(var z=y.length-1;0<=z;z--){var ae=g.g=y[z];H=Bc(ae,C,!0,g)&&H}if(ae=g.g=l,H=Bc(ae,C,!0,g)&&H,H=Bc(ae,C,!1,g)&&H,y)for(z=0;z<y.length;z++)ae=g.g=y[z],H=Bc(ae,C,!1,g)&&H}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var y=l.g[g],C=0;C<y.length;C++)St(y[C]);delete l.g[g],l.h--}}this.F=null},Ft.prototype.K=function(l,g,y,C){return this.i.add(String(l),g,!1,y,C)},Ft.prototype.L=function(l,g,y,C){return this.i.add(String(l),g,!0,y,C)};function Bc(l,g,y,C){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,z=0;z<g.length;++z){var ae=g[z];if(ae&&!ae.da&&ae.capture==y){var qe=ae.listener,Nt=ae.ha||ae.src;ae.fa&&as(l.i,ae),H=qe.call(Nt,C)!==!1&&H}}return H&&!C.defaultPrevented}function iE(l,g,y){if(typeof l=="function")y&&(l=m(l,y));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(l,g||0)}function aE(l){l.g=iE(()=>{l.g=null,l.i&&(l.i=!1,aE(l))},l.l);const g=l.h;l.h=null,l.m.apply(null,g)}class rN extends ne{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:aE(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function au(l){ne.call(this),this.h=l,this.g={}}v(au,ne);var oE=[];function uE(l){V(l.g,function(g,y){this.g.hasOwnProperty(y)&&mp(g)},l),l.g={}}au.prototype.N=function(){au.aa.N.call(this),uE(this)},au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yp=o.JSON.stringify,nN=o.JSON.parse,sN=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function _p(){}_p.prototype.h=null;function lE(l){return l.h||(l.h=l.i())}function cE(){}var ou={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bp(){K.call(this,"d")}v(bp,K);function vp(){K.call(this,"c")}v(vp,K);var fi={},dE=null;function Mc(){return dE=dE||new Ft}fi.La="serverreachability";function hE(l){K.call(this,fi.La,l)}v(hE,K);function uu(l){const g=Mc();Kt(g,new hE(g))}fi.STAT_EVENT="statevent";function fE(l,g){K.call(this,fi.STAT_EVENT,l),this.stat=g}v(fE,K);function Yt(l){const g=Mc();Kt(g,new fE(g,l))}fi.Ma="timingevent";function pE(l,g){K.call(this,fi.Ma,l),this.size=g}v(pE,K);function lu(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},g)}function cu(){this.g=!0}cu.prototype.xa=function(){this.g=!1};function iN(l,g,y,C,H,z){l.info(function(){if(l.g)if(z)for(var ae="",qe=z.split("&"),Nt=0;Nt<qe.length;Nt++){var Pe=qe[Nt].split("=");if(1<Pe.length){var Bt=Pe[0];Pe=Pe[1];var Mt=Bt.split("_");ae=2<=Mt.length&&Mt[1]=="type"?ae+(Bt+"="+Pe+"&"):ae+(Bt+"=redacted&")}}else ae=null;else ae=z;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+g+`
`+y+`
`+ae})}function aN(l,g,y,C,H,z,ae){l.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+g+`
`+y+`
`+z+" "+ae})}function Ea(l,g,y,C){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+uN(l,y)+(C?" "+C:"")})}function oN(l,g){l.info(function(){return"TIMEOUT: "+g})}cu.prototype.info=function(){};function uN(l,g){if(!l.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var C=y[l];if(!(2>C.length)){var H=C[1];if(Array.isArray(H)&&!(1>H.length)){var z=H[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return yp(y)}catch{return g}}var jc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tp;function Uc(){}v(Uc,_p),Uc.prototype.g=function(){return new XMLHttpRequest},Uc.prototype.i=function(){return{}},Tp=new Uc;function us(l,g,y,C){this.j=l,this.i=g,this.l=y,this.R=C||1,this.U=new au(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}var EE={},Ap={};function xp(l,g,y){l.L=1,l.v=$c(Dn(g)),l.m=y,l.P=!0,yE(l,null)}function yE(l,g){l.F=Date.now(),Vc(l),l.A=Dn(l.v);var y=l.A,C=l.R;Array.isArray(C)||(C=[String(C)]),kE(y.i,"t",C),l.C=0,y=l.j.J,l.h=new gE,l.g=QE(l.j,y?g:null,!l.m),0<l.O&&(l.M=new rN(m(l.Y,l,l.g),l.O)),g=l.U,y=l.g,C=l.ca;var H="readystatechange";Array.isArray(H)||(H&&(oE[0]=H.toString()),H=oE);for(var z=0;z<H.length;z++){var ae=hi(y,H[z],C||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),uu(),iN(l.i,l.u,l.A,l.l,l.R,l.m)}us.prototype.ca=function(l){l=l.target;const g=this.M;g&&Sn(l)==3?g.j():this.Y(l)},us.prototype.Y=function(l){try{if(l==this.g)e:{const Mt=Sn(this.g);var g=this.g.Ba();const ba=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||jE(this.g)))){this.J||Mt!=4||g==7||(g==8||0>=ba?uu(3):uu(2)),wp(this);var y=this.g.Z();this.X=y;t:if(_E(this)){var C=jE(this.g);l="";var H=C.length,z=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),du(this);var ae="";break t}this.h.i=new o.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,l+=this.h.i.decode(C[g],{stream:!(z&&g==H-1)});C.length=0,this.h.g+=l,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=y==200,aN(this.i,this.u,this.A,this.l,this.R,Mt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Nt=this.g;if((qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(qe)){var Pe=qe;break t}}Pe=null}if(y=Pe)Ea(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ip(this,y);else{this.o=!1,this.s=3,Yt(12),pi(this),du(this);break e}}if(this.P){y=!0;let zr;for(;!this.J&&this.C<ae.length;)if(zr=lN(this,ae),zr==Ap){Mt==4&&(this.s=4,Yt(14),y=!1),Ea(this.i,this.l,null,"[Incomplete Response]");break}else if(zr==EE){this.s=4,Yt(15),Ea(this.i,this.l,ae,"[Invalid Chunk]"),y=!1;break}else Ea(this.i,this.l,zr,null),Ip(this,zr);if(_E(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||ae.length!=0||this.h.h||(this.s=1,Yt(16),y=!1),this.o=this.o&&y,!y)Ea(this.i,this.l,ae,"[Invalid Chunked Response]"),pi(this),du(this);else if(0<ae.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),kp(Bt),Bt.M=!0,Yt(11))}}else Ea(this.i,this.l,ae,null),Ip(this,ae);Mt==4&&pi(this),this.o&&!this.J&&(Mt==4?GE(this.j,this):(this.o=!1,Vc(this)))}else IN(this.g),y==400&&0<ae.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),pi(this),du(this)}}}catch{}finally{}};function _E(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function lN(l,g){var y=l.C,C=g.indexOf(`
`,y);return C==-1?Ap:(y=Number(g.substring(y,C)),isNaN(y)?EE:(C+=1,C+y>g.length?Ap:(g=g.slice(C,C+y),l.C=C+y,g)))}us.prototype.cancel=function(){this.J=!0,pi(this)};function Vc(l){l.S=Date.now()+l.I,bE(l,l.I)}function bE(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=lu(m(l.ba,l),g)}function wp(l){l.B&&(o.clearTimeout(l.B),l.B=null)}us.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(oN(this.i,this.A),this.L!=2&&(uu(),Yt(17)),pi(this),this.s=2,du(this)):bE(this,this.S-l)};function du(l){l.j.G==0||l.J||GE(l.j,l)}function pi(l){wp(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,uE(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function Ip(l,g){try{var y=l.j;if(y.G!=0&&(y.g==l||Cp(y.h,l))){if(!l.K&&Cp(y.h,l)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Qc(y),Kc(y);else break e;Rp(y),Yt(18)}}else y.za=H[1],0<y.za-y.T&&37500>H[2]&&y.F&&y.v==0&&!y.C&&(y.C=lu(m(y.Za,y),6e3));if(1>=AE(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else gi(y,11)}else if((l.K||y.g==l)&&Qc(y),!b(g))for(H=y.Da.g.parse(g),g=0;g<H.length;g++){let Pe=H[g];if(y.T=Pe[0],Pe=Pe[1],y.G==2)if(Pe[0]=="c"){y.K=Pe[1],y.ia=Pe[2];const Bt=Pe[3];Bt!=null&&(y.la=Bt,y.j.info("VER="+y.la));const Mt=Pe[4];Mt!=null&&(y.Aa=Mt,y.j.info("SVER="+y.Aa));const ba=Pe[5];ba!=null&&typeof ba=="number"&&0<ba&&(C=1.5*ba,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const zr=l.g;if(zr){const Jc=zr.g?zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jc){var z=C.h;z.g||Jc.indexOf("spdy")==-1&&Jc.indexOf("quic")==-1&&Jc.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Dp(z,z.h),z.h=null))}if(C.D){const Pp=zr.g?zr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pp&&(C.ya=Pp,ze(C.I,C.D,Pp))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var ae=l;if(C.qa=YE(C,C.J?C.ia:null,C.W),ae.K){xE(C.h,ae);var qe=ae,Nt=C.L;Nt&&(qe.I=Nt),qe.B&&(wp(qe),Vc(qe)),C.g=ae}else $E(C);0<y.i.length&&Yc(y)}else Pe[0]!="stop"&&Pe[0]!="close"||gi(y,7);else y.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?gi(y,7):Np(y):Pe[0]!="noop"&&y.l&&y.l.ta(Pe),y.v=0)}}uu(4)}catch{}}var cN=class{constructor(l,g){this.g=l,this.map=g}};function vE(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function TE(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function AE(l){return l.h?1:l.g?l.g.size:0}function Cp(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Dp(l,g){l.g?l.g.add(g):l.h=g}function xE(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}vE.prototype.cancel=function(){if(this.i=wE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function wE(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(const y of l.g.values())g=g.concat(y.D);return g}return _(l.i)}function dN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var g=[],y=l.length,C=0;C<y;C++)g.push(l[C]);return g}g=[],y=0;for(C in l)g[y++]=l[C];return g}function hN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var g=[];l=l.length;for(var y=0;y<l;y++)g.push(y);return g}g=[],y=0;for(const C in l)g[y++]=C;return g}}}function IE(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var y=hN(l),C=dN(l),H=C.length,z=0;z<H;z++)g.call(void 0,C[z],y&&y[z],l)}var CE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fN(l,g){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var C=l[y].indexOf("="),H=null;if(0<=C){var z=l[y].substring(0,C);H=l[y].substring(C+1)}else z=l[y];g(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function mi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof mi){this.h=l.h,qc(this,l.j),this.o=l.o,this.g=l.g,Hc(this,l.s),this.l=l.l;var g=l.i,y=new pu;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),DE(this,y),this.m=l.m}else l&&(g=String(l).match(CE))?(this.h=!1,qc(this,g[1]||"",!0),this.o=hu(g[2]||""),this.g=hu(g[3]||"",!0),Hc(this,g[4]),this.l=hu(g[5]||"",!0),DE(this,g[6]||"",!0),this.m=hu(g[7]||"")):(this.h=!1,this.i=new pu(null,this.h))}mi.prototype.toString=function(){var l=[],g=this.j;g&&l.push(fu(g,SE,!0),":");var y=this.g;return(y||g=="file")&&(l.push("//"),(g=this.o)&&l.push(fu(g,SE,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(fu(y,y.charAt(0)=="/"?gN:mN,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",fu(y,yN)),l.join("")};function Dn(l){return new mi(l)}function qc(l,g,y){l.j=y?hu(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Hc(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function DE(l,g,y){g instanceof pu?(l.i=g,_N(l.i,l.h)):(y||(g=fu(g,EN)),l.i=new pu(g,l.h))}function ze(l,g,y){l.i.set(g,y)}function $c(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function hu(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function fu(l,g,y){return typeof l=="string"?(l=encodeURI(l).replace(g,pN),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var SE=/[#\/\?@]/g,mN=/[#\?:]/g,gN=/[#\?]/g,EN=/[#\?@]/g,yN=/#/g;function pu(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function ls(l){l.g||(l.g=new Map,l.h=0,l.i&&fN(l.i,function(g,y){l.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=pu.prototype,t.add=function(l,g){ls(this),this.i=null,l=ya(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(g),this.h+=1,this};function NE(l,g){ls(l),g=ya(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function RE(l,g){return ls(l),g=ya(l,g),l.g.has(g)}t.forEach=function(l,g){ls(this),this.g.forEach(function(y,C){y.forEach(function(H){l.call(g,H,C,this)},this)},this)},t.na=function(){ls(this);const l=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){const H=l[C];for(let z=0;z<H.length;z++)y.push(g[C])}return y},t.V=function(l){ls(this);let g=[];if(typeof l=="string")RE(this,l)&&(g=g.concat(this.g.get(ya(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)g=g.concat(l[y])}return g},t.set=function(l,g){return ls(this),this.i=null,l=ya(this,l),RE(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},t.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function kE(l,g,y){NE(l,g),0<y.length&&(l.i=null,l.g.set(ya(l,g),_(y)),l.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];const z=encodeURIComponent(String(C)),ae=this.V(C);for(C=0;C<ae.length;C++){var H=z;ae[C]!==""&&(H+="="+encodeURIComponent(String(ae[C]))),l.push(H)}}return this.i=l.join("&")};function ya(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function _N(l,g){g&&!l.j&&(ls(l),l.i=null,l.g.forEach(function(y,C){var H=C.toLowerCase();C!=H&&(NE(this,C),kE(this,H,y))},l)),l.j=g}function bN(l,g){const y=new cu;if(o.Image){const C=new Image;C.onload=E(cs,y,"TestLoadImage: loaded",!0,g,C),C.onerror=E(cs,y,"TestLoadImage: error",!1,g,C),C.onabort=E(cs,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=E(cs,y,"TestLoadImage: timeout",!1,g,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=l}else g(!1)}function vN(l,g){const y=new cu,C=new AbortController,H=setTimeout(()=>{C.abort(),cs(y,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:C.signal}).then(z=>{clearTimeout(H),z.ok?cs(y,"TestPingServer: ok",!0,g):cs(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),cs(y,"TestPingServer: error",!1,g)})}function cs(l,g,y,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(y)}catch{}}function TN(){this.g=new sN}function AN(l,g,y){const C=y||"";try{IE(l,function(H,z){let ae=H;c(H)&&(ae=yp(H)),g.push(C+z+"="+encodeURIComponent(ae))})}catch(H){throw g.push(C+"type="+encodeURIComponent("_badmap")),H}}function zc(l){this.l=l.Ub||null,this.j=l.eb||!1}v(zc,_p),zc.prototype.g=function(){return new Gc(this.l,this.j)},zc.prototype.i=function(l){return function(){return l}}({});function Gc(l,g){Ft.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Gc,Ft),t=Gc.prototype,t.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,gu(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,gu(this)),this.g&&(this.readyState=3,gu(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PE(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function PE(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?mu(this):gu(this),this.readyState==3&&PE(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,mu(this))},t.Qa=function(l){this.g&&(this.response=l,mu(this))},t.ga=function(){this.g&&mu(this)};function mu(l){l.readyState=4,l.l=null,l.j=null,l.v=null,gu(l)}t.setRequestHeader=function(l,g){this.u.append(l,g)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=g.next();return l.join(`\r
`)};function gu(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function OE(l){let g="";return V(l,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function Sp(l,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=OE(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):ze(l,g,y))}function at(l){Ft.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(at,Ft);var xN=/^https?$/i,wN=["POST","PUT"];t=at.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tp.g(),this.v=this.o?lE(this.o):lE(Tp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch(z){LE(this,z);return}if(l=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)y.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const z of C.keys())y.set(z,C.get(z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),H=o.FormData&&l instanceof o.FormData,!(0<=Array.prototype.indexOf.call(wN,g,void 0))||C||H||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ae]of y)this.g.setRequestHeader(z,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ME(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){LE(this,z)}};function LE(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,FE(l),Wc(l)}function FE(l){l.A||(l.A=!0,Kt(l,"complete"),Kt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Kt(this,"complete"),Kt(this,"abort"),Wc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wc(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?BE(this):this.bb())},t.bb=function(){BE(this)};function BE(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Sn(l)!=4||l.Z()!=2)){if(l.u&&Sn(l)==4)iE(l.Ea,0,l);else if(Kt(l,"readystatechange"),Sn(l)==4){l.h=!1;try{const ae=l.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=ae===0){var H=String(l.D).match(CE)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),C=!xN.test(H?H.toLowerCase():"")}y=C}if(y)Kt(l,"complete"),Kt(l,"success");else{l.m=6;try{var z=2<Sn(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",FE(l)}}finally{Wc(l)}}}}function Wc(l,g){if(l.g){ME(l);const y=l.g,C=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||Kt(l,"ready");try{y.onreadystatechange=C}catch{}}}function ME(l){l.I&&(o.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Sn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),nN(g)}};function jE(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function IN(l){const g={};l=(l.g&&2<=Sn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<l.length;C++){if(b(l[C]))continue;var y=k(l[C]);const H=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=g[H]||[];g[H]=z,z.push(y)}N(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eu(l,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||g}function UE(l){this.Aa=0,this.i=[],this.j=new cu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eu("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eu("baseRetryDelayMs",5e3,l),this.cb=Eu("retryDelaySeedMs",1e4,l),this.Wa=Eu("forwardChannelMaxRetries",2,l),this.wa=Eu("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new vE(l&&l.concurrentRequestLimit),this.Da=new TN,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=UE.prototype,t.la=8,t.G=1,t.connect=function(l,g,y,C){Yt(0),this.W=l,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=YE(this,null,this.W),Yc(this)};function Np(l){if(VE(l),l.G==3){var g=l.U++,y=Dn(l.I);if(ze(y,"SID",l.K),ze(y,"RID",g),ze(y,"TYPE","terminate"),yu(l,y),g=new us(l,l.j,g),g.L=2,g.v=$c(Dn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&o.Image&&(new Image().src=g.v,y=!0),y||(g.g=QE(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Vc(g)}KE(l)}function Kc(l){l.g&&(kp(l),l.g.cancel(),l.g=null)}function VE(l){Kc(l),l.u&&(o.clearTimeout(l.u),l.u=null),Qc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&o.clearTimeout(l.s),l.s=null)}function Yc(l){if(!TE(l.h)&&!l.s){l.s=!0;var g=l.Ga;Ie||U(),Z||(Ie(),Z=!0),j.add(g,l),l.B=0}}function CN(l,g){return AE(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=lu(m(l.Ga,l,g),WE(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const H=new us(this,this.j,l);let z=this.o;if(this.S&&(z?(z=I(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(H.H=z,z=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=HE(this,H,g),y=Dn(this.I),ze(y,"RID",l),ze(y,"CVER",22),this.D&&ze(y,"X-HTTP-Session-Id",this.D),yu(this,y),z&&(this.O?g="headers="+encodeURIComponent(String(OE(z)))+"&"+g:this.m&&Sp(y,this.m,z)),Dp(this.h,H),this.Ua&&ze(y,"TYPE","init"),this.P?(ze(y,"$req",g),ze(y,"SID","null"),H.T=!0,xp(H,y,null)):xp(H,y,g),this.G=2}}else this.G==3&&(l?qE(this,l):this.i.length==0||TE(this.h)||qE(this))};function qE(l,g){var y;g?y=g.l:y=l.U++;const C=Dn(l.I);ze(C,"SID",l.K),ze(C,"RID",y),ze(C,"AID",l.T),yu(l,C),l.m&&l.o&&Sp(C,l.m,l.o),y=new us(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),g&&(l.i=g.D.concat(l.i)),g=HE(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Dp(l.h,y),xp(y,C,g)}function yu(l,g){l.H&&V(l.H,function(y,C){ze(g,C,y)}),l.l&&IE({},function(y,C){ze(g,C,y)})}function HE(l,g,y){y=Math.min(l.i.length,y);var C=l.l?m(l.l.Na,l.l,l):null;e:{var H=l.i;let z=-1;for(;;){const ae=["count="+y];z==-1?0<y?(z=H[0].g,ae.push("ofs="+z)):z=0:ae.push("ofs="+z);let qe=!0;for(let Nt=0;Nt<y;Nt++){let Pe=H[Nt].g;const Bt=H[Nt].map;if(Pe-=z,0>Pe)z=Math.max(0,H[Nt].g-100),qe=!1;else try{AN(Bt,ae,"req"+Pe+"_")}catch{C&&C(Bt)}}if(qe){C=ae.join("&");break e}}}return l=l.i.splice(0,y),g.D=l,C}function $E(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;Ie||U(),Z||(Ie(),Z=!0),j.add(g,l),l.v=0}}function Rp(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=lu(m(l.Fa,l),WE(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,zE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=lu(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Kc(this),zE(this))};function kp(l){l.A!=null&&(o.clearTimeout(l.A),l.A=null)}function zE(l){l.g=new us(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=Dn(l.qa);ze(g,"RID","rpc"),ze(g,"SID",l.K),ze(g,"AID",l.T),ze(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(g,"TO",l.ja),ze(g,"TYPE","xmlhttp"),yu(l,g),l.m&&l.o&&Sp(g,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=$c(Dn(g)),y.m=null,y.P=!0,yE(y,l)}t.Za=function(){this.C!=null&&(this.C=null,Kc(this),Rp(this),Yt(19))};function Qc(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function GE(l,g){var y=null;if(l.g==g){Qc(l),kp(l),l.g=null;var C=2}else if(Cp(l.h,g))y=g.D,xE(l.h,g),C=1;else return;if(l.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var H=l.B;C=Mc(),Kt(C,new pE(C,y)),Yc(l)}else $E(l);else if(H=g.s,H==3||H==0&&0<g.X||!(C==1&&CN(l,g)||C==2&&Rp(l)))switch(y&&0<y.length&&(g=l.h,g.i=g.i.concat(y)),H){case 1:gi(l,5);break;case 4:gi(l,10);break;case 3:gi(l,6);break;default:gi(l,2)}}}function WE(l,g){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*g}function gi(l,g){if(l.j.info("Error code "+g),g==2){var y=m(l.fb,l),C=l.Xa;const H=!C;C=new mi(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qc(C,"https"),$c(C),H?bN(C.toString(),y):vN(C.toString(),y)}else Yt(2);l.G=0,l.l&&l.l.sa(g),KE(l),VE(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function KE(l){if(l.G=0,l.ka=[],l.l){const g=wE(l.h);(g.length!=0||l.i.length!=0)&&(x(l.ka,g),x(l.ka,l.i),l.h.i.length=0,_(l.i),l.i.length=0),l.l.ra()}}function YE(l,g,y){var C=y instanceof mi?Dn(y):new mi(y);if(C.g!="")g&&(C.g=g+"."+C.g),Hc(C,C.s);else{var H=o.location;C=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var z=new mi(null);C&&qc(z,C),g&&(z.g=g),H&&Hc(z,H),y&&(z.l=y),C=z}return y=l.D,g=l.ya,y&&g&&ze(C,y,g),ze(C,"VER",l.la),yu(l,C),C}function QE(l,g,y){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new at(new zc({eb:y})):new at(l.pa),g.Ha(l.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function XE(){}t=XE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xc(){}Xc.prototype.g=function(l,g){return new vr(l,g)};function vr(l,g){Ft.call(this),this.g=new UE(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!b(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new _a(this)}v(vr,Ft),vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){Np(this.g)},vr.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=yp(l),l=y);g.i.push(new cN(g.Ya++,l)),g.G==3&&Yc(g)},vr.prototype.N=function(){this.g.l=null,delete this.j,Np(this.g),delete this.g,vr.aa.N.call(this)};function JE(l){bp.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(const y in g){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}v(JE,bp);function ZE(){vp.call(this),this.status=1}v(ZE,vp);function _a(l){this.g=l}v(_a,XE),_a.prototype.ua=function(){Kt(this.g,"a")},_a.prototype.ta=function(l){Kt(this.g,new JE(l))},_a.prototype.sa=function(l){Kt(this.g,new ZE)},_a.prototype.ra=function(){Kt(this.g,"b")},Xc.prototype.createWebChannel=Xc.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,Nw=function(){return new Xc},Sw=function(){return Mc()},Dw=fi,M0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jc.NO_ERROR=0,jc.TIMEOUT=8,jc.HTTP_ERROR=6,Hd=jc,mE.COMPLETE="complete",Cw=mE,cE.EventType=ou,ou.OPEN="a",ou.CLOSE="b",ou.ERROR="c",ou.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,zu=cE,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Iw=at}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});const Q_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new w2("@firebase/firestore");function Ca(){return Ki.logLevel}function te(t,...e){if(Ki.logLevel<=Ce.DEBUG){const r=e.map(B2);Ki.debug(`Firestore (${Ko}): ${t}`,...r)}}function Zt(t,...e){if(Ki.logLevel<=Ce.ERROR){const r=e.map(B2);Ki.error(`Firestore (${Ko}): ${t}`,...r)}}function vo(t,...e){if(Ki.logLevel<=Ce.WARN){const r=e.map(B2);Ki.warn(`Firestore (${Ko}): ${t}`,...r)}}function B2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+t;throw Zt(e),new Error(e)}function pe(t,e){t||he()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Cn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Xt.UNAUTHENTICATED))}shutdown(){}}class J5{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){pe(this.o===void 0);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},o=u=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tn)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pe(typeof n.accessToken=="string"),new Q5(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new Xt(e)}}class Z5{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Z5(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){pe(this.o===void 0);const n=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(pe(typeof r.token=="string"),this.R=r.token,new tO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=nO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function ve(t,e){return t<e?-1:t>e?1:0}function To(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function kw(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ie(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new nt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new nt(0,0))}static max(){return new ge(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,r,n){r===void 0?r=0:r>e.length&&he(),n===void 0?n=e.length-r:n>e.length-r&&he(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ul.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ul?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Fe extends Ul{construct(e,r,n){return new Fe(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ie(Y.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Fe(r)}static emptyPath(){return new Fe([])}}const sO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Ul{construct(e,r,n){return new tt(e,r,n)}static isValidIdentifier(e){return sO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new ie(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new ie(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(r)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Fe.fromString(e))}static fromName(e){return new ue(Fe.fromString(e).popFirst(5))}static empty(){return new ue(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Fe.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function j0(t){return t.fields.find(e=>e.kind===2)}function Ai(t){return t.fields.filter(e=>e.kind!==2)}kh.UNKNOWN_ID=-1;class $d{constructor(e,r){this.fieldPath=e,this.kind=r}}class Vl{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Vl(0,Rr.min())}}function iO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(n===1e9?new nt(r+1,0):new nt(r,n));return new Rr(s,ue.empty(),e)}function Pw(t){return new Rr(t.readTime,t.key,-1)}class Rr{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Rr(ge.min(),ue.empty(),-1)}static max(){return new Rr(ge.max(),ue.empty(),-1)}}function M2(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ue.comparator(t.documentKey,e.documentKey),r!==0?r:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==Ow)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new $((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof $?r:$.resolve(r)}catch(r){return $.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):$.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):$.reject(r)}static resolve(e){return new $((r,n)=>{r(e)})}static reject(e){return new $((r,n)=>{n(e)})}static waitFor(e){return new $((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},u=>n(u))}),a=!0,i===s&&r()})}static or(e){let r=$.resolve(!1);for(const n of e)r=r.next(s=>s?$.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new $((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let u=0;u<i;u++){const c=u;r(e[c]).next(h=>{a[c]=h,++o,o===i&&n(a)},h=>s(h))}})}static doWhile(e,r){return new $((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Tn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new ol(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=j2(n.target.error);this.V.reject(new ol(e,s))}}static open(e,r,n,s){try{return new Cf(r,e.transaction(s,n))}catch(i){throw new ol(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new oO(r)}}class Ws{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Ws.S(vt())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Mx())return!1;if(Ws.v())return!0;const e=vt(),r=Ws.S(e),n=0<r&&r<10,s=Fw(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new ol(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new ie(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new ie(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new ol(e,a))},s.onupgradeneeded=i=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Cf.open(this.db,e,i?"readonly":"readwrite",n),u=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),$.reject(c))).toPromise();return u.catch(()=>{}),await o.m,u}catch(o){const u=o,c=u.name!=="FirebaseError"&&a<3;if(te("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Fw(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class aO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xi(this.B.delete())}}class ol extends ie{constructor(e,r){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ui(t){return t.name==="IndexedDbTransactionError"}class oO{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(te("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xi(n)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),xi(this.store.add(e))}get(e){return xi(this.store.get(e)).next(r=>(r===void 0&&(r=null),te("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),xi(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),xi(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new $((a,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{a(u.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,u)=>{a.push(u)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new $((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){te("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new $((n,s)=>{r.onerror=i=>{const a=j2(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new $((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const u=new aO(o),c=r(o.primaryKey,o.value,u);if(c instanceof $){const h=c.catch(p=>(u.done(),$.reject(p)));n.push(h)}u.isDone?s():u.K===null?o.continue():o.continue(u.K)}}).next(()=>$.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function xi(t){return new $((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=j2(n.target.error);r(s)}})}let X_=!1;function j2(t){const e=Ws.S(vt());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return X_||(X_=!0,setTimeout(()=>{throw n},0)),n}}return t}class uO{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){te("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{te("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ui(r)?te("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await aa(r)}await this.X(6e4)})}}class lO{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return $.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return te("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(te("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=Pw(i);M2(a,n)>0&&(n=a)}),new Rr(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Br.oe=-1;function Df(t){return t==null}function ql(t){return t===0&&1/t==-1/0}function cO(t){return typeof t=="number"&&Number.isInteger(t)&&!ql(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=J_(e)),e=dO(t.get(r),e);return J_(e)}function dO(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function J_(t){return t+""}function gn(t){const e=t.length;if(pe(e>=2),e===2)return pe(t.charAt(0)===""&&t.charAt(1)===""),Fe.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&he(),t.charAt(a+1)){case"":const o=t.substring(i,a);let u;s.length===0?u=o:(s+=o,u=s,s=""),n.push(u);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:he()}i=a+2}return new Fe(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t,e){return[t,tr(e)]}function Bw(t,e,r){return[t,tr(e),r]}const hO={},fO=["prefixPath","collectionGroup","readTime","documentId"],pO=["prefixPath","collectionGroup","documentId"],mO=["collectionGroup","readTime","prefixPath","documentId"],gO=["canonicalId","targetId"],EO=["targetId","path"],yO=["path","targetId"],_O=["collectionId","parent"],bO=["indexId","uid"],vO=["uid","sequenceNumber"],TO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AO=["indexId","uid","orderedDocumentKey"],xO=["userId","collectionPath","documentId"],wO=["userId","collectionPath","largestBatchId"],IO=["userId","collectionGroup","largestBatchId"],Mw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CO=[...Mw,"documentOverlays"],jw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Uw=jw,U2=[...Uw,"indexConfiguration","indexState","indexEntries"],DO=U2,SO=[...U2,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0 extends Lw{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Tt(t,e){const r=be(t);return Ws.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function oa(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Vw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,r){this.comparator=e,this.root=r||kt.EMPTY}insert(e,r){return new Je(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new kt(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,r,n,s,i){return this}insert(e,r,n){return new kt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ve(this.comparator);return r.data=e,r}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ta(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new gr([])}unionWith(e){let r=new Ve(tt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new gr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qw("Invalid base64 string: "+i):i}}(e);return new gt(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new gt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const NO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(t){if(pe(!!t),typeof t=="string"){let e=0;const r=NO.exec(t);if(pe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Js(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function q2(t){const e=t.mapValue.fields.__previous_value__;return V2(e)?q2(e):e}function Hl(t){const e=Zn(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,r,n,s,i,a,o,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=c}}class Yi{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Yi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gd={nullValue:"NULL_VALUE"};function Qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V2(t)?4:Hw(t)?9007199254740991:Sf(t)?10:11:he()}function wn(t,e){if(t===e)return!0;const r=Qi(t);if(r!==Qi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hl(t).isEqual(Hl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Zn(s.timestampValue),o=Zn(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Js(s.bytesValue).isEqual(Js(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ye(s.doubleValue),o=Ye(i.doubleValue);return a===o?ql(a)===ql(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return To(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(eb(a)!==eb(o))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(o[u]===void 0||!wn(a[u],o[u])))return!1;return!0}(t,e);default:return he()}}function $l(t,e){return(t.values||[]).find(r=>wn(r,e))!==void 0}function Zs(t,e){if(t===e)return 0;const r=Qi(t),n=Qi(e);if(r!==n)return ve(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Ye(i.integerValue||i.doubleValue),u=Ye(a.integerValue||a.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return rb(t.timestampValue,e.timestampValue);case 4:return rb(Hl(t),Hl(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Js(i),u=Js(a);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),u=a.split("/");for(let c=0;c<o.length&&c<u.length;c++){const h=ve(o[c],u[c]);if(h!==0)return h}return ve(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=ve(Ye(i.latitude),Ye(a.latitude));return o!==0?o:ve(Ye(i.longitude),Ye(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nb(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,u,c,h;const p=i.fields||{},m=a.fields||{},E=(o=p.value)===null||o===void 0?void 0:o.arrayValue,v=(u=m.value)===null||u===void 0?void 0:u.arrayValue,_=ve(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return _!==0?_:nb(E,v)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ss.mapValue&&a===Ss.mapValue)return 0;if(i===Ss.mapValue)return 1;if(a===Ss.mapValue)return-1;const o=i.fields||{},u=Object.keys(o),c=a.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=ve(u[p],h[p]);if(m!==0)return m;const E=Zs(o[u[p]],c[h[p]]);if(E!==0)return E}return ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw he()}}function rb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const r=Zn(t),n=Zn(e),s=ve(r.seconds,n.seconds);return s!==0?s:ve(r.nanos,n.nanos)}function nb(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=Zs(r[s],n[s]);if(i)return i}return ve(r.length,n.length)}function Ao(t){return V0(t)}function V0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Zn(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Js(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ue.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=V0(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${V0(r.fields[a])}`;return s+"}"}(t.mapValue):he()}function zl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function q0(t){return!!t&&"integerValue"in t}function Gl(t){return!!t&&"arrayValue"in t}function sb(t){return!!t&&"nullValue"in t}function ib(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wd(t){return!!t&&"mapValue"in t}function Sf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ul(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oa(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ul(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ul(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Hw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const $w={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kO(t){return"nullValue"in t?Gd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zl(Yi.empty(),ue.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Sf(t)?$w:{mapValue:{}}:he()}function PO(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zl(Yi.empty(),ue.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?$w:"mapValue"in t?Sf(t)?{mapValue:{}}:Ss:he()}function ab(t,e){const r=Zs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ob(t,e){const r=Zs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Wd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(r)}setAll(e){let r=tt.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=ul(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Wd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Wd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){oa(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new zt(ul(this.value))}}function zw(t){const e=[];return oa(t.fields,(r,n)=>{const s=new tt([r]);if(Wd(n)){const i=zw(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new ut(e,0,ge.min(),ge.min(),ge.min(),zt.empty(),0)}static newFoundDocument(e,r,n,s){return new ut(e,1,r,ge.min(),n,s,0)}static newNoDocument(e,r){return new ut(e,2,r,ge.min(),ge.min(),zt.empty(),0)}static newUnknownDocument(e,r){return new ut(e,3,r,ge.min(),ge.min(),zt.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,r){this.position=e,this.inclusive=r}}function ub(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=ue.comparator(ue.fromName(a.referenceValue),r.key):n=Zs(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function lb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!wn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,r="asc"){this.field=e,this.dir=r}}function OO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{}class De extends Gw{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new LO(e,r,n):r==="array-contains"?new MO(e,n):r==="in"?new Jw(e,n):r==="not-in"?new jO(e,n):r==="array-contains-any"?new UO(e,n):new De(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new FO(e,n):new BO(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Zs(r,this.value)):r!==null&&Qi(this.value)===Qi(r)&&this.matchesComparison(Zs(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Me extends Gw{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Me(e,r)}matches(e){return wo(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wo(t){return t.op==="and"}function H0(t){return t.op==="or"}function H2(t){return Ww(t)&&wo(t)}function Ww(t){for(const e of t.filters)if(e instanceof Me)return!1;return!0}function $0(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+Ao(t.value);if(H2(t))return t.filters.map(e=>$0(e)).join(",");{const e=t.filters.map(r=>$0(r)).join(",");return`${t.op}(${e})`}}function Kw(t,e){return t instanceof De?function(n,s){return s instanceof De&&n.op===s.op&&n.field.isEqual(s.field)&&wn(n.value,s.value)}(t,e):t instanceof Me?function(n,s){return s instanceof Me&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&Kw(a,s.filters[o]),!0):!1}(t,e):void he()}function Yw(t,e){const r=t.filters.concat(e);return Me.create(r,t.op)}function Qw(t){return t instanceof De?function(r){return`${r.field.canonicalString()} ${r.op} ${Ao(r.value)}`}(t):t instanceof Me?function(r){return r.op.toString()+" {"+r.getFilters().map(Qw).join(" ,")+"}"}(t):"Filter"}class LO extends De{constructor(e,r,n){super(e,r,n),this.key=ue.fromName(n.referenceValue)}matches(e){const r=ue.comparator(e.key,this.key);return this.matchesComparison(r)}}class FO extends De{constructor(e,r){super(e,"in",r),this.keys=Xw("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class BO extends De{constructor(e,r){super(e,"not-in",r),this.keys=Xw("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Xw(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ue.fromName(n.referenceValue))}class MO extends De{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Gl(r)&&$l(r.arrayValue,this.value)}}class Jw extends De{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&$l(this.value.arrayValue,r)}}class jO extends De{constructor(e,r){super(e,"not-in",r)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!$l(this.value.arrayValue,r)}}class UO extends De{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Gl(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>$l(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function z0(t,e=null,r=[],n=[],s=null,i=null,a=null){return new VO(t,e,r,n,s,i,a)}function Xi(t){const e=be(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>$0(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Df(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ao(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ao(n)).join(",")),e.ue=r}return e.ue}function mc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!OO(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Kw(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lb(t.startAt,e.startAt)&&lb(t.endAt,e.endAt)}function Ph(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Oh(t,e){return t.filters.filter(r=>r instanceof De&&r.field.isEqual(e))}function cb(t,e,r){let n=Gd,s=!0;for(const i of Oh(t,e)){let a=Gd,o=!0;switch(i.op){case"<":case"<=":a=kO(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Gd}ab({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];ab({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function db(t,e,r){let n=Ss,s=!0;for(const i of Oh(t,e)){let a=Ss,o=!0;switch(i.op){case">=":case">":a=PO(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Ss}ob({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];ob({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qO(t,e,r,n,s,i,a,o){return new Yo(t,e,r,n,s,i,a,o)}function Nf(t){return new Yo(t)}function hb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zw(t){return t.collectionGroup!==null}function ll(t){const e=be(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ve(tt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Wl(i,n))}),r.has(tt.keyField().canonicalString())||e.ce.push(new Wl(tt.keyField(),n))}return e.ce}function jr(t){const e=be(t);return e.le||(e.le=HO(e,ll(t))),e.le}function HO(t,e){if(t.limitType==="F")return z0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wl(s.field,i)});const r=t.endAt?new xo(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new xo(t.startAt.position,t.startAt.inclusive):null;return z0(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function G0(t,e){const r=t.filters.concat([e]);return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function W0(t,e,r){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Rf(t,e){return mc(jr(t),jr(e))&&t.limitType===e.limitType}function eI(t){return`${Xi(jr(t))}|lt:${t.limitType}`}function Da(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>Qw(s)).join(", ")}]`),Df(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Ao(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Ao(s)).join(",")),`Target(${n})`}(jr(t))}; limitType=${t.limitType})`}function gc(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ue.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of ll(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,u){const c=ub(a,o,u);return a.inclusive?c<=0:c<0}(n.startAt,ll(n),s)||n.endAt&&!function(a,o,u){const c=ub(a,o,u);return a.inclusive?c>=0:c>0}(n.endAt,ll(n),s))}(t,e)}function $O(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tI(t){return(e,r)=>{let n=!1;for(const s of ll(t)){const i=zO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function zO(t,e,r){const n=t.field.isKeyField()?ue.comparator(e.key,r.key):function(i,a,o){const u=a.data.field(i),c=o.data.field(i);return u!==null&&c!==null?Zs(u,c):he()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return Vw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Je(ue.comparator);function Dr(){return GO}const rI=new Je(ue.comparator);function Gu(...t){let e=rI;for(const r of t)e=e.insert(r.key,r);return e}function nI(t){let e=rI;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function En(){return cl()}function sI(){return cl()}function cl(){return new li(t=>t.toString(),(t,e)=>t.isEqual(e))}const WO=new Je(ue.comparator),KO=new Ve(ue.comparator);function xe(...t){let e=KO;for(const r of t)e=e.add(r);return e}const YO=new Ve(ve);function QO(){return YO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ql(e)?"-0":e}}function iI(t){return{integerValue:""+t}}function aI(t,e){return cO(e)?iI(e):$2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function XO(t,e,r){return t instanceof Io?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&V2(i)&&(i=q2(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Co?uI(t,e):t instanceof Do?lI(t,e):function(s,i){const a=oI(s,i),o=fb(a)+fb(s.Pe);return q0(a)&&q0(s.Pe)?iI(o):$2(s.serializer,o)}(t,e)}function JO(t,e,r){return t instanceof Co?uI(t,e):t instanceof Do?lI(t,e):r}function oI(t,e){return t instanceof So?function(n){return q0(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Io extends kf{}class Co extends kf{constructor(e){super(),this.elements=e}}function uI(t,e){const r=cI(e);for(const n of t.elements)r.some(s=>wn(s,n))||r.push(n);return{arrayValue:{values:r}}}class Do extends kf{constructor(e){super(),this.elements=e}}function lI(t,e){let r=cI(e);for(const n of t.elements)r=r.filter(s=>!wn(s,n));return{arrayValue:{values:r}}}class So extends kf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function fb(t){return Ye(t.integerValue||t.doubleValue)}function cI(t){return Gl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,r){this.field=e,this.transform=r}}function ZO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Co&&s instanceof Co||n instanceof Do&&s instanceof Do?To(n.elements,s.elements,wn):n instanceof So&&s instanceof So?wn(n.Pe,s.Pe):n instanceof Io&&s instanceof Io}(t.transform,e.transform)}class eL{constructor(e,r){this.version=e,this.transformResults=r}}class bt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new bt}static exists(e){return new bt(void 0,e)}static updateTime(e){return new bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pf{}function dI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ec(t.key,bt.none()):new Qo(t.key,t.data,bt.none());{const r=t.data,n=zt.empty();let s=new Ve(tt.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new ss(t.key,n,new gr(s.toArray()),bt.none())}}function tL(t,e,r){t instanceof Qo?function(s,i,a){const o=s.value.clone(),u=mb(s.fieldTransforms,i,a.transformResults);o.setAll(u),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof ss?function(s,i,a){if(!Kd(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=mb(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(hI(s)),u.setAll(o),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function dl(t,e,r,n){return t instanceof Qo?function(i,a,o,u){if(!Kd(i.precondition,a))return o;const c=i.value.clone(),h=gb(i.fieldTransforms,u,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof ss?function(i,a,o,u){if(!Kd(i.precondition,a))return o;const c=gb(i.fieldTransforms,u,a),h=a.data;return h.setAll(hI(i)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,r,n):function(i,a,o){return Kd(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function rL(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=oI(n.transform,s||null);i!=null&&(r===null&&(r=zt.empty()),r.set(n.field,i))}return r||null}function pb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&To(n,s,(i,a)=>ZO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qo extends Pf{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ss extends Pf{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function hI(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function mb(t,e,r){const n=new Map;pe(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,JO(a,o,r[s]))}return n}function gb(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,XO(i,a,e))}return n}class Ec extends Pf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends Pf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tL(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=dl(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=dl(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=sI();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const u=dI(a,o);u!==null&&n.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ge.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),xe())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(r,n)=>pb(r,n))&&To(this.baseMutations,e.baseMutations,(r,n)=>pb(r,n))}}class W2{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){pe(e.mutations.length===n.length);let s=function(){return WO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new W2(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ne;function sL(t){switch(t){default:return he();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function pI(t){if(t===void 0)return Zt("GRPC error has no .code"),Y.UNKNOWN;switch(t){case pt.OK:return Y.OK;case pt.CANCELLED:return Y.CANCELLED;case pt.UNKNOWN:return Y.UNKNOWN;case pt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case pt.INTERNAL:return Y.INTERNAL;case pt.UNAVAILABLE:return Y.UNAVAILABLE;case pt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case pt.NOT_FOUND:return Y.NOT_FOUND;case pt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case pt.ABORTED:return Y.ABORTED;case pt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case pt.DATA_LOSS:return Y.DATA_LOSS;default:return he()}}(Ne=pt||(pt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=new Li([4294967295,4294967295],0);function Eb(t){const e=iL().encode(t),r=new ww;return r.update(e),new Uint8Array(r.digest())}function yb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Li([r,n],0),new Li([s,i],0)]}class Y2{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Wu(`Invalid padding: ${r}`);if(n<0)throw new Wu(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Li.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Li.fromNumber(n)));return s.compare(aL)===1&&(s=new Li([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Eb(e),[n,s]=yb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Y2(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=Eb(e),[n,s]=yb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Of(ge.min(),s,new Je(ve),Dr(),xe())}}class yc{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new yc(n,r,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class mI{constructor(e,r){this.targetId=e,this.me=r}}class gI{constructor(e,r,n=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class _b{constructor(){this.fe=0,this.ge=vb(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),r=xe(),n=xe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:he()}}),new yc(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=vb()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Dr(),this.qe=bb(),this.Qe=new Je(ve)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:he()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Ph(i))if(n===0){const a=new ue(i.path);this.Ue(r,a,ut.newNoDocument(a,ge.min()))}else pe(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),u=o?this.Xe(o,e,a):1;if(u!==0){this.je(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=Js(n).toUint8Array()}catch(u){if(u instanceof qw)return vo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new Y2(a,s,i)}catch(u){return vo(u instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Ph(o.target)){const u=new ue(o.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ut.newNoDocument(u,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=xe();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Of(e,r,this.Qe,this.ke,n);return this.ke=Dr(),this.qe=bb(),this.Qe=new Je(ve),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new _b,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ve(ve),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||te("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _b),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function bb(){return new Je(ue.comparator)}function vb(){return new Je(ue.comparator)}const uL={asc:"ASCENDING",desc:"DESCENDING"},lL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cL={and:"AND",or:"OR"};class dL{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function K0(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function No(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hL(t,e){return No(t,e.toTimestamp())}function rr(t){return pe(!!t),ge.fromTimestamp(function(r){const n=Zn(r);return new nt(n.seconds,n.nanos)}(t))}function Q2(t,e){return Y0(t,e).canonicalString()}function Y0(t,e){const r=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function yI(t){const e=Fe.fromString(t);return pe(CI(e)),e}function Lh(t,e){return Q2(t.databaseId,e.path)}function Fi(t,e){const r=yI(e);if(r.get(1)!==t.databaseId.projectId)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ie(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ue(vI(r))}function _I(t,e){return Q2(t.databaseId,e)}function bI(t){const e=yI(t);return e.length===4?Fe.emptyPath():vI(e)}function Q0(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vI(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Tb(t,e,r){return{name:Lh(t,e),fields:r.value.mapValue.fields}}function fL(t,e,r){const n=Fi(t,e.name),s=rr(e.updateTime),i=e.createTime?rr(e.createTime):ge.min(),a=new zt({mapValue:{fields:e.fields}}),o=ut.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function pL(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(pe(h===void 0||typeof h=="string"),gt.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?Y.UNKNOWN:pI(c.code);return new ie(h,c.message||"")}(a);r=new gI(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Fi(t,n.document.name),i=rr(n.document.updateTime),a=n.document.createTime?rr(n.document.createTime):ge.min(),o=new zt({mapValue:{fields:n.document.fields}}),u=ut.newFoundDocument(s,i,a,o),c=n.targetIds||[],h=n.removedTargetIds||[];r=new Yd(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Fi(t,n.document),i=n.readTime?rr(n.readTime):ge.min(),a=ut.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Yd([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Fi(t,n.document),i=n.removedTargetIds||[];r=new Yd([],i,s,null)}else{if(!("filter"in e))return he();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new nL(s,i),o=n.targetId;r=new mI(o,a)}}return r}function Fh(t,e){let r;if(e instanceof Qo)r={update:Tb(t,e.key,e.value)};else if(e instanceof Ec)r={delete:Lh(t,e.key)};else if(e instanceof ss)r={update:Tb(t,e.key,e.data),updateMask:bL(e.fieldMask)};else{if(!(e instanceof fI))return he();r={verify:Lh(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Io)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Co)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Do)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof So)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw he()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hL(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:he()}(t,e.precondition)),r}function X0(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?bt.updateTime(rr(i.updateTime)):i.exists!==void 0?bt.exists(i.exists):bt.none()}(e.currentDocument):bt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let u=null;if("setToServerValue"in o)pe(o.setToServerValue==="REQUEST_TIME"),u=new Io;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];u=new Co(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];u=new Do(h)}else"increment"in o?u=new So(a,o.increment):he();const c=tt.fromServerFormat(o.fieldPath);return new z2(c,u)}(t,s)):[];if(e.update){e.update.name;const s=Fi(t,e.update.name),i=new zt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(u){const c=u.fieldPaths||[];return new gr(c.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new ss(s,i,a,r,n)}return new Qo(s,i,r,n)}if(e.delete){const s=Fi(t,e.delete);return new Ec(s,r)}if(e.verify){const s=Fi(t,e.verify);return new fI(s,r)}return he()}function mL(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?rr(s.updateTime):rr(i);return a.isEqual(ge.min())&&(a=rr(i)),new eL(a,s.transformResults||[])}(r,e))):[]}function TI(t,e){return{documents:[_I(t,e.path)]}}function AI(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=_I(t,s);const i=function(c){if(c.length!==0)return II(Me.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Sa(m.field),direction:EL(m.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=K0(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function xI(t){let e=bI(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){pe(n===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(p){const m=wI(p);return m instanceof Me&&H2(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(p){return p.map(m=>function(v){return new Wl(Na(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(p){let m;return m=typeof p=="object"?p.value:p,Df(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(p){const m=!!p.before,E=p.values||[];return new xo(E,m)}(r.startAt));let c=null;return r.endAt&&(c=function(p){const m=!p.before,E=p.values||[];return new xo(E,m)}(r.endAt)),qO(e,s,a,i,o,"F",u,c)}function gL(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wI(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Na(r.unaryFilter.field);return De.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Na(r.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Na(r.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Na(r.unaryFilter.field);return De.create(a,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(r){return De.create(Na(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Me.create(r.compositeFilter.filters.map(n=>wI(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he()}}(r.compositeFilter.op))}(t):he()}function EL(t){return uL[t]}function yL(t){return lL[t]}function _L(t){return cL[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function Na(t){return tt.fromServerFormat(t.fieldPath)}function II(t){return t instanceof De?function(r){if(r.op==="=="){if(ib(r.value))return{unaryFilter:{field:Sa(r.field),op:"IS_NAN"}};if(sb(r.value))return{unaryFilter:{field:Sa(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(ib(r.value))return{unaryFilter:{field:Sa(r.field),op:"IS_NOT_NAN"}};if(sb(r.value))return{unaryFilter:{field:Sa(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(r.field),op:yL(r.op),value:r.value}}}(t):t instanceof Me?function(r){const n=r.getFilters().map(s=>II(s));return n.length===1?n[0]:{compositeFilter:{op:_L(r.op),filters:n}}}(t):he()}function bL(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function CI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,r,n,s,i=ge.min(),a=ge.min(),o=gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.ct=e}}function vL(t,e){let r;if(e.document)r=fL(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ue.fromSegments(e.noDocument.path),s=Zi(e.noDocument.readTime);r=ut.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return he();{const n=ue.fromSegments(e.unknownDocument.path),s=Zi(e.unknownDocument.version);r=ut.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new nt(s[0],s[1]);return ge.fromTimestamp(i)}(e.readTime)),r}function Ab(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Bh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:Lh(i,a.key),fields:a.data.value.mapValue.fields,updateTime:No(i,a.version.toTimestamp()),createTime:No(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ji(e.version)};else{if(!e.isUnknownDocument())return he();n.unknownDocument={path:r.path.toArray(),version:Ji(e.version)}}return n}function Bh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ji(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(t){const e=new nt(t.seconds,t.nanoseconds);return ge.fromTimestamp(e)}function wi(t,e){const r=(e.baseMutations||[]).map(i=>X0(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>X0(t.ct,i)),s=nt.fromMillis(e.localWriteTimeMs);return new G2(e.batchId,s,r,n)}function Ku(t){const e=Zi(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Zi(t.lastLimboFreeSnapshotVersion):ge.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return pe(i.documents.length===1),jr(Nf(bI(i.documents[0])))}(t.query):function(i){return jr(xI(i))}(t.query),new Hn(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,gt.fromBase64String(t.resumeToken))}function SI(t,e){const r=Ji(e.snapshotVersion),n=Ji(e.lastLimboFreeSnapshotVersion);let s;s=Ph(e.target)?TI(t.ct,e.target):AI(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xi(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function NI(t){const e=xI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?W0(e,e.limit,"L"):e}function pm(t,e){return new K2(e.largestBatchId,X0(t.ct,e.overlayMutation))}function xb(t,e){const r=e.path.lastSegment();return[t,tr(e.path.popLast()),r]}function wb(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Ji(n.readTime),documentKey:tr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{getBundleMetadata(e,r){return Ib(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Zi(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return Ib(e).put(function(s){return{bundleId:s.id,createTime:Ji(rr(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return Cb(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:NI(i.bundledQuery),readTime:Zi(i.readTime)}}(n)})}saveNamedQuery(e,r){return Cb(e).put(function(s){return{name:s.name,readTime:Ji(rr(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function Ib(t){return Tt(t,"bundles")}function Cb(t){return Tt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Lf(e,n)}getOverlay(e,r){return Cu(e).get(xb(this.userId,r)).next(n=>n?pm(this.serializer,n):null)}getOverlays(e,r){const n=En();return $.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new K2(r,a);s.push(this.ht(e,o))}),$.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(tr(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Cu(e).j("collectionPathOverlayIndex",o))}),$.waitFor(i)}getOverlaysForCollection(e,r,n){const s=En(),i=tr(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Cu(e).U("collectionPathOverlayIndex",a).next(o=>{for(const u of o){const c=pm(this.serializer,u);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=En();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Cu(e).J({index:"collectionGroupOverlayIndex",range:o},(u,c,h)=>{const p=pm(this.serializer,c);i.size()<s||p.largestBatchId===a?(i.set(p.getKey(),p),a=p.largestBatchId):h.done()}).next(()=>i)}ht(e,r){return Cu(e).put(function(s,i,a){const[o,u,c]=xb(i,a.mutation.key);return{userId:i,collectionPath:u,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Fh(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Cu(t){return Tt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{Pt(e){return Tt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?gt.fromUint8Array(n):gt.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Ye(e.integerValue));else if("doubleValue"in e){const n=Ye(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),ql(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Zn(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Js(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?Hw(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Sf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):he()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Ye(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),ue.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ii.vt=new Ii;function xL(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Db(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=xL(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class wL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=Db(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=Db(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class IL{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class CL{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Du{constructor(){this.jt=new wL,this.Ht=new IL(this.jt),this.Jt=new CL(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ci(this.indexId,this.documentKey,this.arrayValue,n)}}function fs(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=Sb(t.arrayValue,e.arrayValue),r!==0?r:(r=Sb(t.directionalValue,e.directionalValue),r!==0?r:ue.comparator(t.documentKey,e.documentKey)))}function Sb(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.Xt=new Ve((r,n)=>tt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(pe(e.collectionGroup===this.collectionId),this.nn)return!1;const r=j0(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ai(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const u=n[i];if(!this.on(o,u)||!this._n(this.en[a++],u))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Ve(tt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new $d(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new $d(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new $d(n.field,n.dir==="asc"?0:1)));return new kh(kh.UNKNOWN_ID,this.collectionId,r,Vl.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){var e,r;if(pe(t instanceof De||t instanceof Me),t instanceof De){if(t instanceof Jw){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>De.create(t.field,"==",i)))||[];return Me.create(s,"or")}return t}const n=t.filters.map(s=>RI(s));return Me.create(n,t.op)}function DL(t){if(t.getFilters().length===0)return[];const e=eg(RI(t));return pe(kI(e)),J0(e)||Z0(e)?[e]:e.getFilters()}function J0(t){return t instanceof De}function Z0(t){return t instanceof Me&&H2(t)}function kI(t){return J0(t)||Z0(t)||function(r){if(r instanceof Me&&H0(r)){for(const n of r.getFilters())if(!J0(n)&&!Z0(n))return!1;return!0}return!1}(t)}function eg(t){if(pe(t instanceof De||t instanceof Me),t instanceof De)return t;if(t.filters.length===1)return eg(t.filters[0]);const e=t.filters.map(n=>eg(n));let r=Me.create(e,t.op);return r=Mh(r),kI(r)?r:(pe(r instanceof Me),pe(wo(r)),pe(r.filters.length>1),r.filters.reduce((n,s)=>X2(n,s)))}function X2(t,e){let r;return pe(t instanceof De||t instanceof Me),pe(e instanceof De||e instanceof Me),r=t instanceof De?e instanceof De?function(s,i){return Me.create([s,i],"and")}(t,e):Rb(t,e):e instanceof De?Rb(e,t):function(s,i){if(pe(s.filters.length>0&&i.filters.length>0),wo(s)&&wo(i))return Yw(s,i.getFilters());const a=H0(s)?s:i,o=H0(s)?i:s,u=a.filters.map(c=>X2(c,o));return Me.create(u,"or")}(t,e),Mh(r)}function Rb(t,e){if(wo(e))return Yw(e,t.getFilters());{const r=e.filters.map(n=>X2(t,n));return Me.create(r,"or")}}function Mh(t){if(pe(t instanceof De||t instanceof Me),t instanceof De)return t;const e=t.getFilters();if(e.length===1)return Mh(e[0]);if(Ww(t))return t;const r=e.map(s=>Mh(s)),n=[];return r.forEach(s=>{s instanceof De?n.push(s):s instanceof Me&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Me.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.un=new J2}addToCollectionParentIndex(e,r){return this.un.add(r),$.resolve()}getCollectionParents(e,r){return $.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return $.resolve()}deleteFieldIndex(e,r){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,r){return $.resolve()}getDocumentsMatchingTarget(e,r){return $.resolve(null)}getIndexType(e,r){return $.resolve(0)}getFieldIndexes(e,r){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,r){return $.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,r){return $.resolve(Rr.min())}updateCollectionGroup(e,r,n){return $.resolve()}updateIndexEntries(e,r){return $.resolve()}}class J2{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ve(Fe.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ve(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Uint8Array(0);class NL{constructor(e,r){this.databaseId=r,this.cn=new J2,this.ln=new li(n=>Xi(n),(n,s)=>mc(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:tr(s)};return kb(e).put(i)}return $.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[kw(r),""],!1,!0);return kb(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(gn(a.parent))}return n})}addFieldIndex(e,r){const n=Su(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=xa(e);return i.next(o=>{a.put(wb(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Su(e),s=xa(e),i=Aa(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Su(e),n=Aa(e),s=xa(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return $.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new Nb(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Aa(e);let s=!0;const i=new Map;return $.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=xe();const o=[];return $.forEach(i,(u,c)=>{te("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(u)} to execute ${Xi(r)}`);const h=function(T,O){const B=j0(O);if(B===void 0)return null;for(const V of Oh(T,B.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,u),p=function(T,O){const B=new Map;for(const V of Ai(O))for(const N of Oh(T,V.fieldPath))switch(N.op){case"==":case"in":B.set(V.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return B.set(V.fieldPath.canonicalString(),N.value),Array.from(B.values())}return null}(c,u),m=function(T,O){const B=[];let V=!0;for(const N of Ai(O)){const I=N.kind===0?cb(T,N.fieldPath,T.startAt):db(T,N.fieldPath,T.startAt);B.push(I.value),V&&(V=I.inclusive)}return new xo(B,V)}(c,u),E=function(T,O){const B=[];let V=!0;for(const N of Ai(O)){const I=N.kind===0?db(T,N.fieldPath,T.endAt):cb(T,N.fieldPath,T.endAt);B.push(I.value),V&&(V=I.inclusive)}return new xo(B,V)}(c,u),v=this.In(u,c,m),_=this.In(u,c,E),x=this.Tn(u,c,p),w=this.En(u.indexId,h,v,m.inclusive,_,E.inclusive,x);return $.forEach(w,b=>n.G(b,r.limit).next(T=>{T.forEach(O=>{const B=ue.fromSegments(O.documentKey);a.has(B)||(a=a.add(B),o.push(B))})}))}).next(()=>o)}return $.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=DL(Me.create(e.filters,"and")).map(n=>z0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const u=(r!=null?r.length:1)*Math.max(n.length,i.length),c=u/(r!=null?r.length:1),h=[];for(let p=0;p<u;++p){const m=r?this.dn(r[p/c]):_d,E=this.An(e,m,n[p%c],s),v=this.Rn(e,m,i[p%c],a),_=o.map(x=>this.An(e,m,x,!0));h.push(...this.createRange(E,v,_))}return h}An(e,r,n,s){const i=new Ci(e,ue.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new Ci(e,ue.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new Nb(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return $.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(u){let c=new Ve(tt.comparator),h=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:c=c.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Du;for(const s of Ai(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);Ii.vt.It(i,a)}return n.zt()}dn(e){const r=new Du;return Ii.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Du;return Ii.vt.It(zl(this.databaseId,r),n.Yt(function(i){const a=Ai(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Du);let i=0;for(const a of Ai(e)){const o=n[i++];for(const u of s)if(this.fn(r,a.fieldPath)&&Gl(o))s=this.gn(s,a,o);else{const c=u.Yt(a.kind);Ii.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const u=new Du;u.seed(o.zt()),Ii.vt.It(a,u.Yt(r.kind)),i.push(u)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof De&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Su(e),s=xa(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return $.forEach(i,o=>s.get([o.indexId,this.uid]).next(u=>{a.push(function(h,p){const m=p?new Vl(p.sequenceNumber,new Rr(Zi(p.readTime),new ue(gn(p.documentKey)),p.largestBatchId)):Vl.empty(),E=h.fields.map(([v,_])=>new $d(tt.fromServerFormat(v),_));return new kh(h.indexId,h.collectionGroup,E,m)}(o,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ve(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Su(e),i=xa(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>$.forEach(o,u=>i.put(wb(u.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return $.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?$.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),$.forEach(o,u=>this.wn(e,s,u).next(c=>{const h=this.Sn(i,u);return c.isEqual(h)?$.resolve():this.bn(e,i,u,c,h)}))))})}Dn(e,r,n,s){return Aa(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Aa(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Aa(e);let i=new Ve(fs);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new Ci(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new Ve(fs);const s=this.Vn(r,e);if(s==null)return n;const i=j0(r);if(i!=null){const a=e.data.field(i.fieldPath);if(Gl(a))for(const o of a.arrayValue.values||[])n=n.add(new Ci(r.indexId,e.key,this.dn(o),s))}else n=n.add(new Ci(r.indexId,e.key,_d,s));return n}bn(e,r,n,s,i){te("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(u,c,h,p,m){const E=u.getIterator(),v=c.getIterator();let _=Ta(E),x=Ta(v);for(;_||x;){let w=!1,b=!1;if(_&&x){const T=h(_,x);T<0?b=!0:T>0&&(w=!0)}else _!=null?b=!0:w=!0;w?(p(x),x=Ta(v)):b?(m(_),_=Ta(E)):(_=Ta(E),x=Ta(v))}}(s,i,fs,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),$.waitFor(a)}yn(e){let r=1;return xa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>fs(a,o)).filter((a,o,u)=>!o||fs(a,u[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=fs(a,e),u=fs(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&u<0)s.push(a),s.push(a.Zt());else if(u>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,_d,[]],u=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,_d,[]];i.push(IDBKeyRange.bound(o,u))}return i}Cn(e,r){return fs(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Pb)}getMinOffset(e,r){return $.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||he())).next(Pb)}}function kb(t){return Tt(t,"collectionParents")}function Aa(t){return Tt(t,"indexEntries")}function Su(t){return Tt(t,"indexConfiguration")}function xa(t){return Tt(t,"indexState")}function Pb(t){pe(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;M2(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new Rr(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new cr(e,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const u=n.J({range:a},(h,p,m)=>(o++,m.delete()));i.push(u.next(()=>{pe(o===1)}));const c=[];for(const h of r.mutations){const p=Bw(e,h.key.path,r.batchId);i.push(s.delete(p)),c.push(h.key)}return $.waitFor(i).next(()=>c)}function jh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw he();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(41943040,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);class Ff{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){pe(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Ff(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Ra(e),a=ps(e);return a.add({}).next(o=>{pe(typeof o=="number");const u=new G2(o,r,n,s),c=function(E,v,_){const x=_.baseMutations.map(b=>Fh(E.ct,b)),w=_.mutations.map(b=>Fh(E.ct,b));return{userId:v,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:x,mutations:w}}(this.serializer,this.userId,u),h=[];let p=new Ve((m,E)=>ve(m.canonicalString(),E.canonicalString()));for(const m of s){const E=Bw(this.userId,m.key.path,o);p=p.add(m.key.path.popLast()),h.push(a.put(c)),h.push(i.put(E,hO))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[o]=u.keys()}),$.waitFor(h).next(()=>u)})}lookupMutationBatch(e,r){return ps(e).get(r).next(n=>n?(pe(n.userId===this.userId),wi(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?$.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ps(e).J({index:"userMutationsIndex",range:s},(a,o,u)=>{o.userId===this.userId&&(pe(o.batchId>=n),i=wi(this.serializer,o)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ps(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).U("userMutationsIndex",r).next(n=>n.map(s=>wi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=zd(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Ra(e).J({range:s},(a,o,u)=>{const[c,h,p]=a,m=gn(h);if(c===this.userId&&r.path.isEqual(m))return ps(e).get(p).next(E=>{if(!E)throw he();pe(E.userId===this.userId),i.push(wi(this.serializer,E))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ve(ve);const s=[];return r.forEach(i=>{const a=zd(this.userId,i.path),o=IDBKeyRange.lowerBound(a),u=Ra(e).J({range:o},(c,h,p)=>{const[m,E,v]=c,_=gn(E);m===this.userId&&i.path.isEqual(_)?n=n.add(v):p.done()});s.push(u)}),$.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=zd(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new Ve(ve);return Ra(e).J({range:a},(u,c,h)=>{const[p,m,E]=u,v=gn(m);p===this.userId&&n.isPrefixOf(v)?v.length===s&&(o=o.add(E)):h.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(ps(e).get(i).next(a=>{if(a===null)throw he();pe(a.userId===this.userId),n.push(wi(this.serializer,a))}))}),$.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return PI(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),$.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return $.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Ra(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const u=gn(i[1]);s.push(u)}else o.done()}).next(()=>{pe(s.length===0)})})}containsKey(e,r){return OI(e,this.userId,r)}Nn(e){return LI(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function OI(t,e,r){const n=zd(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Ra(t).J({range:i,H:!0},(o,u,c)=>{const[h,p,m]=o;h===e&&p===s&&(a=!0),c.done()}).next(()=>a)}function ps(t){return Tt(t,"mutations")}function Ra(t){return Tt(t,"documentMutations")}function LI(t){return Tt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ea(0)}static kn(){return new ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new ea(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>ge.fromTimestamp(new nt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>wa(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(pe(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return wa(e).J((a,o)=>{const u=Ku(o);u.sequenceNumber<=r&&n.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>$.waitFor(i)).next(()=>s)}forEachTarget(e,r){return wa(e).J((n,s)=>{const i=Ku(s);r(i)})}qn(e){return Lb(e).get("targetGlobalKey").next(r=>(pe(r!==null),r))}Qn(e,r){return Lb(e).put("targetGlobalKey",r)}Kn(e,r){return wa(e).put(SI(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Xi(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return wa(e).J({range:s,index:"queryTargetsIndex"},(a,o,u)=>{const c=Ku(o);mc(r,c.target)&&(i=c,u.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=ws(e);return r.forEach(a=>{const o=tr(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),$.waitFor(s)}removeMatchingKeys(e,r,n){const s=ws(e);return $.forEach(r,i=>{const a=tr(i.path);return $.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=ws(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=ws(e);let i=xe();return s.J({range:n,H:!0},(a,o,u)=>{const c=gn(a[1]),h=new ue(c);i=i.add(h)}).next(()=>i)}containsKey(e,r){const n=tr(r.path),s=IDBKeyRange.bound([n],[kw(n)],!1,!0);let i=0;return ws(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],u,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return wa(e).get(r).next(n=>n?Ku(n):null)}}function wa(t){return Tt(t,"targets")}function Lb(t){return Tt(t,"targetGlobal")}function ws(t){return Tt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb([t,e],[r,n]){const s=ve(t,r);return s===0?ve(e,n):s}class kL{constructor(e){this.Un=e,this.buffer=new Ve(Fb),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Fb(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class PL{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ui(r)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await aa(r)}await this.Hn(3e5)})}}class OL{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return $.resolve(Br.oe);const n=new kL(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Ob)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ob):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(n=p,o=Date.now(),this.removeTargets(e,n,r))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(c=Date.now(),Ca()<=Ce.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(u-o)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function LL(t,e){return new OL(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,r){this.db=e,this.garbageCollector=LL(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return bd(e,n)}removeReference(e,r,n){return bd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return bd(e,r)}nr(e,r){return function(s,i){let a=!1;return LI(s).Y(o=>OI(s,o,i).next(u=>(u&&(a=!0),$.resolve(!u)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const u=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,ge.min()),ws(e).delete(function(p){return[0,tr(p.path)]}(a))))});s.push(u)}}).next(()=>$.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return bd(e,r)}tr(e,r){const n=ws(e);let s,i=Br.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:u,sequenceNumber:c})=>{a===0?(i!==Br.oe&&r(new ue(gn(s)),i),i=c,s=u):i=Br.oe}).next(()=>{i!==Br.oe&&r(new ue(gn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bd(t,e){return ws(t).put(function(n,s){return{targetId:0,path:tr(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.changes=new li(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?$.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Ei(e).put(n)}removeEntry(e,r,n){return Ei(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Bh(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=ut.newInvalidDocument(r);return Ei(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Nu(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:ut.newInvalidDocument(r)};return Ei(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Nu(r))},(s,i)=>{n={document:this.ir(r,i),size:jh(i)}}).next(()=>n)}getEntries(e,r){let n=Dr();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Dr(),s=new Je(ue.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,jh(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return $.resolve();let s=new Ve(jb);r.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(Nu(s.first()),Nu(s.last())),a=s.getIterator();let o=a.getNext();return Ei(e).J({index:"documentKeyIndex",range:i},(u,c,h)=>{const p=ue.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&jb(o,p)<0;)n(o,null),o=a.getNext();o&&o.isEqual(p)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?h.$(Nu(o)):h.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),Bh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ei(e).U(IDBKeyRange.bound(o,u,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let h=Dr();for(const p of c){const m=this.ir(ue.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(gc(r,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,r,n,s){let i=Dr();const a=Mb(r,n),o=Mb(r,Rr.max());return Ei(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(u,c,h)=>{const p=this.ir(ue.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(p.key,p),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new ML(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Bb(e).get("remoteDocumentGlobalKey").next(r=>(pe(!!r),r))}rr(e,r){return Bb(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=vL(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(ge.min())))return n}return ut.newInvalidDocument(e)}}function BI(t){return new BL(t)}class ML extends FI{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new li(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Ve((i,a)=>ve(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const u=Ab(this.cr.serializer,a);s=s.add(i.path.popLast());const c=jh(u);n+=c-o.size,r.push(this.cr.addEntry(e,i,u))}else if(n-=o.size,this.trackRemovals){const u=Ab(this.cr.serializer,a.convertToNoDocument(ge.min()));r.push(this.cr.addEntry(e,i,u))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),$.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function Bb(t){return Tt(t,"remoteDocumentGlobal")}function Ei(t){return Tt(t,"remoteDocumentsV14")}function Nu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mb(t,e){const r=e.documentKey.path.toArray();return[t,Bh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function jb(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=ve(r[i],n[i]),s)return s;return s=ve(r.length,n.length),s||(s=ve(r[r.length-2],n[n.length-2]),s||ve(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&dl(n.mutation,s,gr.empty(),nt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,xe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=xe()){const s=En();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Gu();return i.forEach((o,u)=>{a=a.insert(o,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=En();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,xe()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Dr();const a=cl(),o=function(){return cl()}();return r.forEach((u,c)=>{const h=n.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof ss)?i=i.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),dl(h.mutation,c,h.mutation.getFieldMask(),nt.now())):a.set(c.key,gr.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>a.set(c,h)),r.forEach((c,h)=>{var p;return o.set(c,new jL(h,(p=a.get(c))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,r){const n=cl();let s=new Je((a,o)=>a-o),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=n.get(u)||gr.empty();h=o.applyToLocalView(c,h),n.set(u,h);const p=(s.get(o.batchId)||xe()).add(u);s=s.insert(o.batchId,p)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),c=u.key,h=u.value,p=sI();h.forEach(m=>{if(!i.has(m)){const E=dI(r.get(m),n.get(m));E!==null&&p.set(m,E),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return $.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Zw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):$.resolve(En());let o=-1,u=i;return a.next(c=>$.forEach(c,(h,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,xe())).next(h=>({batchId:o,changes:nI(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ue(r)).next(n=>{let s=Gu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Gu();return this.indexManager.getCollectionParents(e,i).next(o=>$.forEach(o,u=>{const c=function(p,m){return new Yo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(h=>{h.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((u,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,ut.newInvalidDocument(h)))});let o=Gu();return a.forEach((u,c)=>{const h=i.get(u);h!==void 0&&dl(h.mutation,c,gr.empty(),nt.now()),gc(r,c)&&(o=o.insert(u,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return $.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:rr(s.createTime)}}(r)),$.resolve()}getNamedQuery(e,r){return $.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:NI(s.bundledQuery),readTime:rr(s.readTime)}}(r)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.overlays=new Je(ue.comparator),this.Ir=new Map}getOverlay(e,r){return $.resolve(this.overlays.get(r))}getOverlays(e,r){const n=En();return $.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),$.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),$.resolve()}getOverlaysForCollection(e,r,n){const s=En(),i=r.length+1,a=new ue(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const u=o.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Je((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let h=i.get(c.largestBatchId);h===null&&(h=En(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=En(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=s)););return $.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new K2(r,n));let i=this.Ir.get(r);i===void 0&&(i=xe(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.Tr=new Ve(xt.Er),this.dr=new Ve(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new xt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new xt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ue(new Fe([])),n=new xt(r,e),s=new xt(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ue(new Fe([])),n=new xt(r,e),s=new xt(r,e+1);let i=xe();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new xt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class xt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ue.comparator(e.key,r.key)||ve(e.wr,r.wr)}static Ar(e,r){return ve(e.wr,r.wr)||ue.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ve(xt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new G2(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new xt(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return $.resolve(a)}lookupMutationBatch(e,r){return $.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new xt(r,0),s=new xt(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ve(ve);return r.forEach(s=>{const i=new xt(s,0),a=new xt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),$.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;ue.isDocumentKey(i)||(i=i.child(""));const a=new xt(new ue(i),0);let o=new Ve(ve);return this.br.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(u.wr)),!0)},a),$.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){pe(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return $.forEach(r.mutations,s=>{const i=new xt(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new xt(r,0),s=this.br.firstAfterOrEqual(n);return $.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.Mr=e,this.docs=function(){return new Je(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return $.resolve(n?n.document.mutableCopy():ut.newInvalidDocument(r))}getEntries(e,r){let n=Dr();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),$.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Dr();const a=r.path,o=new ue(a.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||M2(Pw(h),n)<=0||(s.has(h.key)||gc(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,r,n,s){he()}Or(e,r){return $.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new zL(this)}getSize(e){return $.resolve(this.size)}}class zL extends FI{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),$.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.persistence=e,this.Nr=new li(r=>Xi(r),mc),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Z2,this.targetCount=0,this.kr=ea.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),$.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ea(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,$.resolve()}updateTargetData(e,r){return this.Kn(r),$.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return $.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),$.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),$.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return $.resolve(n)}containsKey(e,r){return $.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Br(0),this.Kr=!1,this.Kr=!0,this.$r=new qL,this.referenceDelegate=e(this),this.Ur=new GL(this),this.indexManager=new SL,this.remoteDocumentCache=function(s){return new $L(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new DI(r),this.Gr=new UL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new VL,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new HL(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){te("MemoryPersistence","Starting transaction:",e);const s=new WL(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return $.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class WL extends Lw{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Jr=new Z2,this.Yr=null}static Zr(e){return new Bf(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),$.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),$.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),$.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,n=>{const s=ue.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,ge.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return $.or([()=>$.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Cf("createOrUpgrade",r);n<1&&s>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z_,{unique:!0}),u.createObjectStore("documentMutations")}(e),Ub(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=$.resolve();return n<3&&s>=3&&(n!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),Ub(e)),a=a.next(()=>function(u){const c=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(u,c){return c.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Z_,{unique:!0});const p=c.store("mutations"),m=h.map(E=>p.put(E));return $.waitFor(m)})}(e,i))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:xO});c.createIndex("collectionPathOverlayIndex",wO,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",IO,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:fO});c.createIndex("documentKeyIndex",pO),c.createIndex("collectionGroupIndex",mO)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:bO}).createIndex("sequenceNumberIndex",vO,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:TO}).createIndex("documentKeyIndex",AO,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=jh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>$.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>$.forEach(o,u=>{pe(u.userId===i.userId);const c=wi(this.serializer,u);return PI(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const u=new Fe(a),c=function(p){return[0,tr(p)]}(u);i.push(r.get(c).next(h=>h?$.resolve():(p=>r.put({targetId:0,path:tr(p),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>$.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:_O});const n=r.store("collectionParents"),s=new J2,i=a=>{if(s.add(a)){const o=a.lastSegment(),u=a.popLast();return n.put({collectionId:o,parent:tr(u)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const u=new Fe(a);return i(u.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,u],c)=>{const h=gn(o);return i(h.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=Ku(s),a=SI(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),u=function(p){return p.document?new ue(Fe.fromString(p.document.name).popFirst(5)):p.noDocument?ue.fromSegments(p.noDocument.path):p.unknownDocument?ue.fromSegments(p.unknownDocument.path):he()}(a).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>$.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=BI(this.serializer),i=new jI(Bf.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(u=>{var c;let h=(c=o.get(u.userId))!==null&&c!==void 0?c:xe();wi(this.serializer,u).keys().forEach(p=>h=h.add(p)),o.set(u.userId,h)}),$.forEach(o,(u,c)=>{const h=new Xt(c),p=Lf.lt(this.serializer,h),m=i.getIndexManager(h),E=Ff.lt(h,this.serializer,m,i.referenceDelegate);return new MI(s,E,p,m).recalculateAndSaveOverlaysForDocumentKeys(new U0(r,Br.oe),u).next()})})}}function Ub(t){t.createObjectStore("targetDocuments",{keyPath:EO}).createIndex("documentTargetsIndex",yO,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gO,{unique:!0}),t.createObjectStore("targetGlobal")}const mm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class e1{constructor(e,r,n,s,i,a,o,u,c,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!e1.D())throw new ie(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FL(this,s),this.Ai=r+"main",this.serializer=new DI(u),this.Ri=new Ws(this.Ai,this.hi,new KL(this.serializer)),this.$r=new AL,this.Ur=new RL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=BI(this.serializer),this.Gr=new TL,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Zt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(Y.FAILED_PRECONDITION,mm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Br(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ui(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ru(e).get("owner").next(r=>$.resolve(this.vi(r)))}Ci(e){return vd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Tt(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return $.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?$.resolve(!0):Ru(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ie(Y.FAILED_PRECONDITION,mm);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&te("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new U0(e,Br.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>vd(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Ff.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new NL(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Lf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){te("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(u){return u===17?SO:u===16?DO:u===15?U2:u===14?Uw:u===13?jw:u===12?CO:u===11?Mw:void he()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new U0(o,this.Qr?this.Qr.next():Br.oe),r==="readwrite-primary"?this.wi(a).next(u=>!!u||this.Si(a)).next(u=>{if(!u)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ie(Y.FAILED_PRECONDITION,Ow);return n(a)}).next(u=>this.Di(a).next(()=>u)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Ru(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ie(Y.FAILED_PRECONDITION,mm)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ru(e).put("owner",r)}static D(){return Ws.D()}bi(e){const r=Ru(e);return r.get("owner").next(n=>this.vi(n)?(te("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):$.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Zt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;Bx()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Zt("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ru(t){return Tt(t,"owner")}function vd(t){return Tt(t,"clientMetadata")}function YL(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=xe(),s=xe();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new t1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Bx()?8:Fw(vt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new QL;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ca()<=Ce.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Da(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(Ca()<=Ce.DEBUG&&te("QueryEngine","Query:",Da(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ca()<=Ce.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Da(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(r))):$.resolve())}Yi(e,r){if(hb(r))return $.resolve(null);let n=jr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=W0(r,null,"F"),n=jr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=xe(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(u=>{const c=this.ts(r,o);return this.ns(r,c,a,u.readTime)?this.Yi(e,W0(r,null,"F")):this.rs(e,c,r,u)}))})))}Zi(e,r,n,s){return hb(r)||s.isEqual(ge.min())?$.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?$.resolve(null):(Ca()<=Ce.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Da(r)),this.rs(e,a,r,iO(s,-1)).next(o=>o))})}ts(e,r){let n=new Ve(tI(e));return r.forEach((s,i)=>{gc(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ca()<=Ce.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Da(r)),this.Ji.getDocumentsMatchingQuery(e,r,Rr.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Je(ve),this._s=new li(i=>Xi(i),mc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function VI(t,e,r,n){return new XL(t,e,r,n)}async function qI(t,e){const r=be(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let u=xe();for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function JL(t,e){const r=be(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,u,c,h){const p=c.batch,m=p.keys();let E=$.resolve();return m.forEach(v=>{E=E.next(()=>h.getEntry(u,v)).next(_=>{const x=c.docVersions.get(v);pe(x!==null),_.version.compareTo(x)<0&&(p.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),h.addEntry(_)))})}),E.next(()=>o.mutationQueue.removeMutationBatch(u,p))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let u=xe();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(u=u.add(o.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function HI(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function ZL(t,e){const r=be(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;o.push(r.Ur.removeMatchingKeys(i,h.removedDocuments,p).next(()=>r.Ur.addMatchingKeys(i,h.addedDocuments,p)));let E=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(gt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,n)),s=s.insert(p,E),function(_,x,w){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,E,h)&&o.push(r.Ur.updateTargetData(i,E))});let u=Dr(),c=xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(e8(i,a,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!n.isEqual(ge.min())){const h=r.Ur.getLastRemoteSnapshotVersion(i).next(p=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(h)}return $.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(r.os=s,i))}function e8(t,e,r){let n=xe(),s=xe();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Dr();return r.forEach((o,u)=>{const c=i.get(o);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),u.isNoDocument()&&u.version.isEqual(ge.min())?(e.removeEntry(o,u.readTime),a=a.insert(o,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(o,u)):te("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function t8(t,e){const r=be(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function r8(t,e){const r=be(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,$.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Hn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function tg(t,e,r){const n=be(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ui(a))throw a;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function Vb(t,e,r){const n=be(t);let s=ge.min(),i=xe();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,h){const p=be(u),m=p._s.get(h);return m!==void 0?$.resolve(p.os.get(m)):p.Ur.getTargetData(c,h)}(n,a,jr(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(u=>{i=u})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:ge.min(),r?i:xe())).next(o=>(n8(n,$O(e),o),{documents:o,Ts:i})))}function n8(t,e,r){let n=t.us.get(e)||ge.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class qb{constructor(){this.activeTargetIds=QO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $I{constructor(){this.so=new qb,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qb,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function gm(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class o8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=gm(),u=this.xo(r,n.toUriEncodedString());te("RestConnection",`Sending RPC '${r}' ${o}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,u,c,s).then(h=>(te("RestConnection",`Received RPC '${r}' ${o}: `,h),h),h=>{throw vo("RestConnection",`RPC '${r}' ${o} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=i8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=gm();return new Promise((a,o)=>{const u=new Iw;u.setWithCredentials(!0),u.listenOnce(Cw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hd.NO_ERROR:const h=u.getResponseJson();te(Vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case Hd.TIMEOUT:te(Vt,`RPC '${e}' ${i} timed out`),o(new ie(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const p=u.getStatus();if(te(Vt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(w)>=0?w:Y.UNKNOWN}(E.status);o(new ie(v,E.message))}else o(new ie(Y.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new ie(Y.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{te(Vt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);te(Vt,`RPC '${e}' ${i} sending request:`,s),u.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=gm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Nw(),o=Sw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=i.join("");te(Vt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=a.createWebChannel(h,u);let m=!1,E=!1;const v=new a8({Io:x=>{E?te(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(te(Vt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),te(Vt,`RPC '${e}' stream ${s} sending:`,x),p.send(x))},To:()=>p.close()}),_=(x,w,b)=>{x.listen(w,T=>{try{b(T)}catch(O){setTimeout(()=>{throw O},0)}})};return _(p,zu.EventType.OPEN,()=>{E||(te(Vt,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),_(p,zu.EventType.CLOSE,()=>{E||(E=!0,te(Vt,`RPC '${e}' stream ${s} transport closed`),v.So())}),_(p,zu.EventType.ERROR,x=>{E||(E=!0,vo(Vt,`RPC '${e}' stream ${s} transport errored:`,x),v.So(new ie(Y.UNAVAILABLE,"The operation could not be completed")))}),_(p,zu.EventType.MESSAGE,x=>{var w;if(!E){const b=x.data[0];pe(!!b);const T=b,O=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(O){te(Vt,`RPC '${e}' stream ${s} received error:`,O);const B=O.status;let V=function(D){const A=pt[D];if(A!==void 0)return pI(A)}(B),N=O.message;V===void 0&&(V=Y.INTERNAL,N="Unknown error status: "+B+" with message "+O.message),E=!0,v.So(new ie(V,N)),p.close()}else te(Vt,`RPC '${e}' stream ${s} received:`,b),v.bo(b)}}),_(o,Dw.STAT_EVENT,x=>{x.stat===M0.PROXY?te(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===M0.NOPROXY&&te(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(){return typeof window<"u"?window:null}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){return new dL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,r,n,s,i,a,o,u){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zI(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Y.RESOURCE_EXHAUSTED?(Zt(r.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ie(Y.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l8 extends GI{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=pL(this.serializer,e),n=function(i){if(!("targetChange"in i))return ge.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?rr(a.readTime):ge.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Q0(this.serializer),r.addTarget=function(i,a){let o;const u=a.target;if(o=Ph(u)?{documents:TI(i,u)}:{query:AI(i,u)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=EI(i,a.resumeToken);const c=K0(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(ge.min())>0){o.readTime=No(i,a.snapshotVersion.toTimestamp());const c=K0(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=gL(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Q0(this.serializer),r.removeTarget=e,this.a_(r)}}class c8 extends GI{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=mL(e.writeResults,e.commitTime),n=rr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Q0(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Fh(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Y0(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(Y.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Y0(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(Y.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class h8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zt(r),this.D_=!1):te("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{ua(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=be(u);c.L_.add(4),await Xo(c),c.q_.set("Unknown"),c.L_.delete(4),await _c(c)}(this))})}),this.q_=new h8(n,s)}}async function _c(t){if(ua(t))for(const e of t.B_)await e(!0)}async function Xo(t){for(const e of t.B_)await e(!1)}function WI(t,e){const r=be(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),i1(r)?s1(r):Jo(r).r_()&&n1(r,e))}function r1(t,e){const r=be(t),n=Jo(r);r.N_.delete(e),n.r_()&&KI(r,e),r.N_.size===0&&(n.r_()?n.o_():ua(r)&&r.q_.set("Unknown"))}function n1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Jo(t).A_(e)}function KI(t,e){t.Q_.xe(e),Jo(t).R_(e)}function s1(t){t.Q_=new oL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Jo(t).start(),t.q_.v_()}function i1(t){return ua(t)&&!Jo(t).n_()&&t.N_.size>0}function ua(t){return be(t).L_.size===0}function YI(t){t.Q_=void 0}async function p8(t){t.q_.set("Online")}async function m8(t){t.N_.forEach((e,r)=>{n1(t,e)})}async function g8(t,e){YI(t),i1(t)?(t.q_.M_(e),s1(t)):t.q_.set("Unknown")}async function E8(t,e,r){if(t.q_.set("Online"),e instanceof gI&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Uh(t,n)}else if(e instanceof Yd?t.Q_.Ke(e):e instanceof mI?t.Q_.He(e):t.Q_.We(e),!r.isEqual(ge.min()))try{const n=await HI(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(u.resumeToken,a))}}),o.targetMismatches.forEach((u,c)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(gt.EMPTY_BYTE_STRING,h.snapshotVersion)),KI(i,u);const p=new Hn(h.target,u,c,h.sequenceNumber);n1(i,p)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){te("RemoteStore","Failed to raise snapshot:",n),await Uh(t,n)}}async function Uh(t,e,r){if(!ui(e))throw e;t.L_.add(1),await Xo(t),t.q_.set("Offline"),r||(r=()=>HI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await _c(t)})}function QI(t,e){return e().catch(r=>Uh(t,r,e))}async function bc(t){const e=be(t),r=ei(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;y8(e);)try{const s=await t8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,_8(e,s)}catch(s){await Uh(e,s)}XI(e)&&JI(e)}function y8(t){return ua(t)&&t.O_.length<10}function _8(t,e){t.O_.push(e);const r=ei(t);r.r_()&&r.V_&&r.m_(e.mutations)}function XI(t){return ua(t)&&!ei(t).n_()&&t.O_.length>0}function JI(t){ei(t).start()}async function b8(t){ei(t).p_()}async function v8(t){const e=ei(t);for(const r of t.O_)e.m_(r.mutations)}async function T8(t,e,r){const n=t.O_.shift(),s=W2.from(n,e,r);await QI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bc(t)}async function A8(t,e){e&&ei(t).V_&&await async function(n,s){if(function(a){return sL(a)&&a!==Y.ABORTED}(s.code)){const i=n.O_.shift();ei(n).s_(),await QI(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bc(n)}}(t,e),XI(t)&&JI(t)}async function $b(t,e){const r=be(t);r.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const n=ua(r);r.L_.add(3),await Xo(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await _c(r)}async function x8(t,e){const r=be(t);e?(r.L_.delete(2),await _c(r)):e||(r.L_.add(2),await Xo(r),r.q_.set("Unknown"))}function Jo(t){return t.K_||(t.K_=function(r,n,s){const i=be(r);return i.w_(),new l8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:p8.bind(null,t),Ro:m8.bind(null,t),mo:g8.bind(null,t),d_:E8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),i1(t)?s1(t):t.q_.set("Unknown")):(await t.K_.stop(),YI(t))})),t.K_}function ei(t){return t.U_||(t.U_=function(r,n,s){const i=be(r);return i.w_(),new c8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:b8.bind(null,t),mo:A8.bind(null,t),f_:v8.bind(null,t),g_:T8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bc(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new a1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o1(t,e){if(Zt("AsyncQueue",`${e}: ${t}`),ui(t))return new ie(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ue.comparator(r.key,n.key):(r,n)=>ue.comparator(r.key,n.key),this.keyedMap=Gu(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new ao(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ao;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.W_=new Je(ue.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ro{constructor(e,r,n,s,i,a,o,u,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Ro(e,r,ao.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class I8{constructor(){this.queries=Gb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=be(r),i=s.queries;s.queries=Gb(),i.forEach((a,o)=>{for(const u of o.j_)u.onError(n)})})(this,new ie(Y.ABORTED,"Firestore shutting down"))}}function Gb(){return new li(t=>eI(t),Rf)}async function ZI(t,e){const r=be(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new w8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=o1(a,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&u1(r)}async function eC(t,e){const r=be(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function C8(t,e){const r=be(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&u1(r)}function D8(t,e,r){const n=be(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function u1(t){t.Y_.forEach(e=>{e.next()})}var rg,Wb;(Wb=rg||(rg={})).ea="default",Wb.Cache="cache";class tC{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ro(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.key=e}}class nC{constructor(e){this.key=e}}class S8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=tI(e),this.Ra=new ao(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new zb,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),E=gc(this.query,p)?p:null,v=!!m&&this.mutatedKeys.has(m.key),_=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let x=!1;m&&E?m.data.isEqual(E.data)?v!==_&&(n.track({type:3,doc:E}),x=!0):this.ga(m,E)||(n.track({type:2,doc:E}),x=!0,(u&&this.Aa(E,u)>0||c&&this.Aa(E,c)<0)&&(o=!0)):!m&&E?(n.track({type:0,doc:E}),x=!0):m&&!E&&(n.track({type:1,doc:m}),x=!0,(u||c)&&(o=!0)),x&&(E?(a=a.add(E),i=_?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,p)=>function(E,v){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return _(E)-_(v)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,a.length!==0||c?{snapshot:new Ro(this.query,e.Ra,i,a,e.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new nC(n))}),this.da.forEach(n=>{e.has(n)||r.push(new rC(n))}),r}ba(e){this.Ta=e.Ts,this.da=xe();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ro.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class N8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class R8{constructor(e){this.key=e,this.va=!1}}class k8{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new li(o=>eI(o),Rf),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(ue.comparator),this.Na=new Map,this.La=new Z2,this.Ba={},this.ka=new Map,this.qa=ea.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P8(t,e,r=!0){const n=lC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await sC(n,e,r,!0),s}async function O8(t,e){const r=lC(t);await sC(r,e,!0,!1)}async function sC(t,e,r,n){const s=await r8(t.localStore,jr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await L8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&WI(t.remoteStore,s),o}async function L8(t,e,r,n,s){t.Ka=(p,m,E)=>async function(_,x,w,b){let T=x.view.ma(w);T.ns&&(T=await Vb(_.localStore,x.query,!1).then(({documents:N})=>x.view.ma(N,T)));const O=b&&b.targetChanges.get(x.targetId),B=b&&b.targetMismatches.get(x.targetId)!=null,V=x.view.applyChanges(T,_.isPrimaryClient,O,B);return Yb(_,x.targetId,V.wa),V.snapshot}(t,p,m,E);const i=await Vb(t.localStore,e,!0),a=new S8(e,i.Ts),o=a.ma(i.documents),u=yc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,u);Yb(t,r,c.wa);const h=new N8(e,r,a);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function F8(t,e,r){const n=be(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Rf(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await tg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&r1(n.remoteStore,s.targetId),ng(n,s.targetId)}).catch(aa)):(ng(n,s.targetId),await tg(n.localStore,s.targetId,!0))}async function B8(t,e){const r=be(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),r1(r.remoteStore,n.targetId))}async function M8(t,e,r){const n=cC(t);try{const s=await function(a,o){const u=be(a),c=nt.now(),h=o.reduce((E,v)=>E.add(v.key),xe());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let v=Dr(),_=xe();return u.cs.getEntries(E,h).next(x=>{v=x,v.forEach((w,b)=>{b.isValidDocument()||(_=_.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,v)).next(x=>{p=x;const w=[];for(const b of o){const T=rL(b,p.get(b.key).overlayedDocument);T!=null&&w.push(new ss(b.key,T,zw(T.value.mapValue),bt.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,w,o)}).next(x=>{m=x;const w=x.applyToLocalDocumentSet(p,_);return u.documentOverlayCache.saveOverlays(E,x.batchId,w)})}).then(()=>({batchId:m.batchId,changes:nI(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,u){let c=a.Ba[a.currentUser.toKey()];c||(c=new Je(ve)),c=c.insert(o,u),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await vc(n,s.changes),await bc(n.remoteStore)}catch(s){const i=o1(s,"Failed to persist write");r.reject(i)}}async function iC(t,e){const r=be(t);try{const n=await ZL(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?pe(a.va):s.removedDocuments.size>0&&(pe(a.va),a.va=!1))}),await vc(r,n,e)}catch(n){await aa(n)}}function Kb(t,e,r){const n=be(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const u=be(a);u.onlineState=o;let c=!1;u.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(o)&&(c=!0)}),c&&u1(u)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function j8(t,e,r){const n=be(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new Je(ue.comparator);a=a.insert(i,ut.newNoDocument(i,ge.min()));const o=xe().add(i),u=new Of(ge.min(),new Map,new Je(ve),a,o);await iC(n,u),n.Oa=n.Oa.remove(i),n.Na.delete(e),l1(n)}else await tg(n.localStore,e,!1).then(()=>ng(n,e,r)).catch(aa)}async function U8(t,e){const r=be(t),n=e.batch.batchId;try{const s=await JL(r.localStore,e);oC(r,n,null),aC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await vc(r,s)}catch(s){await aa(s)}}async function V8(t,e,r){const n=be(t);try{const s=await function(a,o){const u=be(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,o).next(p=>(pe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(n.localStore,e);oC(n,e,r),aC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await vc(n,s)}catch(s){await aa(s)}}function aC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function oC(t,e,r){const n=be(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function ng(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||uC(t,n)})}function uC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(r1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),l1(t))}function Yb(t,e,r){for(const n of r)n instanceof rC?(t.La.addReference(n.key,e),q8(t,n)):n instanceof nC?(te("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||uC(t,n.key)):he()}function q8(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(te("SyncEngine","New document in limbo: "+r),t.xa.add(n),l1(t))}function l1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ue(Fe.fromString(e)),n=t.qa.next();t.Na.set(n,new R8(r)),t.Oa=t.Oa.insert(r,n),WI(t.remoteStore,new Hn(jr(Nf(r.path)),n,"TargetPurposeLimboResolution",Br.oe))}}async function vc(t,e,r){const n=be(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,u)=>{a.push(n.Ka(u,e,r).then(c=>{var h;if((c||r)&&n.isPrimaryClient){const p=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=t1.Wi(u.targetId,c);i.push(p)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(u,c){const h=be(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(c,m=>$.forEach(m.$i,E=>h.persistence.referenceDelegate.addReference(p,m.targetId,E)).next(()=>$.forEach(m.Ui,E=>h.persistence.referenceDelegate.removeReference(p,m.targetId,E)))))}catch(p){if(!ui(p))throw p;te("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const E=h.os.get(m),v=E.snapshotVersion,_=E.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(m,_)}}}(n.localStore,i))}async function H8(t,e){const r=be(t);if(!r.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const n=await qI(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(u=>{u.reject(new ie(Y.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await vc(r,n.hs)}}function $8(t,e){const r=be(t),n=r.Na.get(e);if(n&&n.va)return xe().add(n.key);{let s=xe();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function lC(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j8.bind(null,e),e.Ca.d_=C8.bind(null,e.eventManager),e.Ca.$a=D8.bind(null,e.eventManager),e}function cC(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V8.bind(null,e),e}class Kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return VI(this.persistence,new UI,e.initialUser,this.serializer)}Ga(e){return new jI(Bf.Zr,this.serializer)}Wa(e){return new $I}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kl.provider={build:()=>new Kl};class z8 extends Kl{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await cC(this.Ja.syncEngine),await bc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return VI(this.persistence,new UI,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new PL(n,e.asyncQueue,r)}Ha(e,r){const n=new lO(r,this.persistence);return new uO(e.asyncQueue,n)}Ga(e){const r=YL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new e1(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,u8(),Qd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new $I}}class Vh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Kb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=H8.bind(null,this.syncEngine),await x8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I8}()}createDatastore(e){const r=Mf(e.databaseInfo.databaseId),n=function(i){return new o8(i)}(e.databaseInfo);return function(i,a,o,u){return new d8(i,a,o,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new f8(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>Kb(this.syncEngine,r,0),function(){return Hb.D()?new Hb:new s8}())}createSyncEngine(e,r){return function(s,i,a,o,u,c,h){const p=new k8(s,i,a,o,u,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=be(s);te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Xo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Vh.provider={build:()=>new Vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Xt.UNAUTHENTICATED,this.clientId=Rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{te("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(te("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=o1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Em(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await qI(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await hC(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>$b(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>$b(e.remoteStore,s)),t._onlineComponents=e}async function hC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Em(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;vo("Error using user provided cache. Falling back to memory cache: "+r),await Em(t,new Kl)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Em(t,new Kl);return t._offlineComponents}async function c1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Qb(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Qb(t,new Vh))),t._onlineComponents}function fC(t){return hC(t).then(e=>e.persistence)}function pC(t){return c1(t).then(e=>e.remoteStore)}function W8(t){return c1(t).then(e=>e.syncEngine)}async function mC(t){const e=await c1(t),r=e.eventManager;return r.onListen=P8.bind(null,e.syncEngine),r.onUnlisten=F8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=O8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=B8.bind(null,e.syncEngine),r}function K8(t){return t.asyncQueue.enqueue(async()=>{const e=await fC(t),r=await pC(t);return e.setNetworkEnabled(!0),function(s){const i=be(s);return i.L_.delete(0),_c(i)}(r)})}function Y8(t){return t.asyncQueue.enqueue(async()=>{const e=await fC(t),r=await pC(t);return e.setNetworkEnabled(!1),async function(s){const i=be(s);i.L_.add(0),await Xo(i),i.q_.set("Offline")}(r)})}function Q8(t,e,r={}){const n=new Tn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,u,c){const h=new dC({next:m=>{h.Za(),a.enqueueAndForget(()=>eC(i,p));const E=m.docs.has(o);!E&&m.fromCache?c.reject(new ie(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&u.source==="server"?c.reject(new ie(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new tC(Nf(o.path),h,{includeMetadataChanges:!0,_a:!0});return ZI(i,p)}(await mC(t),t.asyncQueue,e,r,n)),n.promise}function X8(t,e,r={}){const n=new Tn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,u,c){const h=new dC({next:m=>{h.Za(),a.enqueueAndForget(()=>eC(i,p)),m.fromCache&&u.source==="server"?c.reject(new ie(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new tC(o,h,{includeMetadataChanges:!0,_a:!0});return ZI(i,p)}(await mC(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e,r){if(!r)throw new ie(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J8(t,e,r,n){if(e===!0&&n===!0)throw new ie(Y.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Jb(t){if(!ue.isDocumentKey(t))throw new ie(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zb(t){if(ue.isDocumentKey(t))throw new ie(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=jf(t);throw new ie(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ie(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d1{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ev({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ev(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new X5;switch(n.type){case"firstParty":return new eO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ie(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Xb.get(r);n&&(te("ComponentProvider","Removing Datastore"),Xb.delete(r),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class nr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Ks extends la{constructor(e,r,n){super(e,r,Nf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new ue(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function rn(t,e,...r){if(t=lt(t),EC("collection","path",e),t instanceof d1){const n=Fe.fromString(e,...r);return Zb(n),new Ks(t,null,n)}{if(!(t instanceof nr||t instanceof Ks))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fe.fromString(e,...r));return Zb(n),new Ks(t.firestore,null,n)}}function et(t,e,...r){if(t=lt(t),arguments.length===1&&(e=Rw.newId()),EC("doc","path",e),t instanceof d1){const n=Fe.fromString(e,...r);return Jb(n),new nr(t,null,new ue(n))}{if(!(t instanceof nr||t instanceof Ks))throw new ie(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fe.fromString(e,...r));return Jb(n),new nr(t.firestore,t instanceof Ks?t.converter:null,new ue(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zI(this,"async_queue_retry"),this.Vu=()=>{const n=Qd();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Qd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Qd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Tn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ui(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Zt("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=a1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&he()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=-1;class on extends d1{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new tv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tv(e),this._firestoreClient=void 0,await e}}}function e9(t,e,r){r||(r="(default)");const n=C2(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Bl(i,e))return s;throw new ie(Y.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(Y.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function Zo(t){if(t._terminated)throw new ie(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yC(t),t._firestoreClient}function yC(t){var e,r,n;const s=t._freezeSettings(),i=function(o,u,c,h){return new RO(o,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new G8(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(t._componentsProvider))}function t9(t,e){vo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return r9(t,Vh.provider,{build:n=>new z8(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function r9(t,e,r){if((t=br(t,on))._firestoreClient||t._terminated)throw new ie(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ie(Y.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},yC(t)}function n9(t){return K8(Zo(t=br(t,on)))}function s9(t){return Y8(Zo(t=br(t,on)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(gt.fromBase64String(e))}catch(r){throw new ie(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ko(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ie(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ie(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ie(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=/^__.*__$/;class a9{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ss(e,this.data,this.fieldMask,r,this.fieldTransforms):new Qo(e,this.data,r,this.fieldTransforms)}}class _C{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ss(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function bC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class p1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new p1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bC(this.Cu)&&i9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class o9{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Mf(e)}Qu(e,r,n,s=!1){return new p1({Cu:e,methodName:r,qu:n,path:tt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xc(t){const e=t._freezeSettings(),r=Mf(t._databaseId);return new o9(t._databaseId,!!e.ignoreUndefinedProperties,r)}function m1(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);y1("Data must be an object, but it was:",a,n);const o=AC(n,a);let u,c;if(i.merge)u=new gr(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=sg(e,p,r);if(!a.contains(m))throw new ie(Y.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wC(h,m)||h.push(m)}u=new gr(h),c=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=a.fieldTransforms;return new a9(new zt(o),u,c)}class Uf extends Ac{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}class g1 extends Ac{_toFieldTransform(e){return new z2(e.path,new Io)}isEqual(e){return e instanceof g1}}class E1 extends Ac{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new So(e.serializer,aI(e.serializer,this.$u));return new z2(e.path,r)}isEqual(e){return e instanceof E1&&this.$u===e.$u}}function vC(t,e,r,n){const s=t.Qu(1,e,r);y1("Data must be an object, but it was:",s,n);const i=[],a=zt.empty();oa(n,(u,c)=>{const h=_1(e,u,r);c=lt(c);const p=s.Nu(h);if(c instanceof Uf)i.push(h);else{const m=wc(c,p);m!=null&&(i.push(h),a.set(h,m))}});const o=new gr(i);return new _C(a,o,s.fieldTransforms)}function TC(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[sg(e,n,r)],u=[s];if(i.length%2!=0)throw new ie(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(sg(e,i[m])),u.push(i[m+1]);const c=[],h=zt.empty();for(let m=o.length-1;m>=0;--m)if(!wC(c,o[m])){const E=o[m];let v=u[m];v=lt(v);const _=a.Nu(E);if(v instanceof Uf)c.push(E);else{const x=wc(v,_);x!=null&&(c.push(E),h.set(E,x))}}const p=new gr(c);return new _C(h,p,a.fieldTransforms)}function u9(t,e,r,n=!1){return wc(r,t.Qu(n?4:3,e))}function wc(t,e){if(xC(t=lt(t)))return y1("Unsupported field value:",e,t),AC(t,e);if(t instanceof Ac)return function(n,s){if(!bC(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let u=wc(o,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=lt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return aI(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=nt.fromDate(n);return{timestampValue:No(s.serializer,i)}}if(n instanceof nt){const i=new nt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:No(s.serializer,i)}}if(n instanceof h1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ko)return{bytesValue:EI(s.serializer,n._byteString)};if(n instanceof nr){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Q2(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof f1)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Bu("VectorValues must only contain numeric values.");return $2(o.serializer,u)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${jf(n)}`)}(t,e)}function AC(t,e){const r={};return Vw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(t,(n,s)=>{const i=wc(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function xC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof h1||t instanceof ko||t instanceof nr||t instanceof Ac||t instanceof f1)}function y1(t,e,r){if(!xC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=jf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function sg(t,e,r){if((e=lt(e))instanceof Tc)return e._internalPath;if(typeof e=="string")return _1(t,e);throw qh("Field path arguments must be of type string or ",t,!1,void 0,r)}const l9=new RegExp("[~\\*/\\[\\]]");function _1(t,e,r){if(e.search(l9)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Tc(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function qh(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${n}`),a&&(u+=` in document ${s}`),u+=")"),new ie(Y.INVALID_ARGUMENT,o+t+u)}function wC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Vf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class c9 extends IC{data(){return super.data()}}function Vf(t,e){return typeof e=="string"?_1(t,e):e instanceof Tc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class b1{}class CC extends b1{}function ti(t,e,...r){let n=[];e instanceof b1&&n.push(e),n=n.concat(r),function(i){const a=i.filter(u=>u instanceof v1).length,o=i.filter(u=>u instanceof qf).length;if(a>1||a>0&&o>0)throw new ie(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class qf extends CC{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new qf(e,r,n)}_apply(e){const r=this._parse(e);return DC(e._query,r),new la(e.firestore,e.converter,G0(e._query,r))}_parse(e){const r=xc(e.firestore);return function(i,a,o,u,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){nv(p,h);const E=[];for(const v of p)E.push(rv(u,i,v));m={arrayValue:{values:E}}}else m=rv(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||nv(p,h),m=u9(o,a,p,h==="in"||h==="not-in");return De.create(c,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Bi(t,e,r){const n=e,s=Vf("where",t);return qf._create(s,n,r)}class v1 extends b1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new v1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Me.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const u of o)DC(a,u),a=G0(a,u)}(e._query,r),new la(e.firestore,e.converter,G0(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class T1 extends CC{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new T1(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(i,a)}(e._query,this._field,this._direction);return new la(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Yo(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Hh(t,e="asc"){const r=e,n=Vf("orderBy",t);return T1._create(n,r)}function rv(t,e,r){if(typeof(r=lt(r))=="string"){if(r==="")throw new ie(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&r.indexOf("/")!==-1)throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Fe.fromString(r));if(!ue.isDocumentKey(n))throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return zl(t,new ue(n))}if(r instanceof nr)return zl(t,r._key);throw new ie(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(r)}.`)}function nv(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DC(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class h9{convertValue(e,r="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return oa(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Ye(a.doubleValue));return new f1(i)}convertGeoPoint(e){return new h1(Ye(e.latitude),Ye(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=q2(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const r=Zn(e);return new nt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Fe.fromString(e);pe(CI(n));const s=new Yi(n.get(1),n.get(3)),i=new ue(n.popFirst(5));return s.isEqual(r)||Zt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SC extends IC{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Vf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Xd extends SC{data(e={}){return super.data(e)}}class f9{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Yu(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Xd(this._firestore,this._userDataWriter,n.key,n,new Yu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ie(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const u=new Xd(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Yu(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const u=new Xd(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Yu(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:p9(o.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function p9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){t=br(t,nr);const e=br(t.firestore,on);return Q8(Zo(e),t._key).then(r=>m9(e,t,r))}class NC extends h9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,r)}}function ta(t){t=br(t,la);const e=br(t.firestore,on),r=Zo(e),n=new NC(e);return d9(t._query),X8(r,t._query).then(s=>new f9(e,n,t,s))}function Ga(t,e,r){t=br(t,nr);const n=br(t.firestore,on),s=A1(t.converter,e,r);return Ic(n,[m1(xc(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,bt.none())])}function Ns(t,e,r,...n){t=br(t,nr);const s=br(t.firestore,on),i=xc(s);let a;return a=typeof(e=lt(e))=="string"||e instanceof Tc?TC(i,"updateDoc",t._key,e,r,n):vC(i,"updateDoc",t._key,e),Ic(s,[a.toMutation(t._key,bt.exists(!0))])}function $h(t){return Ic(br(t.firestore,on),[new Ec(t._key,bt.none())])}function x1(t,e){const r=br(t.firestore,on),n=et(t),s=A1(t.converter,e);return Ic(r,[m1(xc(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,bt.exists(!1))]).then(()=>n)}function Ic(t,e){return function(n,s){const i=new Tn;return n.asyncQueue.enqueueAndForget(async()=>M8(await W8(n),s,i)),i.promise}(Zo(t),e)}function m9(t,e,r){const n=r.docs.get(e._key),s=new NC(t);return new SC(t,s,e._key,n,new Yu(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=xc(e)}set(e,r,n){this._verifyNotCommitted();const s=ym(e,this._firestore),i=A1(s.converter,r,n),a=m1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,bt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=ym(e,this._firestore);let a;return a=typeof(r=lt(r))=="string"||r instanceof Tc?TC(this._dataReader,"WriteBatch.update",i._key,r,n,s):vC(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=ym(e,this._firestore);return this._mutations=this._mutations.concat(new Ec(r._key,bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ym(t,e){if((t=lt(t)).firestore!==e)throw new ie(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function w1(){return new g1("serverTimestamp")}function Rs(t){return new E1("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){return Zo(t=br(t,on)),new g9(t,e=>Ic(t,e))}(function(e,r=!0){(function(s){Ko=s})(Go),_o(new zi("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new on(new J5(n.getProvider("auth-internal")),new rO(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yi(c.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Gs(Q_,"4.7.3",e),Gs(Q_,"4.7.3","esm2017")})();const E9={apiKey:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",authDomain:"supercurators.firebaseapp.com",projectId:"supercurators",storageBucket:"supercurators.appspot.com",messagingSenderId:"901131239470",appId:"1:901131239470:web:abc123def456"},RC=Vx(E9),dt=K5(RC),Te=e9(RC,{cacheSizeBytes:Z8}),y9=async()=>{try{try{await t9(Te),console.log("Offline persistence enabled")}catch(t){t instanceof Cn&&(t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence enabled in another tab"):t.code==="unimplemented"&&console.warn("Browser does not support persistence"))}return await dt.authStateReady(),console.log("Firebase initialized successfully"),!0}catch(t){return console.error("Firebase initialization error:",t),!1}},_9={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",VITE_FIREBASE_APP_ID:"1:901131239470:web:abc123def456",VITE_FIREBASE_AUTH_DOMAIN:"supercurators.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"901131239470",VITE_FIREBASE_PROJECT_ID:"supercurators",VITE_FIREBASE_STORAGE_BUCKET:"supercurators.appspot.com"},iv=t=>{let e;const r=new Set,n=(h,p)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const E=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(v=>v(e,E))}},s=()=>e,u={setState:n,getState:s,getInitialState:()=>c,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{(_9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(n,s,u);return u},b9=t=>t?iv(t):iv;var kC={exports:{}},PC={},OC={exports:{}},LC={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=M;function v9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var T9=typeof Object.is=="function"?Object.is:v9,A9=Po.useState,x9=Po.useEffect,w9=Po.useLayoutEffect,I9=Po.useDebugValue;function C9(t,e){var r=e(),n=A9({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return w9(function(){s.value=r,s.getSnapshot=e,_m(s)&&i({inst:s})},[t,r,e]),x9(function(){return _m(s)&&i({inst:s}),t(function(){_m(s)&&i({inst:s})})},[t]),I9(r),r}function _m(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!T9(t,r)}catch{return!0}}function D9(t,e){return e()}var S9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D9:C9;LC.useSyncExternalStore=Po.useSyncExternalStore!==void 0?Po.useSyncExternalStore:S9;OC.exports=LC;var N9=OC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf=M,R9=N9;function k9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var P9=typeof Object.is=="function"?Object.is:k9,O9=R9.useSyncExternalStore,L9=Hf.useRef,F9=Hf.useEffect,B9=Hf.useMemo,M9=Hf.useDebugValue;PC.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=L9(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=B9(function(){function u(E){if(!c){if(c=!0,h=E,E=n(E),s!==void 0&&a.hasValue){var v=a.value;if(s(v,E))return p=v}return p=E}if(v=p,P9(h,E))return v;var _=n(E);return s!==void 0&&s(v,_)?v:(h=E,p=_)}var c=!1,h,p,m=r===void 0?null:r;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,r,n,s]);var o=O9(t,i[0],i[1]);return F9(function(){a.hasValue=!0,a.value=o},[o]),M9(o),o};kC.exports=PC;var j9=kC.exports;const U9=sf(j9),FC={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",VITE_FIREBASE_APP_ID:"1:901131239470:web:abc123def456",VITE_FIREBASE_AUTH_DOMAIN:"supercurators.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"901131239470",VITE_FIREBASE_PROJECT_ID:"supercurators",VITE_FIREBASE_STORAGE_BUCKET:"supercurators.appspot.com"},{useDebugValue:V9}=ET,{useSyncExternalStoreWithSelector:q9}=U9;let av=!1;const H9=t=>t;function $9(t,e=H9,r){(FC?"production":void 0)!=="production"&&r&&!av&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),av=!0);const n=q9(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return V9(n),n}const ov=t=>{(FC?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?b9(t):t,r=(n,s)=>$9(e,n,s);return Object.assign(r,e),r},Cc=t=>t?ov(t):ov,qr=Cc(t=>({user:null,loading:!1,error:null,initialized:!1,initialize:async()=>{try{return await OP(dt,gw),new Promise(e=>{const r=BP(dt,async n=>{try{if(n){const s=await Mi(et(Te,"users",n.uid));if(s.exists())t({user:s.data(),initialized:!0});else{const i={id:n.uid,email:n.email,name:n.displayName||n.email.split("@")[0],avatar_url:n.photoURL||`https://api.dicebear.com/7.x/avatars/svg?seed=${n.email}`,created_at:new Date().toISOString()};await Ga(et(Te,"users",n.uid),i),t({user:i,initialized:!0})}}else t({user:null,initialized:!0})}catch(s){console.error("Error fetching user data:",s),t({user:null,initialized:!0})}finally{r(),e()}})})}catch(e){console.error("Auth initialization error:",e),t({user:null,initialized:!0})}},setUser:e=>t({user:e}),clearError:()=>t({error:null}),login:async(e,r)=>{try{t({loading:!0,error:null});const{user:n}=await kP(dt,e,r),s=await Mi(et(Te,"users",n.uid));if(s.exists())t({user:s.data()});else{const i={id:n.uid,email:n.email,name:n.displayName||e.split("@")[0],avatar_url:n.photoURL||`https://api.dicebear.com/7.x/avatars/svg?seed=${e}`,created_at:new Date().toISOString()};await Ga(et(Te,"users",n.uid),i),t({user:i})}}catch(n){throw console.error("Login error:",n),t({error:n.code==="auth/invalid-credential"?"Invalid email or password":"Failed to sign in. Please try again.",user:null}),n}finally{t({loading:!1})}},register:async e=>{try{t({loading:!0,error:null});const{user:r}=await RP(dt,e.email,e.password);await j_(r,{displayName:e.name,photoURL:e.avatar_url||`https://api.dicebear.com/7.x/avatars/svg?seed=${e.email}`});const n={id:r.uid,email:e.email,name:e.name,avatar_url:e.avatar_url||`https://api.dicebear.com/7.x/avatars/svg?seed=${e.email}`,created_at:new Date().toISOString()};await Ga(et(Te,"users",r.uid),n),t({user:n})}catch(r){throw console.error("Registration error:",r),t({error:r.code==="auth/email-already-in-use"?"Email already in use":"Failed to create account. Please try again.",user:null}),r}finally{t({loading:!1})}},updateProfile:async e=>{try{t({loading:!0,error:null});const r=dt.currentUser;if(!r)throw new Error("Not authenticated");const n=et(Te,"users",r.uid);if(await Ga(n,e,{merge:!0}),e.name||e.avatar_url)try{await j_(r,{displayName:e.name||null,photoURL:e.avatar_url||null})}catch(i){console.warn("Firebase auth profile update failed:",i)}const s=await Mi(n);if(!s.exists())throw new Error("User profile not found");t({user:s.data()})}catch(r){throw console.error("Profile update error:",r),t({error:"Failed to update profile. Please try again."}),r}finally{t({loading:!1})}},logout:async()=>{try{t({loading:!0,error:null}),await MP(dt),t({user:null})}catch(e){throw console.error("Logout error:",e),t({error:"Failed to sign out. Please try again."}),e}finally{t({loading:!1})}}}));function zh(t){const e=Object.entries(t).reduce((r,[n,s])=>(s===void 0||Array.isArray(s)&&s.length===0||s===null||(r[n]=s),r),{});return e.created_at||(e.created_at=w1()),e}function z9(t){return!!(t.title&&typeof t.title=="string"&&t.description&&typeof t.description=="string")}const Hr=Cc((t,e)=>({links:[],loading:!1,error:null,isOffline:!navigator.onLine,fetchLinks:async()=>{try{t({loading:!0,error:null});const r=ti(rn(Te,"links"),Hh("created_at","desc")),n=await ta(r),s=dt.currentUser,i=[];let a=[];if(s){const o=ti(rn(Te,"likes"),Bi("userId","==",s.uid));a=(await ta(o)).docs.map(c=>c.data().linkId)}n.forEach(o=>{var c,h,p;const u=o.data();i.push({id:o.id,...u,created_at:((p=(h=(c=u.created_at)==null?void 0:c.toDate)==null?void 0:h.call(c))==null?void 0:p.toISOString())||new Date().toISOString(),liked:a.includes(o.id),likes:u.likes||0,emoji_tags:u.emoji_tags||[],topic_ids:u.topic_ids||[],supercuration_ids:u.supercuration_ids||[],user:u.user||{id:u.created_by,name:"Unknown User",avatar_url:`https://api.dicebear.com/7.x/avatars/svg?seed=${u.created_by}`}})}),t({links:i,error:null})}catch(r){console.error("Error fetching links:",r),t({error:"Failed to fetch links"})}finally{t({loading:!1})}},addLink:async r=>{var n,s;try{const i=dt.currentUser;if(!i)throw new Error("Must be logged in to share links");if(!z9(r))throw new Error("Invalid link data");const a=zh({...r,created_by:i.uid,user:{id:i.uid,name:i.displayName||((n=i.email)==null?void 0:n.split("@")[0])||"Anonymous",avatar_url:i.photoURL||`https://api.dicebear.com/7.x/avatars/svg?seed=${i.email}`}}),u={id:(await x1(rn(Te,"links"),a)).id,...r,created_by:i.uid,created_at:new Date().toISOString(),liked:!1,likes:0,reposts_count:0,user:a.user};if(t(c=>({links:[u,...c.links],error:null})),(s=r.supercuration_ids)!=null&&s.length){const c=sv(Te);for(const h of r.supercuration_ids){const p=et(Te,"supercurations",h);c.update(p,{links_count:Rs(1)})}await c.commit()}}catch(i){throw console.error("Error sharing link:",i),i}},updateLink:async(r,n)=>{try{if(!dt.currentUser)throw new Error("Must be logged in to update links");const i=et(Te,"links",r);await Ns(i,zh(n)),t(a=>({links:a.links.map(o=>o.id===r?{...o,...n}:o),error:null}))}catch(s){throw console.error("Error updating link:",s),s}},removeLink:async r=>{var n;try{if(!dt.currentUser)throw new Error("Must be logged in to delete links");const i=et(Te,"links",r),o=(await Mi(i)).data();if(await $h(i),(n=o==null?void 0:o.supercuration_ids)!=null&&n.length){const u=sv(Te);for(const c of o.supercuration_ids){const h=et(Te,"supercurations",c);u.update(h,{links_count:Rs(-1)})}await u.commit()}t(u=>({links:u.links.filter(c=>c.id!==r),error:null}))}catch(s){throw console.error("Error removing link:",s),s}},toggleLike:async r=>{try{const n=dt.currentUser;if(!n)throw new Error("Must be logged in to like links");const s=`${r}_${n.uid}`,i=et(Te,"likes",s),a=et(Te,"links",r);(await Mi(i)).exists()?(await $h(i),await Ns(a,{likes:Rs(-1)}),t(u=>({links:u.links.map(c=>c.id===r?{...c,liked:!1,likes:c.likes-1}:c),error:null}))):(await Ga(i,{userId:n.uid,linkId:r,createdAt:w1()}),await Ns(a,{likes:Rs(1)}),t(u=>({links:u.links.map(c=>c.id===r?{...c,liked:!0,likes:c.likes+1}:c),error:null})))}catch(n){throw console.error("Error toggling like:",n),n}},setOfflineStatus:async r=>{try{r?await s9(Te):(await n9(Te),await e().fetchLinks()),t({isOffline:r})}catch(n){console.error("Error updating network status:",n)}}}));function G9(){return qr(e=>e.user)?d.jsx(x2,{to:"/home",replace:!0}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Supercurators"})}),d.jsx(Nx,{})]})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Se=(t,e)=>{const r=M.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:u,...c},h)=>M.createElement("svg",{ref:h,...W9,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${K9(t)}`,o].join(" "),...c},[...e.map(([p,m])=>M.createElement(p,m)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=Se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=Se("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=Se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=Se("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=Se("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Se("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=Se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Se("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=Se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=Se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=Se("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=Se("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=Se("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Se("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=Se("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function uF({onClose:t,onSave:e}){const{user:r,updateProfile:n,error:s}=qr(),i=M.useRef(null),[a,o]=M.useState({name:(r==null?void 0:r.name)||"",avatar_url:(r==null?void 0:r.avatar_url)||"",bio:(r==null?void 0:r.bio)||"",location:(r==null?void 0:r.location)||"",website:(r==null?void 0:r.website)||""}),[u,c]=M.useState(!1),h=m=>{var v;const E=(v=m.target.files)==null?void 0:v[0];if(E){const _=new FileReader;_.onloadend=()=>{o(x=>({...x,avatar_url:_.result}))},_.readAsDataURL(E)}},p=async m=>{if(m.preventDefault(),!!r)try{c(!0),await n(a),e()}catch(E){console.error("Failed to update profile:",E)}finally{c(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:t}),d.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-2xl shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsx("button",{onClick:t,children:d.jsx(Lt,{className:"w-5 h-5"})}),d.jsx("h2",{className:"text-xl font-bold",children:"Edit profile"})]}),d.jsx("button",{onClick:p,disabled:u,className:"px-4 py-1.5 bg-gray-900 text-white rounded-full font-bold text-sm hover:bg-gray-800 disabled:opacity-50",children:u?"Saving...":"Save"})]}),d.jsxs("form",{className:"p-4 space-y-6",onSubmit:p,children:[s&&d.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:s}),d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"h-32 bg-gray-100 rounded-lg mb-16",children:d.jsx("div",{className:"absolute -bottom-16 left-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:a.avatar_url,alt:a.name,className:"w-32 h-32 rounded-full border-4 border-white object-cover bg-gray-100"}),d.jsx("button",{type:"button",onClick:()=>{var m;return(m=i.current)==null?void 0:m.click()},className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(X9,{className:"w-6 h-6 text-white"})})]})})}),d.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:h})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),d.jsx("input",{type:"text",value:a.name,onChange:m=>o({...a,name:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),d.jsx("textarea",{value:a.bio,onChange:m=>o({...a,bio:m.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),d.jsx("input",{type:"text",value:a.location,onChange:m=>o({...a,location:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),d.jsx("input",{type:"url",value:a.website,onChange:m=>o({...a,website:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]})]})]})})}function lF({children:t}){const e=zo(),{user:r,logout:n}=qr(),[s,i]=M.useState(!1),[a,o]=M.useState(!1),u=p=>e.pathname===p,c=async p=>{p.preventDefault();try{await n()}catch(m){console.error("Logout failed:",m)}},h=()=>d.jsxs(d.Fragment,{children:[d.jsxs($t,{to:"/home",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${u("/home")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(eF,{className:"w-6 h-6 mr-4"}),"Home"]}),d.jsxs($t,{to:"/saved",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${u("/saved")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(Q9,{className:"w-6 h-6 mr-4"}),"My Feed"]}),d.jsxs($t,{to:"/supercurations",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${e.pathname.startsWith("/supercurations")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(tF,{className:"w-6 h-6 mr-4"}),"Supercurations"]}),d.jsxs($t,{to:"/dashboard",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${u("/dashboard")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(aF,{className:"w-6 h-6 mr-4"}),"My Subscribers"]})]});return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white border-b z-20 px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-full",children:[d.jsxs($t,{to:"/home",className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-blue-500 text-2xl",children:"🔖"}),d.jsx("span",{className:"text-xl font-bold",children:"Supercurators"})]}),d.jsx("button",{onClick:()=>o(!a),className:"p-2 text-gray-600",children:a?d.jsx(Lt,{className:"w-6 h-6"}):d.jsx(nF,{className:"w-6 h-6"})})]})}),a&&d.jsx("div",{className:"lg:hidden fixed inset-0 z-10 bg-white pt-16",children:d.jsxs("div",{className:"p-4",children:[d.jsx("nav",{className:"space-y-1",children:d.jsx(h,{})}),d.jsx("div",{className:"mt-4 pt-4 border-t",children:d.jsxs("div",{onClick:()=>{i(!0),o(!1)},className:"flex items-center gap-3 p-2 rounded-full hover:bg-gray-50 cursor-pointer",children:[d.jsx("img",{src:r==null?void 0:r.avatar_url,alt:r==null?void 0:r.name,className:"w-10 h-10 rounded-full bg-gray-100"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium text-gray-900 truncate",children:r==null?void 0:r.name}),d.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",r==null?void 0:r.email.split("@")[0]]})]}),d.jsx("button",{onClick:c,className:"p-2 text-gray-400 hover:text-gray-600",title:"Sign out",children:d.jsx(uv,{className:"w-5 h-5"})})]})})]})}),d.jsx("div",{className:"hidden lg:block fixed left-0 top-0 h-full w-64 border-r border-gray-100",children:d.jsxs("div",{className:"flex flex-col h-full px-4 py-4",children:[d.jsxs($t,{to:"/home",className:"flex items-center gap-2 px-2 mb-8",children:[d.jsx("div",{className:"text-blue-500 text-2xl",children:"🔖"}),d.jsx("span",{className:"text-xl font-bold",children:"Supercurators"})]}),d.jsx("nav",{className:"space-y-1",children:d.jsx(h,{})}),d.jsx("div",{className:"mt-auto",children:d.jsxs("div",{onClick:()=>i(!0),className:"w-full flex items-center gap-3 p-2 rounded-full hover:bg-gray-50 cursor-pointer",children:[d.jsx("img",{src:r==null?void 0:r.avatar_url,alt:r==null?void 0:r.name,className:"w-10 h-10 rounded-full bg-gray-100"}),d.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[d.jsx("p",{className:"font-medium text-gray-900 truncate",children:r==null?void 0:r.name}),d.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",r==null?void 0:r.email.split("@")[0]]})]}),d.jsx("button",{onClick:c,className:"p-2 text-gray-400 hover:text-gray-600",title:"Sign out",children:d.jsx(uv,{className:"w-5 h-5"})})]})})]})}),d.jsx("main",{className:"lg:pl-64 pt-20 lg:pt-4",children:d.jsx("div",{className:"max-w-2xl mx-auto py-4",children:t})}),s&&d.jsx(uF,{onClose:()=>i(!1),onSave:()=>i(!1)})]})}function cF(){const{user:t,initialized:e}=qr();return e?t?d.jsx(lF,{children:d.jsx(Nx,{})}):d.jsx(x2,{to:"/login",replace:!0}):d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx(Oo,{className:"w-8 h-8 animate-spin text-blue-600"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]})})}function dF(){return qr(e=>e.user)?d.jsx(x2,{to:"/home",replace:!0}):d.jsx("div",{className:"min-h-screen bg-black",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"pt-6",children:d.jsxs("nav",{className:"flex justify-end space-x-4",children:[d.jsx($t,{to:"/login",className:"text-gray-300 hover:text-white px-4 py-2 text-sm font-medium",children:"Log in"}),d.jsx($t,{to:"/register",className:"bg-white text-black hover:bg-gray-100 px-4 py-2 rounded-full text-sm font-medium",children:"Sign up"})]})}),d.jsxs("div",{className:"pt-24 pb-20 text-center",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("span",{className:"text-6xl",children:"🔖"})}),d.jsx("h1",{className:"text-6xl sm:text-8xl font-extrabold text-white tracking-tight mb-8",children:"Supercurators"}),d.jsx("p",{className:"text-2xl sm:text-3xl text-gray-400 font-light max-w-3xl mx-auto mb-12",children:"Internet. Curated."}),d.jsx($t,{to:"/register",className:"inline-flex items-center px-8 py-3 border border-transparent text-lg font-medium rounded-full text-black bg-white hover:bg-gray-100",children:"Get Started"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-20 text-white",children:[d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"text-3xl mb-4",children:"🎯"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Discover Quality Content"}),d.jsx("p",{className:"text-gray-400",children:"Find the best content curated by people who share your interests"})]}),d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"text-3xl mb-4",children:"🤝"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Build Your Network"}),d.jsx("p",{className:"text-gray-400",children:"Connect with curators who consistently share valuable resources"})]}),d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"text-3xl mb-4",children:"💡"}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Stay Informed"}),d.jsx("p",{className:"text-gray-400",children:"Never miss important content with personalized email updates"})]})]})]})})}function hF(){const t=uc(),{login:e,loading:r,error:n,clearError:s,user:i,initialized:a}=qr(),[o,u]=M.useState(""),[c,h]=M.useState("");M.useEffect(()=>{s()},[s]),M.useEffect(()=>{i&&a&&t("/home")},[i,a,t]);const p=async m=>{if(m.preventDefault(),!(!o.trim()||!c.trim()))try{await e(o.trim(),c.trim())}catch(E){console.error("Login failed:",E)}};return d.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:d.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[r&&!a?d.jsx("div",{className:"flex items-center justify-center py-6",children:d.jsx(Oo,{className:"w-6 h-6 text-blue-600 animate-spin"})}):d.jsxs("form",{className:"space-y-6",onSubmit:p,children:[n&&d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(Y9,{className:"h-5 w-5 text-red-400"})}),d.jsx("div",{className:"ml-3",children:d.jsx("h3",{className:"text-sm font-medium text-red-800",children:n})})]})}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),d.jsx("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:o,onChange:m=>u(m.target.value),disabled:r})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{id:"password",type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:c,onChange:m=>h(m.target.value),disabled:r})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:r||!o.trim()||!c.trim(),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Oo,{className:"w-4 h-4 animate-spin"}),"Signing in..."]}):"Sign in"})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),d.jsx("div",{className:"mt-6",children:d.jsx($t,{to:"/register",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create new account"})})]})]})})}function fF(){const t=uc(),{register:e,loading:r,error:n,clearError:s}=qr(),[i,a]=M.useState({email:"",password:"",name:"",avatar_url:`https://api.dicebear.com/7.x/avatars/svg?seed=${Math.random()}`});M.useEffect(()=>{s()},[]);const o=async u=>{u.preventDefault();try{await e(i),t("/home")}catch{}};return d.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:d.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[d.jsxs("form",{className:"space-y-6",onSubmit:o,children:[n&&d.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:n}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full name"}),d.jsx("input",{id:"name",type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:i.name,onChange:u=>a({...i,name:u.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),d.jsx("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:i.email,onChange:u=>a({...i,email:u.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{id:"password",type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:i.password,onChange:u=>a({...i,password:u.target.value})})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating account...":"Create account"})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),d.jsx("div",{className:"mt-6",children:d.jsx($t,{to:"/login",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"})})]})]})})}const pF={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",VITE_FIREBASE_APP_ID:"1:901131239470:web:abc123def456",VITE_FIREBASE_AUTH_DOMAIN:"supercurators.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"901131239470",VITE_FIREBASE_PROJECT_ID:"supercurators",VITE_FIREBASE_STORAGE_BUCKET:"supercurators.appspot.com"};function mF(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const a=u=>u===null?null:JSON.parse(u,void 0),o=(i=r.getItem(s))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const Ql=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Ql(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Ql(n)(r)}}}},gF=(t,e)=>(r,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},a=!1;const o=new Set,u=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...x)},n,s);const h=Ql(i.serialize),p=()=>{const x=i.partialize({...n()});let w;const b=h({state:x,version:i.version}).then(T=>c.setItem(i.name,T)).catch(T=>{w=T});if(w)throw w;return b},m=s.setState;s.setState=(x,w)=>{m(x,w),p()};const E=t((...x)=>{r(...x),p()},n,s);let v;const _=()=>{var x;if(!c)return;a=!1,o.forEach(b=>b(n()));const w=((x=i.onRehydrateStorage)==null?void 0:x.call(i,n()))||void 0;return Ql(c.getItem.bind(c))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var T;return v=i.merge(b,(T=n())!=null?T:E),r(v,!0),p()}).then(()=>{w==null||w(v,void 0),a=!0,u.forEach(b=>b(v))}).catch(b=>{w==null||w(void 0,b)})};return s.persist={setOptions:x=>{i={...i,...x},x.getStorage&&(c=x.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>a,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(u.add(x),()=>{u.delete(x)})},_(),v||E},EF=(t,e)=>(r,n,s)=>{let i={storage:mF(()=>localStorage),partialize:_=>_,version:0,merge:(_,x)=>({...x,..._}),...e},a=!1;const o=new Set,u=new Set;let c=i.storage;if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(..._)},n,s);const h=()=>{const _=i.partialize({...n()});return c.setItem(i.name,{state:_,version:i.version})},p=s.setState;s.setState=(_,x)=>{p(_,x),h()};const m=t((..._)=>{r(..._),h()},n,s);s.getInitialState=()=>m;let E;const v=()=>{var _,x;if(!c)return;a=!1,o.forEach(b=>{var T;return b((T=n())!=null?T:m)});const w=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(_=n())!=null?_:m))||void 0;return Ql(c.getItem.bind(c))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var T;const[O,B]=b;if(E=i.merge(B,(T=n())!=null?T:m),r(E,!0),O)return h()}).then(()=>{w==null||w(E,void 0),E=n(),a=!0,u.forEach(b=>b(E))}).catch(b=>{w==null||w(void 0,b)})};return s.persist={setOptions:_=>{i={...i,..._},_.storage&&(c=_.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:_=>(o.add(_),()=>{o.delete(_)}),onFinishHydration:_=>(u.add(_),()=>{u.delete(_)})},i.skipHydration||v(),E||m},yF=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((pF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),gF(t,e)):EF(t,e),_F=yF,$r=Cc()(_F(t=>({topics:[{id:"future-of-work",name:"Future of Work",color:"#2563eb",createdAt:new Date().toISOString()},{id:"productivity",name:"Productivity",color:"#dc2626",createdAt:new Date().toISOString()},{id:"ai",name:"AI",color:"#059669",createdAt:new Date().toISOString()}],addTopic:(e,r)=>{const n={id:Math.random().toString(36).substr(2,9),name:e,color:r,createdAt:new Date().toISOString()};return t(s=>({topics:[...s.topics,n]})),n},removeTopic:e=>{t(r=>({topics:r.topics.filter(n=>n.id!==e)}))},updateTopic:(e,r)=>{t(n=>({topics:n.topics.map(s=>s.id===e?{...s,...r}:s)}))}}),{name:"category-storage"})),eu=Cc((t,e)=>({supercurations:[],loading:!1,error:null,fetchSupercurations:async()=>{try{t({loading:!0,error:null});const r=ti(rn(Te,"supercurations"),Hh("created_at","desc")),s=(await ta(r)).docs.map(i=>{var a,o,u;return{id:i.id,...i.data(),created_at:((u=(o=(a=i.data().created_at)==null?void 0:a.toDate)==null?void 0:o.call(a))==null?void 0:u.toISOString())||new Date().toISOString(),tagCategories:i.data().tagCategories||[]}});t({supercurations:s,error:null})}catch(r){console.error("Error fetching supercurations:",r),t({error:"Failed to fetch supercurations"})}finally{t({loading:!1})}},addSupercuration:async r=>{var n;try{const s=dt.currentUser;if(!s)throw new Error("Must be logged in to create supercurations");const i=zh({...r,created_by:s.uid,created_at:w1(),links_count:0,tagCategories:r.tagCategories||[],user:{id:s.uid,name:s.displayName||((n=s.email)==null?void 0:n.split("@")[0])||"Anonymous",avatar_url:s.photoURL||`https://api.dicebear.com/7.x/avatars/svg?seed=${s.email}`}}),o={id:(await x1(rn(Te,"supercurations"),i)).id,...i,created_at:new Date().toISOString()};return t(u=>({supercurations:[o,...u.supercurations],error:null})),o}catch(s){throw console.error("Error adding supercuration:",s),s}},updateSupercuration:async(r,n)=>{try{if(!dt.currentUser)throw new Error("Must be logged in to update supercurations");const i=et(Te,"supercurations",r),a=zh(n);await Ns(i,a),t(o=>({supercurations:o.supercurations.map(u=>u.id===r?{...u,...n}:u),error:null}))}catch(s){throw console.error("Error updating supercuration:",s),s}},removeSupercuration:async r=>{try{if(!dt.currentUser)throw new Error("Must be logged in to remove supercurations");await $h(et(Te,"supercurations",r)),t(s=>({supercurations:s.supercurations.filter(i=>i.id!==r),error:null}))}catch(n){throw console.error("Error removing supercuration:",n),n}}})),bF=[{emoji:"📝",label:"Article"},{emoji:"📺",label:"Video"},{emoji:"🎧",label:"Podcast"},{emoji:"📰",label:"Newsletter"},{emoji:"🛠️",label:"Tool"},{emoji:"📚",label:"Tutorial"},{emoji:"🎨",label:"Design"},{emoji:"🤖",label:"AI"},{emoji:"💻",label:"Dev"},{emoji:"🔗",label:"Other"}];function zC({onClose:t,onSave:e,preview:r}){const{topics:n,addTopic:s}=$r(),[i,a]=M.useState([]),[o,u]=M.useState([]),[c,h]=M.useState(!1),[p,m]=M.useState(!1),[E,v]=M.useState({name:"",color:"#2563eb"}),[_,x]=M.useState({url:r.url||"",title:r.title||"",description:r.description||"",thumbnail_url:r.thumbnail_url||"",imageType:"url"}),w=T=>{var B;const O=(B=T.target.files)==null?void 0:B[0];if(O){const V=new FileReader;V.onloadend=()=>{x(N=>({...N,thumbnail_url:V.result}))},V.readAsDataURL(O)}},b=()=>{if(E.name.trim()){const T=s(E.name.trim(),E.color);u(O=>[...O,T.id]),v({name:"",color:"#2563eb"}),m(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:t}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Preview & Share"}),d.jsxs("div",{className:"mb-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:_.title,onChange:T=>x({..._,title:T.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:T=>x({..._,description:T.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL (optional)"}),d.jsx("div",{className:"flex gap-2",children:d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"url",value:_.url,onChange:T=>x({..._,url:T.target.value}),className:"w-full pl-9 pr-3 py-2 border rounded-md",placeholder:"Enter URL (optional)"})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail Image"}),d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsxs("button",{type:"button",onClick:()=>x(T=>({...T,imageType:"url"})),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${_.imageType==="url"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(Yl,{className:"w-4 h-4"}),"URL"]}),d.jsxs("button",{type:"button",onClick:()=>x(T=>({...T,imageType:"upload"})),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${_.imageType==="upload"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(D1,{className:"w-4 h-4"}),"Upload"]})]}),_.imageType==="url"?d.jsx("input",{type:"url",placeholder:"Enter image URL",value:_.thumbnail_url,onChange:T=>x({..._,thumbnail_url:T.target.value}),className:"w-full px-3 py-2 border rounded-md"}):d.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"w-full px-3 py-2 border rounded-md"}),_.thumbnail_url&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:_.thumbnail_url,alt:"Preview",className:"w-full h-32 object-cover rounded-md"})})]})]}),d.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:c,onChange:T=>h(T.target.checked),className:"rounded border-amber-400 text-amber-600 focus:ring-amber-500"}),d.jsx($f,{className:"w-4 h-4 text-amber-600"}),d.jsx("span",{className:"text-sm font-medium text-amber-800",children:"This is my original content"})]}),d.jsx("p",{className:"mt-1 text-xs text-amber-600 ml-6",children:"Check this if you created this content (e.g., your blog post, podcast, video)"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Format"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:bF.map(({emoji:T,label:O})=>d.jsxs("button",{type:"button",onClick:()=>a(B=>B.includes(T)?B.filter(V=>V!==T):[T]),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${i.includes(T)?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:T}),O]},T))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Topics"}),d.jsxs("button",{type:"button",onClick:()=>m(!p),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[d.jsx(Lo,{className:"w-4 h-4"}),"Add Topic"]})]}),p&&d.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Topic name",value:E.name,onChange:T=>v({...E,name:T.target.value}),className:"flex-1 px-3 py-1 text-sm border rounded"}),d.jsx("input",{type:"color",value:E.color,onChange:T=>v({...E,color:T.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{type:"button",onClick:b,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(T=>d.jsx("button",{type:"button",onClick:()=>u(O=>O.includes(T.id)?O.filter(B=>B!==T.id):[...O,T.id]),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${o.includes(T.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${T.color}15`,color:T.color,borderColor:o.includes(T.id)?T.color:"transparent"},children:T.name},T.id))})]}),d.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[d.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{onClick:()=>e(i,o,c,{..._.url?{url:_.url}:{},title:_.title,description:_.description,thumbnail_url:_.thumbnail_url}),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Share"})]})]})]})})}function vF({link:t,onToggleSelect:e,onShare:r}){return d.jsx("div",{className:`bg-white p-4 rounded-lg border hover:shadow-md transition-shadow ${t.selected?"ring-2 ring-blue-500":""}`,children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:e,className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:t.selected?d.jsx(BC,{className:"w-5 h-5"}):d.jsx(HC,{className:"w-5 h-5"})}),t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{children:[d.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 flex items-center gap-1",children:[t.title,d.jsx(Yl,{className:"w-3.5 h-3.5"})]}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:t.description})]}),d.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-blue-600 hover:text-blue-700 border border-blue-600 rounded-md hover:bg-blue-50",children:"Share"})]})})]})})}var TF={exports:{}};(function(t){var e=function(r){var n=Object.prototype,s=n.hasOwnProperty,i=Object.defineProperty||function(j,U,W){j[U]=W.value},a,o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function p(j,U,W){return Object.defineProperty(j,U,{value:W,enumerable:!0,configurable:!0,writable:!0}),j[U]}try{p({},"")}catch{p=function(U,W,ne){return U[W]=ne}}function m(j,U,W,ne){var K=U&&U.prototype instanceof T?U:T,se=Object.create(K.prototype),Ee=new _e(ne||[]);return i(se,"_invoke",{value:F(j,W,Ee)}),se}r.wrap=m;function E(j,U,W){try{return{type:"normal",arg:j.call(U,W)}}catch(ne){return{type:"throw",arg:ne}}}var v="suspendedStart",_="suspendedYield",x="executing",w="completed",b={};function T(){}function O(){}function B(){}var V={};p(V,u,function(){return this});var N=Object.getPrototypeOf,I=N&&N(N(Ie([])));I&&I!==n&&s.call(I,u)&&(V=I);var D=B.prototype=T.prototype=Object.create(V);O.prototype=B,i(D,"constructor",{value:B,configurable:!0}),i(B,"constructor",{value:O,configurable:!0}),O.displayName=p(B,h,"GeneratorFunction");function A(j){["next","throw","return"].forEach(function(U){p(j,U,function(W){return this._invoke(U,W)})})}r.isGeneratorFunction=function(j){var U=typeof j=="function"&&j.constructor;return U?U===O||(U.displayName||U.name)==="GeneratorFunction":!1},r.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,B):(j.__proto__=B,p(j,h,"GeneratorFunction")),j.prototype=Object.create(D),j},r.awrap=function(j){return{__await:j}};function k(j,U){function W(se,Ee,fe,de){var Oe=E(j[se],j,Ee);if(Oe.type==="throw")de(Oe.arg);else{var ar=Oe.arg,St=ar.value;return St&&typeof St=="object"&&s.call(St,"__await")?U.resolve(St.__await).then(function(Et){W("next",Et,fe,de)},function(Et){W("throw",Et,fe,de)}):U.resolve(St).then(function(Et){ar.value=Et,fe(ar)},function(Et){return W("throw",Et,fe,de)})}}var ne;function K(se,Ee){function fe(){return new U(function(de,Oe){W(se,Ee,de,Oe)})}return ne=ne?ne.then(fe,fe):fe()}i(this,"_invoke",{value:K})}A(k.prototype),p(k.prototype,c,function(){return this}),r.AsyncIterator=k,r.async=function(j,U,W,ne,K){K===void 0&&(K=Promise);var se=new k(m(j,U,W,ne),K);return r.isGeneratorFunction(U)?se:se.next().then(function(Ee){return Ee.done?Ee.value:se.next()})};function F(j,U,W){var ne=v;return function(se,Ee){if(ne===x)throw new Error("Generator is already running");if(ne===w){if(se==="throw")throw Ee;return Z()}for(W.method=se,W.arg=Ee;;){var fe=W.delegate;if(fe){var de=R(fe,W);if(de){if(de===b)continue;return de}}if(W.method==="next")W.sent=W._sent=W.arg;else if(W.method==="throw"){if(ne===v)throw ne=w,W.arg;W.dispatchException(W.arg)}else W.method==="return"&&W.abrupt("return",W.arg);ne=x;var Oe=E(j,U,W);if(Oe.type==="normal"){if(ne=W.done?w:_,Oe.arg===b)continue;return{value:Oe.arg,done:W.done}}else Oe.type==="throw"&&(ne=w,W.method="throw",W.arg=Oe.arg)}}}function R(j,U){var W=U.method,ne=j.iterator[W];if(ne===a)return U.delegate=null,W==="throw"&&j.iterator.return&&(U.method="return",U.arg=a,R(j,U),U.method==="throw")||W!=="return"&&(U.method="throw",U.arg=new TypeError("The iterator does not provide a '"+W+"' method")),b;var K=E(ne,j.iterator,U.arg);if(K.type==="throw")return U.method="throw",U.arg=K.arg,U.delegate=null,b;var se=K.arg;if(!se)return U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,b;if(se.done)U[j.resultName]=se.value,U.next=j.nextLoc,U.method!=="return"&&(U.method="next",U.arg=a);else return se;return U.delegate=null,b}A(D),p(D,h,"Generator"),p(D,u,function(){return this}),p(D,"toString",function(){return"[object Generator]"});function Q(j){var U={tryLoc:j[0]};1 in j&&(U.catchLoc=j[1]),2 in j&&(U.finallyLoc=j[2],U.afterLoc=j[3]),this.tryEntries.push(U)}function oe(j){var U=j.completion||{};U.type="normal",delete U.arg,j.completion=U}function _e(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(Q,this),this.reset(!0)}r.keys=function(j){var U=Object(j),W=[];for(var ne in U)W.push(ne);return W.reverse(),function K(){for(;W.length;){var se=W.pop();if(se in U)return K.value=se,K.done=!1,K}return K.done=!0,K}};function Ie(j){if(j){var U=j[u];if(U)return U.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var W=-1,ne=function K(){for(;++W<j.length;)if(s.call(j,W))return K.value=j[W],K.done=!1,K;return K.value=a,K.done=!0,K};return ne.next=ne}}return{next:Z}}r.values=Ie;function Z(){return{value:a,done:!0}}return _e.prototype={constructor:_e,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(oe),!j)for(var U in this)U.charAt(0)==="t"&&s.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=a)},stop:function(){this.done=!0;var j=this.tryEntries[0],U=j.completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var U=this;function W(de,Oe){return se.type="throw",se.arg=j,U.next=de,Oe&&(U.method="next",U.arg=a),!!Oe}for(var ne=this.tryEntries.length-1;ne>=0;--ne){var K=this.tryEntries[ne],se=K.completion;if(K.tryLoc==="root")return W("end");if(K.tryLoc<=this.prev){var Ee=s.call(K,"catchLoc"),fe=s.call(K,"finallyLoc");if(Ee&&fe){if(this.prev<K.catchLoc)return W(K.catchLoc,!0);if(this.prev<K.finallyLoc)return W(K.finallyLoc)}else if(Ee){if(this.prev<K.catchLoc)return W(K.catchLoc,!0)}else if(fe){if(this.prev<K.finallyLoc)return W(K.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,U){for(var W=this.tryEntries.length-1;W>=0;--W){var ne=this.tryEntries[W];if(ne.tryLoc<=this.prev&&s.call(ne,"finallyLoc")&&this.prev<ne.finallyLoc){var K=ne;break}}K&&(j==="break"||j==="continue")&&K.tryLoc<=U&&U<=K.finallyLoc&&(K=null);var se=K?K.completion:{};return se.type=j,se.arg=U,K?(this.method="next",this.next=K.finallyLoc,b):this.complete(se)},complete:function(j,U){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&U&&(this.next=U),b},finish:function(j){for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U];if(W.finallyLoc===j)return this.complete(W.completion,W.afterLoc),oe(W),b}},catch:function(j){for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U];if(W.tryLoc===j){var ne=W.completion;if(ne.type==="throw"){var K=ne.arg;oe(W)}return K}}throw new Error("illegal catch attempt")},delegateYield:function(j,U,W){return this.delegate={iterator:Ie(j),resultName:U,nextLoc:W},this.method==="next"&&(this.arg=a),b}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(TF);var S1=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const AF=S1;let lv=0;var GC=({id:t,action:e,payload:r={}})=>{let n=t;return typeof n>"u"&&(n=AF("Job",lv),lv+=1),{id:n,action:e,payload:r}},tu={};let N1=!1;tu.logging=N1;tu.setLogging=t=>{N1=t};tu.log=(...t)=>N1?console.log.apply(void 0,t):null;const xF=GC,{log:Ad}=tu,wF=S1;let cv=0;var IF=()=>{const t=wF("Scheduler",cv),e={},r={};let n=[];cv+=1;const s=()=>n.length,i=()=>Object.keys(e).length,a=()=>{if(n.length!==0){const p=Object.keys(e);for(let m=0;m<p.length;m+=1)if(typeof r[p[m]]>"u"){n[0](e[p[m]]);break}}},o=(p,m)=>new Promise((E,v)=>{const _=xF({action:p,payload:m});n.push(async x=>{n.shift(),r[x.id]=_;try{E(await x[p].apply(void 0,[...m,_.id]))}catch(w){v(w)}finally{delete r[x.id],a()}}),Ad(`[${t}]: Add ${_.id} to JobQueue`),Ad(`[${t}]: JobQueue length=${n.length}`),a()});return{addWorker:p=>(e[p.id]=p,Ad(`[${t}]: Add ${p.id}`),Ad(`[${t}]: Number of workers=${i()}`),a(),p.id),addJob:async(p,...m)=>{if(i()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return o(p,m)},terminate:async()=>{Object.keys(e).forEach(async p=>{await e[p].terminate()}),n=[]},getQueueLen:s,getNumWorkers:i}};function CF(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function DF(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var SF=DF;const NF=SF;var RF=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":NF()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof CF=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const kF=RF("type")==="browser",PF=kF?t=>new URL(t,window.location.href).href:t=>t;var OF=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(e[r]=PF(e[r]))}),e},LF=t=>{const e=[],r=[],n=[],s=[],i=[];return t.blocks&&t.blocks.forEach(a=>{a.paragraphs.forEach(o=>{o.lines.forEach(u=>{u.words.forEach(c=>{c.symbols.forEach(h=>{i.push({...h,page:t,block:a,paragraph:o,line:u,word:c})}),s.push({...c,page:t,block:a,paragraph:o,line:u})}),n.push({...u,page:t,block:a,paragraph:o})}),r.push({...o,page:t,block:a})}),e.push({...a,page:t})}),{...t,blocks:e,paragraphs:r,lines:n,words:s,symbols:i}},WC={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const FF="tesseract.js",BF="5.1.1",MF="Pure Javascript Multilingual OCR",jF="src/index.js",UF="src/index.d.ts",VF="dist/tesseract.min.js",qF="dist/tesseract.min.js",HF={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},$F={"./src/worker/node/index.js":"./src/worker/browser/index.js"},zF="",GF=["jeromewu"],WF="Apache-2.0",KF={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},YF={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.1","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},QF={"@rollup/pluginutils":"^5.0.2"},XF={type:"git",url:"https://github.com/naptha/tesseract.js.git"},JF={url:"https://github.com/naptha/tesseract.js/issues"},ZF="https://github.com/naptha/tesseract.js",eB={type:"opencollective",url:"https://opencollective.com/tesseractjs"},tB={name:FF,version:BF,description:MF,main:jF,types:UF,unpkg:VF,jsdelivr:qF,scripts:HF,browser:$F,author:zF,contributors:GF,license:WF,devDependencies:KF,dependencies:YF,overrides:QF,repository:XF,bugs:JF,homepage:ZF,collective:eB};var rB={workerBlobURL:!0,logger:()=>{}};const nB=tB.version,sB=rB;var iB={...sB,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${nB}/dist/worker.min.js`},aB=({workerPath:t,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const n=new Blob([`importScripts("${t}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(t);return r},oB=t=>{t.terminate()},uB=(t,e)=>{t.onmessage=({data:r})=>{e(r)}},lB=async(t,e)=>{t.postMessage(e)};const bm=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},n.readAsArrayBuffer(t)}),og=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await og(t.src)),t.tagName==="VIDEO"&&(e=await og(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async n=>{e=await bm(n),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();e=await bm(r)}else(t instanceof File||t instanceof Blob)&&(e=await bm(t));return new Uint8Array(e)};var cB=og;const dB=iB,hB=aB,fB=oB,pB=uB,mB=lB,gB=cB;var EB={defaultOptions:dB,spawnWorker:hB,terminateWorker:fB,onMessage:pB,send:mB,loadImage:gB};const yB=OF,_B=LF,Wr=GC,{log:dv}=tu,bB=S1,yi=WC,{defaultOptions:vB,spawnWorker:TB,terminateWorker:AB,onMessage:xB,loadImage:hv,send:wB}=EB;let fv=0;var KC=async(t="eng",e=yi.LSTM_ONLY,r={},n={})=>{const s=bB("Worker",fv),{logger:i,errorHandler:a,...o}=yB({...vB,...r}),u={},c={},h=typeof t=="string"?t.split("+"):t;let p=e,m=n;const E=[yi.DEFAULT,yi.LSTM_ONLY].includes(e)&&!o.legacyCore;let v,_;const x=new Promise((K,se)=>{_=K,v=se}),w=K=>{v(K.message)};let b=TB(o);b.onerror=w,fv+=1;const T=(K,se)=>{u[K]=se},O=(K,se)=>{c[K]=se},B=({id:K,action:se,payload:Ee})=>new Promise((fe,de)=>{dv(`[${s}]: Start ${K}, action=${se}`);const Oe=`${se}-${K}`;T(Oe,fe),O(Oe,de),wB(b,{workerId:s,jobId:K,action:se,payload:Ee})}),V=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),N=K=>B(Wr({id:K,action:"load",payload:{options:{lstmOnly:E,corePath:o.corePath,logging:o.logging}}})),I=(K,se,Ee)=>B(Wr({id:Ee,action:"FS",payload:{method:"writeFile",args:[K,se]}})),D=(K,se)=>B(Wr({id:se,action:"FS",payload:{method:"readFile",args:[K,{encoding:"utf8"}]}})),A=(K,se)=>B(Wr({id:se,action:"FS",payload:{method:"unlink",args:[K]}})),k=(K,se,Ee)=>B(Wr({id:Ee,action:"FS",payload:{method:K,args:se}})),F=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),R=(K,se)=>B(Wr({id:se,action:"loadLanguage",payload:{langs:K,options:{langPath:o.langPath,dataPath:o.dataPath,cachePath:o.cachePath,cacheMethod:o.cacheMethod,gzip:o.gzip,lstmOnly:[yi.DEFAULT,yi.LSTM_ONLY].includes(p)&&!o.legacyLang}}})),Q=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),oe=(K,se,Ee,fe)=>B(Wr({id:fe,action:"initialize",payload:{langs:K,oem:se,config:Ee}})),_e=(K="eng",se,Ee,fe)=>{if(E&&[yi.TESSERACT_ONLY,yi.TESSERACT_LSTM_COMBINED].includes(se))throw Error("Legacy model requested but code missing.");const de=se||p;p=de;const Oe=Ee||m;m=Oe;const St=(typeof K=="string"?K.split("+"):K).filter(Et=>!h.includes(Et));return h.push(...St),St.length>0?R(St,fe).then(()=>oe(K,de,Oe,fe)):oe(K,de,Oe,fe)},Ie=(K={},se)=>B(Wr({id:se,action:"setParameters",payload:{params:K}})),Z=async(K,se={},Ee={blocks:!0,text:!0,hocr:!0,tsv:!0},fe)=>B(Wr({id:fe,action:"recognize",payload:{image:await hv(K),options:se,output:Ee}})),j=(K="Tesseract OCR Result",se=!1,Ee)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),B(Wr({id:Ee,action:"getPDF",payload:{title:K,textonly:se}}))),U=async(K,se)=>{if(E)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return B(Wr({id:se,action:"detect",payload:{image:await hv(K)}}))},W=async()=>(b!==null&&(AB(b),b=null),Promise.resolve());xB(b,({workerId:K,jobId:se,status:Ee,action:fe,data:de})=>{const Oe=`${fe}-${se}`;if(Ee==="resolve"){dv(`[${K}]: Complete ${se}`);let ar=de;fe==="recognize"?ar=_B(de):fe==="getPDF"&&(ar=Array.from({...de,length:Object.keys(de).length})),u[Oe]({jobId:se,data:ar})}else if(Ee==="reject")if(c[Oe](de),fe==="load"&&v(de),a)a(de);else throw Error(de);else Ee==="progress"&&i({...de,userJobId:se})});const ne={id:s,worker:b,setResolve:T,setReject:O,load:V,writeText:I,readText:D,removeFile:A,FS:k,loadLanguage:F,initialize:Q,reinitialize:_e,setParameters:Ie,recognize:Z,getPDF:j,detect:U,terminate:W};return N().then(()=>R(t)).then(()=>oe(t,e,n)).then(()=>_(ne)).catch(()=>{}),x};const YC=KC,IB=async(t,e,r)=>{const n=await YC(e,1,r);return n.recognize(t).finally(async()=>{await n.terminate()})},CB=async(t,e)=>{const r=await YC("osd",0,e);return r.detect(t).finally(async()=>{await r.terminate()})};var DB={recognize:IB,detect:CB},SB={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},NB={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const RB=IF,kB=KC,PB=DB,OB=SB,LB=WC,FB=NB,{setLogging:BB}=tu;var MB={languages:OB,OEM:LB,PSM:FB,createScheduler:RB,createWorker:kB,setLogging:BB,...PB};const pv="[a-fA-F\\d:]",ks=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${pv})|(?<=${pv})(?=\\s|$))`:"",Xr="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ft="[a-fA-F\\d]{1,4}",zf=`
(?:
(?:${ft}:){7}(?:${ft}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${ft}:){6}(?:${Xr}|:${ft}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${ft}:){5}(?::${Xr}|(?::${ft}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${ft}:){4}(?:(?::${ft}){0,1}:${Xr}|(?::${ft}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${ft}:){3}(?:(?::${ft}){0,2}:${Xr}|(?::${ft}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${ft}:){2}(?:(?::${ft}){0,3}:${Xr}|(?::${ft}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${ft}:){1}(?:(?::${ft}){0,4}:${Xr}|(?::${ft}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${ft}){0,5}:${Xr}|(?::${ft}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),jB=new RegExp(`(?:^${Xr}$)|(?:^${zf}$)`),UB=new RegExp(`^${Xr}$`),VB=new RegExp(`^${zf}$`),R1=t=>t&&t.exact?jB:new RegExp(`(?:${ks(t)}${Xr}${ks(t)})|(?:${ks(t)}${zf}${ks(t)})`,"g");R1.v4=t=>t&&t.exact?UB:new RegExp(`${ks(t)}${Xr}${ks(t)}`,"g");R1.v6=t=>t&&t.exact?VB:new RegExp(`${ks(t)}${zf}${ks(t)}`,"g");var qB=R1;const HB=["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"],$B={},zB=Object.freeze(Object.defineProperty({__proto__:null,default:$B},Symbol.toStringTag,{value:"Module"})),GB=rc(zB),QC=qB,WB=HB,KB=QC.v4().source,YB=QC.v6().source,QB="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",XB="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",JB="(?:[a-z\\u00a1-\\uffff]{2,})",ZB=`(?:${WB.sort((t,e)=>e.length-t.length).join("|")})`,eM="(?::\\d{2,5})?";let ku,mv;var tM=t=>{t={re2:!0,exact:!1,strict:!1,auth:!1,localhost:!0,parens:!1,apostrophes:!1,trailingPeriod:!1,ipv4:!0,ipv6:!0,returnString:!1,...t};const e=t.re2&&mv!==!1?(()=>{if(typeof ku=="function")return ku;try{return ku=GB,typeof ku=="function"?ku:RegExp}catch{return mv=!1,RegExp}})():RegExp,r=`(?:(?:[a-z]+:)?//)${t.strict?"":"?"}`,n=t.auth?"(?:\\S+(?::\\S*)?@)?":"",s=`(?:\\.${t.strict?JB:t.tlds?`(?:${t.tlds.sort((u,c)=>c.length-u.length).join("|")})`:ZB})${t.trailingPeriod?"\\.?":""}`;let i='\\s"';t.parens||(i+="\\)"),t.apostrophes||(i+="'");const a=t.trailingPeriod?`(?:[/?#][^${i}]*)?`:`(?:(?:[/?#][^${i}]*[^${i}.?!])|[/])?`;let o=`(?:${r}|www\\.)${n}(?:`;return t.localhost&&(o+="localhost|"),t.ipv4&&(o+=`${KB}|`),t.ipv6&&(o+=`${YB}|`),o+=`${QB}${XB}${s})${eM}${a}`,t.returnString?o:t.exact?new e(`(?:^${o}$)`,"i"):new e(o,"ig")};const rM=sf(tM),k1={xml:!1,decodeEntities:!0},gv={_useHtmlParser2:!0,xmlMode:!0};function ug(t){return t!=null&&t.xml?typeof t.xml=="boolean"?gv:{...gv,...t.xml}:t??void 0}var He={},wr={},Le;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(Le||(Le={}));function XC(t){return t.type===Le.Tag||t.type===Le.Script||t.type===Le.Style}const JC=Le.Root,ZC=Le.Text,eD=Le.Directive,tD=Le.Comment,rD=Le.Script,nD=Le.Style,sD=Le.Tag,iD=Le.CDATA,aD=Le.Doctype,nM=Object.freeze(Object.defineProperty({__proto__:null,CDATA:iD,Comment:tD,Directive:eD,Doctype:aD,get ElementType(){return Le},Root:JC,Script:rD,Style:nD,Tag:sD,Text:ZC,isTag:XC},Symbol.toStringTag,{value:"Module"}));let P1=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return Xl(this,e)}};class Gf extends P1{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class Fo extends Gf{constructor(){super(...arguments),this.type=Le.Text}get nodeType(){return 3}}class Wf extends Gf{constructor(){super(...arguments),this.type=Le.Comment}get nodeType(){return 8}}class Kf extends Gf{constructor(e,r){super(r),this.name=e,this.type=Le.Directive}get nodeType(){return 1}}class Yf extends P1{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class O1 extends Yf{constructor(){super(...arguments),this.type=Le.CDATA}get nodeType(){return 4}}class ri extends Yf{constructor(){super(...arguments),this.type=Le.Root}get nodeType(){return 9}}class Qf extends Yf{constructor(e,r,n=[],s=e==="script"?Le.Script:e==="style"?Le.Style:Le.Tag){super(n),this.name=e,this.attribs=r,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var r,n;return{name:e,value:this.attribs[e],namespace:(r=this["x-attribsNamespace"])===null||r===void 0?void 0:r[e],prefix:(n=this["x-attribsPrefix"])===null||n===void 0?void 0:n[e]}})}}function Be(t){return XC(t)}function oD(t){return t.type===Le.CDATA}function hl(t){return t.type===Le.Text}function L1(t){return t.type===Le.Comment}function Wh(t){return t.type===Le.Directive}function ca(t){return t.type===Le.Root}function an(t){return Object.prototype.hasOwnProperty.call(t,"children")}function Xl(t,e=!1){let r;if(hl(t))r=new Fo(t.data);else if(L1(t))r=new Wf(t.data);else if(Be(t)){const n=e?vm(t.children):[],s=new Qf(t.name,{...t.attribs},n);n.forEach(i=>i.parent=s),t.namespace!=null&&(s.namespace=t.namespace),t["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...t["x-attribsPrefix"]}),r=s}else if(oD(t)){const n=e?vm(t.children):[],s=new O1(n);n.forEach(i=>i.parent=s),r=s}else if(ca(t)){const n=e?vm(t.children):[],s=new ri(n);n.forEach(i=>i.parent=s),t["x-mode"]&&(s["x-mode"]=t["x-mode"]),r=s}else if(Wh(t)){const n=new Kf(t.name,t.data);t["x-name"]!=null&&(n["x-name"]=t["x-name"],n["x-publicId"]=t["x-publicId"],n["x-systemId"]=t["x-systemId"]),r=n}else throw new Error(`Not implemented yet: ${t.type}`);return r.startIndex=t.startIndex,r.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(r.sourceCodeLocation=t.sourceCodeLocation),r}function vm(t){const e=t.map(r=>Xl(r,!0));for(let r=1;r<e.length;r++)e[r].prev=e[r-1],e[r-1].next=e[r];return e}const Ev={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class lg{constructor(e,r,n){this.dom=[],this.root=new ri(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof r=="function"&&(n=r,r=Ev),typeof e=="object"&&(r=e,e=void 0),this.callback=e??null,this.options=r??Ev,this.elementCB=n??null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new ri(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,r){const n=this.options.xmlMode?Le.Tag:void 0,s=new Qf(e,r,void 0,n);this.addNode(s),this.tagStack.push(s)}ontext(e){const{lastNode:r}=this;if(r&&r.type===Le.Text)r.data+=e,this.options.withEndIndices&&(r.endIndex=this.parser.endIndex);else{const n=new Fo(e);this.addNode(n),this.lastNode=n}}oncomment(e){if(this.lastNode&&this.lastNode.type===Le.Comment){this.lastNode.data+=e;return}const r=new Wf(e);this.addNode(r),this.lastNode=r}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Fo(""),r=new O1([e]);this.addNode(r),e.parent=r,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,r){const n=new Kf(e,r);this.addNode(n)}handleCallback(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e}addNode(e){const r=this.tagStack[this.tagStack.length-1],n=r.children[r.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),r.children.push(e),n&&(e.prev=n,n.next=e),e.parent=r,this.lastNode=null}}const sM=Object.freeze(Object.defineProperty({__proto__:null,CDATA:O1,Comment:Wf,DataNode:Gf,Document:ri,DomHandler:lg,Element:Qf,Node:P1,NodeWithChildren:Yf,ProcessingInstruction:Kf,Text:Fo,cloneNode:Xl,default:lg,hasChildren:an,isCDATA:oD,isComment:L1,isDirective:Wh,isDocument:ca,isTag:Be,isText:hl},Symbol.toStringTag,{value:"Module"})),ru=rc(sM),F1=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),uD=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(t=>t.charCodeAt(0)));var Tm;const iM=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),cg=(Tm=String.fromCodePoint)!==null&&Tm!==void 0?Tm:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function lD(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=iM.get(t))!==null&&e!==void 0?e:t}var Ct;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Ct||(Ct={}));const aM=32;var Zr;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Zr||(Zr={}));function dg(t){return t>=Ct.ZERO&&t<=Ct.NINE}function oM(t){return t>=Ct.UPPER_A&&t<=Ct.UPPER_F||t>=Ct.LOWER_A&&t<=Ct.LOWER_F}function uM(t){return t>=Ct.UPPER_A&&t<=Ct.UPPER_Z||t>=Ct.LOWER_A&&t<=Ct.LOWER_Z||dg(t)}function lM(t){return t===Ct.EQUALS||uM(t)}var At;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(At||(At={}));var Bn;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Bn||(Bn={}));class cD{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=At.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bn.Strict}startEntity(e){this.decodeMode=e,this.state=At.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case At.EntityStart:return e.charCodeAt(r)===Ct.NUM?(this.state=At.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=At.NamedEntity,this.stateNamedEntity(e,r));case At.NumericStart:return this.stateNumericStart(e,r);case At.NumericDecimal:return this.stateNumericDecimal(e,r);case At.NumericHex:return this.stateNumericHex(e,r);case At.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|aM)===Ct.LOWER_X?(this.state=At.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=At.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,s){if(r!==n){const i=n-r;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(r,i),s),this.consumed+=i}}stateNumericHex(e,r){const n=r;for(;r<e.length;){const s=e.charCodeAt(r);if(dg(s)||oM(s))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){const n=r;for(;r<e.length;){const s=e.charCodeAt(r);if(dg(s))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Ct.SEMI)this.consumed+=1;else if(this.decodeMode===Bn.Strict)return 0;return this.emitCodePoint(lD(this.result),this.consumed),this.errors&&(e!==Ct.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&Zr.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){const a=e.charCodeAt(r);if(this.treeIndex=hD(n,s,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return this.result===0||this.decodeMode===Bn.Attribute&&(i===0||lM(a))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&Zr.VALUE_LENGTH)>>14,i!==0){if(a===Ct.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Bn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:r,decodeTree:n}=this,s=(n[r]&Zr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){const{decodeTree:s}=this;return this.emitCodePoint(r===1?s[e]&~Zr.VALUE_LENGTH:s[e+1],n),r===3&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case At.NamedEntity:return this.result!==0&&(this.decodeMode!==Bn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case At.NumericDecimal:return this.emitNumericEntity(0,2);case At.NumericHex:return this.emitNumericEntity(0,3);case At.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case At.EntityStart:return 0}}}function dD(t){let e="";const r=new cD(t,n=>e+=cg(n));return function(s,i){let a=0,o=0;for(;(o=s.indexOf("&",o))>=0;){e+=s.slice(a,o),r.startEntity(i);const c=r.write(s,o+1);if(c<0){a=o+r.end();break}a=o+c,o=c===0?a+1:a}const u=e+s.slice(a);return e="",u}}function hD(t,e,r,n){const s=(e&Zr.BRANCH_LENGTH)>>7,i=e&Zr.JUMP_TABLE;if(s===0)return i!==0&&n===i?r:-1;if(i){const u=n-i;return u<0||u>=s?-1:t[r+u]-1}let a=r,o=a+s-1;for(;a<=o;){const u=a+o>>>1,c=t[u];if(c<n)a=u+1;else if(c>n)o=u-1;else return t[u+s]}return-1}dD(F1);dD(uD);const yv=/["&'<>$\x80-\uFFFF]/g,cM=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),dM=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function fD(t){let e="",r=0,n;for(;(n=yv.exec(t))!==null;){const s=n.index,i=t.charCodeAt(s),a=cM.get(i);a!==void 0?(e+=t.substring(r,s)+a,r=s+1):(e+=`${t.substring(r,s)}&#x${dM(t,s).toString(16)};`,r=yv.lastIndex+=+((i&64512)===55296))}return e+t.substr(r)}function pD(t,e){return function(n){let s,i=0,a="";for(;s=t.exec(n);)i!==s.index&&(a+=n.substring(i,s.index)),a+=e.get(s[0].charCodeAt(0)),i=s.index+1;return a+n.substring(i)}}const mD=pD(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),gD=pD(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),hM=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),fM=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),pM=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function mM(t){return t.replace(/"/g,"&quot;")}function gM(t,e){var r;if(!t)return;const n=((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)===!1?mM:e.xmlMode||e.encodeEntities!=="utf8"?fD:mD;return Object.keys(t).map(s=>{var i,a;const o=(i=t[s])!==null&&i!==void 0?i:"";return e.xmlMode==="foreign"&&(s=(a=fM.get(s))!==null&&a!==void 0?a:s),!e.emptyAttrs&&!e.xmlMode&&o===""?s:`${s}="${n(o)}"`}).join(" ")}const _v=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Jl(t,e={}){const r="length"in t?t:[t];let n="";for(let s=0;s<r.length;s++)n+=EM(r[s],e);return n}function EM(t,e){switch(t.type){case JC:return Jl(t.children,e);case aD:case eD:return vM(t);case tD:return xM(t);case iD:return AM(t);case rD:case nD:case sD:return bM(t,e);case ZC:return TM(t,e)}}const yM=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),_M=new Set(["svg","math"]);function bM(t,e){var r;e.xmlMode==="foreign"&&(t.name=(r=hM.get(t.name))!==null&&r!==void 0?r:t.name,t.parent&&yM.has(t.parent.name)&&(e={...e,xmlMode:!1})),!e.xmlMode&&_M.has(t.name)&&(e={...e,xmlMode:"foreign"});let n=`<${t.name}`;const s=gM(t.attribs,e);return s&&(n+=` ${s}`),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&_v.has(t.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",t.children.length>0&&(n+=Jl(t.children,e)),(e.xmlMode||!_v.has(t.name))&&(n+=`</${t.name}>`)),n}function vM(t){return`<${t.data}>`}function TM(t,e){var r;let n=t.data||"";return((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&pM.has(t.parent.name))&&(n=e.xmlMode||e.encodeEntities!=="utf8"?fD(n):gD(n)),n}function AM(t){return`<![CDATA[${t.children[0].data}]]>`}function xM(t){return`<!--${t.data}-->`}const wM=Object.freeze(Object.defineProperty({__proto__:null,default:Jl,render:Jl},Symbol.toStringTag,{value:"Module"})),IM=rc(wM),CM=rc(nM);var DM=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wr,"__esModule",{value:!0});wr.innerText=wr.textContent=wr.getText=wr.getInnerHTML=wr.getOuterHTML=void 0;var An=ru,SM=DM(IM),NM=CM;function ED(t,e){return(0,SM.default)(t,e)}wr.getOuterHTML=ED;function RM(t,e){return(0,An.hasChildren)(t)?t.children.map(function(r){return ED(r,e)}).join(""):""}wr.getInnerHTML=RM;function Jd(t){return Array.isArray(t)?t.map(Jd).join(""):(0,An.isTag)(t)?t.name==="br"?`
`:Jd(t.children):(0,An.isCDATA)(t)?Jd(t.children):(0,An.isText)(t)?t.data:""}wr.getText=Jd;function hg(t){return Array.isArray(t)?t.map(hg).join(""):(0,An.hasChildren)(t)&&!(0,An.isComment)(t)?hg(t.children):(0,An.isText)(t)?t.data:""}wr.textContent=hg;function fg(t){return Array.isArray(t)?t.map(fg).join(""):(0,An.hasChildren)(t)&&(t.type===NM.ElementType.Tag||(0,An.isCDATA)(t))?fg(t.children):(0,An.isText)(t)?t.data:""}wr.innerText=fg;var It={};Object.defineProperty(It,"__esModule",{value:!0});It.prevElementSibling=It.nextElementSibling=It.getName=It.hasAttrib=It.getAttributeValue=It.getSiblings=It.getParent=It.getChildren=void 0;var B1=ru;function yD(t){return(0,B1.hasChildren)(t)?t.children:[]}It.getChildren=yD;function _D(t){return t.parent||null}It.getParent=_D;function kM(t){var e,r,n=_D(t);if(n!=null)return yD(n);for(var s=[t],i=t.prev,a=t.next;i!=null;)s.unshift(i),e=i,i=e.prev;for(;a!=null;)s.push(a),r=a,a=r.next;return s}It.getSiblings=kM;function PM(t,e){var r;return(r=t.attribs)===null||r===void 0?void 0:r[e]}It.getAttributeValue=PM;function OM(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}It.hasAttrib=OM;function LM(t){return t.name}It.getName=LM;function FM(t){for(var e,r=t.next;r!==null&&!(0,B1.isTag)(r);)e=r,r=e.next;return r}It.nextElementSibling=FM;function BM(t){for(var e,r=t.prev;r!==null&&!(0,B1.isTag)(r);)e=r,r=e.prev;return r}It.prevElementSibling=BM;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.prepend=fr.prependChild=fr.append=fr.appendChild=fr.replaceElement=fr.removeElement=void 0;function Nc(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children,r=e.lastIndexOf(t);r>=0&&e.splice(r,1)}t.next=null,t.prev=null,t.parent=null}fr.removeElement=Nc;function MM(t,e){var r=e.prev=t.prev;r&&(r.next=e);var n=e.next=t.next;n&&(n.prev=e);var s=e.parent=t.parent;if(s){var i=s.children;i[i.lastIndexOf(t)]=e,t.parent=null}}fr.replaceElement=MM;function jM(t,e){if(Nc(e),e.next=null,e.parent=t,t.children.push(e)>1){var r=t.children[t.children.length-2];r.next=e,e.prev=r}else e.prev=null}fr.appendChild=jM;function UM(t,e){Nc(e);var r=t.parent,n=t.next;if(e.next=n,e.prev=t,t.next=e,e.parent=r,n){if(n.prev=e,r){var s=r.children;s.splice(s.lastIndexOf(n),0,e)}}else r&&r.children.push(e)}fr.append=UM;function VM(t,e){if(Nc(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){var r=t.children[1];r.prev=e,e.next=r}else e.next=null}fr.prependChild=VM;function qM(t,e){Nc(e);var r=t.parent;if(r){var n=r.children;n.splice(n.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}fr.prepend=qM;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.findAll=Jt.existsOne=Jt.findOne=Jt.findOneChild=Jt.find=Jt.filter=void 0;var Xf=ru;function HM(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),bD(t,Array.isArray(e)?e:[e],r,n)}Jt.filter=HM;function bD(t,e,r,n){for(var s=[],i=[e],a=[0];;){if(a[0]>=i[0].length){if(a.length===1)return s;i.shift(),a.shift();continue}var o=i[0][a[0]++];if(t(o)&&(s.push(o),--n<=0))return s;r&&(0,Xf.hasChildren)(o)&&o.children.length>0&&(a.unshift(0),i.unshift(o.children))}}Jt.find=bD;function $M(t,e){return e.find(t)}Jt.findOneChild=$M;function vD(t,e,r){r===void 0&&(r=!0);for(var n=null,s=0;s<e.length&&!n;s++){var i=e[s];if((0,Xf.isTag)(i))t(i)?n=i:r&&i.children.length>0&&(n=vD(t,i.children,!0));else continue}return n}Jt.findOne=vD;function TD(t,e){return e.some(function(r){return(0,Xf.isTag)(r)&&(t(r)||TD(t,r.children))})}Jt.existsOne=TD;function zM(t,e){for(var r=[],n=[e],s=[0];;){if(s[0]>=n[0].length){if(n.length===1)return r;n.shift(),s.shift();continue}var i=n[0][s[0]++];(0,Xf.isTag)(i)&&(t(i)&&r.push(i),i.children.length>0&&(s.unshift(0),n.unshift(i.children)))}}Jt.findAll=zM;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.getElementsByTagType=Ir.getElementsByTagName=Ir.getElementById=Ir.getElements=Ir.testElement=void 0;var Di=ru,Jf=Jt,Kh={tag_name:function(t){return typeof t=="function"?function(e){return(0,Di.isTag)(e)&&t(e.name)}:t==="*"?Di.isTag:function(e){return(0,Di.isTag)(e)&&e.name===t}},tag_type:function(t){return typeof t=="function"?function(e){return t(e.type)}:function(e){return e.type===t}},tag_contains:function(t){return typeof t=="function"?function(e){return(0,Di.isText)(e)&&t(e.data)}:function(e){return(0,Di.isText)(e)&&e.data===t}}};function AD(t,e){return typeof e=="function"?function(r){return(0,Di.isTag)(r)&&e(r.attribs[t])}:function(r){return(0,Di.isTag)(r)&&r.attribs[t]===e}}function GM(t,e){return function(r){return t(r)||e(r)}}function xD(t){var e=Object.keys(t).map(function(r){var n=t[r];return Object.prototype.hasOwnProperty.call(Kh,r)?Kh[r](n):AD(r,n)});return e.length===0?null:e.reduce(GM)}function WM(t,e){var r=xD(t);return r?r(e):!0}Ir.testElement=WM;function KM(t,e,r,n){n===void 0&&(n=1/0);var s=xD(t);return s?(0,Jf.filter)(s,e,r,n):[]}Ir.getElements=KM;function YM(t,e,r){return r===void 0&&(r=!0),Array.isArray(e)||(e=[e]),(0,Jf.findOne)(AD("id",t),e,r)}Ir.getElementById=YM;function QM(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Jf.filter)(Kh.tag_name(t),e,r,n)}Ir.getElementsByTagName=QM;function XM(t,e,r,n){return r===void 0&&(r=!0),n===void 0&&(n=1/0),(0,Jf.filter)(Kh.tag_type(t),e,r,n)}Ir.getElementsByTagType=XM;var wD={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var e=ru;function r(a){for(var o=a.length;--o>=0;){var u=a[o];if(o>0&&a.lastIndexOf(u,o-1)>=0){a.splice(o,1);continue}for(var c=u.parent;c;c=c.parent)if(a.includes(c)){a.splice(o,1);break}}return a}t.removeSubsets=r;var n;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(n=t.DocumentPosition||(t.DocumentPosition={}));function s(a,o){var u=[],c=[];if(a===o)return 0;for(var h=(0,e.hasChildren)(a)?a:a.parent;h;)u.unshift(h),h=h.parent;for(h=(0,e.hasChildren)(o)?o:o.parent;h;)c.unshift(h),h=h.parent;for(var p=Math.min(u.length,c.length),m=0;m<p&&u[m]===c[m];)m++;if(m===0)return n.DISCONNECTED;var E=u[m-1],v=E.children,_=u[m],x=c[m];return v.indexOf(_)>v.indexOf(x)?E===o?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:E===a?n.PRECEDING|n.CONTAINS:n.PRECEDING}t.compareDocumentPosition=s;function i(a){return a=a.filter(function(o,u,c){return!c.includes(o,u+1)}),a.sort(function(o,u){var c=s(o,u);return c&n.PRECEDING?-1:c&n.FOLLOWING?1:0}),a}t.uniqueSort=i})(wD);var Zf={};Object.defineProperty(Zf,"__esModule",{value:!0});Zf.getFeed=void 0;var JM=wr,Rc=Ir;function ZM(t){var e=Yh(sj,t);return e?e.name==="feed"?ej(e):tj(e):null}Zf.getFeed=ZM;function ej(t){var e,r=t.children,n={type:"atom",items:(0,Rc.getElementsByTagName)("entry",r).map(function(a){var o,u=a.children,c={media:ID(u)};dr(c,"id","id",u),dr(c,"title","title",u);var h=(o=Yh("link",u))===null||o===void 0?void 0:o.attribs.href;h&&(c.link=h);var p=Ps("summary",u)||Ps("content",u);p&&(c.description=p);var m=Ps("updated",u);return m&&(c.pubDate=new Date(m)),c})};dr(n,"id","id",r),dr(n,"title","title",r);var s=(e=Yh("link",r))===null||e===void 0?void 0:e.attribs.href;s&&(n.link=s),dr(n,"description","subtitle",r);var i=Ps("updated",r);return i&&(n.updated=new Date(i)),dr(n,"author","email",r,!0),n}function tj(t){var e,r,n=(r=(e=Yh("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&r!==void 0?r:[],s={type:t.name.substr(0,3),id:"",items:(0,Rc.getElementsByTagName)("item",t.children).map(function(a){var o=a.children,u={media:ID(o)};dr(u,"id","guid",o),dr(u,"title","title",o),dr(u,"link","link",o),dr(u,"description","description",o);var c=Ps("pubDate",o)||Ps("dc:date",o);return c&&(u.pubDate=new Date(c)),u})};dr(s,"title","title",n),dr(s,"link","link",n),dr(s,"description","description",n);var i=Ps("lastBuildDate",n);return i&&(s.updated=new Date(i)),dr(s,"author","managingEditor",n,!0),s}var rj=["url","type","lang"],nj=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function ID(t){return(0,Rc.getElementsByTagName)("media:content",t).map(function(e){for(var r=e.attribs,n={medium:r.medium,isDefault:!!r.isDefault},s=0,i=rj;s<i.length;s++){var a=i[s];r[a]&&(n[a]=r[a])}for(var o=0,u=nj;o<u.length;o++){var a=u[o];r[a]&&(n[a]=parseInt(r[a],10))}return r.expression&&(n.expression=r.expression),n})}function Yh(t,e){return(0,Rc.getElementsByTagName)(t,e,!0,1)[0]}function Ps(t,e,r){return r===void 0&&(r=!1),(0,JM.textContent)((0,Rc.getElementsByTagName)(t,e,r,1)).trim()}function dr(t,e,r,n,s){s===void 0&&(s=!1);var i=Ps(r,n,s);i&&(t[e]=i)}function sj(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}(function(t){var e=me&&me.__createBinding||(Object.create?function(s,i,a,o){o===void 0&&(o=a);var u=Object.getOwnPropertyDescriptor(i,a);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(s,o,u)}:function(s,i,a,o){o===void 0&&(o=a),s[o]=i[a]}),r=me&&me.__exportStar||function(s,i){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(wr,t),r(It,t),r(fr,t),r(Jt,t),r(Ir,t),r(wD,t),r(Zf,t);var n=ru;Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(He);const ij=sf(He),CD=aT({__proto__:null,default:ij},[He]);function DD(t,e,r){return t?t(e??t._root.children,null,void 0,r).toString():""}function aj(t,e){return typeof t=="object"&&t!=null&&!("length"in t)&&!("type"in t)}function oj(t,e){const r=aj(t)?(e=t,void 0):t,n={...k1,...this===null||this===void 0?void 0:this._options,...ug(e??{})};return DD(this,r,n)}function uj(t){const e={...this._options,xmlMode:!0};return DD(this,t,e)}function Zl(t){const e=t||(this?this.root():[]);let r="";for(let n=0;n<e.length;n++)r+=He.textContent(e[n]);return r}function lj(t,e,r=typeof e=="boolean"?e:!1){if(!t||typeof t!="string")return null;typeof e=="boolean"&&(r=e);const n=this.load(t,k1,!1);return r||n("script").remove(),n.root()[0].children.slice()}function cj(){return this(this._root)}function SD(t,e){if(e===t)return!1;let r=e;for(;r&&r!==r.parent;)if(r=r.parent,r===t)return!0;return!1}function dj(t,e){if(!bv(t)||!bv(e))return;let r=t.length;const n=+e.length;for(let s=0;s<n;s++)t[r++]=e[s];return t.length=r,t}function bv(t){if(Array.isArray(t))return!0;if(typeof t!="object"||!Object.prototype.hasOwnProperty.call(t,"length")||typeof t.length!="number"||t.length<0)return!1;for(let e=0;e<t.length;e++)if(!(e in t))return!1;return!0}const hj=Object.freeze(Object.defineProperty({__proto__:null,contains:SD,html:oj,merge:dj,parseHTML:lj,root:cj,text:Zl,xml:uj},Symbol.toStringTag,{value:"Module"}));function xn(t){return t.cheerio!=null}function fj(t){return t.replace(/[_.-](\w|$)/g,(e,r)=>r.toUpperCase())}function pj(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function it(t,e){const r=t.length;for(let n=0;n<r;n++)e(t[n],n);return t}function pg(t){const e="length"in t?Array.prototype.map.call(t,n=>Xl(n,!0)):[Xl(t,!0)],r=new ri(e);return e.forEach(n=>{n.parent=r}),e}var Si;(function(t){t[t.LowerA=97]="LowerA",t[t.LowerZ=122]="LowerZ",t[t.UpperA=65]="UpperA",t[t.UpperZ=90]="UpperZ",t[t.Exclamation=33]="Exclamation"})(Si||(Si={}));function mg(t){const e=t.indexOf("<");if(e<0||e>t.length-3)return!1;const r=t.charCodeAt(e+1);return(r>=Si.LowerA&&r<=Si.LowerZ||r>=Si.UpperA&&r<=Si.UpperZ||r===Si.Exclamation)&&t.includes(">",e+2)}const uo=Object.prototype.hasOwnProperty,ec=/\s+/,Am="data-",vv={null:null,true:!0,false:!1},M1=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,mj=/^{[^]*}$|^\[[^]*]$/;function Qh(t,e,r){var n;if(!(!t||!Be(t))){if((n=t.attribs)!==null&&n!==void 0||(t.attribs={}),!e)return t.attribs;if(uo.call(t.attribs,e))return!r&&M1.test(e)?e:t.attribs[e];if(t.name==="option"&&e==="value")return Zl(t.children);if(t.name==="input"&&(t.attribs.type==="radio"||t.attribs.type==="checkbox")&&e==="value")return"on"}}function lo(t,e,r){r===null?ND(t,e):t.attribs[e]=`${r}`}function gj(t,e){if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t!="string")throw new Error("Bad combination of arguments.");return it(this,(r,n)=>{Be(r)&&lo(r,t,e.call(r,n,r.attribs[t]))})}return it(this,r=>{Be(r)&&(typeof t=="object"?Object.keys(t).forEach(n=>{const s=t[n];lo(r,n,s)}):lo(r,t,e))})}return arguments.length>1?this:Qh(this[0],t,this.options.xmlMode)}function Tv(t,e,r){return e in t?t[e]:!r&&M1.test(e)?Qh(t,e,!1)!==void 0:Qh(t,e,r)}function xm(t,e,r,n){e in t?t[e]=r:lo(t,e,!n&&M1.test(e)?r?"":null:`${r}`)}function Ej(t,e){var r;if(typeof t=="string"&&e===void 0){const n=this[0];if(!n||!Be(n))return;switch(t){case"style":{const s=this.css(),i=Object.keys(s);return i.forEach((a,o)=>{s[o]=a}),s.length=i.length,s}case"tagName":case"nodeName":return n.name.toUpperCase();case"href":case"src":{const s=(r=n.attribs)===null||r===void 0?void 0:r[t];return typeof URL<"u"&&(t==="href"&&(n.tagName==="a"||n.name==="link")||t==="src"&&(n.tagName==="img"||n.tagName==="iframe"||n.tagName==="audio"||n.tagName==="video"||n.tagName==="source"))&&s!==void 0&&this.options.baseURI?new URL(s,this.options.baseURI).href:s}case"innerText":return He.innerText(n);case"textContent":return He.textContent(n);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return Tv(n,t,this.options.xmlMode)}}if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t=="object")throw new Error("Bad combination of arguments.");return it(this,(n,s)=>{Be(n)&&xm(n,t,e.call(n,s,Tv(n,t,this.options.xmlMode)),this.options.xmlMode)})}return it(this,n=>{Be(n)&&(typeof t=="object"?Object.keys(t).forEach(s=>{const i=t[s];xm(n,s,i,this.options.xmlMode)}):xm(n,t,e,this.options.xmlMode))})}}function Av(t,e,r){var n;const s=t;(n=s.data)!==null&&n!==void 0||(s.data={}),typeof e=="object"?Object.assign(s.data,e):typeof e=="string"&&r!==void 0&&(s.data[e]=r)}function xv(t,e){let r,n,s;e==null?(r=Object.keys(t.attribs).filter(i=>i.startsWith(Am)),n=r.map(i=>fj(i.slice(Am.length)))):(r=[Am+pj(e)],n=[e]);for(let i=0;i<r.length;++i){const a=r[i],o=n[i];if(uo.call(t.attribs,a)&&!uo.call(t.data,o)){if(s=t.attribs[a],uo.call(vv,s))s=vv[s];else if(s===String(Number(s)))s=Number(s);else if(mj.test(s))try{s=JSON.parse(s)}catch{}t.data[o]=s}}return e==null?t.data:s}function yj(t,e){var r;const n=this[0];if(!n||!Be(n))return;const s=n;return(r=s.data)!==null&&r!==void 0||(s.data={}),t?typeof t=="object"||e!==void 0?(it(this,i=>{Be(i)&&(typeof t=="object"?Av(i,t):Av(i,t,e))}),this):uo.call(s.data,t)?s.data[t]:xv(s,t):xv(s)}function _j(t){const e=arguments.length===0,r=this[0];if(!r||!Be(r))return e?void 0:this;switch(r.name){case"textarea":return this.text(t);case"select":{const n=this.find("option:selected");if(!e){if(this.attr("multiple")==null&&typeof t=="object")return this;this.find("option").removeAttr("selected");const s=typeof t!="object"?[t]:t;for(let i=0;i<s.length;i++)this.find(`option[value="${s[i]}"]`).attr("selected","");return this}return this.attr("multiple")?n.toArray().map(s=>Zl(s.children)):n.attr("value")}case"input":case"option":return e?this.attr("value"):this.attr("value",t)}}function ND(t,e){!t.attribs||!uo.call(t.attribs,e)||delete t.attribs[e]}function Xh(t){return t?t.trim().split(ec):[]}function bj(t){const e=Xh(t);for(let r=0;r<e.length;r++)it(this,n=>{Be(n)&&ND(n,e[r])});return this}function vj(t){return this.toArray().some(e=>{const r=Be(e)&&e.attribs.class;let n=-1;if(r&&t.length)for(;(n=r.indexOf(t,n+1))>-1;){const s=n+t.length;if((n===0||ec.test(r[n-1]))&&(s===r.length||ec.test(r[s])))return!0}return!1})}function RD(t){if(typeof t=="function")return it(this,(n,s)=>{if(Be(n)){const i=n.attribs.class||"";RD.call([n],t.call(n,s,i))}});if(!t||typeof t!="string")return this;const e=t.split(ec),r=this.length;for(let n=0;n<r;n++){const s=this[n];if(!Be(s))continue;const i=Qh(s,"class",!1);if(!i)lo(s,"class",e.join(" ").trim());else{let a=` ${i} `;for(let o=0;o<e.length;o++){const u=`${e[o]} `;a.includes(` ${u}`)||(a+=u)}lo(s,"class",a.trim())}}return this}function kD(t){if(typeof t=="function")return it(this,(s,i)=>{Be(s)&&kD.call([s],t.call(s,i,s.attribs.class||""))});const e=Xh(t),r=e.length,n=arguments.length===0;return it(this,s=>{if(Be(s))if(n)s.attribs.class="";else{const i=Xh(s.attribs.class);let a=!1;for(let o=0;o<r;o++){const u=i.indexOf(e[o]);u>=0&&(i.splice(u,1),a=!0,o--)}a&&(s.attribs.class=i.join(" "))}})}function PD(t,e){if(typeof t=="function")return it(this,(a,o)=>{Be(a)&&PD.call([a],t.call(a,o,a.attribs.class||"",e),e)});if(!t||typeof t!="string")return this;const r=t.split(ec),n=r.length,s=typeof e=="boolean"?e?1:-1:0,i=this.length;for(let a=0;a<i;a++){const o=this[a];if(!Be(o))continue;const u=Xh(o.attribs.class);for(let c=0;c<n;c++){const h=u.indexOf(r[c]);s>=0&&h<0?u.push(r[c]):s<=0&&h>=0&&u.splice(h,1)}o.attribs.class=u.join(" ")}return this}const Tj=Object.freeze(Object.defineProperty({__proto__:null,addClass:RD,attr:gj,data:yj,hasClass:vj,prop:Ej,removeAttr:bj,removeClass:kD,toggleClass:PD,val:_j},Symbol.toStringTag,{value:"Module"}));var Ae;(function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"})(Ae||(Ae={}));const Aj={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var Qe;(function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"})(Qe||(Qe={}));const wv=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,xj=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,wj=new Map([[126,Qe.Element],[94,Qe.Start],[36,Qe.End],[42,Qe.Any],[33,Qe.Not],[124,Qe.Hyphen]]),Ij=new Set(["has","not","matches","is","where","host","host-context"]);function co(t){switch(t.type){case Ae.Adjacent:case Ae.Child:case Ae.Descendant:case Ae.Parent:case Ae.Sibling:case Ae.ColumnCombinator:return!0;default:return!1}}const Cj=new Set(["contains","icontains"]);function Dj(t,e,r){const n=parseInt(e,16)-65536;return n!==n||r?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function Pu(t){return t.replace(xj,Dj)}function wm(t){return t===39||t===34}function Iv(t){return t===32||t===9||t===10||t===12||t===13}function ep(t){const e=[],r=OD(e,`${t}`,0);if(r<t.length)throw new Error(`Unmatched selector: ${t.slice(r)}`);return e}function OD(t,e,r){let n=[];function s(m){const E=e.slice(r+m).match(wv);if(!E)throw new Error(`Expected name, found ${e.slice(r)}`);const[v]=E;return r+=m+v.length,Pu(v)}function i(m){for(r+=m;r<e.length&&Iv(e.charCodeAt(r));)r++}function a(){r+=1;const m=r;let E=1;for(;E>0&&r<e.length;r++)e.charCodeAt(r)===40&&!o(r)?E++:e.charCodeAt(r)===41&&!o(r)&&E--;if(E)throw new Error("Parenthesis not matched");return Pu(e.slice(m,r-1))}function o(m){let E=0;for(;e.charCodeAt(--m)===92;)E++;return(E&1)===1}function u(){if(n.length>0&&co(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function c(m){if(n.length>0&&n[n.length-1].type===Ae.Descendant){n[n.length-1].type=m;return}u(),n.push({type:m})}function h(m,E){n.push({type:Ae.Attribute,name:m,action:E,value:s(1),namespace:null,ignoreCase:"quirks"})}function p(){if(n.length&&n[n.length-1].type===Ae.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");t.push(n)}if(i(0),e.length===r)return r;e:for(;r<e.length;){const m=e.charCodeAt(r);switch(m){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==Ae.Descendant)&&(u(),n.push({type:Ae.Descendant})),i(1);break}case 62:{c(Ae.Child),i(1);break}case 60:{c(Ae.Parent),i(1);break}case 126:{c(Ae.Sibling),i(1);break}case 43:{c(Ae.Adjacent),i(1);break}case 46:{h("class",Qe.Element);break}case 35:{h("id",Qe.Equals);break}case 91:{i(1);let E,v=null;e.charCodeAt(r)===124?E=s(1):e.startsWith("*|",r)?(v="*",E=s(2)):(E=s(0),e.charCodeAt(r)===124&&e.charCodeAt(r+1)!==61&&(v=E,E=s(1))),i(0);let _=Qe.Exists;const x=wj.get(e.charCodeAt(r));if(x){if(_=x,e.charCodeAt(r+1)!==61)throw new Error("Expected `=`");i(2)}else e.charCodeAt(r)===61&&(_=Qe.Equals,i(1));let w="",b=null;if(_!=="exists"){if(wm(e.charCodeAt(r))){const B=e.charCodeAt(r);let V=r+1;for(;V<e.length&&(e.charCodeAt(V)!==B||o(V));)V+=1;if(e.charCodeAt(V)!==B)throw new Error("Attribute value didn't end");w=Pu(e.slice(r+1,V)),r=V+1}else{const B=r;for(;r<e.length&&(!Iv(e.charCodeAt(r))&&e.charCodeAt(r)!==93||o(r));)r+=1;w=Pu(e.slice(B,r))}i(0);const O=e.charCodeAt(r)|32;O===115?(b=!1,i(1)):O===105&&(b=!0,i(1))}if(e.charCodeAt(r)!==93)throw new Error("Attribute selector didn't terminate");r+=1;const T={type:Ae.Attribute,name:E,action:_,value:w,namespace:v,ignoreCase:b};n.push(T);break}case 58:{if(e.charCodeAt(r+1)===58){n.push({type:Ae.PseudoElement,name:s(2).toLowerCase(),data:e.charCodeAt(r)===40?a():null});continue}const E=s(1).toLowerCase();let v=null;if(e.charCodeAt(r)===40)if(Ij.has(E)){if(wm(e.charCodeAt(r+1)))throw new Error(`Pseudo-selector ${E} cannot be quoted`);if(v=[],r=OD(v,e,r+1),e.charCodeAt(r)!==41)throw new Error(`Missing closing parenthesis in :${E} (${e})`);r+=1}else{if(v=a(),Cj.has(E)){const _=v.charCodeAt(0);_===v.charCodeAt(v.length-1)&&wm(_)&&(v=v.slice(1,-1))}v=Pu(v)}n.push({type:Ae.Pseudo,name:E,data:v});break}case 44:{p(),n=[],i(1);break}default:{if(e.startsWith("/*",r)){const _=e.indexOf("*/",r+2);if(_<0)throw new Error("Comment was not terminated");r=_+2,n.length===0&&i(0);break}let E=null,v;if(m===42)r+=1,v="*";else if(m===124){if(v="",e.charCodeAt(r+1)===124){c(Ae.ColumnCombinator),i(2);break}}else if(wv.test(e.slice(r)))v=s(0);else break e;e.charCodeAt(r)===124&&e.charCodeAt(r+1)!==124&&(E=v,e.charCodeAt(r+1)===42?(v="*",r+=2):v=s(1)),n.push(v==="*"?{type:Ae.Universal,namespace:E}:{type:Ae.Tag,name:v,namespace:E})}}}return p(),r}const LD=["\\",'"'],FD=[...LD,"(",")"],Sj=new Set(LD.map(t=>t.charCodeAt(0))),Cv=new Set(FD.map(t=>t.charCodeAt(0))),Wa=new Set([...FD,"~","^","$","*","+","!","|",":","[","]"," ","."].map(t=>t.charCodeAt(0)));function BD(t){return t.map(e=>e.map(Nj).join("")).join(", ")}function Nj(t,e,r){switch(t.type){case Ae.Child:return e===0?"> ":" > ";case Ae.Parent:return e===0?"< ":" < ";case Ae.Sibling:return e===0?"~ ":" ~ ";case Ae.Adjacent:return e===0?"+ ":" + ";case Ae.Descendant:return" ";case Ae.ColumnCombinator:return e===0?"|| ":" || ";case Ae.Universal:return t.namespace==="*"&&e+1<r.length&&"name"in r[e+1]?"":`${MD(t.namespace)}*`;case Ae.Tag:return Dv(t);case Ae.PseudoElement:return`::${On(t.name,Wa)}${t.data===null?"":`(${On(t.data,Cv)})`}`;case Ae.Pseudo:return`:${On(t.name,Wa)}${t.data===null?"":`(${typeof t.data=="string"?On(t.data,Cv):BD(t.data)})`}`;case Ae.Attribute:{if(t.name==="id"&&t.action===Qe.Equals&&t.ignoreCase==="quirks"&&!t.namespace)return`#${On(t.value,Wa)}`;if(t.name==="class"&&t.action===Qe.Element&&t.ignoreCase==="quirks"&&!t.namespace)return`.${On(t.value,Wa)}`;const n=Dv(t);return t.action===Qe.Exists?`[${n}]`:`[${n}${Rj(t.action)}="${On(t.value,Sj)}"${t.ignoreCase===null?"":t.ignoreCase?" i":" s"}]`}}}function Rj(t){switch(t){case Qe.Equals:return"";case Qe.Element:return"~";case Qe.Start:return"^";case Qe.End:return"$";case Qe.Any:return"*";case Qe.Not:return"!";case Qe.Hyphen:return"|";case Qe.Exists:throw new Error("Shouldn't be here")}}function Dv(t){return`${MD(t.namespace)}${On(t.name,Wa)}`}function MD(t){return t!==null?`${t==="*"?"*":On(t,Wa)}|`:""}function On(t,e){let r=0,n="";for(let s=0;s<t.length;s++)e.has(t.charCodeAt(s))&&(n+=`${t.slice(r,s)}\\${t.charAt(s)}`,r=s+1);return n.length>0?n+t.slice(r):t}const kj=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return Qe},IgnoreCaseMode:Aj,get SelectorType(){return Ae},isTraversal:co,parse:ep,stringify:BD},Symbol.toStringTag,{value:"Module"}));var da={},es={trueFunc:function(){return!0},falseFunc:function(){return!1}},Ys={};const tp=rc(kj);var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.isTraversal=void 0;var Ar=tp,jD=new Map([[Ar.SelectorType.Universal,50],[Ar.SelectorType.Tag,30],[Ar.SelectorType.Attribute,1],[Ar.SelectorType.Pseudo,0]]);function Pj(t){return!jD.has(t.type)}nu.isTraversal=Pj;var Oj=new Map([[Ar.AttributeAction.Exists,10],[Ar.AttributeAction.Equals,8],[Ar.AttributeAction.Not,7],[Ar.AttributeAction.Start,6],[Ar.AttributeAction.End,6],[Ar.AttributeAction.Any,5]]);function Lj(t){for(var e=t.map(UD),r=1;r<t.length;r++){var n=e[r];if(!(n<0))for(var s=r-1;s>=0&&n<e[s];s--){var i=t[s+1];t[s+1]=t[s],t[s]=i,e[s+1]=e[s],e[s]=n}}}nu.default=Lj;function UD(t){var e,r,n=(e=jD.get(t.type))!==null&&e!==void 0?e:-1;return t.type===Ar.SelectorType.Attribute?(n=(r=Oj.get(t.action))!==null&&r!==void 0?r:4,t.action===Ar.AttributeAction.Equals&&t.name==="id"&&(n=9),t.ignoreCase&&(n>>=1)):t.type===Ar.SelectorType.Pseudo&&(t.data?t.name==="has"||t.name==="contains"?n=0:Array.isArray(t.data)?(n=Math.min.apply(Math,t.data.map(function(s){return Math.min.apply(Math,s.map(UD))})),n<0&&(n=0)):n=2:n=3),n}var rp={},np={},Fj=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(np,"__esModule",{value:!0});np.attributeRules=void 0;var xd=Fj(es),Bj=/[-[\]{}()*+?.,\\^$|#\s]/g;function Sv(t){return t.replace(Bj,"\\$&")}var Mj=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function _i(t,e){return typeof t.ignoreCase=="boolean"?t.ignoreCase:t.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&Mj.has(t.name)}np.attributeRules={equals:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;return _i(e,r)?(i=i.toLowerCase(),function(a){var o=n.getAttributeValue(a,s);return o!=null&&o.length===i.length&&o.toLowerCase()===i&&t(a)}):function(a){return n.getAttributeValue(a,s)===i&&t(a)}},hyphen:function(t,e,r){var n=r.adapter,s=e.name,i=e.value,a=i.length;return _i(e,r)?(i=i.toLowerCase(),function(u){var c=n.getAttributeValue(u,s);return c!=null&&(c.length===a||c.charAt(a)==="-")&&c.substr(0,a).toLowerCase()===i&&t(u)}):function(u){var c=n.getAttributeValue(u,s);return c!=null&&(c.length===a||c.charAt(a)==="-")&&c.substr(0,a)===i&&t(u)}},element:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;if(/\s/.test(i))return xd.default.falseFunc;var a=new RegExp("(?:^|\\s)".concat(Sv(i),"(?:$|\\s)"),_i(e,r)?"i":"");return function(u){var c=n.getAttributeValue(u,s);return c!=null&&c.length>=i.length&&a.test(c)&&t(u)}},exists:function(t,e,r){var n=e.name,s=r.adapter;return function(i){return s.hasAttrib(i,n)&&t(i)}},start:function(t,e,r){var n=r.adapter,s=e.name,i=e.value,a=i.length;return a===0?xd.default.falseFunc:_i(e,r)?(i=i.toLowerCase(),function(o){var u=n.getAttributeValue(o,s);return u!=null&&u.length>=a&&u.substr(0,a).toLowerCase()===i&&t(o)}):function(o){var u;return!!(!((u=n.getAttributeValue(o,s))===null||u===void 0)&&u.startsWith(i))&&t(o)}},end:function(t,e,r){var n=r.adapter,s=e.name,i=e.value,a=-i.length;return a===0?xd.default.falseFunc:_i(e,r)?(i=i.toLowerCase(),function(o){var u;return((u=n.getAttributeValue(o,s))===null||u===void 0?void 0:u.substr(a).toLowerCase())===i&&t(o)}):function(o){var u;return!!(!((u=n.getAttributeValue(o,s))===null||u===void 0)&&u.endsWith(i))&&t(o)}},any:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;if(i==="")return xd.default.falseFunc;if(_i(e,r)){var a=new RegExp(Sv(i),"i");return function(u){var c=n.getAttributeValue(u,s);return c!=null&&c.length>=i.length&&a.test(c)&&t(u)}}return function(o){var u;return!!(!((u=n.getAttributeValue(o,s))===null||u===void 0)&&u.includes(i))&&t(o)}},not:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;return i===""?function(a){return!!n.getAttributeValue(a,s)&&t(a)}:_i(e,r)?(i=i.toLowerCase(),function(a){var o=n.getAttributeValue(a,s);return(o==null||o.length!==i.length||o.toLowerCase()!==i)&&t(a)}):function(a){return n.getAttributeValue(a,s)!==i&&t(a)}}};var j1={},VD={},qD={},sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.parse=void 0;var jj=new Set([9,10,12,13,32]),Nv=48,Uj=57;function Vj(t){if(t=t.trim().toLowerCase(),t==="even")return[2,0];if(t==="odd")return[2,1];var e=0,r=0,n=i(),s=a();if(e<t.length&&t.charAt(e)==="n"&&(e++,r=n*(s??1),o(),e<t.length?(n=i(),o(),s=a()):n=s=0),s===null||e<t.length)throw new Error("n-th rule couldn't be parsed ('".concat(t,"')"));return[r,n*s];function i(){return t.charAt(e)==="-"?(e++,-1):(t.charAt(e)==="+"&&e++,1)}function a(){for(var u=e,c=0;e<t.length&&t.charCodeAt(e)>=Nv&&t.charCodeAt(e)<=Uj;)c=c*10+(t.charCodeAt(e)-Nv),e++;return e===u?null:c}function o(){for(;e<t.length&&jj.has(t.charCodeAt(e));)e++}}sp.parse=Vj;var Bo={},qj=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.generate=Bo.compile=void 0;var Rv=qj(es);function Hj(t){var e=t[0],r=t[1]-1;if(r<0&&e<=0)return Rv.default.falseFunc;if(e===-1)return function(i){return i<=r};if(e===0)return function(i){return i===r};if(e===1)return r<0?Rv.default.trueFunc:function(i){return i>=r};var n=Math.abs(e),s=(r%n+n)%n;return e>1?function(i){return i>=r&&i%n===s}:function(i){return i<=r&&i%n===s}}Bo.compile=Hj;function $j(t){var e=t[0],r=t[1]-1,n=0;if(e<0){var s=-e,i=(r%s+s)%s;return function(){var a=i+s*n++;return a>r?null:a}}return e===0?r<0?function(){return null}:function(){return n++===0?r:null}:(r<0&&(r+=e*Math.ceil(-r/e)),function(){return e*n+++r})}Bo.generate=$j;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sequence=t.generate=t.compile=t.parse=void 0;var e=sp;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return e.parse}});var r=Bo;Object.defineProperty(t,"compile",{enumerable:!0,get:function(){return r.compile}}),Object.defineProperty(t,"generate",{enumerable:!0,get:function(){return r.generate}});function n(i){return(0,r.compile)((0,e.parse)(i))}t.default=n;function s(i){return(0,r.generate)((0,e.parse)(i))}t.sequence=s})(qD);(function(t){var e=me&&me.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.filters=void 0;var r=e(qD),n=e(es);function s(a,o){return function(u){var c=o.getParent(u);return c!=null&&o.isTag(c)&&a(u)}}t.filters={contains:function(a,o,u){var c=u.adapter;return function(p){return a(p)&&c.getText(p).includes(o)}},icontains:function(a,o,u){var c=u.adapter,h=o.toLowerCase();return function(m){return a(m)&&c.getText(m).toLowerCase().includes(h)}},"nth-child":function(a,o,u){var c=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,c):function(E){for(var v=c.getSiblings(E),_=0,x=0;x<v.length&&!h(E,v[x]);x++)c.isTag(v[x])&&_++;return p(_)&&a(E)}},"nth-last-child":function(a,o,u){var c=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,c):function(E){for(var v=c.getSiblings(E),_=0,x=v.length-1;x>=0&&!h(E,v[x]);x--)c.isTag(v[x])&&_++;return p(_)&&a(E)}},"nth-of-type":function(a,o,u){var c=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,c):function(E){for(var v=c.getSiblings(E),_=0,x=0;x<v.length;x++){var w=v[x];if(h(E,w))break;c.isTag(w)&&c.getName(w)===c.getName(E)&&_++}return p(_)&&a(E)}},"nth-last-of-type":function(a,o,u){var c=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,c):function(E){for(var v=c.getSiblings(E),_=0,x=v.length-1;x>=0;x--){var w=v[x];if(h(E,w))break;c.isTag(w)&&c.getName(w)===c.getName(E)&&_++}return p(_)&&a(E)}},root:function(a,o,u){var c=u.adapter;return function(h){var p=c.getParent(h);return(p==null||!c.isTag(p))&&a(h)}},scope:function(a,o,u,c){var h=u.equals;return!c||c.length===0?t.filters.root(a,o,u):c.length===1?function(p){return h(c[0],p)&&a(p)}:function(p){return c.includes(p)&&a(p)}},hover:i("isHovered"),visited:i("isVisited"),active:i("isActive")};function i(a){return function(u,c,h){var p=h.adapter,m=p[a];return typeof m!="function"?n.default.falseFunc:function(v){return m(v)&&u(v)}}}})(VD);var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.verifyPseudoArgs=Mo.pseudos=void 0;Mo.pseudos={empty:function(t,e){var r=e.adapter;return!r.getChildren(t).some(function(n){return r.isTag(n)||r.getText(n)!==""})},"first-child":function(t,e){var r=e.adapter,n=e.equals;if(r.prevElementSibling)return r.prevElementSibling(t)==null;var s=r.getSiblings(t).find(function(i){return r.isTag(i)});return s!=null&&n(t,s)},"last-child":function(t,e){for(var r=e.adapter,n=e.equals,s=r.getSiblings(t),i=s.length-1;i>=0;i--){if(n(t,s[i]))return!0;if(r.isTag(s[i]))break}return!1},"first-of-type":function(t,e){for(var r=e.adapter,n=e.equals,s=r.getSiblings(t),i=r.getName(t),a=0;a<s.length;a++){var o=s[a];if(n(t,o))return!0;if(r.isTag(o)&&r.getName(o)===i)break}return!1},"last-of-type":function(t,e){for(var r=e.adapter,n=e.equals,s=r.getSiblings(t),i=r.getName(t),a=s.length-1;a>=0;a--){var o=s[a];if(n(t,o))return!0;if(r.isTag(o)&&r.getName(o)===i)break}return!1},"only-of-type":function(t,e){var r=e.adapter,n=e.equals,s=r.getName(t);return r.getSiblings(t).every(function(i){return n(t,i)||!r.isTag(i)||r.getName(i)!==s})},"only-child":function(t,e){var r=e.adapter,n=e.equals;return r.getSiblings(t).every(function(s){return n(t,s)||!r.isTag(s)})}};function zj(t,e,r,n){if(r===null){if(t.length>n)throw new Error("Pseudo-class :".concat(e," requires an argument"))}else if(t.length===n)throw new Error("Pseudo-class :".concat(e," doesn't have any arguments"))}Mo.verifyPseudoArgs=zj;var ip={};Object.defineProperty(ip,"__esModule",{value:!0});ip.aliases=void 0;ip.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var ap={};(function(t){var e=me&&me.__spreadArray||function(c,h,p){if(p||arguments.length===2)for(var m=0,E=h.length,v;m<E;m++)(v||!(m in h))&&(v||(v=Array.prototype.slice.call(h,0,m)),v[m]=h[m]);return c.concat(v||Array.prototype.slice.call(h))},r=me&&me.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.subselects=t.getNextSiblings=t.ensureIsTag=t.PLACEHOLDER_ELEMENT=void 0;var n=r(es),s=nu;t.PLACEHOLDER_ELEMENT={};function i(c,h){return c===n.default.falseFunc?n.default.falseFunc:function(p){return h.isTag(p)&&c(p)}}t.ensureIsTag=i;function a(c,h){var p=h.getSiblings(c);if(p.length<=1)return[];var m=p.indexOf(c);return m<0||m===p.length-1?[]:p.slice(m+1).filter(h.isTag)}t.getNextSiblings=a;function o(c){return{xmlMode:!!c.xmlMode,lowerCaseAttributeNames:!!c.lowerCaseAttributeNames,lowerCaseTags:!!c.lowerCaseTags,quirksMode:!!c.quirksMode,cacheResults:!!c.cacheResults,pseudos:c.pseudos,adapter:c.adapter,equals:c.equals}}var u=function(c,h,p,m,E){var v=E(h,o(p),m);return v===n.default.trueFunc?c:v===n.default.falseFunc?n.default.falseFunc:function(_){return v(_)&&c(_)}};t.subselects={is:u,matches:u,where:u,not:function(c,h,p,m,E){var v=E(h,o(p),m);return v===n.default.falseFunc?c:v===n.default.trueFunc?n.default.falseFunc:function(_){return!v(_)&&c(_)}},has:function(c,h,p,m,E){var v=p.adapter,_=o(p);_.relativeSelector=!0;var x=h.some(function(B){return B.some(s.isTraversal)})?[t.PLACEHOLDER_ELEMENT]:void 0,w=E(h,_,x);if(w===n.default.falseFunc)return n.default.falseFunc;var b=i(w,v);if(x&&w!==n.default.trueFunc){var T=w.shouldTestNextSiblings,O=T===void 0?!1:T;return function(B){if(!c(B))return!1;x[0]=B;var V=v.getChildren(B),N=O?e(e([],V,!0),a(B,v),!0):V;return v.existsOne(b,N)}}return function(B){return c(B)&&v.existsOne(b,v.getChildren(B))}}}})(ap);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.compilePseudoSelector=t.aliases=t.pseudos=t.filters=void 0;var e=tp,r=VD;Object.defineProperty(t,"filters",{enumerable:!0,get:function(){return r.filters}});var n=Mo;Object.defineProperty(t,"pseudos",{enumerable:!0,get:function(){return n.pseudos}});var s=ip;Object.defineProperty(t,"aliases",{enumerable:!0,get:function(){return s.aliases}});var i=ap;function a(o,u,c,h,p){var m,E=u.name,v=u.data;if(Array.isArray(v)){if(!(E in i.subselects))throw new Error("Unknown pseudo-class :".concat(E,"(").concat(v,")"));return i.subselects[E](o,v,c,h,p)}var _=(m=c.pseudos)===null||m===void 0?void 0:m[E],x=typeof _=="string"?_:s.aliases[E];if(typeof x=="string"){if(v!=null)throw new Error("Pseudo ".concat(E," doesn't have any arguments"));var w=(0,e.parse)(x);return i.subselects.is(o,w,c,h,p)}if(typeof _=="function")return(0,n.verifyPseudoArgs)(_,E,v,1),function(T){return _(T,v)&&o(T)};if(E in r.filters)return r.filters[E](o,v,c,h);if(E in n.pseudos){var b=n.pseudos[E];return(0,n.verifyPseudoArgs)(b,E,v,2),function(T){return b(T,c,v)&&o(T)}}throw new Error("Unknown pseudo-class :".concat(E))}t.compilePseudoSelector=a})(j1);Object.defineProperty(rp,"__esModule",{value:!0});rp.compileGeneralSelector=void 0;var Gj=np,Wj=j1,Kr=tp;function Im(t,e){var r=e.getParent(t);return r&&e.isTag(r)?r:null}function Kj(t,e,r,n,s){var i=r.adapter,a=r.equals;switch(e.type){case Kr.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case Kr.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case Kr.SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!r.xmlMode||r.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),Gj.attributeRules[e.action](t,e,r)}case Kr.SelectorType.Pseudo:return(0,Wj.compilePseudoSelector)(t,e,r,n,s);case Kr.SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var o=e.name;return(!r.xmlMode||r.lowerCaseTags)&&(o=o.toLowerCase()),function(h){return i.getName(h)===o&&t(h)}}case Kr.SelectorType.Descendant:{if(r.cacheResults===!1||typeof WeakSet>"u")return function(h){for(var p=h;p=Im(p,i);)if(t(p))return!0;return!1};var u=new WeakSet;return function(h){for(var p=h;p=Im(p,i);)if(!u.has(p)){if(i.isTag(p)&&t(p))return!0;u.add(p)}return!1}}case"_flexibleDescendant":return function(h){var p=h;do if(t(p))return!0;while(p=Im(p,i));return!1};case Kr.SelectorType.Parent:return function(h){return i.getChildren(h).some(function(p){return i.isTag(p)&&t(p)})};case Kr.SelectorType.Child:return function(h){var p=i.getParent(h);return p!=null&&i.isTag(p)&&t(p)};case Kr.SelectorType.Sibling:return function(h){for(var p=i.getSiblings(h),m=0;m<p.length;m++){var E=p[m];if(a(h,E))break;if(i.isTag(E)&&t(E))return!0}return!1};case Kr.SelectorType.Adjacent:return i.prevElementSibling?function(h){var p=i.prevElementSibling(h);return p!=null&&t(p)}:function(h){for(var p=i.getSiblings(h),m,E=0;E<p.length;E++){var v=p[E];if(a(h,v))break;i.isTag(v)&&(m=v)}return!!m&&t(m)};case Kr.SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return t}}}rp.compileGeneralSelector=Kj;var Yj=me&&me.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qj=me&&me.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xj=me&&me.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Yj(e,t,r);return Qj(e,t),e},Jj=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.compileToken=Ys.compileUnsafe=Ys.compile=void 0;var $n=tp,Os=Jj(es),gg=Xj(nu),Zj=rp,HD=ap;function e7(t,e,r){var n=$D(t,e,r);return(0,HD.ensureIsTag)(n,e.adapter)}Ys.compile=e7;function $D(t,e,r){var n=typeof t=="string"?(0,$n.parse)(t):t;return U1(n,e,r)}Ys.compileUnsafe=$D;function zD(t){return t.type===$n.SelectorType.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some(function(e){return e.some(zD)}))}var t7={type:$n.SelectorType.Descendant},r7={type:"_flexibleDescendant"},n7={type:$n.SelectorType.Pseudo,name:"scope",data:null};function s7(t,e,r){for(var n=e.adapter,s=!!(r!=null&&r.every(function(u){var c=n.isTag(u)&&n.getParent(u);return u===HD.PLACEHOLDER_ELEMENT||c&&n.isTag(c)})),i=0,a=t;i<a.length;i++){var o=a[i];if(!(o.length>0&&(0,gg.isTraversal)(o[0])&&o[0].type!==$n.SelectorType.Descendant))if(s&&!o.some(zD))o.unshift(t7);else continue;o.unshift(n7)}}function U1(t,e,r){var n;t.forEach(gg.default),r=(n=e.context)!==null&&n!==void 0?n:r;var s=Array.isArray(r),i=r&&(Array.isArray(r)?r:[r]);if(e.relativeSelector!==!1)s7(t,e,i);else if(t.some(function(u){return u.length>0&&(0,gg.isTraversal)(u[0])}))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");var a=!1,o=t.map(function(u){if(u.length>=2){var c=u[0],h=u[1];c.type!==$n.SelectorType.Pseudo||c.name!=="scope"||(s&&h.type===$n.SelectorType.Descendant?u[1]=r7:(h.type===$n.SelectorType.Adjacent||h.type===$n.SelectorType.Sibling)&&(a=!0))}return i7(u,e,i)}).reduce(a7,Os.default.falseFunc);return o.shouldTestNextSiblings=a,o}Ys.compileToken=U1;function i7(t,e,r){var n;return t.reduce(function(s,i){return s===Os.default.falseFunc?Os.default.falseFunc:(0,Zj.compileGeneralSelector)(s,i,e,r,U1)},(n=e.rootFunc)!==null&&n!==void 0?n:Os.default.trueFunc)}function a7(t,e){return e===Os.default.falseFunc||t===Os.default.trueFunc?t:t===Os.default.falseFunc||e===Os.default.trueFunc?e:function(n){return t(n)||e(n)}}(function(t){var e=me&&me.__createBinding||(Object.create?function(b,T,O,B){B===void 0&&(B=O);var V=Object.getOwnPropertyDescriptor(T,O);(!V||("get"in V?!T.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return T[O]}}),Object.defineProperty(b,B,V)}:function(b,T,O,B){B===void 0&&(B=O),b[B]=T[O]}),r=me&&me.__setModuleDefault||(Object.create?function(b,T){Object.defineProperty(b,"default",{enumerable:!0,value:T})}:function(b,T){b.default=T}),n=me&&me.__importStar||function(b){if(b&&b.__esModule)return b;var T={};if(b!=null)for(var O in b)O!=="default"&&Object.prototype.hasOwnProperty.call(b,O)&&e(T,b,O);return r(T,b),T},s=me&&me.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.aliases=t.pseudos=t.filters=t.is=t.selectOne=t.selectAll=t.prepareContext=t._compileToken=t._compileUnsafe=t.compile=void 0;var i=n(He),a=s(es),o=Ys,u=ap,c=function(b,T){return b===T},h={adapter:i,equals:c};function p(b){var T,O,B,V,N=b??h;return(T=N.adapter)!==null&&T!==void 0||(N.adapter=i),(O=N.equals)!==null&&O!==void 0||(N.equals=(V=(B=N.adapter)===null||B===void 0?void 0:B.equals)!==null&&V!==void 0?V:c),N}function m(b){return function(O,B,V){var N=p(B);return b(O,N,V)}}t.compile=m(o.compile),t._compileUnsafe=m(o.compileUnsafe),t._compileToken=m(o.compileToken);function E(b){return function(O,B,V){var N=p(V);typeof O!="function"&&(O=(0,o.compileUnsafe)(O,N,B));var I=v(B,N.adapter,O.shouldTestNextSiblings);return b(O,I,N)}}function v(b,T,O){return O===void 0&&(O=!1),O&&(b=_(b,T)),Array.isArray(b)?T.removeSubsets(b):T.getChildren(b)}t.prepareContext=v;function _(b,T){for(var O=Array.isArray(b)?b.slice(0):[b],B=O.length,V=0;V<B;V++){var N=(0,u.getNextSiblings)(O[V],T);O.push.apply(O,N)}return O}t.selectAll=E(function(b,T,O){return b===a.default.falseFunc||!T||T.length===0?[]:O.adapter.findAll(b,T)}),t.selectOne=E(function(b,T,O){return b===a.default.falseFunc||!T||T.length===0?null:O.adapter.findOne(b,T)});function x(b,T,O){var B=p(O);return(typeof T=="function"?T:(0,o.compile)(T,B))(b)}t.is=x,t.default=t.selectAll;var w=j1;Object.defineProperty(t,"filters",{enumerable:!0,get:function(){return w.filters}}),Object.defineProperty(t,"pseudos",{enumerable:!0,get:function(){return w.pseudos}}),Object.defineProperty(t,"aliases",{enumerable:!0,get:function(){return w.aliases}})})(da);const o7=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function Jh(t){return t.type!=="pseudo"?!1:o7.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(e=>e.some(Jh)):!1}function u7(t,e,r){const n=e!=null?parseInt(e,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(n)?n>=0?n+1:1/0:0;case"lt":return isFinite(n)?n>=0?Math.min(n,r):1/0:0;case"gt":return isFinite(n)?1/0:0;case"odd":return 2*r;case"even":return 2*r-1;case"last":case"not":return 1/0}}function l7(t){for(;t.parent;)t=t.parent;return t}function V1(t){const e=[],r=[];for(const n of t)n.some(Jh)?e.push(n):r.push(n);return[r,e]}const c7={type:Ae.Universal,namespace:null},d7={type:Ae.Pseudo,name:"scope",data:null};function GD(t,e,r={}){return WD([t],e,r)}function WD(t,e,r={}){if(typeof e=="function")return t.some(e);const[n,s]=V1(ep(e));return n.length>0&&t.some(da._compileToken(n,r))||s.some(i=>QD(i,t,r).length>0)}function h7(t,e,r,n){const s=typeof r=="string"?parseInt(r,10):NaN;switch(t){case"first":case"lt":return e;case"last":return e.length>0?[e[e.length-1]]:e;case"nth":case"eq":return isFinite(s)&&Math.abs(s)<e.length?[s<0?e[e.length+s]:e[s]]:[];case"gt":return isFinite(s)?e.slice(s+1):[];case"even":return e.filter((i,a)=>a%2===0);case"odd":return e.filter((i,a)=>a%2===1);case"not":{const i=new Set(YD(r,e,n));return e.filter(a=>!i.has(a))}}}function KD(t,e,r={}){return YD(ep(t),e,r)}function YD(t,e,r){if(e.length===0)return[];const[n,s]=V1(t);let i;if(n.length){const a=yg(e,n,r);if(s.length===0)return a;a.length&&(i=new Set(a))}for(let a=0;a<s.length&&(i==null?void 0:i.size)!==e.length;a++){const o=s[a];if((i?e.filter(h=>He.isTag(h)&&!i.has(h)):e).length===0)break;const c=QD(o,e,r);if(c.length)if(i)c.forEach(h=>i.add(h));else{if(a===s.length-1)return c;i=new Set(c)}}return typeof i<"u"?i.size===e.length?e:e.filter(a=>i.has(a)):[]}function QD(t,e,r){var n;if(t.some(co)){const s=(n=r.root)!==null&&n!==void 0?n:l7(e[0]),i={...r,context:e,relativeSelector:!1};return t.push(d7),Zh(s,t,i,!0,e.length)}return Zh(e,t,r,!1,e.length)}function f7(t,e,r={},n=1/0){if(typeof t=="function")return XD(e,t);const[s,i]=V1(ep(t)),a=i.map(o=>Zh(e,o,r,!0,n));return s.length&&a.push(Eg(e,s,r,n)),a.length===0?[]:a.length===1?a[0]:He.uniqueSort(a.reduce((o,u)=>[...o,...u]))}function Zh(t,e,r,n,s){const i=e.findIndex(Jh),a=e.slice(0,i),o=e[i],u=e.length-1===i?s:1/0,c=u7(o.name,o.data,u);if(c===0)return[];const p=(a.length===0&&!Array.isArray(t)?He.getChildren(t).filter(He.isTag):a.length===0?(Array.isArray(t)?t:[t]).filter(He.isTag):n||a.some(co)?Eg(t,[a],r,c):yg(t,[a],r)).slice(0,c);let m=h7(o.name,p,o.data,r);if(m.length===0||e.length===i+1)return m;const E=e.slice(i+1),v=E.some(co);if(v){if(co(E[0])){const{type:_}=E[0];(_===Ae.Sibling||_===Ae.Adjacent)&&(m=da.prepareContext(m,CD,!0)),E.unshift(c7)}r={...r,relativeSelector:!1,rootFunc:_=>m.includes(_)}}else r.rootFunc&&r.rootFunc!==es.trueFunc&&(r={...r,rootFunc:es.trueFunc});return E.some(Jh)?Zh(m,E,r,!1,s):v?Eg(m,[E],r,s):yg(m,[E],r)}function Eg(t,e,r,n){const s=da._compileToken(e,r,t);return XD(t,s,n)}function XD(t,e,r=1/0){const n=da.prepareContext(t,CD,e.shouldTestNextSiblings);return He.find(s=>He.isTag(s)&&e(s),n,!0,r)}function yg(t,e,r){const n=(Array.isArray(t)?t:[t]).filter(He.isTag);if(n.length===0)return n;const s=da._compileToken(e,r);return s===es.trueFunc?n:n.filter(s)}const p7=/^\s*[~+]/;function m7(t){var e;if(!t)return this._make([]);const r=this.toArray();if(typeof t!="string"){const i=xn(t)?t.toArray():[t];return this._make(i.filter(a=>r.some(o=>SD(o,a))))}const n=p7.test(t)?r:this.children().toArray(),s={context:r,root:(e=this._root)===null||e===void 0?void 0:e[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(f7(t,n,s))}function q1(t){return function(e,...r){return function(n){var s;let i=t(e,this);return n&&(i=z1(i,n,this.options.xmlMode,(s=this._root)===null||s===void 0?void 0:s[0])),this._make(this.length>1&&i.length>1?r.reduce((a,o)=>o(a),i):i)}}}const kc=q1((t,e)=>{const r=[];for(let n=0;n<e.length;n++){const s=t(e[n]);r.push(s)}return new Array().concat(...r)}),H1=q1((t,e)=>{const r=[];for(let n=0;n<e.length;n++){const s=t(e[n]);s!==null&&r.push(s)}return r});function $1(t,...e){let r=null;const n=q1((s,i)=>{const a=[];return it(i,o=>{for(let u;(u=s(o))&&!(r!=null&&r(u,a.length));o=u)a.push(u)}),a})(t,...e);return function(s,i){r=typeof s=="string"?o=>GD(o,s,this.options):s?Pc(s):null;const a=n.call(this,i);return r=null,a}}function su(t){return Array.from(new Set(t))}const g7=H1(({parent:t})=>t&&!ca(t)?t:null,su),E7=kc(t=>{const e=[];for(;t.parent&&!ca(t.parent);)e.push(t.parent),t=t.parent;return e},He.uniqueSort,t=>t.reverse()),y7=$1(({parent:t})=>t&&!ca(t)?t:null,He.uniqueSort,t=>t.reverse());function _7(t){var e;const r=[];if(!t)return this._make(r);const n={xmlMode:this.options.xmlMode,root:(e=this._root)===null||e===void 0?void 0:e[0]},s=typeof t=="string"?i=>GD(i,t,n):Pc(t);return it(this,i=>{for(;i&&Be(i);){if(s(i,0)){r.includes(i)||r.push(i);break}i=i.parent}}),this._make(r)}const b7=H1(t=>He.nextElementSibling(t)),v7=kc(t=>{const e=[];for(;t.next;)t=t.next,Be(t)&&e.push(t);return e},su),T7=$1(t=>He.nextElementSibling(t),su),A7=H1(t=>He.prevElementSibling(t)),x7=kc(t=>{const e=[];for(;t.prev;)t=t.prev,Be(t)&&e.push(t);return e},su),w7=$1(t=>He.prevElementSibling(t),su),I7=kc(t=>He.getSiblings(t).filter(e=>Be(e)&&e!==t),He.uniqueSort),C7=kc(t=>He.getChildren(t).filter(Be),su);function D7(){const t=this.toArray().reduce((e,r)=>an(r)?e.concat(r.children):e,[]);return this._make(t)}function S7(t){let e=0;const r=this.length;for(;e<r&&t.call(this[e],e,this[e])!==!1;)++e;return this}function N7(t){let e=[];for(let r=0;r<this.length;r++){const n=this[r],s=t.call(n,r,n);s!=null&&(e=e.concat(s))}return this._make(e)}function Pc(t){return typeof t=="function"?(e,r)=>t.call(e,r,e):xn(t)?e=>Array.prototype.includes.call(t,e):function(e){return t===e}}function R7(t){var e;return this._make(z1(this.toArray(),t,this.options.xmlMode,(e=this._root)===null||e===void 0?void 0:e[0]))}function z1(t,e,r,n){return typeof e=="string"?KD(e,t,{xmlMode:r,root:n}):t.filter(Pc(e))}function k7(t){const e=this.toArray();return typeof t=="string"?WD(e.filter(Be),t,this.options):t?e.some(Pc(t)):!1}function P7(t){let e=this.toArray();if(typeof t=="string"){const r=new Set(KD(t,e,this.options));e=e.filter(n=>!r.has(n))}else{const r=Pc(t);e=e.filter((n,s)=>!r(n,s))}return this._make(e)}function O7(t){return this.filter(typeof t=="string"?`:has(${t})`:(e,r)=>this._make(r).find(t).length>0)}function L7(){return this.length>1?this._make(this[0]):this}function F7(){return this.length>0?this._make(this[this.length-1]):this}function B7(t){var e;return t=+t,t===0&&this.length<=1?this:(t<0&&(t=this.length+t),this._make((e=this[t])!==null&&e!==void 0?e:[]))}function M7(t){return t==null?this.toArray():this[t<0?this.length+t:t]}function j7(){return Array.prototype.slice.call(this)}function U7(t){let e,r;return t==null?(e=this.parent().children(),r=this[0]):typeof t=="string"?(e=this._make(t),r=this[0]):(e=this,r=xn(t)?t[0]:t),Array.prototype.indexOf.call(e,r)}function V7(t,e){return this._make(Array.prototype.slice.call(this,t,e))}function q7(){var t;return(t=this.prevObject)!==null&&t!==void 0?t:this._make([])}function H7(t,e){const r=this._make(t,e),n=He.uniqueSort([...this.get(),...r.get()]);return this._make(n)}function $7(t){return this.prevObject?this.add(t?this.prevObject.filter(t):this.prevObject):this}const z7=Object.freeze(Object.defineProperty({__proto__:null,add:H7,addBack:$7,children:C7,closest:_7,contents:D7,each:S7,end:q7,eq:B7,filter:R7,filterArray:z1,find:m7,first:L7,get:M7,has:O7,index:U7,is:k7,last:F7,map:N7,next:b7,nextAll:v7,nextUntil:T7,not:P7,parent:g7,parents:E7,parentsUntil:y7,prev:A7,prevAll:x7,prevUntil:w7,siblings:I7,slice:V7,toArray:j7},Symbol.toStringTag,{value:"Module"}));function G7(t){return function(r,n,s,i){if(typeof Buffer<"u"&&Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string")return t(r,n,s,i);const a=r;if(!Array.isArray(a)&&ca(a))return a;const o=new ri([]);return ra(a,o),o}}function ra(t,e){const r=Array.isArray(t)?t:[t];e?e.children=r:e=null;for(let n=0;n<r.length;n++){const s=r[n];s.parent&&s.parent.children!==r&&He.removeElement(s),e?(s.prev=r[n-1]||null,s.next=r[n+1]||null):s.prev=s.next=null,s.parent=e}return e}function W7(t,e){return t==null?[]:xn(t)?e?pg(t.get()):t.get():Array.isArray(t)?t.reduce((r,n)=>r.concat(this._makeDomArray(n,e)),[]):typeof t=="string"?this._parse(t,this.options,!1,null).children:e?pg([t]):[t]}function JD(t){return function(...e){const r=this.length-1;return it(this,(n,s)=>{if(!an(n))return;const i=typeof e[0]=="function"?e[0].call(n,s,this._render(n.children)):e,a=this._makeDomArray(i,s<r);t(a,n.children,n)})}}function ci(t,e,r,n,s){var i,a;const o=[e,r,...n],u=e===0?null:t[e-1],c=e+r>=t.length?null:t[e+r];for(let h=0;h<n.length;++h){const p=n[h],m=p.parent;if(m){const v=m.children.indexOf(p);v>-1&&(m.children.splice(v,1),s===m&&e>v&&o[0]--)}p.parent=s,p.prev&&(p.prev.next=(i=p.next)!==null&&i!==void 0?i:null),p.next&&(p.next.prev=(a=p.prev)!==null&&a!==void 0?a:null),p.prev=h===0?u:n[h-1],p.next=h===n.length-1?c:n[h+1]}return u&&(u.next=n[0]),c&&(c.prev=n[n.length-1]),t.splice(...o)}function K7(t){return(xn(t)?t:this._make(t)).append(this),this}function Y7(t){return(xn(t)?t:this._make(t)).prepend(this),this}const Q7=JD((t,e,r)=>{ci(e,e.length,0,t,r)}),X7=JD((t,e,r)=>{ci(e,0,0,t,r)});function ZD(t){return function(e){const r=this.length-1,n=this.parents().last();for(let s=0;s<this.length;s++){const i=this[s],a=typeof e=="function"?e.call(i,s,i):typeof e=="string"&&!mg(e)?n.find(e).clone():e,[o]=this._makeDomArray(a,s<r);if(!o||!an(o))continue;let u=o,c=0;for(;c<u.children.length;){const h=u.children[c];Be(h)?(u=h,c=0):c++}t(i,u,[o])}return this}}const J7=ZD((t,e,r)=>{const{parent:n}=t;if(!n)return;const s=n.children,i=s.indexOf(t);ra([t],e),ci(s,i,0,r,n)}),Z7=ZD((t,e,r)=>{an(t)&&(ra(t.children,e),ra(r,t))});function eU(t){return this.parent(t).not("body").each((e,r)=>{this._make(r).replaceWith(r.children)}),this}function tU(t){const e=this[0];if(e){const r=this._make(typeof t=="function"?t.call(e,0,e):t).insertBefore(e);let n;for(let i=0;i<r.length;i++)r[i].type==="tag"&&(n=r[i]);let s=0;for(;n&&s<n.children.length;){const i=n.children[s];i.type==="tag"?(n=i,s=0):s++}n&&this._make(n).append(this)}return this}function rU(...t){const e=this.length-1;return it(this,(r,n)=>{const{parent:s}=r;if(!an(r)||!s)return;const i=s.children,a=i.indexOf(r);if(a<0)return;const o=typeof t[0]=="function"?t[0].call(r,n,this._render(r.children)):t,u=this._makeDomArray(o,n<e);ci(i,a+1,0,u,s)})}function nU(t){typeof t=="string"&&(t=this._make(t)),this.remove();const e=[];return this._makeDomArray(t).forEach(r=>{const n=this.clone().toArray(),{parent:s}=r;if(!s)return;const i=s.children,a=i.indexOf(r);a<0||(ci(i,a+1,0,n,s),e.push(...n))}),this._make(e)}function sU(...t){const e=this.length-1;return it(this,(r,n)=>{const{parent:s}=r;if(!an(r)||!s)return;const i=s.children,a=i.indexOf(r);if(a<0)return;const o=typeof t[0]=="function"?t[0].call(r,n,this._render(r.children)):t,u=this._makeDomArray(o,n<e);ci(i,a,0,u,s)})}function iU(t){const e=this._make(t);this.remove();const r=[];return it(e,n=>{const s=this.clone().toArray(),{parent:i}=n;if(!i)return;const a=i.children,o=a.indexOf(n);o<0||(ci(a,o,0,s,i),r.push(...s))}),this._make(r)}function aU(t){const e=t?this.filter(t):this;return it(e,r=>{He.removeElement(r),r.prev=r.next=r.parent=null}),this}function oU(t){return it(this,(e,r)=>{const{parent:n}=e;if(!n)return;const s=n.children,i=typeof t=="function"?t.call(e,r,e):t,a=this._makeDomArray(i);ra(a,null);const o=s.indexOf(e);ci(s,o,1,a,n),a.includes(e)||(e.parent=e.prev=e.next=null)})}function uU(){return it(this,t=>{an(t)&&(t.children.forEach(e=>{e.next=e.prev=e.parent=null}),t.children.length=0)})}function lU(t){if(t===void 0){const e=this[0];return!e||!an(e)?null:this._render(e.children)}return it(this,e=>{if(!an(e))return;e.children.forEach(n=>{n.next=n.prev=n.parent=null});const r=xn(t)?t.toArray():this._parse(`${t}`,this.options,!1,e).children;ra(r,e)})}function cU(){return this._render(this)}function dU(t){return t===void 0?Zl(this):typeof t=="function"?it(this,(e,r)=>this._make(e).text(t.call(e,r,Zl([e])))):it(this,e=>{if(!an(e))return;e.children.forEach(n=>{n.next=n.prev=n.parent=null});const r=new Fo(`${t}`);ra(r,e)})}function hU(){return this._make(pg(this.get()))}const fU=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray:W7,after:rU,append:Q7,appendTo:K7,before:sU,clone:hU,empty:uU,html:lU,insertAfter:nU,insertBefore:iU,prepend:X7,prependTo:Y7,remove:aU,replaceWith:oU,text:dU,toString:cU,unwrap:eU,wrap:J7,wrapAll:tU,wrapInner:Z7},Symbol.toStringTag,{value:"Module"}));function pU(t,e){if(t!=null&&e!=null||typeof t=="object"&&!Array.isArray(t))return it(this,(r,n)=>{Be(r)&&eS(r,t,e,n)});if(this.length!==0)return tS(this[0],t)}function eS(t,e,r,n){if(typeof e=="string"){const s=tS(t),i=typeof r=="function"?r.call(t,n,s[e]):r;i===""?delete s[e]:i!=null&&(s[e]=i),t.attribs.style=mU(s)}else typeof e=="object"&&Object.keys(e).forEach((s,i)=>{eS(t,s,e[s],i)})}function tS(t,e){if(!t||!Be(t))return;const r=gU(t.attribs.style);if(typeof e=="string")return r[e];if(Array.isArray(e)){const n={};return e.forEach(s=>{r[s]!=null&&(n[s]=r[s])}),n}return r}function mU(t){return Object.keys(t).reduce((e,r)=>`${e}${e?" ":""}${r}: ${t[r]};`,"")}function gU(t){if(t=(t||"").trim(),!t)return{};const e={};let r;for(const n of t.split(";")){const s=n.indexOf(":");if(s<1||s===n.length-1){const i=n.trimEnd();i.length>0&&r!==void 0&&(e[r]+=`;${i}`)}else r=n.slice(0,s).trim(),e[r]=n.slice(s+1).trim()}return e}const EU=Object.freeze(Object.defineProperty({__proto__:null,css:pU},Symbol.toStringTag,{value:"Module"})),kv="input,select,textarea,keygen",yU=/%20/g,Pv=/\r?\n/g;function _U(){return this.serializeArray().map(r=>`${encodeURIComponent(r.name)}=${encodeURIComponent(r.value)}`).join("&").replace(yU,"+")}function bU(){return this.map((t,e)=>{const r=this._make(e);return Be(e)&&e.name==="form"?r.find(kv).toArray():r.filter(kv).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((t,e)=>{var r;const n=this._make(e),s=n.attr("name"),i=(r=n.val())!==null&&r!==void 0?r:"";return Array.isArray(i)?i.map(a=>({name:s,value:a.replace(Pv,`\r
`)})):{name:s,value:i.replace(Pv,`\r
`)}}).toArray()}const vU=Object.freeze(Object.defineProperty({__proto__:null,serialize:_U,serializeArray:bU},Symbol.toStringTag,{value:"Module"}));class Oc{constructor(e,r,n){if(this.length=0,this.options=n,this._root=r,e){for(let s=0;s<e.length;s++)this[s]=e[s];this.length=e.length}}}Oc.prototype.cheerio="[cheerio object]";Oc.prototype.splice=Array.prototype.splice;Oc.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Object.assign(Oc.prototype,Tj,z7,fU,EU,vU);function TU(t,e){return function r(n,s,i=!0){if(n==null)throw new Error("cheerio.load() expects a string");const a={...k1,...ug(s)},o=t(n,a,i,null);class u extends Oc{_make(p,m){const E=c(p,m);return E.prevObject=this,E}_parse(p,m,E,v){return t(p,m,E,v)}_render(p){return e(p,this.options)}}function c(h,p,m=o,E){if(h&&xn(h))return h;const v={...a,...ug(E)},_=typeof m=="string"?[t(m,v,!1,null)]:"length"in m?m:[m],x=xn(_)?_:new u(_,null,v);if(x._root=x,!h)return new u(void 0,x,v);const w=typeof h=="string"&&mg(h)?t(h,v,!1,null).children:AU(h)?[h]:Array.isArray(h)?h:void 0,b=new u(w,x,v);if(w)return b;if(typeof h!="string")throw new Error("Unexpected type of selector");let T=h;const O=p?typeof p=="string"?mg(p)?new u([t(p,v,!1,null)],x,v):(T=`${p} ${T}`,x):xn(p)?p:new u(Array.isArray(p)?p:[p],x,v):x;return O?O.find(T):b}return Object.assign(c,hj,{load:r,_root:o,_options:a,fn:u.prototype,prototype:u.prototype}),c}}function AU(t){return!!t.name||t.type==="root"||t.type==="text"||t.type==="comment"}const xU=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ke="�";var S;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(S||(S={}));const or={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function rS(t){return t>=55296&&t<=57343}function wU(t){return t>=56320&&t<=57343}function IU(t,e){return(t-55296)*1024+9216+e}function nS(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function sS(t){return t>=64976&&t<=65007||xU.has(t)}var G;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(G||(G={}));const CU=65536;class DU{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=CU,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,r){const{line:n,col:s,offset:i}=this,a=s+r,o=i+r;return{code:e,startLine:n,endLine:n,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(wU(r))return this.pos++,this._addGap(),IU(e,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,S.EOF;return this._err(G.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,r){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,r){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==e.charCodeAt(n))return!1;return!0}peek(e){const r=this.pos+e;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,S.EOF;const n=this.html.charCodeAt(r);return n===S.CARRIAGE_RETURN?S.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,S.EOF;let e=this.html.charCodeAt(this.pos);return e===S.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,S.LINE_FEED):e===S.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,rS(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===S.LINE_FEED||e===S.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){nS(e)?this._err(G.controlCharacterInInputStream):sS(e)&&this._err(G.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Re;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Re||(Re={}));function iS(t,e){for(let r=t.attrs.length-1;r>=0;r--)if(t.attrs[r].name===e)return t.attrs[r].value;return null}var J;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(J||(J={}));var ji;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(ji||(ji={}));var xr;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(xr||(xr={}));var q;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(q||(q={}));var f;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(f||(f={}));const SU=new Map([[q.A,f.A],[q.ADDRESS,f.ADDRESS],[q.ANNOTATION_XML,f.ANNOTATION_XML],[q.APPLET,f.APPLET],[q.AREA,f.AREA],[q.ARTICLE,f.ARTICLE],[q.ASIDE,f.ASIDE],[q.B,f.B],[q.BASE,f.BASE],[q.BASEFONT,f.BASEFONT],[q.BGSOUND,f.BGSOUND],[q.BIG,f.BIG],[q.BLOCKQUOTE,f.BLOCKQUOTE],[q.BODY,f.BODY],[q.BR,f.BR],[q.BUTTON,f.BUTTON],[q.CAPTION,f.CAPTION],[q.CENTER,f.CENTER],[q.CODE,f.CODE],[q.COL,f.COL],[q.COLGROUP,f.COLGROUP],[q.DD,f.DD],[q.DESC,f.DESC],[q.DETAILS,f.DETAILS],[q.DIALOG,f.DIALOG],[q.DIR,f.DIR],[q.DIV,f.DIV],[q.DL,f.DL],[q.DT,f.DT],[q.EM,f.EM],[q.EMBED,f.EMBED],[q.FIELDSET,f.FIELDSET],[q.FIGCAPTION,f.FIGCAPTION],[q.FIGURE,f.FIGURE],[q.FONT,f.FONT],[q.FOOTER,f.FOOTER],[q.FOREIGN_OBJECT,f.FOREIGN_OBJECT],[q.FORM,f.FORM],[q.FRAME,f.FRAME],[q.FRAMESET,f.FRAMESET],[q.H1,f.H1],[q.H2,f.H2],[q.H3,f.H3],[q.H4,f.H4],[q.H5,f.H5],[q.H6,f.H6],[q.HEAD,f.HEAD],[q.HEADER,f.HEADER],[q.HGROUP,f.HGROUP],[q.HR,f.HR],[q.HTML,f.HTML],[q.I,f.I],[q.IMG,f.IMG],[q.IMAGE,f.IMAGE],[q.INPUT,f.INPUT],[q.IFRAME,f.IFRAME],[q.KEYGEN,f.KEYGEN],[q.LABEL,f.LABEL],[q.LI,f.LI],[q.LINK,f.LINK],[q.LISTING,f.LISTING],[q.MAIN,f.MAIN],[q.MALIGNMARK,f.MALIGNMARK],[q.MARQUEE,f.MARQUEE],[q.MATH,f.MATH],[q.MENU,f.MENU],[q.META,f.META],[q.MGLYPH,f.MGLYPH],[q.MI,f.MI],[q.MO,f.MO],[q.MN,f.MN],[q.MS,f.MS],[q.MTEXT,f.MTEXT],[q.NAV,f.NAV],[q.NOBR,f.NOBR],[q.NOFRAMES,f.NOFRAMES],[q.NOEMBED,f.NOEMBED],[q.NOSCRIPT,f.NOSCRIPT],[q.OBJECT,f.OBJECT],[q.OL,f.OL],[q.OPTGROUP,f.OPTGROUP],[q.OPTION,f.OPTION],[q.P,f.P],[q.PARAM,f.PARAM],[q.PLAINTEXT,f.PLAINTEXT],[q.PRE,f.PRE],[q.RB,f.RB],[q.RP,f.RP],[q.RT,f.RT],[q.RTC,f.RTC],[q.RUBY,f.RUBY],[q.S,f.S],[q.SCRIPT,f.SCRIPT],[q.SEARCH,f.SEARCH],[q.SECTION,f.SECTION],[q.SELECT,f.SELECT],[q.SOURCE,f.SOURCE],[q.SMALL,f.SMALL],[q.SPAN,f.SPAN],[q.STRIKE,f.STRIKE],[q.STRONG,f.STRONG],[q.STYLE,f.STYLE],[q.SUB,f.SUB],[q.SUMMARY,f.SUMMARY],[q.SUP,f.SUP],[q.TABLE,f.TABLE],[q.TBODY,f.TBODY],[q.TEMPLATE,f.TEMPLATE],[q.TEXTAREA,f.TEXTAREA],[q.TFOOT,f.TFOOT],[q.TD,f.TD],[q.TH,f.TH],[q.THEAD,f.THEAD],[q.TITLE,f.TITLE],[q.TR,f.TR],[q.TRACK,f.TRACK],[q.TT,f.TT],[q.U,f.U],[q.UL,f.UL],[q.SVG,f.SVG],[q.VAR,f.VAR],[q.WBR,f.WBR],[q.XMP,f.XMP]]);function op(t){var e;return(e=SU.get(t))!==null&&e!==void 0?e:f.UNKNOWN}const ee=f,NU={[J.HTML]:new Set([ee.ADDRESS,ee.APPLET,ee.AREA,ee.ARTICLE,ee.ASIDE,ee.BASE,ee.BASEFONT,ee.BGSOUND,ee.BLOCKQUOTE,ee.BODY,ee.BR,ee.BUTTON,ee.CAPTION,ee.CENTER,ee.COL,ee.COLGROUP,ee.DD,ee.DETAILS,ee.DIR,ee.DIV,ee.DL,ee.DT,ee.EMBED,ee.FIELDSET,ee.FIGCAPTION,ee.FIGURE,ee.FOOTER,ee.FORM,ee.FRAME,ee.FRAMESET,ee.H1,ee.H2,ee.H3,ee.H4,ee.H5,ee.H6,ee.HEAD,ee.HEADER,ee.HGROUP,ee.HR,ee.HTML,ee.IFRAME,ee.IMG,ee.INPUT,ee.LI,ee.LINK,ee.LISTING,ee.MAIN,ee.MARQUEE,ee.MENU,ee.META,ee.NAV,ee.NOEMBED,ee.NOFRAMES,ee.NOSCRIPT,ee.OBJECT,ee.OL,ee.P,ee.PARAM,ee.PLAINTEXT,ee.PRE,ee.SCRIPT,ee.SECTION,ee.SELECT,ee.SOURCE,ee.STYLE,ee.SUMMARY,ee.TABLE,ee.TBODY,ee.TD,ee.TEMPLATE,ee.TEXTAREA,ee.TFOOT,ee.TH,ee.THEAD,ee.TITLE,ee.TR,ee.TRACK,ee.UL,ee.WBR,ee.XMP]),[J.MATHML]:new Set([ee.MI,ee.MO,ee.MN,ee.MS,ee.MTEXT,ee.ANNOTATION_XML]),[J.SVG]:new Set([ee.TITLE,ee.FOREIGN_OBJECT,ee.DESC]),[J.XLINK]:new Set,[J.XML]:new Set,[J.XMLNS]:new Set},_g=new Set([ee.H1,ee.H2,ee.H3,ee.H4,ee.H5,ee.H6]),RU=new Set([q.STYLE,q.SCRIPT,q.XMP,q.IFRAME,q.NOEMBED,q.NOFRAMES,q.PLAINTEXT]);function kU(t,e){return RU.has(t)||e&&t===q.NOSCRIPT}var P;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(P||(P={}));const pr={DATA:P.DATA,RCDATA:P.RCDATA,RAWTEXT:P.RAWTEXT,SCRIPT_DATA:P.SCRIPT_DATA,PLAINTEXT:P.PLAINTEXT,CDATA_SECTION:P.CDATA_SECTION};function PU(t){return t>=S.DIGIT_0&&t<=S.DIGIT_9}function Qu(t){return t>=S.LATIN_CAPITAL_A&&t<=S.LATIN_CAPITAL_Z}function OU(t){return t>=S.LATIN_SMALL_A&&t<=S.LATIN_SMALL_Z}function ms(t){return OU(t)||Qu(t)}function Ov(t){return ms(t)||PU(t)}function wd(t){return t+32}function aS(t){return t===S.SPACE||t===S.LINE_FEED||t===S.TABULATION||t===S.FORM_FEED}function Lv(t){return aS(t)||t===S.SOLIDUS||t===S.GREATER_THAN_SIGN}function LU(t){return t===S.NULL?G.nullCharacterReference:t>1114111?G.characterReferenceOutsideUnicodeRange:rS(t)?G.surrogateCharacterReference:sS(t)?G.noncharacterCharacterReference:nS(t)||t===S.CARRIAGE_RETURN?G.controlCharacterReference:null}let FU=class{constructor(e,r){this.options=e,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=P.DATA,this.returnState=P.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new DU(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new cD(F1,(n,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(G.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(G.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const s=LU(n);s&&this._err(s,1)}}:void 0)}_err(e,r=0){var n,s;(s=(n=this.handler).onParseError)===null||s===void 0||s.call(n,this.preprocessor.getError(e,r))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,r,n){this.active=!0,this.preprocessor.write(e,r),this._runParsingLoop(),this.paused||n==null||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let r=0;r<e;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,r){return this.preprocessor.startsWith(e,r)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Re.START_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Re.END_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Re.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Re.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,r){this.currentCharacterToken={type:e,chars:r,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,r;const n=this.currentToken;if(iS(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const s=(e=(r=n.location).attrs)!==null&&e!==void 0?e:r.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(G.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=op(e.tagName),e.type===Re.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(G.endTagWithAttributes),e.selfClosing&&this._err(G.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Re.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Re.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Re.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Re.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,r)}_emitCodePoint(e){const r=aS(e)?Re.WHITESPACE_CHARACTER:e===S.NULL?Re.NULL_CHARACTER:Re.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Re.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=P.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Bn.Attribute:Bn.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===P.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===P.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===P.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case P.DATA:{this._stateData(e);break}case P.RCDATA:{this._stateRcdata(e);break}case P.RAWTEXT:{this._stateRawtext(e);break}case P.SCRIPT_DATA:{this._stateScriptData(e);break}case P.PLAINTEXT:{this._statePlaintext(e);break}case P.TAG_OPEN:{this._stateTagOpen(e);break}case P.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case P.TAG_NAME:{this._stateTagName(e);break}case P.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case P.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case P.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case P.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case P.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case P.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case P.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case P.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case P.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case P.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case P.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case P.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case P.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case P.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case P.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case P.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case P.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case P.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case P.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case P.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case P.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case P.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case P.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case P.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case P.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case P.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case P.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case P.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case P.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case P.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case P.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case P.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case P.BOGUS_COMMENT:{this._stateBogusComment(e);break}case P.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case P.COMMENT_START:{this._stateCommentStart(e);break}case P.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case P.COMMENT:{this._stateComment(e);break}case P.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case P.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case P.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case P.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case P.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case P.COMMENT_END:{this._stateCommentEnd(e);break}case P.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case P.DOCTYPE:{this._stateDoctype(e);break}case P.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case P.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case P.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case P.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case P.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case P.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case P.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case P.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case P.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case P.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case P.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case P.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case P.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case P.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case P.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case P.CDATA_SECTION:{this._stateCdataSection(e);break}case P.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case P.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case P.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case P.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case S.LESS_THAN_SIGN:{this.state=P.TAG_OPEN;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitCodePoint(e);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case S.AMPERSAND:{this._startCharacterReference();break}case S.LESS_THAN_SIGN:{this.state=P.RCDATA_LESS_THAN_SIGN;break}case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitChars(Ke);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case S.LESS_THAN_SIGN:{this.state=P.RAWTEXT_LESS_THAN_SIGN;break}case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitChars(Ke);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_LESS_THAN_SIGN;break}case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitChars(Ke);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitChars(Ke);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(ms(e))this._createStartTagToken(),this.state=P.TAG_NAME,this._stateTagName(e);else switch(e){case S.EXCLAMATION_MARK:{this.state=P.MARKUP_DECLARATION_OPEN;break}case S.SOLIDUS:{this.state=P.END_TAG_OPEN;break}case S.QUESTION_MARK:{this._err(G.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=P.BOGUS_COMMENT,this._stateBogusComment(e);break}case S.EOF:{this._err(G.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(G.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=P.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(ms(e))this._createEndTagToken(),this.state=P.TAG_NAME,this._stateTagName(e);else switch(e){case S.GREATER_THAN_SIGN:{this._err(G.missingEndTagName),this.state=P.DATA;break}case S.EOF:{this._err(G.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(G.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=P.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=P.BEFORE_ATTRIBUTE_NAME;break}case S.SOLIDUS:{this.state=P.SELF_CLOSING_START_TAG;break}case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentTagToken();break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.tagName+=Ke;break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(Qu(e)?wd(e):e)}}_stateRcdataLessThanSign(e){e===S.SOLIDUS?this.state=P.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=P.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){ms(e)?(this.state=P.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=P.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=P.BEFORE_ATTRIBUTE_NAME,!1;case S.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=P.SELF_CLOSING_START_TAG,!1;case S.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=P.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=P.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===S.SOLIDUS?this.state=P.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=P.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){ms(e)?(this.state=P.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=P.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=P.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case S.SOLIDUS:{this.state=P.SCRIPT_DATA_END_TAG_OPEN;break}case S.EXCLAMATION_MARK:{this.state=P.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=P.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){ms(e)?(this.state=P.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=P.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=P.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===S.HYPHEN_MINUS?(this.state=P.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=P.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===S.HYPHEN_MINUS?(this.state=P.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=P.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case S.HYPHEN_MINUS:{this.state=P.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitChars(Ke);break}case S.EOF:{this._err(G.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case S.HYPHEN_MINUS:{this.state=P.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.state=P.SCRIPT_DATA_ESCAPED,this._emitChars(Ke);break}case S.EOF:{this._err(G.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=P.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case S.HYPHEN_MINUS:{this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.GREATER_THAN_SIGN:{this.state=P.SCRIPT_DATA,this._emitChars(">");break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.state=P.SCRIPT_DATA_ESCAPED,this._emitChars(Ke);break}case S.EOF:{this._err(G.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=P.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===S.SOLIDUS?this.state=P.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ms(e)?(this._emitChars("<"),this.state=P.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=P.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){ms(e)?(this.state=P.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=P.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=P.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(or.SCRIPT,!1)&&Lv(this.preprocessor.peek(or.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<or.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=P.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case S.HYPHEN_MINUS:{this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.NULL:{this._err(G.unexpectedNullCharacter),this._emitChars(Ke);break}case S.EOF:{this._err(G.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case S.HYPHEN_MINUS:{this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ke);break}case S.EOF:{this._err(G.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case S.HYPHEN_MINUS:{this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.GREATER_THAN_SIGN:{this.state=P.SCRIPT_DATA,this._emitChars(">");break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ke);break}case S.EOF:{this._err(G.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===S.SOLIDUS?(this.state=P.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(or.SCRIPT,!1)&&Lv(this.preprocessor.peek(or.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<or.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=P.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=P.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.SOLIDUS:case S.GREATER_THAN_SIGN:case S.EOF:{this.state=P.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case S.EQUALS_SIGN:{this._err(G.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=P.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=P.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:case S.SOLIDUS:case S.GREATER_THAN_SIGN:case S.EOF:{this._leaveAttrName(),this.state=P.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case S.EQUALS_SIGN:{this._leaveAttrName(),this.state=P.BEFORE_ATTRIBUTE_VALUE;break}case S.QUOTATION_MARK:case S.APOSTROPHE:case S.LESS_THAN_SIGN:{this._err(G.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.currentAttr.name+=Ke;break}default:this.currentAttr.name+=String.fromCodePoint(Qu(e)?wd(e):e)}}_stateAfterAttributeName(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.SOLIDUS:{this.state=P.SELF_CLOSING_START_TAG;break}case S.EQUALS_SIGN:{this.state=P.BEFORE_ATTRIBUTE_VALUE;break}case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=P.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{this.state=P.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this.state=P.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(G.missingAttributeValue),this.state=P.DATA,this.emitCurrentTagToken();break}default:this.state=P.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case S.QUOTATION_MARK:{this.state=P.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.currentAttr.value+=Ke;break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case S.APOSTROPHE:{this.state=P.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.currentAttr.value+=Ke;break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this._leaveAttrValue(),this.state=P.BEFORE_ATTRIBUTE_NAME;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=P.DATA,this.emitCurrentTagToken();break}case S.NULL:{this._err(G.unexpectedNullCharacter),this.currentAttr.value+=Ke;break}case S.QUOTATION_MARK:case S.APOSTROPHE:case S.LESS_THAN_SIGN:case S.EQUALS_SIGN:case S.GRAVE_ACCENT:{this._err(G.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this._leaveAttrValue(),this.state=P.BEFORE_ATTRIBUTE_NAME;break}case S.SOLIDUS:{this._leaveAttrValue(),this.state=P.SELF_CLOSING_START_TAG;break}case S.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=P.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:this._err(G.missingWhitespaceBetweenAttributes),this.state=P.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case S.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=P.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(G.eofInTag),this._emitEOFToken();break}default:this._err(G.unexpectedSolidusInTag),this.state=P.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const r=this.currentToken;switch(e){case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentComment(r);break}case S.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.data+=Ke;break}default:r.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(or.DASH_DASH,!0)?(this._createCommentToken(or.DASH_DASH.length+1),this.state=P.COMMENT_START):this._consumeSequenceIfMatch(or.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(or.DOCTYPE.length+1),this.state=P.DOCTYPE):this._consumeSequenceIfMatch(or.CDATA_START,!0)?this.inForeignNode?this.state=P.CDATA_SECTION:(this._err(G.cdataInHtmlContent),this._createCommentToken(or.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=P.BOGUS_COMMENT):this._ensureHibernation()||(this._err(G.incorrectlyOpenedComment),this._createCommentToken(2),this.state=P.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case S.HYPHEN_MINUS:{this.state=P.COMMENT_START_DASH;break}case S.GREATER_THAN_SIGN:{this._err(G.abruptClosingOfEmptyComment),this.state=P.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=P.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{this.state=P.COMMENT_END;break}case S.GREATER_THAN_SIGN:{this._err(G.abruptClosingOfEmptyComment),this.state=P.DATA,this.emitCurrentComment(r);break}case S.EOF:{this._err(G.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=P.COMMENT,this._stateComment(e)}}_stateComment(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{this.state=P.COMMENT_END_DASH;break}case S.LESS_THAN_SIGN:{r.data+="<",this.state=P.COMMENT_LESS_THAN_SIGN;break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.data+=Ke;break}case S.EOF:{this._err(G.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const r=this.currentToken;switch(e){case S.EXCLAMATION_MARK:{r.data+="!",this.state=P.COMMENT_LESS_THAN_SIGN_BANG;break}case S.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=P.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===S.HYPHEN_MINUS?this.state=P.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=P.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===S.HYPHEN_MINUS?this.state=P.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=P.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==S.GREATER_THAN_SIGN&&e!==S.EOF&&this._err(G.nestedComment),this.state=P.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{this.state=P.COMMENT_END;break}case S.EOF:{this._err(G.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=P.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const r=this.currentToken;switch(e){case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentComment(r);break}case S.EXCLAMATION_MARK:{this.state=P.COMMENT_END_BANG;break}case S.HYPHEN_MINUS:{r.data+="-";break}case S.EOF:{this._err(G.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=P.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{r.data+="--!",this.state=P.COMMENT_END_DASH;break}case S.GREATER_THAN_SIGN:{this._err(G.incorrectlyClosedComment),this.state=P.DATA,this.emitCurrentComment(r);break}case S.EOF:{this._err(G.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=P.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=P.BEFORE_DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this.state=P.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case S.EOF:{this._err(G.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingWhitespaceBeforeDoctypeName),this.state=P.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Qu(e))this._createDoctypeToken(String.fromCharCode(wd(e))),this.state=P.DOCTYPE_NAME;else switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.NULL:{this._err(G.unexpectedNullCharacter),this._createDoctypeToken(Ke),this.state=P.DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this._err(G.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.EOF:{this._err(G.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=P.DOCTYPE_NAME}}_stateDoctypeName(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=P.AFTER_DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.name+=Ke;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(Qu(e)?wd(e):e)}}_stateAfterDoctypeName(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(or.PUBLIC,!1)?this.state=P.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(or.SYSTEM,!1)?this.state=P.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(G.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=P.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.QUOTATION_MARK:{this._err(G.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=P.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(G.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=P.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(G.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{r.publicId="",this.state=P.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{r.publicId="",this.state=P.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(G.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case S.QUOTATION_MARK:{this.state=P.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.publicId+=Ke;break}case S.GREATER_THAN_SIGN:{this._err(G.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case S.APOSTROPHE:{this.state=P.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.publicId+=Ke;break}case S.GREATER_THAN_SIGN:{this._err(G.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=P.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case S.GREATER_THAN_SIGN:{this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.QUOTATION_MARK:{this._err(G.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(G.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.QUOTATION_MARK:{r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=P.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.QUOTATION_MARK:{this._err(G.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(G.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(G.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{r.systemId="",this.state=P.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(G.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=P.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case S.QUOTATION_MARK:{this.state=P.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.systemId+=Ke;break}case S.GREATER_THAN_SIGN:{this._err(G.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case S.APOSTROPHE:{this.state=P.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.NULL:{this._err(G.unexpectedNullCharacter),r.systemId+=Ke;break}case S.GREATER_THAN_SIGN:{this._err(G.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.EOF:{this._err(G.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(G.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=P.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const r=this.currentToken;switch(e){case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=P.DATA;break}case S.NULL:{this._err(G.unexpectedNullCharacter);break}case S.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case S.RIGHT_SQUARE_BRACKET:{this.state=P.CDATA_SECTION_BRACKET;break}case S.EOF:{this._err(G.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===S.RIGHT_SQUARE_BRACKET?this.state=P.CDATA_SECTION_END:(this._emitChars("]"),this.state=P.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case S.GREATER_THAN_SIGN:{this.state=P.DATA;break}case S.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=P.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(S.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Ov(this.preprocessor.peek(1))?P.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Ov(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===S.SEMICOLON&&this._err(G.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}};const oS=new Set([f.DD,f.DT,f.LI,f.OPTGROUP,f.OPTION,f.P,f.RB,f.RP,f.RT,f.RTC]),Fv=new Set([...oS,f.CAPTION,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]),ef=new Set([f.APPLET,f.CAPTION,f.HTML,f.MARQUEE,f.OBJECT,f.TABLE,f.TD,f.TEMPLATE,f.TH]),BU=new Set([...ef,f.OL,f.UL]),MU=new Set([...ef,f.BUTTON]),Bv=new Set([f.ANNOTATION_XML,f.MI,f.MN,f.MO,f.MS,f.MTEXT]),Mv=new Set([f.DESC,f.FOREIGN_OBJECT,f.TITLE]),jU=new Set([f.TR,f.TEMPLATE,f.HTML]),UU=new Set([f.TBODY,f.TFOOT,f.THEAD,f.TEMPLATE,f.HTML]),VU=new Set([f.TABLE,f.TEMPLATE,f.HTML]),qU=new Set([f.TD,f.TH]);class HU{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=f.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===f.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===J.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,r){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,r,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,r){const n=this._indexOf(e);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(e,r,n){const s=this._indexOf(e)+1;this.items.splice(s,0,r),this.tagIDs.splice(s,0,n),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(e,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==J.HTML);this.shortenToLength(r<0?0:r)}shortenToLength(e){for(;this.stackTop>=e;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<e)}}popUntilElementPopped(e){const r=this._indexOf(e);this.shortenToLength(r<0?0:r)}popUntilPopped(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(_g,J.HTML)}popUntilTableCellPopped(){this.popUntilPopped(qU,J.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,r){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(VU,J.HTML)}clearBackToTableBodyContext(){this.clearBackTo(UU,J.HTML)}clearBackToTableRowContext(){this.clearBackTo(jU,J.HTML)}remove(e){const r=this._indexOf(e);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===f.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const r=this._indexOf(e)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===f.HTML}hasInDynamicScope(e,r){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case J.HTML:{if(s===e)return!0;if(r.has(s))return!1;break}case J.SVG:{if(Mv.has(s))return!1;break}case J.MATHML:{if(Bv.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,ef)}hasInListItemScope(e){return this.hasInDynamicScope(e,BU)}hasInButtonScope(e){return this.hasInDynamicScope(e,MU)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const r=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case J.HTML:{if(_g.has(r))return!0;if(ef.has(r))return!1;break}case J.SVG:{if(Mv.has(r))return!1;break}case J.MATHML:{if(Bv.has(r))return!1;break}}}return!0}hasInTableScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===J.HTML)switch(this.tagIDs[r]){case e:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===J.HTML)switch(this.tagIDs[e]){case f.TBODY:case f.THEAD:case f.TFOOT:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasInSelectScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===J.HTML)switch(this.tagIDs[r]){case e:return!0;case f.OPTION:case f.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;oS.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Fv.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&Fv.has(this.currentTagId);)this.pop()}}const Cm=3;var hn;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(hn||(hn={}));const jv={type:hn.Marker};class $U{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,r){const n=[],s=r.length,i=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let o=0;o<this.entries.length;o++){const u=this.entries[o];if(u.type===hn.Marker)break;const{element:c}=u;if(this.treeAdapter.getTagName(c)===i&&this.treeAdapter.getNamespaceURI(c)===a){const h=this.treeAdapter.getAttrList(c);h.length===s&&n.push({idx:o,attrs:h})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<Cm)return;const r=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,r);if(n.length<Cm)return;const s=new Map(r.map(a=>[a.name,a.value]));let i=0;for(let a=0;a<n.length;a++){const o=n[a];o.attrs.every(u=>s.get(u.name)===u.value)&&(i+=1,i>=Cm&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(jv)}pushElement(e,r){this._ensureNoahArkCondition(e),this.entries.unshift({type:hn.Element,element:e,token:r})}insertElementAfterBookmark(e,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:hn.Element,element:e,token:r})}removeEntry(e){const r=this.entries.indexOf(e);r>=0&&this.entries.splice(r,1)}clearToLastMarker(){const e=this.entries.indexOf(jv);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const r=this.entries.find(n=>n.type===hn.Marker||this.treeAdapter.getTagName(n.element)===e);return r&&r.type===hn.Element?r:null}getElementEntry(e){return this.entries.find(r=>r.type===hn.Element&&r.element===e)}}const Ln={createDocument(){return{nodeName:"#document",mode:xr.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,r){return{nodeName:t,tagName:t,attrs:r,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,r){const n=t.childNodes.indexOf(r);t.childNodes.splice(n,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,r,n){const s=t.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=e,s.publicId=r,s.systemId=n;else{const i={nodeName:"#documentType",name:e,publicId:r,systemId:n,parentNode:null};Ln.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const r=t.childNodes[t.childNodes.length-1];if(Ln.isTextNode(r)){r.value+=e;return}}Ln.appendChild(t,Ln.createTextNode(e))},insertTextBefore(t,e,r){const n=t.childNodes[t.childNodes.indexOf(r)-1];n&&Ln.isTextNode(n)?n.value+=e:Ln.insertBefore(t,Ln.createTextNode(e),r)},adoptAttributes(t,e){const r=new Set(t.attrs.map(n=>n.name));for(let n=0;n<e.length;n++)r.has(e[n].name)||t.attrs.push(e[n])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},uS="html",zU="about:legacy-compat",GU="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",lS=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],WU=[...lS,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],KU=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),cS=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],YU=[...cS,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Uv(t,e){return e.some(r=>t.startsWith(r))}function QU(t){return t.name===uS&&t.publicId===null&&(t.systemId===null||t.systemId===zU)}function XU(t){if(t.name!==uS)return xr.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===GU)return xr.QUIRKS;let{publicId:r}=t;if(r!==null){if(r=r.toLowerCase(),KU.has(r))return xr.QUIRKS;let n=e===null?WU:lS;if(Uv(r,n))return xr.QUIRKS;if(n=e===null?cS:YU,Uv(r,n))return xr.LIMITED_QUIRKS}return xr.NO_QUIRKS}const Vv={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},JU="definitionurl",ZU="definitionURL",eV=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),tV=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:J.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:J.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:J.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:J.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:J.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:J.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:J.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:J.XML}],["xml:space",{prefix:"xml",name:"space",namespace:J.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:J.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:J.XMLNS}]]),rV=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),nV=new Set([f.B,f.BIG,f.BLOCKQUOTE,f.BODY,f.BR,f.CENTER,f.CODE,f.DD,f.DIV,f.DL,f.DT,f.EM,f.EMBED,f.H1,f.H2,f.H3,f.H4,f.H5,f.H6,f.HEAD,f.HR,f.I,f.IMG,f.LI,f.LISTING,f.MENU,f.META,f.NOBR,f.OL,f.P,f.PRE,f.RUBY,f.S,f.SMALL,f.SPAN,f.STRONG,f.STRIKE,f.SUB,f.SUP,f.TABLE,f.TT,f.U,f.UL,f.VAR]);function sV(t){const e=t.tagID;return e===f.FONT&&t.attrs.some(({name:n})=>n===ji.COLOR||n===ji.SIZE||n===ji.FACE)||nV.has(e)}function dS(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===JU){t.attrs[e].name=ZU;break}}function hS(t){for(let e=0;e<t.attrs.length;e++){const r=eV.get(t.attrs[e].name);r!=null&&(t.attrs[e].name=r)}}function G1(t){for(let e=0;e<t.attrs.length;e++){const r=tV.get(t.attrs[e].name);r&&(t.attrs[e].prefix=r.prefix,t.attrs[e].name=r.name,t.attrs[e].namespace=r.namespace)}}function iV(t){const e=rV.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=op(t.tagName))}function aV(t,e){return e===J.MATHML&&(t===f.MI||t===f.MO||t===f.MN||t===f.MS||t===f.MTEXT)}function oV(t,e,r){if(e===J.MATHML&&t===f.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===ji.ENCODING){const s=r[n].value.toLowerCase();return s===Vv.TEXT_HTML||s===Vv.APPLICATION_XML}}return e===J.SVG&&(t===f.FOREIGN_OBJECT||t===f.DESC||t===f.TITLE)}function uV(t,e,r,n){return(!n||n===J.HTML)&&oV(t,e,r)||(!n||n===J.MATHML)&&aV(t,e)}const lV="hidden",cV=8,dV=3;var L;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(L||(L={}));const hV={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},fS=new Set([f.TABLE,f.TBODY,f.TFOOT,f.THEAD,f.TR]),qv={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Ln,onParseError:null};let pS=class{constructor(e,r,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=L.INITIAL,this.originalInsertionMode=L.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...qv,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new FU(this.options,this),this.activeFormattingElements=new $U(this.treeAdapter),this.fragmentContextID=n?op(this.treeAdapter.getTagName(n)):f.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new HU(this.document,this.treeAdapter,this)}static parse(e,r){const n=new this(r);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,r){const n={...qv,...r};e??(e=n.treeAdapter.createElement(q.TEMPLATE,J.HTML,[]));const s=n.treeAdapter.createElement("documentmock",J.HTML,[]),i=new this(n,s,e);return i.fragmentContextID===f.TEMPLATE&&i.tmplInsertionModeStack.unshift(L.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,r),r}_err(e,r,n){var s;if(!this.onParseError)return;const i=(s=e.location)!==null&&s!==void 0?s:hV,a={code:r,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(a)}onItemPush(e,r,n){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,r)}onItemPop(e,r){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(n=this.treeAdapter).onItemPop)===null||s===void 0||s.call(n,e,this.openElements.current),r){let i,a;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,a=this.fragmentContextID):{current:i,currentTagId:a}=this.openElements,this._setContextModes(i,a)}}_setContextModes(e,r){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===J.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(r,e)}_switchToTextParsing(e,r){this._insertElement(e,J.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=L.TEXT}switchToPlaintextParsing(){this.insertionMode=L.TEXT,this.originalInsertionMode=L.IN_BODY,this.tokenizer.state=pr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===q.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==J.HTML))switch(this.fragmentContextID){case f.TITLE:case f.TEXTAREA:{this.tokenizer.state=pr.RCDATA;break}case f.STYLE:case f.XMP:case f.IFRAME:case f.NOEMBED:case f.NOFRAMES:case f.NOSCRIPT:{this.tokenizer.state=pr.RAWTEXT;break}case f.SCRIPT:{this.tokenizer.state=pr.SCRIPT_DATA;break}case f.PLAINTEXT:{this.tokenizer.state=pr.PLAINTEXT;break}}}_setDocumentType(e){const r=e.name||"",n=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,s),e.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}}_attachElementToTree(e,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n,e)}}_appendElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,r){const n=this.treeAdapter.createElement(e,J.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(e){const r=this.treeAdapter.createElement(e.tagName,J.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(q.HTML,J.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,f.HTML)}_appendCommentNode(e,r){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,e.chars,n):this.treeAdapter.insertText(r,e.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(r),i=n?s.lastIndexOf(n):s.length,a=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:u,endCol:c,endOffset:h}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:u,endCol:c,endOffset:h})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,r){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(e,r){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&r.location){const n=r.location,s=this.treeAdapter.getTagName(e),i=r.type===Re.END_TAG&&s===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,e.tagID===f.SVG&&this.treeAdapter.getTagName(r)===q.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===J.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===f.MGLYPH||e.tagID===f.MALIGNMARK)&&!this._isIntegrationPoint(n,r,J.HTML)}_processToken(e){switch(e.type){case Re.CHARACTER:{this.onCharacter(e);break}case Re.NULL_CHARACTER:{this.onNullCharacter(e);break}case Re.COMMENT:{this.onComment(e);break}case Re.DOCTYPE:{this.onDoctype(e);break}case Re.START_TAG:{this._processStartTag(e);break}case Re.END_TAG:{this.onEndTag(e);break}case Re.EOF:{this.onEof(e);break}case Re.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,r,n){const s=this.treeAdapter.getNamespaceURI(r),i=this.treeAdapter.getAttrList(r);return uV(e,s,i,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const r=this.activeFormattingElements.entries.findIndex(s=>s.type===hn.Marker||this.openElements.contains(s.element)),n=r<0?e-1:r-1;for(let s=n;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=L.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(f.P),this.openElements.popUntilTagNamePopped(f.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case f.TR:{this.insertionMode=L.IN_ROW;return}case f.TBODY:case f.THEAD:case f.TFOOT:{this.insertionMode=L.IN_TABLE_BODY;return}case f.CAPTION:{this.insertionMode=L.IN_CAPTION;return}case f.COLGROUP:{this.insertionMode=L.IN_COLUMN_GROUP;return}case f.TABLE:{this.insertionMode=L.IN_TABLE;return}case f.BODY:{this.insertionMode=L.IN_BODY;return}case f.FRAMESET:{this.insertionMode=L.IN_FRAMESET;return}case f.SELECT:{this._resetInsertionModeForSelect(e);return}case f.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case f.HTML:{this.insertionMode=this.headElement?L.AFTER_HEAD:L.BEFORE_HEAD;return}case f.TD:case f.TH:{if(e>0){this.insertionMode=L.IN_CELL;return}break}case f.HEAD:{if(e>0){this.insertionMode=L.IN_HEAD;return}break}}this.insertionMode=L.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let r=e-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===f.TEMPLATE)break;if(n===f.TABLE){this.insertionMode=L.IN_SELECT_IN_TABLE;return}}this.insertionMode=L.IN_SELECT}_isElementCausesFosterParenting(e){return fS.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const r=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case f.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===J.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case f.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,e,r.beforeElement):this.treeAdapter.appendChild(r.parent,e)}_isSpecialElement(e,r){const n=this.treeAdapter.getNamespaceURI(e);return NU[n].has(r)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){qq(this,e);return}switch(this.insertionMode){case L.INITIAL:{Ou(this,e);break}case L.BEFORE_HTML:{fl(this,e);break}case L.BEFORE_HEAD:{pl(this,e);break}case L.IN_HEAD:{ml(this,e);break}case L.IN_HEAD_NO_SCRIPT:{gl(this,e);break}case L.AFTER_HEAD:{El(this,e);break}case L.IN_BODY:case L.IN_CAPTION:case L.IN_CELL:case L.IN_TEMPLATE:{gS(this,e);break}case L.TEXT:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case L.IN_TABLE:case L.IN_TABLE_BODY:case L.IN_ROW:{Dm(this,e);break}case L.IN_TABLE_TEXT:{TS(this,e);break}case L.IN_COLUMN_GROUP:{tf(this,e);break}case L.AFTER_BODY:{rf(this,e);break}case L.AFTER_AFTER_BODY:{Zd(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Vq(this,e);return}switch(this.insertionMode){case L.INITIAL:{Ou(this,e);break}case L.BEFORE_HTML:{fl(this,e);break}case L.BEFORE_HEAD:{pl(this,e);break}case L.IN_HEAD:{ml(this,e);break}case L.IN_HEAD_NO_SCRIPT:{gl(this,e);break}case L.AFTER_HEAD:{El(this,e);break}case L.TEXT:{this._insertCharacters(e);break}case L.IN_TABLE:case L.IN_TABLE_BODY:case L.IN_ROW:{Dm(this,e);break}case L.IN_COLUMN_GROUP:{tf(this,e);break}case L.AFTER_BODY:{rf(this,e);break}case L.AFTER_AFTER_BODY:{Zd(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){bg(this,e);return}switch(this.insertionMode){case L.INITIAL:case L.BEFORE_HTML:case L.BEFORE_HEAD:case L.IN_HEAD:case L.IN_HEAD_NO_SCRIPT:case L.AFTER_HEAD:case L.IN_BODY:case L.IN_TABLE:case L.IN_CAPTION:case L.IN_COLUMN_GROUP:case L.IN_TABLE_BODY:case L.IN_ROW:case L.IN_CELL:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:case L.IN_TEMPLATE:case L.IN_FRAMESET:case L.AFTER_FRAMESET:{bg(this,e);break}case L.IN_TABLE_TEXT:{Lu(this,e);break}case L.AFTER_BODY:{_V(this,e);break}case L.AFTER_AFTER_BODY:case L.AFTER_AFTER_FRAMESET:{bV(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case L.INITIAL:{vV(this,e);break}case L.BEFORE_HEAD:case L.IN_HEAD:case L.IN_HEAD_NO_SCRIPT:case L.AFTER_HEAD:{this._err(e,G.misplacedDoctype);break}case L.IN_TABLE_TEXT:{Lu(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,G.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Hq(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case L.INITIAL:{Ou(this,e);break}case L.BEFORE_HTML:{TV(this,e);break}case L.BEFORE_HEAD:{xV(this,e);break}case L.IN_HEAD:{un(this,e);break}case L.IN_HEAD_NO_SCRIPT:{CV(this,e);break}case L.AFTER_HEAD:{SV(this,e);break}case L.IN_BODY:{Wt(this,e);break}case L.IN_TABLE:{jo(this,e);break}case L.IN_TABLE_TEXT:{Lu(this,e);break}case L.IN_CAPTION:{wq(this,e);break}case L.IN_COLUMN_GROUP:{Y1(this,e);break}case L.IN_TABLE_BODY:{cp(this,e);break}case L.IN_ROW:{dp(this,e);break}case L.IN_CELL:{Dq(this,e);break}case L.IN_SELECT:{wS(this,e);break}case L.IN_SELECT_IN_TABLE:{Nq(this,e);break}case L.IN_TEMPLATE:{kq(this,e);break}case L.AFTER_BODY:{Oq(this,e);break}case L.IN_FRAMESET:{Lq(this,e);break}case L.AFTER_FRAMESET:{Bq(this,e);break}case L.AFTER_AFTER_BODY:{jq(this,e);break}case L.AFTER_AFTER_FRAMESET:{Uq(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?$q(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case L.INITIAL:{Ou(this,e);break}case L.BEFORE_HTML:{AV(this,e);break}case L.BEFORE_HEAD:{wV(this,e);break}case L.IN_HEAD:{IV(this,e);break}case L.IN_HEAD_NO_SCRIPT:{DV(this,e);break}case L.AFTER_HEAD:{NV(this,e);break}case L.IN_BODY:{lp(this,e);break}case L.TEXT:{mq(this,e);break}case L.IN_TABLE:{tc(this,e);break}case L.IN_TABLE_TEXT:{Lu(this,e);break}case L.IN_CAPTION:{Iq(this,e);break}case L.IN_COLUMN_GROUP:{Cq(this,e);break}case L.IN_TABLE_BODY:{vg(this,e);break}case L.IN_ROW:{xS(this,e);break}case L.IN_CELL:{Sq(this,e);break}case L.IN_SELECT:{IS(this,e);break}case L.IN_SELECT_IN_TABLE:{Rq(this,e);break}case L.IN_TEMPLATE:{Pq(this,e);break}case L.AFTER_BODY:{DS(this,e);break}case L.IN_FRAMESET:{Fq(this,e);break}case L.AFTER_FRAMESET:{Mq(this,e);break}case L.AFTER_AFTER_BODY:{Zd(this,e);break}}}onEof(e){switch(this.insertionMode){case L.INITIAL:{Ou(this,e);break}case L.BEFORE_HTML:{fl(this,e);break}case L.BEFORE_HEAD:{pl(this,e);break}case L.IN_HEAD:{ml(this,e);break}case L.IN_HEAD_NO_SCRIPT:{gl(this,e);break}case L.AFTER_HEAD:{El(this,e);break}case L.IN_BODY:case L.IN_TABLE:case L.IN_CAPTION:case L.IN_COLUMN_GROUP:case L.IN_TABLE_BODY:case L.IN_ROW:case L.IN_CELL:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:{bS(this,e);break}case L.TEXT:{gq(this,e);break}case L.IN_TABLE_TEXT:{Lu(this,e);break}case L.IN_TEMPLATE:{CS(this,e);break}case L.AFTER_BODY:case L.IN_FRAMESET:case L.AFTER_FRAMESET:case L.AFTER_AFTER_BODY:case L.AFTER_AFTER_FRAMESET:{K1(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===S.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case L.IN_HEAD:case L.IN_HEAD_NO_SCRIPT:case L.AFTER_HEAD:case L.TEXT:case L.IN_COLUMN_GROUP:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:case L.IN_FRAMESET:case L.AFTER_FRAMESET:{this._insertCharacters(e);break}case L.IN_BODY:case L.IN_CAPTION:case L.IN_CELL:case L.IN_TEMPLATE:case L.AFTER_BODY:case L.AFTER_AFTER_BODY:case L.AFTER_AFTER_FRAMESET:{mS(this,e);break}case L.IN_TABLE:case L.IN_TABLE_BODY:case L.IN_ROW:{Dm(this,e);break}case L.IN_TABLE_TEXT:{vS(this,e);break}}}};function fV(t,e){let r=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return r?t.openElements.contains(r.element)?t.openElements.hasInScope(e.tagID)||(r=null):(t.activeFormattingElements.removeEntry(r),r=null):_S(t,e),r}function pV(t,e){let r=null,n=t.openElements.stackTop;for(;n>=0;n--){const s=t.openElements.items[n];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[n])&&(r=s)}return r||(t.openElements.shortenToLength(n<0?0:n),t.activeFormattingElements.removeEntry(e)),r}function mV(t,e,r){let n=e,s=t.openElements.getCommonAncestor(e);for(let i=0,a=s;a!==r;i++,a=s){s=t.openElements.getCommonAncestor(a);const o=t.activeFormattingElements.getElementEntry(a),u=o&&i>=dV;!o||u?(u&&t.activeFormattingElements.removeEntry(o),t.openElements.remove(a)):(a=gV(t,o),n===e&&(t.activeFormattingElements.bookmark=o),t.treeAdapter.detachNode(n),t.treeAdapter.appendChild(a,n),n=a)}return n}function gV(t,e){const r=t.treeAdapter.getNamespaceURI(e.element),n=t.treeAdapter.createElement(e.token.tagName,r,e.token.attrs);return t.openElements.replace(e.element,n),e.element=n,n}function EV(t,e,r){const n=t.treeAdapter.getTagName(e),s=op(n);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(r);else{const i=t.treeAdapter.getNamespaceURI(e);s===f.TEMPLATE&&i===J.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,r)}}function yV(t,e,r){const n=t.treeAdapter.getNamespaceURI(r.element),{token:s}=r,i=t.treeAdapter.createElement(s.tagName,n,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,s),t.activeFormattingElements.removeEntry(r),t.openElements.remove(r.element),t.openElements.insertAfter(e,i,s.tagID)}function W1(t,e){for(let r=0;r<cV;r++){const n=fV(t,e);if(!n)break;const s=pV(t,n);if(!s)break;t.activeFormattingElements.bookmark=n;const i=mV(t,s,n.element),a=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(i),a&&EV(t,a,i),yV(t,s,n)}}function bg(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function _V(t,e){t._appendCommentNode(e,t.openElements.items[0])}function bV(t,e){t._appendCommentNode(e,t.document)}function K1(t,e){if(t.stopped=!0,e.location){const r=t.fragmentContext?0:2;for(let n=t.openElements.stackTop;n>=r;n--)t._setEndLocation(t.openElements.items[n],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const n=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(n);if(s&&!s.endTag&&(t._setEndLocation(n,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(i);a&&!a.endTag&&t._setEndLocation(i,e)}}}}function vV(t,e){t._setDocumentType(e);const r=e.forceQuirks?xr.QUIRKS:XU(e);QU(e)||t._err(e,G.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,r),t.insertionMode=L.BEFORE_HTML}function Ou(t,e){t._err(e,G.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,xr.QUIRKS),t.insertionMode=L.BEFORE_HTML,t._processToken(e)}function TV(t,e){e.tagID===f.HTML?(t._insertElement(e,J.HTML),t.insertionMode=L.BEFORE_HEAD):fl(t,e)}function AV(t,e){const r=e.tagID;(r===f.HTML||r===f.HEAD||r===f.BODY||r===f.BR)&&fl(t,e)}function fl(t,e){t._insertFakeRootElement(),t.insertionMode=L.BEFORE_HEAD,t._processToken(e)}function xV(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.HEAD:{t._insertElement(e,J.HTML),t.headElement=t.openElements.current,t.insertionMode=L.IN_HEAD;break}default:pl(t,e)}}function wV(t,e){const r=e.tagID;r===f.HEAD||r===f.BODY||r===f.HTML||r===f.BR?pl(t,e):t._err(e,G.endTagWithoutMatchingOpenElement)}function pl(t,e){t._insertFakeElement(q.HEAD,f.HEAD),t.headElement=t.openElements.current,t.insertionMode=L.IN_HEAD,t._processToken(e)}function un(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:{t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.TITLE:{t._switchToTextParsing(e,pr.RCDATA);break}case f.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,pr.RAWTEXT):(t._insertElement(e,J.HTML),t.insertionMode=L.IN_HEAD_NO_SCRIPT);break}case f.NOFRAMES:case f.STYLE:{t._switchToTextParsing(e,pr.RAWTEXT);break}case f.SCRIPT:{t._switchToTextParsing(e,pr.SCRIPT_DATA);break}case f.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=L.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(L.IN_TEMPLATE);break}case f.HEAD:{t._err(e,G.misplacedStartTagForHeadElement);break}default:ml(t,e)}}function IV(t,e){switch(e.tagID){case f.HEAD:{t.openElements.pop(),t.insertionMode=L.AFTER_HEAD;break}case f.BODY:case f.BR:case f.HTML:{ml(t,e);break}case f.TEMPLATE:{ha(t,e);break}default:t._err(e,G.endTagWithoutMatchingOpenElement)}}function ha(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==f.TEMPLATE&&t._err(e,G.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(f.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,G.endTagWithoutMatchingOpenElement)}function ml(t,e){t.openElements.pop(),t.insertionMode=L.AFTER_HEAD,t._processToken(e)}function CV(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.BASEFONT:case f.BGSOUND:case f.HEAD:case f.LINK:case f.META:case f.NOFRAMES:case f.STYLE:{un(t,e);break}case f.NOSCRIPT:{t._err(e,G.nestedNoscriptInHead);break}default:gl(t,e)}}function DV(t,e){switch(e.tagID){case f.NOSCRIPT:{t.openElements.pop(),t.insertionMode=L.IN_HEAD;break}case f.BR:{gl(t,e);break}default:t._err(e,G.endTagWithoutMatchingOpenElement)}}function gl(t,e){const r=e.type===Re.EOF?G.openElementsLeftAfterEof:G.disallowedContentInNoscriptInHead;t._err(e,r),t.openElements.pop(),t.insertionMode=L.IN_HEAD,t._processToken(e)}function SV(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.BODY:{t._insertElement(e,J.HTML),t.framesetOk=!1,t.insertionMode=L.IN_BODY;break}case f.FRAMESET:{t._insertElement(e,J.HTML),t.insertionMode=L.IN_FRAMESET;break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{t._err(e,G.abandonedHeadElementChild),t.openElements.push(t.headElement,f.HEAD),un(t,e),t.openElements.remove(t.headElement);break}case f.HEAD:{t._err(e,G.misplacedStartTagForHeadElement);break}default:El(t,e)}}function NV(t,e){switch(e.tagID){case f.BODY:case f.HTML:case f.BR:{El(t,e);break}case f.TEMPLATE:{ha(t,e);break}default:t._err(e,G.endTagWithoutMatchingOpenElement)}}function El(t,e){t._insertFakeElement(q.BODY,f.BODY),t.insertionMode=L.IN_BODY,up(t,e)}function up(t,e){switch(e.type){case Re.CHARACTER:{gS(t,e);break}case Re.WHITESPACE_CHARACTER:{mS(t,e);break}case Re.COMMENT:{bg(t,e);break}case Re.START_TAG:{Wt(t,e);break}case Re.END_TAG:{lp(t,e);break}case Re.EOF:{bS(t,e);break}}}function mS(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function gS(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function RV(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function kV(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(r,e.attrs))}function PV(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&r&&(t.treeAdapter.detachNode(r),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_FRAMESET)}function OV(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML)}function LV(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),_g.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,J.HTML)}function FV(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function BV(t,e){const r=t.openElements.tmplCount>0;(!t.formElement||r)&&(t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),r||(t.formElement=t.openElements.current))}function MV(t,e){t.framesetOk=!1;const r=e.tagID;for(let n=t.openElements.stackTop;n>=0;n--){const s=t.openElements.tagIDs[n];if(r===f.LI&&s===f.LI||(r===f.DD||r===f.DT)&&(s===f.DD||s===f.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==f.ADDRESS&&s!==f.DIV&&s!==f.P&&t._isSpecialElement(t.openElements.items[n],s))break}t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML)}function jV(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),t.tokenizer.state=pr.PLAINTEXT}function UV(t,e){t.openElements.hasInScope(f.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.framesetOk=!1}function VV(t,e){const r=t.activeFormattingElements.getElementEntryInScopeWithTagName(q.A);r&&(W1(t,e),t.openElements.remove(r.element),t.activeFormattingElements.removeEntry(r)),t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function qV(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function HV(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(f.NOBR)&&(W1(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,J.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function $V(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function zV(t,e){t.treeAdapter.getDocumentMode(t.document)!==xr.QUIRKS&&t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),t.framesetOk=!1,t.insertionMode=L.IN_TABLE}function ES(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,J.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function yS(t){const e=iS(t,ji.TYPE);return e!=null&&e.toLowerCase()===lV}function GV(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,J.HTML),yS(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function WV(t,e){t._appendElement(e,J.HTML),e.ackSelfClosing=!0}function KV(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._appendElement(e,J.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function YV(t,e){e.tagName=q.IMG,e.tagID=f.IMG,ES(t,e)}function QV(t,e){t._insertElement(e,J.HTML),t.skipNextNewLine=!0,t.tokenizer.state=pr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=L.TEXT}function XV(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,pr.RAWTEXT)}function JV(t,e){t.framesetOk=!1,t._switchToTextParsing(e,pr.RAWTEXT)}function Hv(t,e){t._switchToTextParsing(e,pr.RAWTEXT)}function ZV(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===L.IN_TABLE||t.insertionMode===L.IN_CAPTION||t.insertionMode===L.IN_TABLE_BODY||t.insertionMode===L.IN_ROW||t.insertionMode===L.IN_CELL?L.IN_SELECT_IN_TABLE:L.IN_SELECT}function eq(t,e){t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML)}function tq(t,e){t.openElements.hasInScope(f.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,J.HTML)}function rq(t,e){t.openElements.hasInScope(f.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(f.RTC),t._insertElement(e,J.HTML)}function nq(t,e){t._reconstructActiveFormattingElements(),dS(e),G1(e),e.selfClosing?t._appendElement(e,J.MATHML):t._insertElement(e,J.MATHML),e.ackSelfClosing=!0}function sq(t,e){t._reconstructActiveFormattingElements(),hS(e),G1(e),e.selfClosing?t._appendElement(e,J.SVG):t._insertElement(e,J.SVG),e.ackSelfClosing=!0}function $v(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML)}function Wt(t,e){switch(e.tagID){case f.I:case f.S:case f.B:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.SMALL:case f.STRIKE:case f.STRONG:{qV(t,e);break}case f.A:{VV(t,e);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{LV(t,e);break}case f.P:case f.DL:case f.OL:case f.UL:case f.DIV:case f.DIR:case f.NAV:case f.MAIN:case f.MENU:case f.ASIDE:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.DETAILS:case f.ADDRESS:case f.ARTICLE:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{OV(t,e);break}case f.LI:case f.DD:case f.DT:{MV(t,e);break}case f.BR:case f.IMG:case f.WBR:case f.AREA:case f.EMBED:case f.KEYGEN:{ES(t,e);break}case f.HR:{KV(t,e);break}case f.RB:case f.RTC:{tq(t,e);break}case f.RT:case f.RP:{rq(t,e);break}case f.PRE:case f.LISTING:{FV(t,e);break}case f.XMP:{XV(t,e);break}case f.SVG:{sq(t,e);break}case f.HTML:{RV(t,e);break}case f.BASE:case f.LINK:case f.META:case f.STYLE:case f.TITLE:case f.SCRIPT:case f.BGSOUND:case f.BASEFONT:case f.TEMPLATE:{un(t,e);break}case f.BODY:{kV(t,e);break}case f.FORM:{BV(t,e);break}case f.NOBR:{HV(t,e);break}case f.MATH:{nq(t,e);break}case f.TABLE:{zV(t,e);break}case f.INPUT:{GV(t,e);break}case f.PARAM:case f.TRACK:case f.SOURCE:{WV(t,e);break}case f.IMAGE:{YV(t,e);break}case f.BUTTON:{UV(t,e);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{$V(t,e);break}case f.IFRAME:{JV(t,e);break}case f.SELECT:{ZV(t,e);break}case f.OPTION:case f.OPTGROUP:{eq(t,e);break}case f.NOEMBED:case f.NOFRAMES:{Hv(t,e);break}case f.FRAMESET:{PV(t,e);break}case f.TEXTAREA:{QV(t,e);break}case f.NOSCRIPT:{t.options.scriptingEnabled?Hv(t,e):$v(t,e);break}case f.PLAINTEXT:{jV(t,e);break}case f.COL:case f.TH:case f.TD:case f.TR:case f.HEAD:case f.FRAME:case f.TBODY:case f.TFOOT:case f.THEAD:case f.CAPTION:case f.COLGROUP:break;default:$v(t,e)}}function iq(t,e){if(t.openElements.hasInScope(f.BODY)&&(t.insertionMode=L.AFTER_BODY,t.options.sourceCodeLocationInfo)){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t._setEndLocation(r,e)}}function aq(t,e){t.openElements.hasInScope(f.BODY)&&(t.insertionMode=L.AFTER_BODY,DS(t,e))}function oq(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r))}function uq(t){const e=t.openElements.tmplCount>0,{formElement:r}=t;e||(t.formElement=null),(r||e)&&t.openElements.hasInScope(f.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(f.FORM):r&&t.openElements.remove(r))}function lq(t){t.openElements.hasInButtonScope(f.P)||t._insertFakeElement(q.P,f.P),t._closePElement()}function cq(t){t.openElements.hasInListItemScope(f.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(f.LI),t.openElements.popUntilTagNamePopped(f.LI))}function dq(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r))}function hq(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function fq(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker())}function pq(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(q.BR,f.BR),t.openElements.pop(),t.framesetOk=!1}function _S(t,e){const r=e.tagName,n=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const i=t.openElements.items[s],a=t.openElements.tagIDs[s];if(n===a&&(n!==f.UNKNOWN||t.treeAdapter.getTagName(i)===r)){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(i,a))break}}function lp(t,e){switch(e.tagID){case f.A:case f.B:case f.I:case f.S:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.NOBR:case f.SMALL:case f.STRIKE:case f.STRONG:{W1(t,e);break}case f.P:{lq(t);break}case f.DL:case f.UL:case f.OL:case f.DIR:case f.DIV:case f.NAV:case f.PRE:case f.MAIN:case f.MENU:case f.ASIDE:case f.BUTTON:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.ADDRESS:case f.ARTICLE:case f.DETAILS:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.LISTING:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{oq(t,e);break}case f.LI:{cq(t);break}case f.DD:case f.DT:{dq(t,e);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{hq(t);break}case f.BR:{pq(t);break}case f.BODY:{iq(t,e);break}case f.HTML:{aq(t,e);break}case f.FORM:{uq(t);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{fq(t,e);break}case f.TEMPLATE:{ha(t,e);break}default:_S(t,e)}}function bS(t,e){t.tmplInsertionModeStack.length>0?CS(t,e):K1(t,e)}function mq(t,e){var r;e.tagID===f.SCRIPT&&((r=t.scriptHandler)===null||r===void 0||r.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function gq(t,e){t._err(e,G.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function Dm(t,e){if(fS.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=L.IN_TABLE_TEXT,e.type){case Re.CHARACTER:{TS(t,e);break}case Re.WHITESPACE_CHARACTER:{vS(t,e);break}}else Lc(t,e)}function Eq(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_CAPTION}function yq(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_COLUMN_GROUP}function _q(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(q.COLGROUP,f.COLGROUP),t.insertionMode=L.IN_COLUMN_GROUP,Y1(t,e)}function bq(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_TABLE_BODY}function vq(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(q.TBODY,f.TBODY),t.insertionMode=L.IN_TABLE_BODY,cp(t,e)}function Tq(t,e){t.openElements.hasInTableScope(f.TABLE)&&(t.openElements.popUntilTagNamePopped(f.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function Aq(t,e){yS(e)?t._appendElement(e,J.HTML):Lc(t,e),e.ackSelfClosing=!0}function xq(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,J.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function jo(t,e){switch(e.tagID){case f.TD:case f.TH:case f.TR:{vq(t,e);break}case f.STYLE:case f.SCRIPT:case f.TEMPLATE:{un(t,e);break}case f.COL:{_q(t,e);break}case f.FORM:{xq(t,e);break}case f.TABLE:{Tq(t,e);break}case f.TBODY:case f.TFOOT:case f.THEAD:{bq(t,e);break}case f.INPUT:{Aq(t,e);break}case f.CAPTION:{Eq(t,e);break}case f.COLGROUP:{yq(t,e);break}default:Lc(t,e)}}function tc(t,e){switch(e.tagID){case f.TABLE:{t.openElements.hasInTableScope(f.TABLE)&&(t.openElements.popUntilTagNamePopped(f.TABLE),t._resetInsertionMode());break}case f.TEMPLATE:{ha(t,e);break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:Lc(t,e)}}function Lc(t,e){const r=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,up(t,e),t.fosterParentingEnabled=r}function vS(t,e){t.pendingCharacterTokens.push(e)}function TS(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Lu(t,e){let r=0;if(t.hasNonWhitespacePendingCharacterToken)for(;r<t.pendingCharacterTokens.length;r++)Lc(t,t.pendingCharacterTokens[r]);else for(;r<t.pendingCharacterTokens.length;r++)t._insertCharacters(t.pendingCharacterTokens[r]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const AS=new Set([f.CAPTION,f.COL,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]);function wq(t,e){const r=e.tagID;AS.has(r)?t.openElements.hasInTableScope(f.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=L.IN_TABLE,jo(t,e)):Wt(t,e)}function Iq(t,e){const r=e.tagID;switch(r){case f.CAPTION:case f.TABLE:{t.openElements.hasInTableScope(f.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=L.IN_TABLE,r===f.TABLE&&tc(t,e));break}case f.BODY:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:lp(t,e)}}function Y1(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.COL:{t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.TEMPLATE:{un(t,e);break}default:tf(t,e)}}function Cq(t,e){switch(e.tagID){case f.COLGROUP:{t.openElements.currentTagId===f.COLGROUP&&(t.openElements.pop(),t.insertionMode=L.IN_TABLE);break}case f.TEMPLATE:{ha(t,e);break}case f.COL:break;default:tf(t,e)}}function tf(t,e){t.openElements.currentTagId===f.COLGROUP&&(t.openElements.pop(),t.insertionMode=L.IN_TABLE,t._processToken(e))}function cp(t,e){switch(e.tagID){case f.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_ROW;break}case f.TH:case f.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(q.TR,f.TR),t.insertionMode=L.IN_ROW,dp(t,e);break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE,jo(t,e));break}default:jo(t,e)}}function vg(t,e){const r=e.tagID;switch(e.tagID){case f.TBODY:case f.TFOOT:case f.THEAD:{t.openElements.hasInTableScope(r)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE);break}case f.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE,tc(t,e));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:case f.TR:break;default:tc(t,e)}}function dp(t,e){switch(e.tagID){case f.TH:case f.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_CELL,t.activeFormattingElements.insertMarker();break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY,cp(t,e));break}default:jo(t,e)}}function xS(t,e){switch(e.tagID){case f.TR:{t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY);break}case f.TABLE:{t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY,vg(t,e));break}case f.TBODY:case f.TFOOT:case f.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(f.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY,vg(t,e));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:break;default:tc(t,e)}}function Dq(t,e){const r=e.tagID;AS.has(r)?(t.openElements.hasInTableScope(f.TD)||t.openElements.hasInTableScope(f.TH))&&(t._closeTableCell(),dp(t,e)):Wt(t,e)}function Sq(t,e){const r=e.tagID;switch(r){case f.TD:case f.TH:{t.openElements.hasInTableScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=L.IN_ROW);break}case f.TABLE:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{t.openElements.hasInTableScope(r)&&(t._closeTableCell(),xS(t,e));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:break;default:lp(t,e)}}function wS(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.OPTION:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t._insertElement(e,J.HTML);break}case f.OPTGROUP:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t.openElements.currentTagId===f.OPTGROUP&&t.openElements.pop(),t._insertElement(e,J.HTML);break}case f.HR:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t.openElements.currentTagId===f.OPTGROUP&&t.openElements.pop(),t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.INPUT:case f.KEYGEN:case f.TEXTAREA:case f.SELECT:{t.openElements.hasInSelectScope(f.SELECT)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),e.tagID!==f.SELECT&&t._processStartTag(e));break}case f.SCRIPT:case f.TEMPLATE:{un(t,e);break}}}function IS(t,e){switch(e.tagID){case f.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===f.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===f.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===f.OPTGROUP&&t.openElements.pop();break}case f.OPTION:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop();break}case f.SELECT:{t.openElements.hasInSelectScope(f.SELECT)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode());break}case f.TEMPLATE:{ha(t,e);break}}}function Nq(t,e){const r=e.tagID;r===f.CAPTION||r===f.TABLE||r===f.TBODY||r===f.TFOOT||r===f.THEAD||r===f.TR||r===f.TD||r===f.TH?(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),t._processStartTag(e)):wS(t,e)}function Rq(t,e){const r=e.tagID;r===f.CAPTION||r===f.TABLE||r===f.TBODY||r===f.TFOOT||r===f.THEAD||r===f.TR||r===f.TD||r===f.TH?t.openElements.hasInTableScope(r)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),t.onEndTag(e)):IS(t,e)}function kq(t,e){switch(e.tagID){case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{un(t,e);break}case f.CAPTION:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{t.tmplInsertionModeStack[0]=L.IN_TABLE,t.insertionMode=L.IN_TABLE,jo(t,e);break}case f.COL:{t.tmplInsertionModeStack[0]=L.IN_COLUMN_GROUP,t.insertionMode=L.IN_COLUMN_GROUP,Y1(t,e);break}case f.TR:{t.tmplInsertionModeStack[0]=L.IN_TABLE_BODY,t.insertionMode=L.IN_TABLE_BODY,cp(t,e);break}case f.TD:case f.TH:{t.tmplInsertionModeStack[0]=L.IN_ROW,t.insertionMode=L.IN_ROW,dp(t,e);break}default:t.tmplInsertionModeStack[0]=L.IN_BODY,t.insertionMode=L.IN_BODY,Wt(t,e)}}function Pq(t,e){e.tagID===f.TEMPLATE&&ha(t,e)}function CS(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(f.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):K1(t,e)}function Oq(t,e){e.tagID===f.HTML?Wt(t,e):rf(t,e)}function DS(t,e){var r;if(e.tagID===f.HTML){if(t.fragmentContext||(t.insertionMode=L.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===f.HTML){t._setEndLocation(t.openElements.items[0],e);const n=t.openElements.items[1];n&&!(!((r=t.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&t._setEndLocation(n,e)}}else rf(t,e)}function rf(t,e){t.insertionMode=L.IN_BODY,up(t,e)}function Lq(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.FRAMESET:{t._insertElement(e,J.HTML);break}case f.FRAME:{t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.NOFRAMES:{un(t,e);break}}}function Fq(t,e){e.tagID===f.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==f.FRAMESET&&(t.insertionMode=L.AFTER_FRAMESET))}function Bq(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.NOFRAMES:{un(t,e);break}}}function Mq(t,e){e.tagID===f.HTML&&(t.insertionMode=L.AFTER_AFTER_FRAMESET)}function jq(t,e){e.tagID===f.HTML?Wt(t,e):Zd(t,e)}function Zd(t,e){t.insertionMode=L.IN_BODY,up(t,e)}function Uq(t,e){switch(e.tagID){case f.HTML:{Wt(t,e);break}case f.NOFRAMES:{un(t,e);break}}}function Vq(t,e){e.chars=Ke,t._insertCharacters(e)}function qq(t,e){t._insertCharacters(e),t.framesetOk=!1}function SS(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==J.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function Hq(t,e){if(sV(e))SS(t),t._startTagOutsideForeignContent(e);else{const r=t._getAdjustedCurrentElement(),n=t.treeAdapter.getNamespaceURI(r);n===J.MATHML?dS(e):n===J.SVG&&(iV(e),hS(e)),G1(e),e.selfClosing?t._appendElement(e,n):t._insertElement(e,n),e.ackSelfClosing=!0}}function $q(t,e){if(e.tagID===f.P||e.tagID===f.BR){SS(t),t._endTagOutsideForeignContent(e);return}for(let r=t.openElements.stackTop;r>0;r--){const n=t.openElements.items[r];if(t.treeAdapter.getNamespaceURI(n)===J.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(n);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(r);break}}}const zq=new Set([q.AREA,q.BASE,q.BASEFONT,q.BGSOUND,q.BR,q.COL,q.EMBED,q.FRAME,q.HR,q.IMG,q.INPUT,q.KEYGEN,q.LINK,q.META,q.PARAM,q.SOURCE,q.TRACK,q.WBR]);function Gq(t,e){return e.treeAdapter.isElementNode(t)&&e.treeAdapter.getNamespaceURI(t)===J.HTML&&zq.has(e.treeAdapter.getTagName(t))}const Wq={treeAdapter:Ln,scriptingEnabled:!0};function Kq(t,e){const r={...Wq,...e};return NS(t,r)}function Yq(t,e){let r="";const n=e.treeAdapter.isElementNode(t)&&e.treeAdapter.getTagName(t)===q.TEMPLATE&&e.treeAdapter.getNamespaceURI(t)===J.HTML?e.treeAdapter.getTemplateContent(t):t,s=e.treeAdapter.getChildNodes(n);if(s)for(const i of s)r+=NS(i,e);return r}function NS(t,e){return e.treeAdapter.isElementNode(t)?Qq(t,e):e.treeAdapter.isTextNode(t)?Jq(t,e):e.treeAdapter.isCommentNode(t)?Zq(t,e):e.treeAdapter.isDocumentTypeNode(t)?eH(t,e):""}function Qq(t,e){const r=e.treeAdapter.getTagName(t);return`<${r}${Xq(t,e)}>${Gq(t,e)?"":`${Yq(t,e)}</${r}>`}`}function Xq(t,{treeAdapter:e}){let r="";for(const n of e.getAttrList(t)){if(r+=" ",n.namespace)switch(n.namespace){case J.XML:{r+=`xml:${n.name}`;break}case J.XMLNS:{n.name!=="xmlns"&&(r+="xmlns:"),r+=n.name;break}case J.XLINK:{r+=`xlink:${n.name}`;break}default:r+=`${n.prefix}:${n.name}`}else r+=n.name;r+=`="${mD(n.value)}"`}return r}function Jq(t,e){const{treeAdapter:r}=e,n=r.getTextNodeContent(t),s=r.getParentNode(t),i=s&&r.isElementNode(s)&&r.getTagName(s);return i&&r.getNamespaceURI(s)===J.HTML&&kU(i,e.scriptingEnabled)?n:gD(n)}function Zq(t,{treeAdapter:e}){return`<!--${e.getCommentNodeContent(t)}-->`}function eH(t,{treeAdapter:e}){return`<!DOCTYPE ${e.getDocumentTypeNodeName(t)}>`}function tH(t,e){return pS.parse(t,e)}function rH(t,e,r){typeof t=="string"&&(r=e,e=t,t=null);const n=pS.getFragmentParser(t,r);return n.tokenizer.write(e,!0),n.getFragment()}function zv(t){const e=t.includes('"')?"'":'"';return e+t+e}function nH(t,e,r){let n="!DOCTYPE ";return t&&(n+=t),e?n+=` PUBLIC ${zv(e)}`:r&&(n+=" SYSTEM"),r&&(n+=` ${zv(r)}`),n}const ys={isCommentNode:L1,isElementNode:Be,isTextNode:hl,createDocument(){const t=new ri([]);return t["x-mode"]=xr.NO_QUIRKS,t},createDocumentFragment(){return new ri([])},createElement(t,e,r){const n=Object.create(null),s=Object.create(null),i=Object.create(null);for(let o=0;o<r.length;o++){const u=r[o].name;n[u]=r[o].value,s[u]=r[o].namespace,i[u]=r[o].prefix}const a=new Qf(t,n,[]);return a.namespace=e,a["x-attribsNamespace"]=s,a["x-attribsPrefix"]=i,a},createCommentNode(t){return new Wf(t)},createTextNode(t){return new Fo(t)},appendChild(t,e){const r=t.children[t.children.length-1];r&&(r.next=e,e.prev=r),t.children.push(e),e.parent=t},insertBefore(t,e,r){const n=t.children.indexOf(r),{prev:s}=r;s&&(s.next=e,e.prev=s),r.prev=e,e.next=r,t.children.splice(n,0,e),e.parent=t},setTemplateContent(t,e){ys.appendChild(t,e)},getTemplateContent(t){return t.children[0]},setDocumentType(t,e,r,n){const s=nH(e,r,n);let i=t.children.find(a=>Wh(a)&&a.name==="!doctype");i?i.data=s??null:(i=new Kf("!doctype",s),ys.appendChild(t,i)),i["x-name"]=e,i["x-publicId"]=r,i["x-systemId"]=n},setDocumentMode(t,e){t["x-mode"]=e},getDocumentMode(t){return t["x-mode"]},detachNode(t){if(t.parent){const e=t.parent.children.indexOf(t),{prev:r,next:n}=t;t.prev=null,t.next=null,r&&(r.next=n),n&&(n.prev=r),t.parent.children.splice(e,1),t.parent=null}},insertText(t,e){const r=t.children[t.children.length-1];r&&hl(r)?r.data+=e:ys.appendChild(t,ys.createTextNode(e))},insertTextBefore(t,e,r){const n=t.children[t.children.indexOf(r)-1];n&&hl(n)?n.data+=e:ys.insertBefore(t,ys.createTextNode(e),r)},adoptAttributes(t,e){for(let r=0;r<e.length;r++){const n=e[r].name;t.attribs[n]===void 0&&(t.attribs[n]=e[r].value,t["x-attribsNamespace"][n]=e[r].namespace,t["x-attribsPrefix"][n]=e[r].prefix)}},getFirstChild(t){return t.children[0]},getChildNodes(t){return t.children},getParentNode(t){return t.parent},getAttrList(t){return t.attributes},getTagName(t){return t.name},getNamespaceURI(t){return t.namespace},getTextNodeContent(t){return t.data},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){var e;return(e=t["x-name"])!==null&&e!==void 0?e:""},getDocumentTypeNodePublicId(t){var e;return(e=t["x-publicId"])!==null&&e!==void 0?e:""},getDocumentTypeNodeSystemId(t){var e;return(e=t["x-systemId"])!==null&&e!==void 0?e:""},isDocumentTypeNode(t){return Wh(t)&&t.name==="!doctype"},setNodeSourceCodeLocation(t,e){e&&(t.startIndex=e.startOffset,t.endIndex=e.endOffset),t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){e.endOffset!=null&&(t.endIndex=e.endOffset),t.sourceCodeLocation={...t.sourceCodeLocation,...e}}};function sH(t,e,r,n){const s={scriptingEnabled:typeof e.scriptingEnabled=="boolean"?e.scriptingEnabled:!0,treeAdapter:ys,sourceCodeLocationInfo:e.sourceCodeLocationInfo};return r?tH(t,s):rH(n,t,s)}const iH={treeAdapter:ys};function aH(t){const e="length"in t?t:[t];for(let n=0;n<e.length;n+=1){const s=e[n];ca(s)&&Array.prototype.splice.call(e,n,1,...s.children)}let r="";for(let n=0;n<e.length;n+=1){const s=e[n];r+=Kq(s,iH)}return r}var le;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(le||(le={}));var X;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.SpecialStartSequence=23]="SpecialStartSequence",t[t.InSpecialTag=24]="InSpecialTag",t[t.BeforeEntity=25]="BeforeEntity",t[t.BeforeNumericEntity=26]="BeforeNumericEntity",t[t.InNamedEntity=27]="InNamedEntity",t[t.InNumericEntity=28]="InNumericEntity",t[t.InHexEntity=29]="InHexEntity"})(X||(X={}));function kn(t){return t===le.Space||t===le.NewLine||t===le.Tab||t===le.FormFeed||t===le.CarriageReturn}function Id(t){return t===le.Slash||t===le.Gt||kn(t)}function Gv(t){return t>=le.Zero&&t<=le.Nine}function oH(t){return t>=le.LowerA&&t<=le.LowerZ||t>=le.UpperA&&t<=le.UpperZ}function uH(t){return t>=le.UpperA&&t<=le.UpperF||t>=le.LowerA&&t<=le.LowerF}var pn;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(pn||(pn={}));const ur={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class lH{constructor({xmlMode:e=!1,decodeEntities:r=!0},n){this.cbs=n,this.state=X.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=X.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=r,this.entityTrie=e?uD:F1}reset(){this.state=X.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=X.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===le.Lt||!this.decodeEntities&&this.fastForwardTo(le.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=X.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===le.Amp&&(this.state=X.BeforeEntity)}stateSpecialStartSequence(e){const r=this.sequenceIndex===this.currentSequence.length;if(!(r?Id(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!r){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=X.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===le.Gt||kn(e)){const r=this.index-this.currentSequence.length;if(this.sectionStart<r){const n=this.index;this.index=r,this.cbs.ontext(this.sectionStart,r),this.index=n}this.isSpecial=!1,this.sectionStart=r+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===ur.TitleEnd?this.decodeEntities&&e===le.Amp&&(this.state=X.BeforeEntity):this.fastForwardTo(le.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===le.Lt)}stateCDATASequence(e){e===ur.Cdata[this.sequenceIndex]?++this.sequenceIndex===ur.Cdata.length&&(this.state=X.InCommentLike,this.currentSequence=ur.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=X.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===ur.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=X.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!Id(e):oH(e)}startSpecial(e,r){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=r,this.state=X.SpecialStartSequence}stateBeforeTagName(e){if(e===le.ExclamationMark)this.state=X.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===le.Questionmark)this.state=X.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const r=e|32;this.sectionStart=this.index,!this.xmlMode&&r===ur.TitleEnd[2]?this.startSpecial(ur.TitleEnd,3):this.state=!this.xmlMode&&r===ur.ScriptEnd[2]?X.BeforeSpecialS:X.InTagName}else e===le.Slash?this.state=X.BeforeClosingTagName:(this.state=X.Text,this.stateText(e))}stateInTagName(e){Id(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){kn(e)||(e===le.Gt?this.state=X.Text:(this.state=this.isTagStartChar(e)?X.InClosingTagName:X.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===le.Gt||kn(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=X.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===le.Gt||this.fastForwardTo(le.Gt))&&(this.state=X.Text,this.baseState=X.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===le.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=X.InSpecialTag,this.sequenceIndex=0):this.state=X.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===le.Slash?this.state=X.InSelfClosingTag:kn(e)||(this.state=X.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===le.Gt?(this.cbs.onselfclosingtag(this.index),this.state=X.Text,this.baseState=X.Text,this.sectionStart=this.index+1,this.isSpecial=!1):kn(e)||(this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===le.Eq||Id(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=X.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===le.Eq?this.state=X.BeforeAttributeValue:e===le.Slash||e===le.Gt?(this.cbs.onattribend(pn.NoValue,this.index),this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e)):kn(e)||(this.cbs.onattribend(pn.NoValue,this.index),this.state=X.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===le.DoubleQuote?(this.state=X.InAttributeValueDq,this.sectionStart=this.index+1):e===le.SingleQuote?(this.state=X.InAttributeValueSq,this.sectionStart=this.index+1):kn(e)||(this.sectionStart=this.index,this.state=X.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,r){e===r||!this.decodeEntities&&this.fastForwardTo(r)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r===le.DoubleQuote?pn.Double:pn.Single,this.index),this.state=X.BeforeAttributeName):this.decodeEntities&&e===le.Amp&&(this.baseState=this.state,this.state=X.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,le.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,le.SingleQuote)}stateInAttributeValueNoQuotes(e){kn(e)||e===le.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(pn.Unquoted,this.index),this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===le.Amp&&(this.baseState=this.state,this.state=X.BeforeEntity)}stateBeforeDeclaration(e){e===le.OpeningSquareBracket?(this.state=X.CDATASequence,this.sequenceIndex=0):this.state=e===le.Dash?X.BeforeComment:X.InDeclaration}stateInDeclaration(e){(e===le.Gt||this.fastForwardTo(le.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=X.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===le.Gt||this.fastForwardTo(le.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=X.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===le.Dash?(this.state=X.InCommentLike,this.currentSequence=ur.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=X.InDeclaration}stateInSpecialComment(e){(e===le.Gt||this.fastForwardTo(le.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=X.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const r=e|32;r===ur.ScriptEnd[3]?this.startSpecial(ur.ScriptEnd,4):r===ur.StyleEnd[3]?this.startSpecial(ur.StyleEnd,4):(this.state=X.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===le.Number?this.state=X.BeforeNumericEntity:e===le.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=X.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=hD(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const r=this.trieCurrent&Zr.VALUE_LENGTH;if(r){const n=(r>>14)-1;if(!this.allowLegacyEntity()&&e!==le.Semi)this.trieIndex+=n;else{const s=this.index-this.entityExcess+1;s>this.sectionStart&&this.emitPartial(this.sectionStart,s),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,n===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&Zr.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~Zr.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(e|32)===le.LowerX?(this.entityExcess++,this.state=X.InHexEntity):(this.state=X.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const r=this.index-this.entityExcess-1;r+2+ +(this.state===X.InHexEntity)!==this.index&&(r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.sectionStart=this.index+Number(e),this.emitCodePoint(lD(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===le.Semi?this.emitNumericEntity(!0):Gv(e)?(this.entityResult=this.entityResult*10+(e-le.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===le.Semi?this.emitNumericEntity(!0):Gv(e)?(this.entityResult=this.entityResult*16+(e-le.Zero),this.entityExcess++):uH(e)?(this.entityResult=this.entityResult*16+((e|32)-le.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===X.Text||this.baseState===X.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===X.Text||this.state===X.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===X.InAttributeValueDq||this.state===X.InAttributeValueSq||this.state===X.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case X.Text:{this.stateText(e);break}case X.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case X.InSpecialTag:{this.stateInSpecialTag(e);break}case X.CDATASequence:{this.stateCDATASequence(e);break}case X.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case X.InAttributeName:{this.stateInAttributeName(e);break}case X.InCommentLike:{this.stateInCommentLike(e);break}case X.InSpecialComment:{this.stateInSpecialComment(e);break}case X.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case X.InTagName:{this.stateInTagName(e);break}case X.InClosingTagName:{this.stateInClosingTagName(e);break}case X.BeforeTagName:{this.stateBeforeTagName(e);break}case X.AfterAttributeName:{this.stateAfterAttributeName(e);break}case X.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case X.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case X.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case X.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case X.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case X.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case X.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case X.InDeclaration:{this.stateInDeclaration(e);break}case X.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case X.BeforeComment:{this.stateBeforeComment(e);break}case X.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case X.InNamedEntity:{this.stateInNamedEntity(e);break}case X.BeforeEntity:{this.stateBeforeEntity(e);break}case X.InHexEntity:{this.stateInHexEntity(e);break}case X.InNumericEntity:{this.stateInNumericEntity(e);break}default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===X.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===X.InCommentLike?this.currentSequence===ur.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===X.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===X.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===X.InTagName||this.state===X.BeforeAttributeName||this.state===X.BeforeAttributeValue||this.state===X.AfterAttributeName||this.state===X.InAttributeName||this.state===X.InAttributeValueSq||this.state===X.InAttributeValueDq||this.state===X.InAttributeValueNq||this.state===X.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,r){this.baseState!==X.Text&&this.baseState!==X.InSpecialTag?this.cbs.onattribdata(e,r):this.cbs.ontext(e,r)}emitCodePoint(e){this.baseState!==X.Text&&this.baseState!==X.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const Ia=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ue=new Set(["p"]),Wv=new Set(["thead","tbody"]),Kv=new Set(["dd","dt"]),Yv=new Set(["rt","rp"]),cH=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ue],["h1",Ue],["h2",Ue],["h3",Ue],["h4",Ue],["h5",Ue],["h6",Ue],["select",Ia],["input",Ia],["output",Ia],["button",Ia],["datalist",Ia],["textarea",Ia],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Kv],["dt",Kv],["address",Ue],["article",Ue],["aside",Ue],["blockquote",Ue],["details",Ue],["div",Ue],["dl",Ue],["fieldset",Ue],["figcaption",Ue],["figure",Ue],["footer",Ue],["form",Ue],["header",Ue],["hr",Ue],["main",Ue],["nav",Ue],["ol",Ue],["pre",Ue],["section",Ue],["table",Ue],["ul",Ue],["rt",Yv],["rp",Yv],["tbody",Wv],["tfoot",Wv]]),dH=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Qv=new Set(["math","svg"]),Xv=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),hH=/\s|\//;class fH{constructor(e,r={}){var n,s,i,a,o;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(s=r.lowerCaseAttributeNames)!==null&&s!==void 0?s:!r.xmlMode,this.tokenizer=new((i=r.Tokenizer)!==null&&i!==void 0?i:lH)(this.options,this),(o=(a=this.cbs).onparserinit)===null||o===void 0||o.call(a,this)}ontext(e,r){var n,s;const i=this.getSlice(e,r);this.endIndex=r-1,(s=(n=this.cbs).ontext)===null||s===void 0||s.call(n,i),this.startIndex=r}ontextentity(e){var r,n;const s=this.tokenizer.getSectionStart();this.endIndex=s-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,cg(e)),this.startIndex=s}isVoidElement(e){return!this.options.xmlMode&&dH.has(e)}onopentagname(e,r){this.endIndex=r;let n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var r,n,s,i;this.openTagStart=this.startIndex,this.tagname=e;const a=!this.options.xmlMode&&cH.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const o=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,o,!0)}this.isVoidElement(e)||(this.stack.push(e),Qv.has(e)?this.foreignContext.push(!0):Xv.has(e)&&this.foreignContext.push(!1)),(i=(s=this.cbs).onopentagname)===null||i===void 0||i.call(s,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,r){var n,s,i,a,o,u;this.endIndex=r;let c=this.getSlice(e,r);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(Qv.has(c)||Xv.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))!this.options.xmlMode&&c==="br"&&((s=(n=this.cbs).onopentagname)===null||s===void 0||s.call(n,"br"),(a=(i=this.cbs).onopentag)===null||a===void 0||a.call(i,"br",{},!0),(u=(o=this.cbs).onclosetag)===null||u===void 0||u.call(o,"br",!1));else{const h=this.stack.lastIndexOf(c);if(h!==-1)if(this.cbs.onclosetag){let p=this.stack.length-h;for(;p--;)this.cbs.onclosetag(this.stack.pop(),p!==0)}else this.stack.length=h;else!this.options.xmlMode&&c==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var r,n;const s=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===s&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,s,!e),this.stack.pop())}onattribname(e,r){this.startIndex=e;const n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,r){this.attribvalue+=this.getSlice(e,r)}onattribentity(e){this.attribvalue+=cg(e)}onattribend(e,r){var n,s;this.endIndex=r,(s=(n=this.cbs).onattribute)===null||s===void 0||s.call(n,this.attribname,this.attribvalue,e===pn.Double?'"':e===pn.Single?"'":e===pn.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const r=e.search(hH);let n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,r){this.endIndex=r;const n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${s}`,`!${n}`)}this.startIndex=r+1}onprocessinginstruction(e,r){this.endIndex=r;const n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${s}`,`?${n}`)}this.startIndex=r+1}oncomment(e,r,n){var s,i,a,o;this.endIndex=r,(i=(s=this.cbs).oncomment)===null||i===void 0||i.call(s,this.getSlice(e,r-n)),(o=(a=this.cbs).oncommentend)===null||o===void 0||o.call(a),this.startIndex=r+1}oncdata(e,r,n){var s,i,a,o,u,c,h,p,m,E;this.endIndex=r;const v=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((i=(s=this.cbs).oncdatastart)===null||i===void 0||i.call(s),(o=(a=this.cbs).ontext)===null||o===void 0||o.call(a,v),(c=(u=this.cbs).oncdataend)===null||c===void 0||c.call(u)):((p=(h=this.cbs).oncomment)===null||p===void 0||p.call(h,`[CDATA[${v}]]`),(E=(m=this.cbs).oncommentend)===null||E===void 0||E.call(m)),this.startIndex=r+1}onend(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)}reset(){var e,r,n,s;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(s=(n=this.cbs).onparserinit)===null||s===void 0||s.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);for(;r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)}end(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}function pH(t,e){const r=new lg(void 0,e);return new fH(r,e).end(t),r.root}const mH=G7((t,e,r,n)=>e.xmlMode||e._useHtmlParser2?pH(t,e):sH(t,e,r,n)),RS=TU(mH,(t,e)=>e.xmlMode||e._useHtmlParser2?Jl(t,e):aH(t));RS([]);var qt={},hp={},iu={},nf={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */nf.exports;(function(t,e){(function(r){var n=e,s=t&&t.exports==n&&t,i=typeof me=="object"&&me;(i.global===i||i.window===i)&&(r=i);var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[\x01-\x7F]/g,u=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,c=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,h={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","	":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr",ª:"ordf",á:"aacute",Á:"Aacute",à:"agrave",À:"Agrave",ă:"abreve",Ă:"Abreve",â:"acirc",Â:"Acirc",å:"aring",Å:"angst",ä:"auml",Ä:"Auml",ã:"atilde",Ã:"Atilde",ą:"aogon",Ą:"Aogon",ā:"amacr",Ā:"Amacr",æ:"aelig",Æ:"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf",ℬ:"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf",ℭ:"Cfr","𝒞":"Cscr",ℂ:"Copf",ć:"cacute",Ć:"Cacute",ĉ:"ccirc",Ĉ:"Ccirc",č:"ccaron",Č:"Ccaron",ċ:"cdot",Ċ:"Cdot",ç:"ccedil",Ç:"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf",ď:"dcaron",Ď:"Dcaron",đ:"dstrok",Đ:"Dstrok",ð:"eth",Ð:"ETH","ⅇ":"ee",ℯ:"escr","𝔢":"efr","𝕖":"eopf",ℰ:"Escr","𝔈":"Efr","𝔼":"Eopf",é:"eacute",É:"Eacute",è:"egrave",È:"Egrave",ê:"ecirc",Ê:"Ecirc",ě:"ecaron",Ě:"Ecaron",ë:"euml",Ë:"Euml",ė:"edot",Ė:"Edot",ę:"eogon",Ę:"Eogon",ē:"emacr",Ē:"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf",ℱ:"Fscr",ﬀ:"fflig",ﬃ:"ffilig",ﬄ:"ffllig",ﬁ:"filig",fj:"fjlig",ﬂ:"fllig",ƒ:"fnof",ℊ:"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr",ǵ:"gacute",ğ:"gbreve",Ğ:"Gbreve",ĝ:"gcirc",Ĝ:"Gcirc",ġ:"gdot",Ġ:"Gdot",Ģ:"Gcedil","𝔥":"hfr",ℎ:"planckh","𝒽":"hscr","𝕙":"hopf",ℋ:"Hscr",ℌ:"Hfr",ℍ:"Hopf",ĥ:"hcirc",Ĥ:"Hcirc",ℏ:"hbar",ħ:"hstrok",Ħ:"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf",ℐ:"Iscr",ℑ:"Im",í:"iacute",Í:"Iacute",ì:"igrave",Ì:"Igrave",î:"icirc",Î:"Icirc",ï:"iuml",Ï:"Iuml",ĩ:"itilde",Ĩ:"Itilde",İ:"Idot",į:"iogon",Į:"Iogon",ī:"imacr",Ī:"Imacr",ĳ:"ijlig",Ĳ:"IJlig",ı:"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf",ĵ:"jcirc",Ĵ:"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr",ķ:"kcedil",Ķ:"Kcedil","𝔩":"lfr","𝓁":"lscr",ℓ:"ell","𝕝":"lopf",ℒ:"Lscr","𝔏":"Lfr","𝕃":"Lopf",ĺ:"lacute",Ĺ:"Lacute",ľ:"lcaron",Ľ:"Lcaron",ļ:"lcedil",Ļ:"Lcedil",ł:"lstrok",Ł:"Lstrok",ŀ:"lmidot",Ŀ:"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf",ℳ:"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr",ℕ:"Nopf","𝒩":"Nscr","𝔑":"Nfr",ń:"nacute",Ń:"Nacute",ň:"ncaron",Ň:"Ncaron",ñ:"ntilde",Ñ:"Ntilde",ņ:"ncedil",Ņ:"Ncedil","№":"numero",ŋ:"eng",Ŋ:"ENG","𝕠":"oopf","𝔬":"ofr",ℴ:"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf",º:"ordm",ó:"oacute",Ó:"Oacute",ò:"ograve",Ò:"Ograve",ô:"ocirc",Ô:"Ocirc",ö:"ouml",Ö:"Ouml",ő:"odblac",Ő:"Odblac",õ:"otilde",Õ:"Otilde",ø:"oslash",Ø:"Oslash",ō:"omacr",Ō:"Omacr",œ:"oelig",Œ:"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf",ℙ:"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr",ℚ:"Qopf",ĸ:"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr",ℛ:"Rscr",ℜ:"Re",ℝ:"Ropf",ŕ:"racute",Ŕ:"Racute",ř:"rcaron",Ř:"Rcaron",ŗ:"rcedil",Ŗ:"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS",ś:"sacute",Ś:"Sacute",ŝ:"scirc",Ŝ:"Scirc",š:"scaron",Š:"Scaron",ş:"scedil",Ş:"Scedil",ß:"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf",ť:"tcaron",Ť:"Tcaron",ţ:"tcedil",Ţ:"Tcedil","™":"trade",ŧ:"tstrok",Ŧ:"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr",ú:"uacute",Ú:"Uacute",ù:"ugrave",Ù:"Ugrave",ŭ:"ubreve",Ŭ:"Ubreve",û:"ucirc",Û:"Ucirc",ů:"uring",Ů:"Uring",ü:"uuml",Ü:"Uuml",ű:"udblac",Ű:"Udblac",ũ:"utilde",Ũ:"Utilde",ų:"uogon",Ų:"Uogon",ū:"umacr",Ū:"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr",ŵ:"wcirc",Ŵ:"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf",ý:"yacute",Ý:"Yacute",ŷ:"ycirc",Ŷ:"Ycirc",ÿ:"yuml",Ÿ:"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf",ℨ:"Zfr",ℤ:"Zopf","𝒵":"Zscr",ź:"zacute",Ź:"Zacute",ž:"zcaron",Ž:"Zcaron",ż:"zdot",Ż:"Zdot",Ƶ:"imped",þ:"thorn",Þ:"THORN",ŉ:"napos",α:"alpha",Α:"Alpha",β:"beta",Β:"Beta",γ:"gamma",Γ:"Gamma",δ:"delta",Δ:"Delta",ε:"epsi","ϵ":"epsiv",Ε:"Epsilon",ϝ:"gammad",Ϝ:"Gammad",ζ:"zeta",Ζ:"Zeta",η:"eta",Η:"Eta",θ:"theta",ϑ:"thetav",Θ:"Theta",ι:"iota",Ι:"Iota",κ:"kappa",ϰ:"kappav",Κ:"Kappa",λ:"lambda",Λ:"Lambda",μ:"mu",µ:"micro",Μ:"Mu",ν:"nu",Ν:"Nu",ξ:"xi",Ξ:"Xi",ο:"omicron",Ο:"Omicron",π:"pi",ϖ:"piv",Π:"Pi",ρ:"rho",ϱ:"rhov",Ρ:"Rho",σ:"sigma",Σ:"Sigma",ς:"sigmaf",τ:"tau",Τ:"Tau",υ:"upsi",Υ:"Upsilon",ϒ:"Upsi",φ:"phi",ϕ:"phiv",Φ:"Phi",χ:"chi",Χ:"Chi",ψ:"psi",Ψ:"Psi",ω:"omega",Ω:"ohm",а:"acy",А:"Acy",б:"bcy",Б:"Bcy",в:"vcy",В:"Vcy",г:"gcy",Г:"Gcy",ѓ:"gjcy",Ѓ:"GJcy",д:"dcy",Д:"Dcy",ђ:"djcy",Ђ:"DJcy",е:"iecy",Е:"IEcy",ё:"iocy",Ё:"IOcy",є:"jukcy",Є:"Jukcy",ж:"zhcy",Ж:"ZHcy",з:"zcy",З:"Zcy",ѕ:"dscy",Ѕ:"DScy",и:"icy",И:"Icy",і:"iukcy",І:"Iukcy",ї:"yicy",Ї:"YIcy",й:"jcy",Й:"Jcy",ј:"jsercy",Ј:"Jsercy",к:"kcy",К:"Kcy",ќ:"kjcy",Ќ:"KJcy",л:"lcy",Л:"Lcy",љ:"ljcy",Љ:"LJcy",м:"mcy",М:"Mcy",н:"ncy",Н:"Ncy",њ:"njcy",Њ:"NJcy",о:"ocy",О:"Ocy",п:"pcy",П:"Pcy",р:"rcy",Р:"Rcy",с:"scy",С:"Scy",т:"tcy",Т:"Tcy",ћ:"tshcy",Ћ:"TSHcy",у:"ucy",У:"Ucy",ў:"ubrcy",Ў:"Ubrcy",ф:"fcy",Ф:"Fcy",х:"khcy",Х:"KHcy",ц:"tscy",Ц:"TScy",ч:"chcy",Ч:"CHcy",џ:"dzcy",Џ:"DZcy",ш:"shcy",Ш:"SHcy",щ:"shchcy",Щ:"SHCHcy",ъ:"hardcy",Ъ:"HARDcy",ы:"ycy",Ы:"Ycy",ь:"softcy",Ь:"SOFTcy",э:"ecy",Э:"Ecy",ю:"yucy",Ю:"YUcy",я:"yacy",Я:"YAcy",ℵ:"aleph",ℶ:"beth",ℷ:"gimel",ℸ:"daleth"},p=/["&'<>`]/g,m={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},E=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,v=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,x={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},w={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},b={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},T=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],O=String.fromCharCode,B={},V=B.hasOwnProperty,N=function(j,U){return V.call(j,U)},I=function(j,U){for(var W=-1,ne=j.length;++W<ne;)if(j[W]==U)return!0;return!1},D=function(j,U){if(!j)return U;var W={},ne;for(ne in U)W[ne]=N(j,ne)?j[ne]:U[ne];return W},A=function(j,U){var W="";return j>=55296&&j<=57343||j>1114111?(U&&R("character reference outside the permissible Unicode range"),"�"):N(b,j)?(U&&R("disallowed character reference"),b[j]):(U&&I(T,j)&&R("disallowed character reference"),j>65535&&(j-=65536,W+=O(j>>>10&1023|55296),j=56320|j&1023),W+=O(j),W)},k=function(j){return"&#x"+j.toString(16).toUpperCase()+";"},F=function(j){return"&#"+j+";"},R=function(j){throw Error("Parse error: "+j)},Q=function(j,U){U=D(U,Q.options);var W=U.strict;W&&v.test(j)&&R("forbidden code point");var ne=U.encodeEverything,K=U.useNamedReferences,se=U.allowUnsafeSymbols,Ee=U.decimal?F:k,fe=function(de){return Ee(de.charCodeAt(0))};return ne?(j=j.replace(o,function(de){return K&&N(h,de)?"&"+h[de]+";":fe(de)}),K&&(j=j.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),K&&(j=j.replace(c,function(de){return"&"+h[de]+";"}))):K?(se||(j=j.replace(p,function(de){return"&"+h[de]+";"})),j=j.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),j=j.replace(c,function(de){return"&"+h[de]+";"})):se||(j=j.replace(p,fe)),j.replace(a,function(de){var Oe=de.charCodeAt(0),ar=de.charCodeAt(1),St=(Oe-55296)*1024+ar-56320+65536;return Ee(St)}).replace(u,fe)};Q.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var oe=function(j,U){U=D(U,oe.options);var W=U.strict;return W&&E.test(j)&&R("malformed character reference"),j.replace(_,function(ne,K,se,Ee,fe,de,Oe,ar,St){var Et,as,ma,ga,os,hi;return K?(os=K,x[os]):se?(os=se,hi=Ee,hi&&U.isAttributeValue?(W&&hi=="="&&R("`&` did not start a character reference"),ne):(W&&R("named character reference was not terminated by a semicolon"),w[os]+(hi||""))):fe?(ma=fe,as=de,W&&!as&&R("character reference was not terminated by a semicolon"),Et=parseInt(ma,10),A(Et,W)):Oe?(ga=Oe,as=ar,W&&!as&&R("character reference was not terminated by a semicolon"),Et=parseInt(ga,16),A(Et,W)):(W&&R("named character reference was not terminated by a semicolon"),ne)})};oe.options={isAttributeValue:!1,strict:!1};var _e=function(j){return j.replace(p,function(U){return m[U]})},Ie={version:"1.2.0",encode:Q,decode:oe,escape:_e,unescape:oe};if(n&&!n.nodeType)if(s)s.exports=Ie;else for(var Z in Ie)N(Ie,Z)&&(n[Z]=Ie[Z]);else r.he=Ie})(me)})(nf,nf.exports);var Q1=nf.exports;Object.defineProperty(iu,"__esModule",{value:!0});var Jv=Q1,gH=function(){function t(e,r){e===void 0&&(e=null),this.parentNode=e,this.childNodes=[],Object.defineProperty(this,"range",{enumerable:!1,writable:!0,configurable:!0,value:r??[-1,-1]})}return t.prototype.remove=function(){var e=this;if(this.parentNode){var r=this.parentNode.childNodes;this.parentNode.childNodes=r.filter(function(n){return e!==n}),this.parentNode=null}return this},Object.defineProperty(t.prototype,"innerText",{get:function(){return this.rawText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return(0,Jv.decode)(this.rawText)},set:function(e){this.rawText=(0,Jv.encode)(e)},enumerable:!1,configurable:!0}),t}();iu.default=gH;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});var Tg;(function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE"})(Tg||(Tg={}));fa.default=Tg;var EH=me&&me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kS=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hp,"__esModule",{value:!0});var yH=kS(iu),_H=kS(fa),bH=function(t){EH(e,t);function e(r,n,s,i){n===void 0&&(n=null),i===void 0&&(i="!--");var a=t.call(this,n,s)||this;return a.rawText=r,a.rawTagName=i,a.nodeType=_H.default.COMMENT_NODE,a}return e.prototype.clone=function(){return new e(this.rawText,null,void 0,this.rawTagName)},Object.defineProperty(e.prototype,"text",{get:function(){return this.rawText},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"<!--".concat(this.rawText,"-->")},e}(yH.default);hp.default=bH;var ts={},X1={};Object.defineProperty(X1,"__esModule",{value:!0});function vH(t){return t[t.length-1]}X1.default=vH;var J1={},TH=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(J1,"__esModule",{value:!0});var AH=TH(fa);function fp(t){return t&&t.nodeType===AH.default.ELEMENT_NODE}function PS(t,e){return fp(t)?t.getAttribute(e):void 0}function xH(t){return(t&&t.rawTagName||"").toLowerCase()}function Fc(t){return t&&t.childNodes}function Z1(t){return t?t.parentNode:null}function wH(t){return t.text}function IH(t){for(var e=t.length,r,n,s;--e>-1;){for(r=n=t[e],t[e]=null,s=!0;n;){if(t.indexOf(n)>-1){s=!1,t.splice(e,1);break}n=Z1(n)}s&&(t[e]=r)}return t}function OS(t,e){return e.some(function(r){return fp(r)?t(r)||OS(t,Fc(r)):!1})}function CH(t){var e=Z1(t);return e?Fc(e):[]}function DH(t,e){return PS(t,e)!==void 0}function LS(t,e){for(var r=null,n=0,s=e==null?void 0:e.length;n<s&&!r;n++){var i=e[n];if(t(i))r=i;else{var a=Fc(i);a&&a.length>0&&(r=LS(t,a))}}return r}function FS(t,e){for(var r=[],n=0,s=e.length;n<s;n++)if(fp(e[n])){t(e[n])&&r.push(e[n]);var i=Fc(e[n]);i&&(r=r.concat(FS(t,i)))}return r}J1.default={isTag:fp,getAttributeValue:PS,getName:xH,getChildren:Fc,getParent:Z1,getText:wH,removeSubsets:IH,existsOne:OS,getSiblings:CH,hasAttrib:DH,findOne:LS,findAll:FS};var eE={};Object.defineProperty(eE,"__esModule",{value:!0});var SH=function(){function t(e,r){e===void 0&&(e=!1),this.addClosingSlash=e,Array.isArray(r)?this.voidTags=r.reduce(function(n,s){return n.add(s.toLowerCase()).add(s.toUpperCase()).add(s)},new Set):this.voidTags=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].reduce(function(n,s){return n.add(s.toLowerCase()).add(s.toUpperCase()).add(s)},new Set)}return t.prototype.formatNode=function(e,r,n){var s=this.addClosingSlash,i=s&&r&&!r.endsWith(" ")?" ":"",a=s?"".concat(i,"/"):"";return this.isVoidElement(e.toLowerCase())?"<".concat(e).concat(r).concat(a,">"):"<".concat(e).concat(r,">").concat(n,"</").concat(e,">")},t.prototype.isVoidElement=function(e){return this.voidTags.has(e)},t}();eE.default=SH;var pp={},NH=me&&me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BS=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pp,"__esModule",{value:!0});var RH=Q1,kH=BS(iu),PH=BS(fa),OH=function(t){NH(e,t);function e(r,n,s){n===void 0&&(n=null);var i=t.call(this,n,s)||this;return i.nodeType=PH.default.TEXT_NODE,i.rawTagName="",i._rawText=r,i}return e.prototype.clone=function(){return new e(this._rawText,null)},Object.defineProperty(e.prototype,"rawText",{get:function(){return this._rawText},set:function(r){this._rawText=r,this._trimmedRawText=void 0,this._trimmedText=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trimmedRawText",{get:function(){return this._trimmedRawText!==void 0?this._trimmedRawText:(this._trimmedRawText=Zv(this.rawText),this._trimmedRawText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trimmedText",{get:function(){return this._trimmedText!==void 0?this._trimmedText:(this._trimmedText=Zv(this.text),this._trimmedText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return(0,RH.decode)(this.rawText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWhitespace",{get:function(){return/^(\s|&nbsp;)*$/.test(this.rawText)},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.rawText},e}(kH.default);pp.default=OH;function Zv(t){for(var e=0,r,n;e>=0&&e<t.length;)/\S/.test(t[e])&&(r===void 0?(r=e,e=t.length):(n=e,e=void 0)),r===void 0?e++:e--;r===void 0&&(r=0),n===void 0&&(n=t.length-1);var s=r>0&&/[^\S\r\n]/.test(t[r-1]),i=n<t.length-1&&/[^\S\r\n]/.test(t[n+1]);return(s?" ":"")+t.slice(r,n+1)+(i?" ":"")}var LH=me&&me.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ka=me&&me.__assign||function(){return Ka=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ka.apply(this,arguments)},Fu=me&&me.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},di=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0});ts.parse=ts.base_parse=void 0;var Sm=da,FH=di(Q1),Ya=di(X1),Nm=di(J1),MS=di(eE),BH=di(hp),Rm=di(iu),Qa=di(pp),cn=di(fa);function Bu(t){return JSON.parse(JSON.stringify(FH.default.decode(t)))}var MH=["h1","h2","h3","h4","h5","h6","header","hgroup"],jH=["details","dialog","dd","div","dt"],UH=["fieldset","figcaption","figure","footer","form"],VH=["table","td","tr"],qH=["address","article","aside","blockquote","br","hr","li","main","nav","ol","p","pre","section","ul"],Ag=new Set;function HH(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=function(a){for(var o=0;o<a.length;o++){var u=a[o];Ag.add(u),Ag.add(u.toUpperCase())}},n=0,s=t;n<s.length;n++){var i=s[n];r(i)}}HH(MH,jH,UH,VH,qH);var $H=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r=function(){return null}),this._set=new Set(e),this._afterUpdate=r}return t.prototype._validate=function(e){if(/\s/.test(e))throw new Error("DOMException in DOMTokenList.add: The token '".concat(e,"' contains HTML space characters, which are not valid in tokens."))},t.prototype.add=function(e){this._validate(e),this._set.add(e),this._afterUpdate(this)},t.prototype.replace=function(e,r){this._validate(r),this._set.delete(e),this._set.add(r),this._afterUpdate(this)},t.prototype.remove=function(e){this._set.delete(e)&&this._afterUpdate(this)},t.prototype.toggle=function(e){this._validate(e),this._set.has(e)?this._set.delete(e):this._set.add(e),this._afterUpdate(this)},t.prototype.contains=function(e){return this._set.has(e)},Object.defineProperty(t.prototype,"length",{get:function(){return this._set.size},enumerable:!1,configurable:!0}),t.prototype.values=function(){return this._set.values()},Object.defineProperty(t.prototype,"value",{get:function(){return Array.from(this._set.values())},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return Array.from(this._set.values()).join(" ")},t}(),xg=function(t){LH(e,t);function e(r,n,s,i,a,o,u){s===void 0&&(s=""),i===void 0&&(i=null),o===void 0&&(o=new MS.default),u===void 0&&(u={});var c=t.call(this,i,a)||this;if(c.rawAttrs=s,c.voidTag=o,c.nodeType=cn.default.ELEMENT_NODE,c.rawTagName=r,c.rawAttrs=s||"",c.id=n.id||"",c.childNodes=[],c._parseOptions=u,c.classList=new $H(n.class?n.class.split(/\s+/):[],function(p){return c.setAttribute("class",p.toString())}),n.id&&(s||(c.rawAttrs='id="'.concat(n.id,'"'))),n.class&&!s){var h='class="'.concat(c.classList.toString(),'"');c.rawAttrs?c.rawAttrs+=" ".concat(h):c.rawAttrs=h}return c}return e.prototype.quoteAttribute=function(r){return r==null?"null":JSON.stringify(r.replace(/"/g,"&quot;")).replace(/\\t/g,"	").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\/g,"")},e.prototype.removeChild=function(r){return this.childNodes=this.childNodes.filter(function(n){return n!==r}),this},e.prototype.exchangeChild=function(r,n){var s=this.childNodes;return this.childNodes=s.map(function(i){return i===r?n:i}),this},Object.defineProperty(e.prototype,"tagName",{get:function(){return this.rawTagName?this.rawTagName.toUpperCase():this.rawTagName},set:function(r){this.rawTagName=r.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.rawTagName.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVoidElement",{get:function(){return this.voidTag.isVoidElement(this.localName)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawText",{get:function(){return/^br$/i.test(this.rawTagName)?`
`:this.childNodes.reduce(function(r,n){return r+=n.rawText},"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){return Bu(this.rawText)},set:function(r){var n=[new Qa.default(r,this)];this.childNodes=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return Bu(this.rawText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"structuredText",{get:function(){var r=[],n=[r];function s(i){if(i.nodeType===cn.default.ELEMENT_NODE)Ag.has(i.rawTagName)?(r.length>0&&n.push(r=[]),i.childNodes.forEach(s),r.length>0&&n.push(r=[])):i.childNodes.forEach(s);else if(i.nodeType===cn.default.TEXT_NODE)if(i.isWhitespace)r.prependWhitespace=!0;else{var a=i.trimmedText;r.prependWhitespace&&(a=" ".concat(a),r.prependWhitespace=!1),r.push(a)}}return s(this),n.map(function(i){return i.join("").replace(/\s{2,}/g," ")}).join(`
`).replace(/\s+$/,"")},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var r=this.rawTagName;if(r){var n=this.rawAttrs?" ".concat(this.rawAttrs):"";return this.voidTag.formatNode(r,n,this.innerHTML)}return this.innerHTML},Object.defineProperty(e.prototype,"innerHTML",{get:function(){return this.childNodes.map(function(r){return r.toString()}).join("")},set:function(r){var n=ka(r,this._parseOptions),s=n.childNodes.length?n.childNodes:[new Qa.default(r,this)];Rn(s,this),Rn(this.childNodes,null),this.childNodes=s},enumerable:!1,configurable:!0}),e.prototype.set_content=function(r,n){if(n===void 0&&(n={}),r instanceof Rm.default)r=[r];else if(typeof r=="string"){n=Ka(Ka({},this._parseOptions),n);var s=ka(r,n);r=s.childNodes.length?s.childNodes:[new Qa.default(s.innerHTML,this)]}return Rn(this.childNodes,null),Rn(r,this),this.childNodes=r,this},e.prototype.replaceWith=function(){for(var r=this,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=this.parentNode,a=n.map(function(u){if(u instanceof Rm.default)return[u];if(typeof u=="string"){var c=ka(u,r._parseOptions);return c.childNodes.length?c.childNodes:[new Qa.default(u,r)]}return[]}).flat(),o=i.childNodes.findIndex(function(u){return u===r});return Rn([this],null),i.childNodes=Fu(Fu(Fu([],i.childNodes.slice(0,o),!0),Rn(a,i),!0),i.childNodes.slice(o+1),!0),this},Object.defineProperty(e.prototype,"outerHTML",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),e.prototype.trimRight=function(r){for(var n=0;n<this.childNodes.length;n++){var s=this.childNodes[n];if(s.nodeType===cn.default.ELEMENT_NODE)s.trimRight(r);else{var i=s.rawText.search(r);i>-1&&(s.rawText=s.rawText.substr(0,i),this.childNodes.length=n+1)}}return this},Object.defineProperty(e.prototype,"structure",{get:function(){var r=[],n=0;function s(a){r.push("  ".repeat(n)+a)}function i(a){var o=a.id?"#".concat(a.id):"",u=a.classList.length?".".concat(a.classList.value.join(".")):"";s("".concat(a.rawTagName).concat(o).concat(u)),n++,a.childNodes.forEach(function(c){c.nodeType===cn.default.ELEMENT_NODE?i(c):c.nodeType===cn.default.TEXT_NODE&&(c.isWhitespace||s("#text"))}),n--}return i(this),r.join(`
`)},enumerable:!1,configurable:!0}),e.prototype.removeWhitespace=function(){var r=this,n=0;return this.childNodes.forEach(function(s){if(s.nodeType===cn.default.TEXT_NODE){if(s.isWhitespace)return;s.rawText=s.trimmedRawText}else s.nodeType===cn.default.ELEMENT_NODE&&s.removeWhitespace();r.childNodes[n++]=s}),this.childNodes.length=n,this},e.prototype.querySelectorAll=function(r){return(0,Sm.selectAll)(r,this,{xmlMode:!0,adapter:Nm.default})},e.prototype.querySelector=function(r){return(0,Sm.selectOne)(r,this,{xmlMode:!0,adapter:Nm.default})},e.prototype.getElementsByTagName=function(r){for(var n=r.toUpperCase(),s=[],i=[],a=this,o=0;o!==void 0;){var u=void 0;do u=a.childNodes[o++];while(o<a.childNodes.length&&u===void 0);if(u===void 0){a=a.parentNode,o=i.pop();continue}u.nodeType===cn.default.ELEMENT_NODE&&((r==="*"||u.tagName===n)&&s.push(u),u.childNodes.length>0&&(i.push(o),a=u,o=0))}return s},e.prototype.getElementById=function(r){for(var n=[],s=this,i=0;i!==void 0;){var a=void 0;do a=s.childNodes[i++];while(i<s.childNodes.length&&a===void 0);if(a===void 0){s=s.parentNode,i=n.pop();continue}if(a.nodeType===cn.default.ELEMENT_NODE){if(a.id===r)return a;a.childNodes.length>0&&(n.push(i),s=a,i=0)}}return null},e.prototype.closest=function(r){var n=new Map,s=this,i=null;function a(u,c){for(var h=null,p=0,m=c.length;p<m&&!h;p++){var E=c[p];if(u(E))h=E;else{var v=n.get(E);v&&(h=a(u,[v]))}}return h}for(;s;)n.set(s,i),i=s,s=s.parentNode;for(s=this;s;){var o=(0,Sm.selectOne)(r,s,{xmlMode:!0,adapter:Ka(Ka({},Nm.default),{getChildren:function(u){var c=n.get(u);return c&&[c]},getSiblings:function(u){return[u]},findOne:a,findAll:function(){return[]}})});if(o)return o;s=s.parentNode}return null},e.prototype.appendChild=function(r){return r.remove(),this.childNodes.push(r),r.parentNode=this,r},Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return(0,Ya.default)(this.childNodes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attrs",{get:function(){if(this._attrs)return this._attrs;this._attrs={};var r=this.rawAttributes;for(var n in r){var s=r[n]||"";this._attrs[n.toLowerCase()]=Bu(s)}return this._attrs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var r={},n=this.rawAttributes;for(var s in n){var i=n[s]||"";r[s]=Bu(i)}return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawAttributes",{get:function(){if(this._rawAttrs)return this._rawAttrs;var r={};if(this.rawAttrs)for(var n=/([a-zA-Z()[\]#@$.?:][a-zA-Z0-9-_:()[\]#]*)(?:\s*=\s*((?:'[^']*')|(?:"[^"]*")|\S+))?/g,s=void 0;s=n.exec(this.rawAttrs);){var i=s[1],a=s[2]||null;a&&(a[0]==="'"||a[0]==='"')&&(a=a.slice(1,a.length-1)),r[i]=r[i]||a}return this._rawAttrs=r,r},enumerable:!1,configurable:!0}),e.prototype.removeAttribute=function(r){var n=this,s=this.rawAttributes;return delete s[r],this._attrs&&delete this._attrs[r],this.rawAttrs=Object.keys(s).map(function(i){var a=n.quoteAttribute(s[i]);return a==="null"||a==='""'?i:"".concat(i,"=").concat(a)}).join(" "),r==="id"&&(this.id=""),this},e.prototype.hasAttribute=function(r){return r.toLowerCase()in this.attrs},e.prototype.getAttribute=function(r){return this.attrs[r.toLowerCase()]},e.prototype.setAttribute=function(r,n){var s=this;if(arguments.length<2)throw new Error("Failed to execute 'setAttribute' on 'Element'");var i=r.toLowerCase(),a=this.rawAttributes;for(var o in a)if(o.toLowerCase()===i){r=o;break}return a[r]=String(n),this._attrs&&(this._attrs[i]=Bu(a[r])),this.rawAttrs=Object.keys(a).map(function(u){var c=s.quoteAttribute(a[u]);return c==="null"||c==='""'?u:"".concat(u,"=").concat(c)}).join(" "),r==="id"&&(this.id=n),this},e.prototype.setAttributes=function(r){var n=this;return this._attrs&&delete this._attrs,this._rawAttrs&&delete this._rawAttrs,this.rawAttrs=Object.keys(r).map(function(s){var i=r[s];return i==="null"||i==='""'?s:"".concat(s,"=").concat(n.quoteAttribute(String(i)))}).join(" "),this},e.prototype.insertAdjacentHTML=function(r,n){var s,i,a,o=this;if(arguments.length<2)throw new Error("2 arguments required");var u=ka(n,this._parseOptions);if(r==="afterend"){var c=this.parentNode.childNodes.findIndex(function(h){return h===o});Rn(u.childNodes,this.parentNode),(s=this.parentNode.childNodes).splice.apply(s,Fu([c+1,0],u.childNodes,!1))}else if(r==="afterbegin")Rn(u.childNodes,this),(i=this.childNodes).unshift.apply(i,u.childNodes);else if(r==="beforeend")u.childNodes.forEach(function(h){o.appendChild(h)});else if(r==="beforebegin"){var c=this.parentNode.childNodes.findIndex(function(p){return p===o});Rn(u.childNodes,this.parentNode),(a=this.parentNode.childNodes).splice.apply(a,Fu([c,0],u.childNodes,!1))}else throw new Error("The value provided ('".concat(r,"') is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'"));return this},Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=0;n<r.length;){var s=r[n++];if(this===s)return r[n]||null}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextElementSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=0,s=!1;n<r.length;){var i=r[n++];if(s){if(i instanceof e)return i||null}else this===i&&(s=!0)}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=r.length;n>0;){var s=r[--n];if(this===s)return r[n-1]||null}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousElementSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=r.length,s=!1;n>0;){var i=r[--n];if(s){if(i instanceof e)return i||null}else this===i&&(s=!0)}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){return this.classList.toString()},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return ka(this.toString(),this._parseOptions).firstChild},e}(Rm.default);ts.default=xg;var Nn=/<!--[\s\S]*?-->|<(\/?)([a-zA-Z][-.:0-9_a-zA-Z]*)((?:\s+[^>]*?(?:(?:'[^']*')|(?:"[^"]*"))?)*)\s*(\/?)>/g,zH=/(?:^|\s)(id|class)\s*=\s*((?:'[^']*')|(?:"[^"]*")|\S+)/gi,eT={li:{li:!0,LI:!0},LI:{li:!0,LI:!0},p:{p:!0,div:!0,P:!0,DIV:!0},P:{p:!0,div:!0,P:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},td:{td:!0,th:!0,TD:!0,TH:!0},TD:{td:!0,th:!0,TD:!0,TH:!0},th:{td:!0,th:!0,TD:!0,TH:!0},TH:{td:!0,th:!0,TD:!0,TH:!0},h1:{h1:!0,H1:!0},H1:{h1:!0,H1:!0},h2:{h2:!0,H2:!0},H2:{h2:!0,H2:!0},h3:{h3:!0,H3:!0},H3:{h3:!0,H3:!0},h4:{h4:!0,H4:!0},H4:{h4:!0,H4:!0},h5:{h5:!0,H5:!0},H5:{h5:!0,H5:!0},h6:{h6:!0,H6:!0},H6:{h6:!0,H6:!0}},tT={li:{ul:!0,ol:!0,UL:!0,OL:!0},LI:{ul:!0,ol:!0,UL:!0,OL:!0},a:{div:!0,DIV:!0},A:{div:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},i:{div:!0,DIV:!0},I:{div:!0,DIV:!0},p:{div:!0,DIV:!0},P:{div:!0,DIV:!0},td:{tr:!0,table:!0,TR:!0,TABLE:!0},TD:{tr:!0,table:!0,TR:!0,TABLE:!0},th:{tr:!0,table:!0,TR:!0,TABLE:!0},TH:{tr:!0,table:!0,TR:!0,TABLE:!0}},Mu="documentfragmentcontainer";function jS(t,e){var r,n;e===void 0&&(e={});var s=new MS.default((r=e==null?void 0:e.voidTag)===null||r===void 0?void 0:r.closingSlash,(n=e==null?void 0:e.voidTag)===null||n===void 0?void 0:n.tags),i=e.blockTextElements||{script:!0,noscript:!0,style:!0,pre:!0},a=Object.keys(i),o=a.map(function(fe){return new RegExp("^".concat(fe,"$"),"i")}),u=a.filter(function(fe){return!!i[fe]}).map(function(fe){return new RegExp("^".concat(fe,"$"),"i")});function c(fe){return u.some(function(de){return de.test(fe)})}function h(fe){return o.some(function(de){return de.test(fe)})}var p=function(fe,de){return[fe-B,de-B]},m=new xg(null,{},"",null,[0,t.length],s,e),E=m,v=[m],_=-1,x=void 0,w;t="<".concat(Mu,">").concat(t,"</").concat(Mu,">");for(var b=e.lowerCaseTagName,T=e.fixNestedATags,O=t.length-(Mu.length+2),B=Mu.length+2;w=Nn.exec(t);){var V=w[0],N=w[1],I=w[2],D=w[3],A=w[4],k=V.length,F=Nn.lastIndex-k,R=Nn.lastIndex;if(_>-1&&_+k<R){var Q=t.substring(_,F);E.appendChild(new Qa.default(Q,E,p(_,F)))}if(_=Nn.lastIndex,I!==Mu){if(V[1]==="!"){if(e.comment){var Q=t.substring(F+4,R-3);E.appendChild(new BH.default(Q,E,p(F,R)))}continue}if(b&&(I=I.toLowerCase()),!N){for(var oe={},_e=void 0;_e=zH.exec(D);){var Ie=_e[1],Z=_e[2],j=Z[0]==="'"||Z[0]==='"';oe[Ie.toLowerCase()]=j?Z.slice(1,Z.length-1):Z}var U=E.rawTagName;!A&&eT[U]&&eT[U][I]&&(v.pop(),E=(0,Ya.default)(v)),T&&(I==="a"||I==="A")&&(x!==void 0&&(v.splice(x),E=(0,Ya.default)(v)),x=v.length);var W=Nn.lastIndex,ne=W-k;if(E=E.appendChild(new xg(I,oe,D.slice(1),null,p(ne,W),s,e)),v.push(E),h(I)){var K="</".concat(I,">"),se=b?t.toLocaleLowerCase().indexOf(K,Nn.lastIndex):t.indexOf(K,Nn.lastIndex),Ee=se===-1?O:se;if(c(I)){var Q=t.substring(W,Ee);Q.length>0&&/\S/.test(Q)&&E.appendChild(new Qa.default(Q,E,p(W,Ee)))}se===-1?_=Nn.lastIndex=t.length+1:(_=Nn.lastIndex=se+K.length,N="/")}}if(N||A||s.isVoidElement(I))for(;;)if(x!=null&&(I==="a"||I==="A")&&(x=void 0),E.rawTagName===I){E.range[1]=p(-1,Math.max(_,R))[1],v.pop(),E=(0,Ya.default)(v);break}else{var U=E.tagName;if(tT[U]&&tT[U][I]){v.pop(),E=(0,Ya.default)(v);continue}break}}}return v}ts.base_parse=jS;function ka(t,e){e===void 0&&(e={});for(var r=jS(t,e),n=r[0],s=function(){var i=r.pop(),a=(0,Ya.default)(r);i.parentNode&&i.parentNode.parentNode&&(i.parentNode===a&&i.tagName===a.tagName?e.parseNoneClosedTags!==!0&&(a.removeChild(i),i.childNodes.forEach(function(o){a.parentNode.appendChild(o)}),r.pop()):e.parseNoneClosedTags!==!0&&(a.removeChild(i),i.childNodes.forEach(function(o){a.appendChild(o)})))};r.length>1;)s();return n}ts.parse=ka;function Rn(t,e){return t.map(function(r){return r.parentNode=e,r})}var US={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=ts;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.parse}})})(US);var tE={};Object.defineProperty(tE,"__esModule",{value:!0});var GH=ts;function WH(t,e){e===void 0&&(e={});var r=(0,GH.base_parse)(t,e);return r.length===1}tE.default=WH;var pa=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qt,"__esModule",{value:!0});qt.NodeType=qt.TextNode=qt.Node=qt.valid=qt.CommentNode=qt.HTMLElement=KS=qt.parse=void 0;var VS=pa(hp);qt.CommentNode=VS.default;var qS=pa(ts);qt.HTMLElement=qS.default;var HS=pa(iu);qt.Node=HS.default;var $S=pa(pp);qt.TextNode=$S.default;var zS=pa(fa);qt.NodeType=zS.default;var GS=pa(US),WS=pa(tE);qt.valid=WS.default;function is(t,e){return e===void 0&&(e={}),(0,GS.default)(t,e)}qt.default=is;var KS=qt.parse=is;is.parse=GS.default;is.HTMLElement=qS.default;is.CommentNode=VS.default;is.valid=WS.default;is.Node=HS.default;is.TextNode=$S.default;is.NodeType=zS.default;const KH=t=>{let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return e.toString()};async function YH(t,e){var r,n;try{const s=KH(t),i={title:((r=e.title)==null?void 0:r.substring(0,500))||"",description:((n=e.description)==null?void 0:n.substring(0,1e3))||"",thumbnail_url:e.thumbnail_url||null,timestamp:Date.now()};if(!i.title&&!i.description){console.warn("Invalid metadata for caching:",t);return}await Ga(et(Te,"linkPreviews",s),i)}catch(s){console.error("Cache save error:",s)}}async function YS(t){var e,r,n,s,i;try{t.match(/^https?:\/\//i)||(t="https://"+t);try{new URL(t)}catch{throw new Error("Invalid URL")}const a=[m=>`https://api.allorigins.win/raw?url=${encodeURIComponent(m)}`,m=>`https://corsproxy.io/?${encodeURIComponent(m)}`,m=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(m)}`];let o="",u=null;for(const m of a)try{const E=new AbortController,v=setTimeout(()=>E.abort(),1e4),_=await fetch(m(t),{signal:E.signal,headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}});if(clearTimeout(v),!_.ok)throw new Error(`HTTP error! status: ${_.status}`);if(o=await _.text(),o)break}catch(E){u=E;continue}if(!o)throw u||new Error("Failed to fetch URL content");const c=KS(o),h=RS(o),p={title:h('meta[property="og:title"]').attr("content")||h('meta[name="twitter:title"]').attr("content")||h("title").text()||((e=c.querySelector("title"))==null?void 0:e.text)||new URL(t).hostname,description:h('meta[property="og:description"]').attr("content")||h('meta[name="twitter:description"]').attr("content")||h('meta[name="description"]').attr("content")||((r=c.querySelector('meta[name="description"]'))==null?void 0:r.getAttribute("content"))||h("p").first().text()||"No description available",thumbnail_url:h('meta[property="og:image"]').attr("content")||h('meta[name="twitter:image"]').attr("content")||((n=c.querySelector('meta[property="og:image"]'))==null?void 0:n.getAttribute("content"))||h('img[src^="http"]').first().attr("src")||void 0};if(p.title=((s=p.title)==null?void 0:s.trim())||new URL(t).hostname,p.description=((i=p.description)==null?void 0:i.trim())||"No description available",p.thumbnail_url&&!p.thumbnail_url.startsWith("http")){const m=new URL(t);p.thumbnail_url=new URL(p.thumbnail_url,m.origin).toString()}if(p.thumbnail_url)try{new URL(p.thumbnail_url)}catch{p.thumbnail_url=void 0}return await YH(t,p),p}catch(a){console.error("Error fetching link preview:",a);try{return{title:new URL(t).hostname,description:"No description available"}}catch{return{title:t,description:"No description available"}}}}async function QS(t){const e=t.match(rM())||[];return[...new Set(e)].map(r=>r.match(/^https?:\/\//i)?r:`https://${r}`)}async function QH(t){const e=await MB.createWorker(),{data:{text:r}}=await e.recognize(t);return await e.terminate(),QS(r)}async function rT(t){return(await Promise.all(t.map(async r=>{try{const n=await YS(r);return{url:r,title:n.title||new URL(r).hostname,description:n.description||"No description available",thumbnail_url:n.thumbnail_url,selected:!0}}catch(n){return console.error(`Error fetching preview for ${r}:`,n),{url:r,title:new URL(r).hostname,description:"No description available",selected:!0}}}))).filter(r=>r!==null&&typeof r.title=="string"&&typeof r.description=="string")}const XH=[{emoji:"📝",label:"Article"},{emoji:"📺",label:"Video"},{emoji:"🎧",label:"Podcast"},{emoji:"📰",label:"Newsletter"},{emoji:"🛠️",label:"Tool"},{emoji:"📚",label:"Tutorial"},{emoji:"🎨",label:"Design"},{emoji:"🤖",label:"AI"},{emoji:"💻",label:"Dev"},{emoji:"🔗",label:"Other"}];function JH(){const{supercurations:t}=eu(),{addLink:e}=Hr(),[r,n]=M.useState(!1),[s,i]=M.useState(null),[a,o]=M.useState([]),[u,c]=M.useState(!1),[h,p]=M.useState(null),[m,E]=M.useState(null),[v,_]=M.useState(null),[x,w]=M.useState(!1),b=M.useRef(null),T=async A=>{var F;const k=(F=A.target.files)==null?void 0:F[0];if(k)try{n(!0),i(null);const R=await QH(k),Q=await rT(R);o(Q.map(oe=>({...oe,selected:!0})))}catch(R){console.error("Error processing image:",R),i("Failed to extract text from image")}finally{n(!1)}},O=async()=>{try{n(!0),i(null);const A=await navigator.clipboard.readText(),k=await QS(A);if(k.length===0){i("No URLs found in the pasted text");return}const F=await rT(k);o(F.map(R=>({...R,selected:!0})))}catch(A){console.error("Error processing text:",A),i("Failed to process pasted text")}finally{n(!1)}},B=()=>{const A=a.every(k=>k.selected);o(k=>k.map(F=>({...F,selected:!A})))},V=A=>{o(k=>k.map(F=>F.url===A?{...F,selected:!F.selected}:F))},N=async A=>{p(A),c(!0)},I=async()=>{if(!m&&!v&&x){i("Please select a supercuration or format, or enable adding to main feed");return}try{n(!0),i(null);const A=a.filter(k=>k.selected);for(const k of A)await e({url:k.url,title:k.title,description:k.description,thumbnail_url:k.thumbnail_url,emoji_tags:v?[v]:[],topic_ids:[],is_original_content:!1,supercuration_ids:m?[m]:void 0,publish_to_feed:!x});o([]),E(null),_(null),w(!1)}catch(A){console.error("Error sharing links:",A),i("Failed to share links")}finally{n(!1)}},D=a.filter(A=>A.selected).length;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("button",{onClick:()=>{var A;return(A=b.current)==null?void 0:A.click()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border rounded-lg hover:bg-gray-50",children:[d.jsx(D1,{className:"w-5 h-5 text-gray-400"}),d.jsx("span",{className:"text-gray-700",children:"Upload Screenshot"})]}),d.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:T,className:"hidden"}),d.jsxs("button",{onClick:O,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border rounded-lg hover:bg-gray-50",children:[d.jsx(Z9,{className:"w-5 h-5 text-gray-400"}),d.jsx("span",{className:"text-gray-700",children:"Paste Text"})]})]}),r&&d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx(Oo,{className:"w-8 h-8 animate-spin text-blue-600"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Processing..."})]})}),s&&d.jsx("div",{className:"p-4 bg-red-50 text-red-600 rounded-lg",children:s}),a.length>0&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:B,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[a.every(A=>A.selected)?d.jsx(BC,{className:"w-5 h-5"}):d.jsx(HC,{className:"w-5 h-5"}),d.jsx("span",{children:"Select All"})]}),d.jsxs("span",{className:"text-sm text-gray-500",children:[D," of ",a.length," selected"]})]})}),D>0&&d.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:"Batch Settings"}),d.jsx("button",{onClick:I,disabled:r||!m&&!v&&x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Sharing...":`Share Selected (${D})`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format for All Selected Items"}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-2",children:XH.map(({emoji:A,label:k})=>d.jsxs("button",{onClick:()=>_(v===A?null:A),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${v===A?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:A}),k]},A))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add All Selected Items to Supercuration"}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:m||"",onChange:A=>E(A.target.value||null),className:"w-full appearance-none pl-8 pr-4 py-2 bg-white border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Select a supercuration..."}),t.map(A=>d.jsx("option",{value:A.id,children:A.title},A.id))]}),d.jsx(jC,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),d.jsx("div",{className:"flex items-center",children:d.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[d.jsx("input",{type:"checkbox",checked:x,onChange:A=>w(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("span",{className:"text-gray-600",children:"Don't add to main feed"})]})})]}),d.jsx("div",{className:"grid gap-4",children:a.map(A=>d.jsx(vF,{link:A,onToggleSelect:()=>V(A.url),onShare:()=>N(A)},A.url))})]}),u&&h&&d.jsx(zC,{suggestedTags:[],onClose:()=>{c(!1),p(null)},onSave:async(A,k,F,R)=>{try{await e({...R,emoji_tags:A,topic_ids:k,is_original_content:F,supercuration_ids:m?[m]:void 0,publish_to_feed:!x}),c(!1),p(null),o(Q=>Q.filter(oe=>oe.url!==h.url))}catch(Q){console.error("Error sharing link:",Q),i("Failed to share link")}},preview:h})]})}function ZH({link:t}){const{supercurations:e,addSupercuration:r}=eu(),{updateLink:n}=Hr(),[s,i]=M.useState(!1),[a,o]=M.useState(!1),[u,c]=M.useState(!1),[h,p]=M.useState(""),m=async v=>{try{o(!0);const _=t.supercuration_ids||[],w=_.includes(v)?_.filter(b=>b!==v):[..._,v];await n(t.id,{supercuration_ids:w}),i(!1)}catch(_){console.error("Failed to update supercurations:",_)}finally{o(!1)}},E=async()=>{if(h.trim())try{o(!0);const v=await r({title:h.trim(),description:"",topics:[]});await m(v.id),p(""),c(!1)}catch(v){console.error("Failed to create supercuration:",v)}finally{o(!1)}};return!e.length&&!u?null:d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>i(!s),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Add to Supercuration",children:d.jsx(jC,{className:"w-4 h-4"})}),s&&d.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg z-50",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[d.jsx("h3",{className:"font-medium",children:"Add to Supercuration"}),d.jsx("button",{onClick:()=>{i(!1),c(!1),p("")},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Lt,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"p-2",children:[u?d.jsxs("div",{className:"flex items-center gap-2 p-2",children:[d.jsx("input",{type:"text",value:h,onChange:v=>p(v.target.value),placeholder:"New supercuration name...",className:"flex-1 px-2 py-1 text-sm border rounded",autoFocus:!0}),d.jsx("button",{onClick:E,disabled:!h.trim()||a,className:"p-1 text-blue-600 hover:text-blue-700 disabled:opacity-50",children:d.jsx(ig,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>{c(!1),p("")},className:"p-1 text-gray-400 hover:text-gray-600",children:d.jsx(Lt,{className:"w-4 h-4"})})]}):d.jsxs("button",{onClick:()=>c(!0),className:"w-full px-3 py-2 text-left text-sm text-blue-600 hover:bg-gray-50 rounded-md flex items-center gap-2",children:[d.jsx(Sc,{className:"w-4 h-4"}),"Create New Supercuration"]}),d.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.map(v=>{var x;const _=(x=t.supercuration_ids)==null?void 0:x.includes(v.id);return d.jsxs("button",{onClick:()=>m(v.id),disabled:a,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md flex items-center justify-between gap-2",children:[d.jsx("span",{className:"flex-1 truncate",children:v.title}),_&&d.jsx(ig,{className:"w-4 h-4 text-green-500"})]},v.id)})})]})]})]})}function e$({isOpen:t,onClose:e,linkId:r}){const{links:n,updateLink:s,updateLinkTopics:i,updateLinkFormats:a}=Hr(),{topics:o,addTopic:u}=$r(),c=n.find(A=>A.id===r),[h,p]=M.useState({title:(c==null?void 0:c.title)||"",description:(c==null?void 0:c.description)||"",is_original_content:(c==null?void 0:c.is_original_content)||!1,thumbnail_url:(c==null?void 0:c.thumbnail_url)||"",topic_ids:(c==null?void 0:c.topic_ids)||[],emoji_tags:(c==null?void 0:c.emoji_tags)||[]}),[m,E]=M.useState("url"),[v,_]=M.useState(!1),[x,w]=M.useState({name:"",color:"#2563eb"}),[b,T]=M.useState(!1),O=[{emoji:"📝",label:"Article"},{emoji:"📺",label:"Video"},{emoji:"🎧",label:"Podcast"},{emoji:"📰",label:"Newsletter"},{emoji:"🛠️",label:"Tool"},{emoji:"📚",label:"Tutorial"},{emoji:"🎨",label:"Design"},{emoji:"🤖",label:"AI"},{emoji:"💻",label:"Dev"},{emoji:"🔗",label:"Other"}];if(!t||!c)return null;const B=A=>{var F;const k=(F=A.target.files)==null?void 0:F[0];if(k){const R=new FileReader;R.onloadend=()=>{p(Q=>({...Q,thumbnail_url:R.result}))},R.readAsDataURL(k)}},V=A=>{p(k=>({...k,topic_ids:k.topic_ids.includes(A)?k.topic_ids.filter(F=>F!==A):[...k.topic_ids,A]}))},N=A=>{p(k=>({...k,emoji_tags:k.emoji_tags.includes(A)?k.emoji_tags.filter(F=>F!==A):[A]}))},I=()=>{if(x.name.trim()){const A=u(x.name.trim(),x.color);p(k=>({...k,topic_ids:[...k.topic_ids,A.id]})),w({name:"",color:"#2563eb"}),_(!1)}},D=async A=>{A.preventDefault();try{T(!0),await s(r,{title:h.title,description:h.description,is_original_content:h.is_original_content,thumbnail_url:h.thumbnail_url}),await Promise.all([i(r,h.topic_ids),a(r,h.emoji_tags)]),e()}catch(k){console.error("Failed to update link:",k)}finally{T(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Post"}),d.jsxs("form",{onSubmit:D,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:h.title,onChange:A=>p({...h,title:A.target.value}),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{value:h.description,onChange:A=>p({...h,description:A.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail Image"}),d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsxs("button",{type:"button",onClick:()=>E("url"),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${m==="url"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(Yl,{className:"w-4 h-4"}),"URL"]}),d.jsxs("button",{type:"button",onClick:()=>E("upload"),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${m==="upload"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(D1,{className:"w-4 h-4"}),"Upload"]})]}),m==="url"?d.jsx("input",{type:"url",placeholder:"Enter image URL",value:h.thumbnail_url,onChange:A=>p({...h,thumbnail_url:A.target.value}),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"}):d.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"}),h.thumbnail_url&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:h.thumbnail_url,alt:"Preview",className:"w-full h-32 object-cover rounded-md"})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Format"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:O.map(({emoji:A,label:k})=>d.jsxs("button",{type:"button",onClick:()=>N(A),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${h.emoji_tags.includes(A)?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:A}),k]},A))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Topics"}),d.jsxs("button",{type:"button",onClick:()=>_(!v),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[d.jsx(Lo,{className:"w-4 h-4"}),"Add Topic"]})]}),v&&d.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Topic name",value:x.name,onChange:A=>w({...x,name:A.target.value}),className:"flex-1 px-3 py-1 text-sm border rounded"}),d.jsx("input",{type:"color",value:x.color,onChange:A=>w({...x,color:A.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{type:"button",onClick:I,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(A=>d.jsx("button",{type:"button",onClick:()=>V(A.id),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${h.topic_ids.includes(A.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${A.color}15`,color:A.color,borderColor:h.topic_ids.includes(A.id)?A.color:"transparent"},children:A.name},A.id))})]}),d.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:h.is_original_content,onChange:A=>p({...h,is_original_content:A.target.checked}),className:"rounded border-amber-400 text-amber-600 focus:ring-amber-500"}),d.jsx($f,{className:"w-4 h-4 text-amber-600"}),d.jsx("span",{className:"text-sm font-medium text-amber-800",children:"This is my original content"})]}),d.jsx("p",{className:"mt-1 text-xs text-amber-600 ml-6",children:"Check this if you created this content (e.g., your blog post, podcast, video)"})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:b,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:b?"Saving...":"Save Changes"})]})]})]})]})})}function XS({isOpen:t,onClose:e,onConfirm:r}){return t?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Link"}),d.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this link? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})]})}):null}function t$({link:t,onClose:e,onRepost:r}){var u;const[n,s]=M.useState(""),[i,a]=M.useState(!1),o=async c=>{c.preventDefault();try{a(!0),await r(n.trim()||void 0)}catch(h){console.error("Repost error:",h)}finally{a(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Repost to Your Feed"}),d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description}),d.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Originally shared by ",(u=t.user)==null?void 0:u.name]})]})]})}),d.jsxs("form",{onSubmit:o,children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add a note (optional)"}),d.jsx("textarea",{value:n,onChange:c=>s(c.target.value),className:"w-full px-3 py-2 border rounded-md",rows:3,placeholder:"What are your thoughts on this?"})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:i,children:"Cancel"}),d.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[d.jsx(iF,{className:"w-4 h-4"}),i?"Reposting...":"Repost"]})]})]})]})]})})}function r$({onShare:t}){const[e,r]=M.useState(""),[n,s]=M.useState(!1),[i,a]=M.useState(null),[o,u]=M.useState(null);M.useEffect(()=>{const p=setTimeout(async()=>{if(!e.trim()){u(null);return}try{s(!0),a(null);const m=await YS(e);u(m)}catch(m){console.error("Error fetching preview:",m),a("Failed to fetch link preview"),u(null)}finally{s(!1)}},500);return()=>clearTimeout(p)},[e]);const c=()=>{!e.trim()||!o||(t({url:e.trim(),...o}),r(""),u(null))};return d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"url",value:e,onChange:h=>r(h.target.value),placeholder:"Enter URL to share...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),d.jsx(Yl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),d.jsx("button",{onClick:c,disabled:!e.trim()||n||!o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Share"})]}),(n||o)&&d.jsx("div",{className:"mt-4 border rounded-lg overflow-hidden",children:n?d.jsx("div",{className:"p-4 flex items-center justify-center",children:d.jsx(Oo,{className:"w-5 h-5 animate-spin text-blue-600"})}):o&&d.jsxs("div",{className:"flex gap-4 p-4",children:[o.thumbnail_url&&d.jsx("img",{src:o.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:o.title}),d.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:o.description})]})]})}),i&&d.jsx("p",{className:"mt-2 text-sm text-red-600",children:i})]})}const n$=[{emoji:"📝",label:"Article"},{emoji:"📺",label:"Video"},{emoji:"🎧",label:"Podcast"},{emoji:"📰",label:"Newsletter"},{emoji:"🛠️",label:"Tool"},{emoji:"📚",label:"Tutorial"},{emoji:"🎨",label:"Design"},{emoji:"🤖",label:"AI"},{emoji:"💻",label:"Dev"},{emoji:"🔗",label:"Other"}];function s$(){const{user:t}=qr(),{topics:e}=$r(),{links:r,toggleLike:n,removeLink:s,fetchLinks:i,addLink:a}=Hr(),[o,u]=M.useState("all"),[c,h]=M.useState(null),[p,m]=M.useState(null),[E,v]=M.useState(null),[_,x]=M.useState(null),[w,b]=M.useState(!1),[T,O]=M.useState(!1),[B,V]=M.useState(null);M.useEffect(()=>{i()},[i]);const N=()=>{if(!Array.isArray(r))return[];let A=[...r];c&&(A=A.filter(F=>{var R;return(R=F.emoji_tags)==null?void 0:R.includes(c)}));const k=new Date;switch(o){case"today":A=A.filter(Q=>new Date(Q.created_at).toDateString()===k.toDateString());break;case"week":const F=new Date(k.setDate(k.getDate()-7));A=A.filter(Q=>new Date(Q.created_at)>=F);break;case"month":const R=new Date(k.setMonth(k.getMonth()-1));A=A.filter(Q=>new Date(Q.created_at)>=R);break}return A},I=async A=>{try{await s(A),m(null)}catch(k){console.error("Failed to delete link:",k)}},D=async A=>{V(A),b(!0)};return d.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx(r$,{onShare:D}),d.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-500",children:d.jsx("button",{onClick:()=>O(!0),className:"text-blue-600 hover:text-blue-700",children:"Import multiple URLs from text or image"})}),T&&d.jsx("div",{className:"mt-4",children:d.jsx(JH,{})})]}),d.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-sm space-y-4",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:o,onChange:A=>u(A.target.value),className:"appearance-none pl-8 pr-4 py-1.5 bg-white border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All time"}),d.jsx("option",{value:"today",children:"Today"}),d.jsx("option",{value:"week",children:"This week"}),d.jsx("option",{value:"month",children:"This month"})]}),d.jsx(MC,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("button",{onClick:()=>h(null),className:`px-3 py-1.5 rounded-full text-sm ${c?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:"All Formats"}),n$.map(({emoji:A,label:k})=>d.jsxs("button",{onClick:()=>h(c===A?null:A),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${c===A?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:A}),k]},A))]})]}),d.jsx("div",{className:"space-y-4",children:N().map(A=>{var k,F,R;return d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[A.thumbnail_url&&d.jsx("img",{src:A.thumbnail_url,alt:"",className:"w-16 h-16 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{children:[A.url?d.jsxs("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 flex items-center gap-1 group",children:[A.title,d.jsx(oo,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}):d.jsx("h3",{className:"font-medium text-gray-900",children:A.title}),A.is_original_content&&d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs bg-amber-100 text-amber-800 rounded-full font-medium ml-2",children:[d.jsx($f,{className:"w-3 h-3 mr-1"}),"ORIGINAL"]}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:A.description}),d.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400",children:[d.jsxs($t,{to:`/profile/${A.created_by}`,className:"hover:text-blue-600",children:["Shared by ",A.created_by===(t==null?void 0:t.id)?"you":(k=A.user)==null?void 0:k.name]}),d.jsx("span",{children:new Date(A.created_at).toLocaleDateString()})]})]}),d.jsx(ZH,{link:A})]}),d.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>n(A.id),className:`flex items-center gap-1 text-sm ${A.liked?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[d.jsx(VC,{className:`w-3.5 h-3.5 ${A.liked?"fill-current":""}`}),d.jsx("span",{children:A.likes})]}),(F=A.emoji_tags)==null?void 0:F.map(Q=>d.jsx("span",{className:"text-base",children:Q},Q)),(R=A.topic_ids)==null?void 0:R.map(Q=>{const oe=e.find(_e=>_e.id===Q);return oe?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${oe.color}15`,color:oe.color},children:oe.name},oe.id):null})]})]})]})})},A.id)})}),w&&B&&d.jsx(zC,{suggestedTags:[],onClose:()=>{b(!1),V(null)},onSave:async(A,k,F)=>{try{await a({...B,emoji_tags:A,topic_ids:k,is_original_content:F,publish_to_feed:!0}),b(!1),V(null)}catch(R){console.error("Error sharing link:",R)}},preview:B}),E&&d.jsx(e$,{isOpen:!0,onClose:()=>v(null),linkId:E}),p&&d.jsx(XS,{isOpen:!0,onClose:()=>m(null),onConfirm:()=>I(p)}),_&&d.jsx(t$,{link:_,onClose:()=>x(null),onRepost:async()=>{x(null)}})]})}const km=["#2563eb","#dc2626","#059669","#7c3aed","#db2777","#ea580c","#ca8a04","#4f46e5","#0891b2","#be123c"];function i$({isOpen:t,onClose:e}){const{topics:r,addTopic:n,removeTopic:s,updateTopic:i}=$r(),{removeTopicFromLinks:a}=Hr(),[o,u]=M.useState({name:"",color:km[0]}),[c,h]=M.useState(null);if(!t)return null;const p=_=>{_.preventDefault(),o.name.trim()&&(n(o.name.trim(),o.color),u({name:"",color:km[0]}))},m=_=>{c===_.id?h(null):(h(_.id),u({name:_.name,color:_.color}))},E=_=>{i(_,o),h(null),u({name:"",color:km[0]})},v=_=>{s(_),a(_)};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Manage Topics"}),d.jsx("form",{onSubmit:p,className:"mb-6",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"New topic name...",className:"flex-1 px-3 py-2 border rounded-md",value:o.name,onChange:_=>u({...o,name:_.target.value})}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"color",value:o.color,onChange:_=>u({...o,color:_.target.value}),className:"w-10 h-10 p-1 border rounded-md cursor-pointer"})}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:d.jsx(Sc,{className:"w-5 h-5"})})]})}),d.jsx("div",{className:"space-y-2",children:r.map(_=>d.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:c===_.id?d.jsxs("div",{className:"flex gap-2 flex-1",children:[d.jsx("input",{type:"text",value:o.name,onChange:x=>u({...o,name:x.target.value}),className:"flex-1 px-2 py-1 border rounded"}),d.jsx("input",{type:"color",value:o.color,onChange:x=>u({...o,color:x.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{onClick:()=>E(_.id),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Save"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:_.color}}),d.jsx("span",{children:_.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>m(_),className:"p-1 text-gray-400 hover:text-gray-600",children:d.jsx(C1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>v(_.id),className:"p-1 text-gray-400 hover:text-red-600",children:d.jsx(Lt,{className:"w-4 h-4"})})]})]})},_.id))})]})]})})}const a$=[{emoji:"📝",label:"Article"},{emoji:"📺",label:"Video"},{emoji:"🎧",label:"Podcast"},{emoji:"📰",label:"Newsletter"},{emoji:"🛠️",label:"Tool"},{emoji:"📚",label:"Tutorial"},{emoji:"🎨",label:"Design"},{emoji:"🤖",label:"AI"},{emoji:"💻",label:"Dev"},{emoji:"🔗",label:"Other"}];function o$({link:t,onClose:e,onSave:r}){const[n,s]=M.useState(t.emoji_tags||[]),[i,a]=M.useState(!1),o=c=>{s(h=>h.includes(c)?h.filter(p=>p!==c):[c])},u=async c=>{c.preventDefault();try{a(!0),await r(n),e()}catch(h){console.error("Failed to update formats:",h)}finally{a(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Format"}),d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]})]})}),d.jsxs("form",{onSubmit:u,children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Format"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:a$.map(({emoji:c,label:h})=>d.jsxs("button",{type:"button",onClick:()=>o(c),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${n.includes(c)?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:c}),h]},c))})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:i,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Format"})]})]})]})]})})}const nT=["#2563eb","#dc2626","#059669","#7c3aed","#db2777","#ea580c","#ca8a04","#4f46e5","#0891b2","#be123c"];function u$({link:t,onClose:e,onSave:r}){const{topics:n,addTopic:s}=$r(),[i,a]=M.useState(t.topic_ids||[]),[o,u]=M.useState(!1),[c,h]=M.useState(!1),[p,m]=M.useState({name:"",color:nT[0]}),E=x=>{a(w=>w.includes(x)?w.filter(b=>b!==x):[...w,x])},v=()=>{if(p.name.trim()){const x=s(p.name.trim(),p.color);a(w=>[...w,x.id]),m({name:"",color:nT[0]}),h(!1)}},_=async x=>{x.preventDefault();try{u(!0),await r(i)}catch(w){console.error("Failed to update topics:",w)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Topics"}),d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]})]})}),d.jsxs("form",{onSubmit:_,children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Topics"}),d.jsxs("button",{type:"button",onClick:()=>h(!c),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[d.jsx(Sc,{className:"w-4 h-4"}),"Add Topic"]})]}),c&&d.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"New topic name",value:p.name,onChange:x=>m({...p,name:x.target.value}),className:"flex-1 px-3 py-1 text-sm border rounded"}),d.jsx("input",{type:"color",value:p.color,onChange:x=>m({...p,color:x.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{type:"button",onClick:v,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(x=>d.jsx("button",{type:"button",onClick:()=>E(x.id),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${i.includes(x.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${x.color}15`,color:x.color,borderColor:i.includes(x.id)?x.color:"transparent"},children:x.name},x.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:o,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Saving...":"Save Topics"})]})]})]})]})})}function l$(){const{topics:t}=$r(),{toggleLike:e,updateLinkFormats:r,updateLinkTopics:n,removeLink:s}=Hr(),[i,a]=M.useState([]),[o,u]=M.useState(!0),[c,h]=M.useState(null),[p,m]=M.useState("all"),[E,v]=M.useState([]),[_,x]=M.useState("shared"),[w,b]=M.useState(!1),[T,O]=M.useState(null),[B,V]=M.useState(null),[N,I]=M.useState(null),[D,A]=M.useState(null),k=[{emoji:"📝",label:"Article"},{emoji:"📺",label:"Video"},{emoji:"🎧",label:"Podcast"},{emoji:"📰",label:"Newsletter"},{emoji:"🛠️",label:"Tool"},{emoji:"📚",label:"Tutorial"},{emoji:"🎨",label:"Design"},{emoji:"🤖",label:"AI"},{emoji:"💻",label:"Dev"},{emoji:"🔗",label:"Other"}];M.useEffect(()=>{(async()=>{try{u(!0),h(null);const oe=dt.currentUser;if(!oe)return;let _e;_==="shared"?_e=ti(rn(Te,"links"),Bi("created_by","==",oe.uid),Hh("created_at","desc")):_e=ti(rn(Te,"links"),Bi("created_by","==",oe.uid),Bi("original_post_id","!=",null),Hh("created_at","desc"));const Z=(await ta(_e)).docs.map(j=>{var U,W,ne;return{id:j.id,...j.data(),created_at:((ne=(W=(U=j.data().created_at)==null?void 0:U.toDate)==null?void 0:W.call(U))==null?void 0:ne.toISOString())||new Date().toISOString(),liked:!1,likes:j.data().likes||0}});a(Z)}catch(oe){console.error("Error fetching links:",oe),h(oe instanceof Error?oe.message:"Failed to load links")}finally{u(!1)}})()},[_]);const F=async Q=>{try{await s(Q),a(oe=>oe.filter(_e=>_e.id!==Q)),I(null)}catch(oe){console.error("Failed to delete link:",oe)}},R=()=>{let Q=[...i];E.length>0&&(Q=Q.filter(_e=>E.some(Ie=>{var Z;return(Z=_e.topic_ids)==null?void 0:Z.includes(Ie)}))),D&&(Q=Q.filter(_e=>{var Ie;return(Ie=_e.emoji_tags)==null?void 0:Ie.includes(D)}));const oe=new Date;switch(p){case"today":Q=Q.filter(Z=>new Date(Z.created_at).toDateString()===oe.toDateString());break;case"week":const _e=new Date(oe.setDate(oe.getDate()-7));Q=Q.filter(Z=>new Date(Z.created_at)>=_e);break;case"month":const Ie=new Date(oe.setMonth(oe.getMonth()-1));Q=Q.filter(Z=>new Date(Z.created_at)>=Ie);break}return Q};return o?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"My Feed"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>x("shared"),className:`px-4 py-2 rounded-md text-sm font-medium ${_==="shared"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Shared by me"}),d.jsx("button",{onClick:()=>x("reposts"),className:`px-4 py-2 rounded-md text-sm font-medium ${_==="reposts"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"My Reposts"})]})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-3",children:d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:p,onChange:Q=>m(Q.target.value),className:"appearance-none pl-8 pr-4 py-1.5 bg-white border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All time"}),d.jsx("option",{value:"today",children:"Today"}),d.jsx("option",{value:"week",children:"This week"}),d.jsx("option",{value:"month",children:"This month"})]}),d.jsx(MC,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})}),d.jsxs("button",{onClick:()=>b(!0),className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[d.jsx(Lo,{className:"w-4 h-4"}),"Manage Topics"]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("button",{onClick:()=>A(null),className:`px-3 py-1.5 rounded-full text-sm ${D?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:"All Formats"}),k.map(({emoji:Q,label:oe})=>d.jsxs("button",{onClick:()=>A(D===Q?null:Q),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${D===Q?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:Q}),oe]},Q))]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(Q=>d.jsx("button",{onClick:()=>v(oe=>oe.includes(Q.id)?oe.filter(_e=>_e!==Q.id):[...oe,Q.id]),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${E.includes(Q.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${Q.color}15`,color:Q.color,borderColor:E.includes(Q.id)?Q.color:"transparent"},children:Q.name},Q.id))})]}),d.jsx("div",{className:"space-y-4",children:c?d.jsx("p",{className:"text-center text-red-600 py-8",children:c}):R().length===0?d.jsx("p",{className:"text-center text-gray-500 py-8",children:_==="shared"?"You haven't shared any links yet":"No reposts yet"}):R().map(Q=>{var oe,_e;return d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden p-4",children:d.jsxs("div",{className:"flex gap-4",children:[Q.thumbnail_url&&d.jsx("img",{src:Q.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsxs("a",{href:Q.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 block mb-1",children:[Q.title,d.jsx(oo,{className:"inline-block w-3.5 h-3.5 ml-1 opacity-50"})]}),d.jsx("p",{className:"text-sm text-gray-500 mb-2",children:Q.description}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[d.jsx("span",{className:"text-gray-400",children:new Date(Q.created_at).toLocaleDateString()}),d.jsxs("button",{onClick:()=>e(Q.id),className:`flex items-center gap-1 ${Q.liked?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[d.jsx(VC,{className:`w-3.5 h-3.5 ${Q.liked?"fill-current":""}`}),d.jsx("span",{children:Q.likes})]}),Q.is_original_content&&d.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-full text-xs font-medium flex items-center gap-1",children:[d.jsx($f,{className:"w-3 h-3"}),"ORIGINAL"]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>O(Q),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Edit format",children:d.jsx(C1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>V(Q),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Edit topics",children:d.jsx(Lo,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>I(Q.id),className:"p-1 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Delete",children:d.jsx($C,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[(oe=Q.emoji_tags)==null?void 0:oe.map(Ie=>d.jsx("span",{className:"text-lg",children:Ie},Ie)),(_e=Q.topic_ids)==null?void 0:_e.map(Ie=>{const Z=t.find(j=>j.id===Ie);return Z?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${Z.color}15`,color:Z.color},children:Z.name},Z.id):null})]})]})]})},Q.id)})}),w&&d.jsx(i$,{isOpen:!0,onClose:()=>b(!1)}),T&&d.jsx(o$,{link:T,onClose:()=>O(null),onSave:async Q=>{try{await r(T.id,Q),O(null),a(oe=>oe.map(_e=>_e.id===T.id?{..._e,emoji_tags:Q}:_e))}catch(oe){console.error("Error updating formats:",oe),h("Failed to update formats")}}}),B&&d.jsx(u$,{link:B,onClose:()=>V(null),onSave:async Q=>{try{await n(B.id,Q),V(null),a(oe=>oe.map(_e=>_e.id===B.id?{..._e,topic_ids:Q}:_e))}catch(oe){console.error("Error updating topics:",oe),h("Failed to update topics")}}}),N&&d.jsx(XS,{isOpen:!0,onClose:()=>I(null),onConfirm:()=>F(N)})]})}const JS=Cc((t,e)=>({subscriptions:[],loading:!1,error:null,isSubscribed:r=>{const n=dt.currentUser;return n?e().subscriptions.some(s=>s.publisher_id===r&&s.subscriber_id===n.uid):!1},subscribe:async r=>{try{const n=dt.currentUser;if(!n){t({error:"You must be logged in to subscribe"});return}if(e().isSubscribed(r))return;const s={subscriber_id:n.uid,publisher_id:r,subscriber_email:n.email,subscriber_name:n.displayName||n.email.split("@")[0],created_at:new Date().toISOString()},i=await x1(rn(Te,"subscriptions"),s);await Promise.all([Ns(et(Te,"users",n.uid),{subscriptions_count:Rs(1)}),Ns(et(Te,"users",r),{subscribers_count:Rs(1)})]),t(a=>({subscriptions:[...a.subscriptions,{id:i.id,...s}],error:null}))}catch(n){throw console.error("Error subscribing:",n),t({error:"Failed to subscribe"}),n}},unsubscribe:async r=>{try{const n=dt.currentUser;if(!n){t({error:"You must be logged in to unsubscribe"});return}const s=e().subscriptions.find(i=>i.publisher_id===r&&i.subscriber_id===n.uid);if(!s)return;await $h(et(Te,"subscriptions",s.id)),await Promise.all([Ns(et(Te,"users",n.uid),{subscriptions_count:Rs(-1)}),Ns(et(Te,"users",r),{subscribers_count:Rs(-1)})]),t(i=>({subscriptions:i.subscriptions.filter(a=>a.id!==s.id),error:null}))}catch(n){throw console.error("Error unsubscribing:",n),t({error:"Failed to unsubscribe"}),n}},fetchSubscriptions:async()=>{try{const r=dt.currentUser;if(!r)return;t({loading:!0});const n=ti(rn(Te,"subscriptions"),Bi("subscriber_id","==",r.uid)),i=(await ta(n)).docs.map(a=>({id:a.id,...a.data()}));t({subscriptions:i,error:null})}catch(r){console.error("Error fetching subscriptions:",r),t({error:"Failed to fetch subscriptions"})}finally{t({loading:!1})}},fetchSubscribers:async()=>{try{const r=dt.currentUser;if(!r)return[];const n=ti(rn(Te,"subscriptions"),Bi("publisher_id","==",r.uid));return(await ta(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){return console.error("Error fetching subscribers:",r),[]}}}));function c$(){const{id:t}=A2(),{user:e}=qr(),{topics:r}=$r(),{links:n}=Hr(),{isSubscribed:s,subscribe:i,unsubscribe:a}=JS(),[o,u]=M.useState(null),[c,h]=M.useState(!0),[p,m]=M.useState(null),[E,v]=M.useState(!1);M.useEffect(()=>{(async()=>{if(t)try{h(!0),m(null);const O=await Mi(et(Te,"users",t));if(!O.exists())throw new Error("User not found");const B=O.data(),V={id:O.id,email:B.email||"",name:B.name||"Anonymous User",avatar_url:B.avatar_url||`https://api.dicebear.com/7.x/avatars/svg?seed=${B.email}`,bio:B.bio||void 0,location:B.location||void 0,website:B.website||void 0,created_at:B.created_at||new Date().toISOString(),subscribers_count:B.subscribers_count||0,subscriptions_count:B.subscriptions_count||0};u(V)}catch(O){console.error("Error fetching profile:",O),m(O instanceof Error?O.message:"Failed to load profile")}finally{h(!1)}})()},[t]);const _=async()=>{if(!(!o||!e))try{v(!0),s(o.id)?await a(o.id):await i(o.id)}catch(T){console.error("Subscription error:",T)}finally{v(!1)}},x=()=>!t||!s(t)?[]:n.filter(T=>T.created_by===t);if(c)return d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(p||!o)return d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-red-600",children:p||"User not found"})});const w=x(),b=s(o.id);return d.jsxs("div",{className:"max-w-2xl mx-auto",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:[d.jsx("div",{className:"h-32 bg-gradient-to-r from-blue-500 to-blue-600"}),d.jsxs("div",{className:"px-6 pb-6",children:[d.jsx("div",{className:"relative -mt-16 mb-4",children:d.jsx("img",{src:o.avatar_url,alt:o.name,className:"w-32 h-32 rounded-full border-4 border-white object-cover bg-gray-100"})}),d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold",children:o.name}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[d.jsxs("span",{children:[o.subscribers_count," subscribers"]}),d.jsx("span",{children:"•"}),d.jsxs("span",{children:[o.subscriptions_count," subscriptions"]})]})]}),e&&e.id!==o.id&&d.jsxs("button",{onClick:_,disabled:E,className:`px-4 py-2 rounded-full font-medium text-sm flex items-center gap-2 ${b?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[d.jsx(ag,{className:"w-4 h-4"}),E?"Processing...":b?"Unsubscribe":"Subscribe"]})]}),d.jsxs("div",{className:"space-y-4",children:[o.bio&&d.jsxs("div",{children:[d.jsx("h2",{className:"font-medium text-gray-900 mb-2",children:"About my curation topics"}),d.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:o.bio})]}),d.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[o.location&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(rF,{className:"w-4 h-4"}),o.location]}),o.website&&d.jsxs("a",{href:o.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:text-blue-700",children:[d.jsx(Dc,{className:"w-4 h-4"}),new URL(o.website).hostname]}),d.jsxs("div",{className:"text-gray-400",children:["Joined ",new Date(o.created_at).toLocaleDateString()]})]})]})]})]}),d.jsx("div",{className:"space-y-4",children:b?d.jsxs(d.Fragment,{children:[d.jsxs("h2",{className:"text-xl font-bold",children:["Shared Links (",w.length,")"]}),w.map(T=>{var O;return d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden p-4",children:d.jsxs("div",{className:"flex gap-4",children:[T.thumbnail_url&&d.jsx("img",{src:T.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 block mb-1",children:T.title}),d.jsx("p",{className:"text-sm text-gray-500 mb-2",children:T.description}),d.jsx("div",{className:"text-sm text-gray-400",children:new Date(T.created_at).toLocaleDateString()}),((O=T.topic_ids)==null?void 0:O.length)>0&&d.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:T.topic_ids.map(B=>{const V=r.find(N=>N.id===B);return V?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${V.color}15`,color:V.color},children:V.name},V.id):null})})]})]})},T.id)})]}):d.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center space-y-4",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx(I1,{className:"w-12 h-12 text-gray-400"})}),d.jsx("h2",{className:"text-xl font-bold",children:"Subscribe to See Shared Links"}),d.jsxs("p",{className:"text-gray-600 max-w-md mx-auto",children:["Subscribe to ",o.name,"'s profile to access their curated collection of links and receive updates via email."]}),e?d.jsxs("button",{onClick:_,disabled:E,className:"px-6 py-2 bg-blue-600 text-white rounded-full font-medium hover:bg-blue-700 flex items-center gap-2 mx-auto",children:[d.jsx(ag,{className:"w-4 h-4"}),"Subscribe with ",e.email]}):d.jsx($t,{to:"/login",className:"px-6 py-2 bg-blue-600 text-white rounded-full font-medium hover:bg-blue-700 inline-flex items-center gap-2",children:"Sign in to Subscribe"})]})})]})}function d$(){const{fetchSubscribers:t}=JS(),[e,r]=M.useState([]),[n,s]=M.useState(!0);M.useEffect(()=>{(async()=>{try{s(!0);const o=await t();r(o)}finally{s(!1)}})()},[t]);const i=()=>{const a=["Name","Email","Subscribed Date"].join(","),o=e.map(m=>[m.subscriber_name,m.subscriber_email,new Date(m.created_at).toLocaleDateString()].join(",")),u=[a,...o].join(`
`),c=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(c),p=document.createElement("a");p.setAttribute("href",h),p.setAttribute("download",`subscribers-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(p),p.click(),document.body.removeChild(p)};return n?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Subscriber Dashboard"}),d.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-900",children:[d.jsx(J9,{className:"w-4 h-4"}),"Export CSV"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b bg-gray-50",children:d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(ag,{className:"w-5 h-5"}),d.jsxs("span",{className:"font-medium",children:[e.length," Subscribers"]})]})}),d.jsx("div",{className:"divide-y",children:e.length===0?d.jsx("div",{className:"p-8 text-center text-gray-500",children:"No subscribers yet"}):e.map(a=>d.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:a.subscriber_name}),d.jsx("p",{className:"text-sm text-gray-500",children:a.subscriber_email})]}),d.jsxs("div",{className:"text-sm text-gray-400",children:["Subscribed ",new Date(a.created_at).toLocaleDateString()]})]},a.id))})]})]})}function h$(){const{user:t}=qr(),{supercurations:e,loading:r,error:n,fetchSupercurations:s}=eu(),{topics:i}=$r(),[a,o]=M.useState([]);M.useEffect(()=>{s()},[s]);const u=m=>{o(E=>E.includes(m)?E.filter(v=>v!==m):[...E,m])},c=e.filter(m=>m.created_by===(t==null?void 0:t.id)),h=e.filter(m=>m.created_by!==(t==null?void 0:t.id)&&m.is_public),p=m=>a.length===0?m:m.filter(E=>a.some(v=>E.topics.includes(v)));return r?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?d.jsx("div",{className:"text-center py-8 text-red-600",children:n}):d.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"My Supercurations"}),d.jsxs($t,{to:"/supercurations/new",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[d.jsx(Sc,{className:"w-4 h-4"}),"New Supercuration"]})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[d.jsx("h2",{className:"text-sm font-medium text-gray-700 mb-3",children:"Filter by Topic"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(m=>d.jsx("button",{onClick:()=>u(m.id),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${a.includes(m.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${m.color}15`,color:m.color,borderColor:a.includes(m.id)?m.color:"transparent"},children:m.name},m.id))})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p(c).map(m=>d.jsxs($t,{to:`/supercurations/${m.id}`,className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[m.thumbnail_url&&d.jsx("img",{src:m.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h2",{className:"font-medium text-lg",children:m.title}),m.is_public&&d.jsx(Dc,{className:"w-4 h-4 text-blue-500"})]}),d.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:m.description}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[d.jsxs("span",{children:[m.links_count," links"]}),d.jsx(oo,{className:"w-4 h-4"})]}),m.topics.length>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:m.topics.map(E=>{const v=i.find(_=>_.id===E);return v?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${v.color}15`,color:v.color},children:v.name},v.id):null})})]})]},m.id))}),h.length>0&&d.jsxs("div",{className:"mt-12",children:[d.jsx("h2",{className:"text-xl font-bold mb-6",children:"Public Supercurations"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p(h).map(m=>d.jsxs($t,{to:`/supercurations/${m.id}`,className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[m.thumbnail_url&&d.jsx("img",{src:m.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("h2",{className:"font-medium text-lg mb-2",children:m.title}),d.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:m.description}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[d.jsxs("span",{children:[m.links_count," links"]}),d.jsxs("span",{children:["by ",m.user.name]})]}),m.topics.length>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:m.topics.map(E=>{const v=i.find(_=>_.id===E);return v?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${v.color}15`,color:v.color},children:v.name},v.id):null})})]})]},m.id))})]})]})}function f$(){const t=uc(),{addSupercuration:e}=eu();$r();const[r,n]=M.useState(!1),[s,i]=M.useState(null);M.useState("url");const[a,o]=M.useState({title:"",description:"",thumbnail_url:"",topics:[],is_public:!1,slug:""}),u=p=>p.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),c=p=>{o(m=>({...m,title:p,slug:u(p)}))},h=async p=>{p.preventDefault();try{if(n(!0),i(null),!a.title.trim())throw new Error("Title is required");await e({...a,slug:a.is_public?a.slug:void 0}),t("/supercurations")}catch(m){console.error("Failed to create supercuration:",m),i(m instanceof Error?m.message:"Failed to create supercuration")}finally{n(!1)}};return d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs("form",{onSubmit:h,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:a.title,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Best Resources for Learning React",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{type:"button",onClick:()=>o(p=>({...p,is_public:!0})),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md ${a.is_public?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx(Dc,{className:"w-4 h-4"}),"Public"]}),d.jsxs("button",{type:"button",onClick:()=>o(p=>({...p,is_public:!1})),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md ${a.is_public?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:[d.jsx(I1,{className:"w-4 h-4"}),"Private"]})]})]}),a.is_public&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-500",children:"supercurators.com/s/"}),d.jsx("input",{type:"text",value:a.slug,onChange:p=>o(m=>({...m,slug:p.target.value})),className:"flex-1 px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",pattern:"[a-z0-9-]+",title:"Only lowercase letters, numbers, and hyphens are allowed",required:a.is_public})]})]})]})})}function p$({link:t,supercurationId:e,onClose:r}){var _;const{updateLink:n}=Hr(),{supercurations:s}=eu(),[i,a]=M.useState(!1),[o,u]=M.useState(null),[c,h]=M.useState(((_=t.supercuration_tags)==null?void 0:_[e])||[]),p=s.find(x=>x.id===e),m=(p==null?void 0:p.tagCategories)||[],E=async()=>{try{a(!0),u(null),await n(t.id,{supercuration_tags:{...t.supercuration_tags,[e]:c}}),r()}catch(x){console.error("Failed to update tags:",x),u(x instanceof Error?x.message:"Failed to update tags")}finally{a(!1)}},v=x=>{h(w=>w.includes(x)?w.filter(b=>b!==x):[...w,x])};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:r}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Item"}),o&&d.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md mb-6",children:o}),d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]})]})}),m.length>0&&d.jsx("div",{className:"mb-6 space-y-4",children:m.map(x=>d.jsxs("div",{children:[d.jsxs("h5",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x.color}}),x.name]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:x.tags.map(w=>d.jsx("button",{onClick:()=>v(w),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${c.includes(w)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${x.color}15`,color:x.color,borderColor:c.includes(w)?x.color:"transparent"},children:w},w))})]},x.id))}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{onClick:E,disabled:i,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Save Changes"})]})]})]})})}function m$({isOpen:t,onClose:e,categories:r,onSave:n}){const[s,i]=M.useState(r),[a,o]=M.useState(null),[u,c]=M.useState(""),h=()=>{const _={id:Math.random().toString(36).substr(2,9),name:"New Category",color:"#"+Math.floor(Math.random()*16777215).toString(16),tags:[]};i([...s,_]),o(_.id)},p=(_,x)=>{i(w=>w.map(b=>b.id===_?{...b,...x}:b))},m=_=>{i(x=>x.filter(w=>w.id!==_))},E=_=>{u.trim()&&(p(_,{tags:[...s.find(x=>x.id===_).tags,u.trim()]}),c(""))},v=(_,x)=>{const w=s.find(b=>b.id===_);w&&p(_,{tags:w.tags.filter(b=>b!==x)})};return t?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Manage Tag Categories"}),d.jsxs("div",{className:"space-y-4",children:[s.map(_=>d.jsxs("div",{className:"border rounded-lg p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a===_.id?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:_.name,onChange:x=>p(_.id,{name:x.target.value}),className:"px-2 py-1 border rounded"}),d.jsx("input",{type:"color",value:_.color,onChange:x=>p(_.id,{color:x.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{onClick:()=>o(null),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Save"})]}):d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:_.color}}),d.jsx("span",{className:"font-medium",children:_.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>o(_.id),className:"p-1 text-gray-400 hover:text-gray-600",children:d.jsx(C1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(_.id),className:"p-1 text-gray-400 hover:text-red-600",children:d.jsx($C,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Add tag...",value:u,onChange:x=>c(x.target.value),onKeyDown:x=>x.key==="Enter"&&E(_.id),className:"flex-1 px-3 py-1.5 text-sm border rounded"}),d.jsx("button",{onClick:()=>E(_.id),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Add"})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:_.tags.map(x=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm rounded",style:{backgroundColor:`${_.color}15`,color:_.color},children:[x,d.jsx("button",{onClick:()=>v(_.id,x),className:"p-0.5 hover:text-red-600",children:d.jsx(Lt,{className:"w-3 h-3"})})]},x))})]})]},_.id)),d.jsx("button",{onClick:h,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:text-gray-700 hover:border-gray-400",children:d.jsx(Sc,{className:"w-5 h-5 mx-auto"})})]}),d.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{onClick:()=>{n(s),e()},className:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700",children:"Save Changes"})]})]})]})}):null}const Pm=["#2563eb","#dc2626","#059669","#7c3aed","#db2777","#ea580c","#ca8a04","#4f46e5","#0891b2","#be123c"];async function g$(t){var a,o;const e=((a=t.links)==null?void 0:a.map(u=>u.title))||[],r=((o=t.links)==null?void 0:o.map(u=>u.description))||[],s=[...e,...r].join(" ").toLowerCase().split(/\W+/).filter(u=>u.length>3).reduce((u,c)=>(u[c]=(u[c]||0)+1,u),{}),i=Object.entries(s).sort(([,u],[,c])=>c-u).slice(0,20).map(([u])=>u);return[{id:"topics",name:"Topics",color:Pm[0],tags:i.slice(0,8)},{id:"type",name:"Content Type",color:Pm[1],tags:["Article","Tutorial","Video","Tool","Resource"]},{id:"level",name:"Level",color:Pm[2],tags:["Beginner","Intermediate","Advanced"]}]}function E$({supercuration:t,onClose:e}){const{updateSupercuration:r}=eu();$r();const[n,s]=M.useState(!1),[i,a]=M.useState(null);M.useState("url");const[o,u]=M.useState(!1),[c,h]=M.useState({title:t.title,description:t.description,thumbnail_url:t.thumbnail_url||"",topics:t.topics,is_public:t.is_public,slug:t.slug||"",tagCategories:t.tagCategories||[]}),p=_=>_.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),m=_=>{h(x=>({...x,title:_,slug:p(_)}))},E=async()=>{try{s(!0);const _=await g$(t);h(x=>({...x,tagCategories:_}))}catch(_){console.error("Failed to generate tag suggestions:",_),a("Failed to generate tag suggestions")}finally{s(!1)}},v=async _=>{_.preventDefault();try{if(s(!0),a(null),!c.title.trim())throw new Error("Title is required");await r(t.id,{...c,slug:c.is_public?c.slug:void 0}),e()}catch(x){console.error("Failed to update supercuration:",x),a(x instanceof Error?x.message:"Failed to update supercuration")}finally{s(!1)}};return d.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Supercuration"}),d.jsxs("form",{onSubmit:v,className:"space-y-6",children:[i&&d.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:i}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:c.title,onChange:_=>m(_.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{value:c.description,onChange:_=>h({...c,description:_.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Tag Categories"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-purple-50 text-purple-700 rounded-md hover:bg-purple-100",children:[d.jsx(Gh,{className:"w-4 h-4"}),"Magic Suggest"]}),d.jsx("button",{type:"button",onClick:()=>u(!0),className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100",children:"Manage Tags"})]})]}),c.tagCategories.length>0?d.jsx("div",{className:"space-y-2",children:c.tagCategories.map(_=>d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),d.jsx("span",{className:"text-sm",children:_.name}),d.jsxs("span",{className:"text-xs text-gray-500",children:["(",_.tags.length," tags)"]})]},_.id))}):d.jsx("p",{className:"text-sm text-gray-500",children:'No tag categories defined. Click "Manage Tags" to add some.'})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{type:"button",onClick:()=>h(_=>({..._,is_public:!0})),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md ${c.is_public?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx(Dc,{className:"w-4 h-4"}),"Public"]}),d.jsxs("button",{type:"button",onClick:()=>h(_=>({..._,is_public:!1})),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md ${c.is_public?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:[d.jsx(I1,{className:"w-4 h-4"}),"Private"]})]})]}),c.is_public&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-500",children:"supercurators.com/s/"}),d.jsx("input",{type:"text",value:c.slug,onChange:_=>h(x=>({...x,slug:_.target.value})),className:"flex-1 px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",pattern:"[a-z0-9-]+",title:"Only lowercase letters, numbers, and hyphens are allowed",required:c.is_public})]})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:n?"Saving...":"Save Changes"})]})]})]})]}),o&&d.jsx(m$,{isOpen:!0,onClose:()=>u(!1),categories:c.tagCategories,onSave:_=>{h(x=>({...x,tagCategories:_})),u(!1)}})]})}function y$(t){const r=t.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(a=>a.length>2),n=new Set(["the","be","to","of","and","a","in","that","have","i","it","for","not","on","with","he","as","you","do","at","this","but","his","by","from","they","we","say","her","she","or","an","will","my","one","all","would","there","their","what","so","up","out","if","about","who","get","which","go","me"]),s=r.filter(a=>!n.has(a)),i={};return s.forEach(a=>{i[a]=(i[a]||0)+1}),Object.entries(i).sort(([,a],[,o])=>o-a).slice(0,20).map(([a])=>a)}function _$(t){const e={development:["code","programming","software","development","developer"],design:["design","ui","ux","interface","visual"],data:["database","sql","analytics","visualization","storage"],cloud:["aws","azure","cloud","serverless","hosting"],security:["security","authentication","encryption","protection"],mobile:["mobile","ios","android","app","responsive"],web:["frontend","backend","fullstack","web","browser"],ai:["machine learning","artificial intelligence","neural","deep learning"],devops:["deployment","pipeline","ci/cd","automation"],testing:["testing","quality","qa","test","automation"]},r=new Set;return Object.entries(e).forEach(([s,i])=>{i.some(a=>t.toLowerCase().includes(a))&&(r.add(s),i.forEach(a=>{t.toLowerCase().includes(a)&&r.add(a)}))}),["api","rest","graphql","docker","kubernetes","react","vue","angular","node","python","javascript","typescript","java","golang","rust","microservices","serverless","redis","postgresql","mongodb"].forEach(s=>{t.toLowerCase().includes(s)&&r.add(s)}),Array.from(r)}async function b$({title:t,description:e,tagCategories:r}){const n=`${t} ${e}`.toLowerCase(),s=[],i=y$(n),a=_$(n);for(const o of r)for(const u of o.tags){const c=u.toLowerCase();if(n.includes(c)){s.push(u);continue}const h=c.split(/\s+/);if(h.length>1&&h.every(E=>new RegExp(`\\b${E}|${E}s?\\b`,"i").test(n))){s.push(u);continue}if(i.some(m=>sT(u).some(v=>v.split(/\s+/).every(x=>new RegExp(`\\b${x}|${x}s?\\b`,"i").test(m))))){s.push(u);continue}if(a.some(m=>sT(u).some(v=>v.split(/\s+/).every(x=>new RegExp(`\\b${x}|${x}s?\\b`,"i").test(m))))){s.push(u);continue}v$(u,n)&&s.push(u)}return[...new Set(s)]}function v$(t,e){return({"Resume Builder":["resume","cv","curriculum vitae","job application","career document","professional profile","work history","employment history","job seeker","career builder","resume template","resume writing","resume generator","resume creator","resume maker","resume editor","resume assistant"],Tutorial:["learn","guide","how to","step by step","tutorial","course","lesson"],Documentation:["docs","reference","manual","guide","documentation"],Tool:["tool","utility","software","app","application","platform"],Library:["library","framework","package","dependency","module"],API:["api","endpoint","service","rest","graphql","interface"],Resource:["resource","asset","material","download","template"],Article:["article","post","blog","story","news","update"],Video:["video","watch","youtube","stream","tutorial","presentation"],Podcast:["podcast","audio","listen","episode","show","radio"],Book:["book","ebook","read","publication","guide","manual"],Course:["course","class","training","workshop","bootcamp"],Community:["community","forum","group","network","chat"],Event:["event","conference","meetup","webinar","workshop"],Project:["project","repository","demo","example","sample"],Research:["research","paper","study","analysis","report"]}[t]||[]).some(s=>s.split(/\s+/).every(a=>new RegExp(`\\b${a}|${a}s?\\b`,"i").test(e)))}function sT(t){return{"Resume Builder":["resume","cv","curriculum vitae","job application","career document","professional profile","work history","employment history","job seeker","career builder","resume template","resume writing","resume generator","resume creator","resume maker","resume editor","resume assistant","career profile","professional summary","skills section","experience section","job history","employment record","qualifications","achievements"],AI:["artificial intelligence","machine learning","ml","deep learning","neural network","nlp","computer vision","ai model","training data","inference","prediction","classification","clustering","regression","transformer","gpt","bert"],Frontend:["react","vue","angular","javascript","typescript","css","html","web","ui","component","responsive","mobile","browser","dom","spa","webpack","vite"],Backend:["server","api","database","node","python","java","rest","graphql","microservice","authentication","authorization","cache","queue","worker","cron","webhook"],DevOps:["deployment","ci/cd","pipeline","docker","kubernetes","container","orchestration","monitoring","logging","scaling","infrastructure","cloud","aws","azure","gcp"],Security:["authentication","authorization","encryption","security","vulnerability","penetration","firewall","ssl","certificate","token","jwt","oauth","compliance","audit"],Mobile:["ios","android","react native","flutter","swift","kotlin","mobile app","responsive","pwa","notification","offline","native","hybrid"],Database:["sql","nosql","postgresql","mysql","mongodb","redis","elasticsearch","query","index","schema","migration","orm","acid","transaction"],Testing:["test","unit test","integration test","e2e","qa","quality","automation","jest","cypress","selenium","mock","stub","assertion","coverage"],Performance:["optimization","speed","latency","throughput","benchmark","profiling","memory","cpu","cache","lazy loading","compression","minification"],Design:["ui","ux","user interface","user experience","wireframe","prototype","mockup","figma","sketch","adobe xd","responsive","accessibility"],Analytics:["metrics","tracking","analytics","dashboard","report","visualization","data","insight","conversion","funnel","segment","attribution"],Marketing:["seo","growth","marketing","advertising","promotion","campaign","social media","email","content","landing page","conversion","ab testing"],Business:["startup","entrepreneur","business","strategy","management","leadership","product","market","customer","revenue","growth","investment"],Career:["job","interview","resume","hiring","career","skill","learning","mentor","networking","remote","salary","promotion","leadership"]}[t]||[]}function T$({isOpen:t,onClose:e,supercurationId:r,links:n,tagCategories:s}){const{updateLink:i}=Hr(),[a,o]=M.useState(!1),[u,c]=M.useState(!1),[h,p]=M.useState(null),[m,E]=M.useState({}),[v,_]=M.useState(0),x=async()=>{c(!0),p(null),_(0);try{const T={};let O=0;for(const B of n){const V=await b$({title:B.title,description:B.description,tagCategories:s});T[B.id]=V,O++,_(O/n.length*100)}E(T)}catch(T){console.error("Analysis error:",T),p("Failed to analyze content")}finally{c(!1)}},w=async()=>{o(!0),p(null);try{await Promise.all(Object.entries(m).map(([T,O])=>{var B;return i(T,{supercuration_tags:{...(B=n.find(V=>V.id===T))==null?void 0:B.supercuration_tags,[r]:O}})})),e()}catch(T){console.error("Failed to apply tags:",T),p("Failed to apply tags")}finally{o(!1)}};if(!t)return null;const b=Object.values(m).some(T=>T.length>0);return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(Lt,{className:"h-6 w-6"})})}),d.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[d.jsx(Gh,{className:"w-6 h-6 text-purple-600"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tag Wizard"})]}),h&&d.jsx("div",{className:"p-4 mb-6 text-sm text-red-600 bg-red-50 rounded-lg",children:h}),u?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Oo,{className:"w-8 h-8 animate-spin text-purple-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Analyzing content..."}),d.jsx("div",{className:"w-64 h-2 bg-gray-200 rounded-full mx-auto",children:d.jsx("div",{className:"h-full bg-purple-600 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}):Object.keys(m).length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-gray-600 mb-6",children:"Tag Wizard will analyze your content and suggest appropriate tags based on your defined categories."}),d.jsx("button",{onClick:x,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Start Analysis"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-4 mb-6 max-h-[60vh] overflow-y-auto",children:[n.map(T=>{const O=m[T.id]||[];return O.length===0?null:d.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start gap-4",children:[T.thumbnail_url&&d.jsx("img",{src:T.thumbnail_url,alt:"",className:"w-16 h-16 rounded object-cover"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium mb-2",children:T.title}),d.jsx("div",{className:"flex flex-wrap gap-2",children:O.map(B=>{const V=s.find(N=>N.tags.includes(B));return V?d.jsx("span",{className:"px-2 py-0.5 text-sm rounded-full",style:{backgroundColor:`${V.color}15`,color:V.color},children:B},B):null})})]}),d.jsx(ig,{className:"w-5 h-5 text-green-500 flex-shrink-0"})]})},T.id)}),!b&&d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No matching tags found. Try adjusting your tag categories."})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),d.jsxs("button",{onClick:w,disabled:a||!b,className:"px-4 py-2 text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:[d.jsx(Gh,{className:"w-4 h-4"}),a?"Applying Tags...":"Apply Tags"]})]})]})]})]})})}function A$(){var I;const{id:t}=A2(),{user:e}=qr();$r();const{updateLink:r}=Hr(),[n,s]=M.useState(null),[i,a]=M.useState([]),[o,u]=M.useState(!0),[c,h]=M.useState(null),[p,m]=M.useState("grid"),[E,v]=M.useState(null),[_,x]=M.useState(!1),[w,b]=M.useState(!1),[T,O]=M.useState([]);M.useEffect(()=>{(async()=>{try{if(u(!0),h(null),!t)throw new Error("No supercuration ID provided");const A=await Mi(et(Te,"supercurations",t));if(!A.exists())throw new Error("Supercuration not found");const k={id:A.id,...A.data()};s(k);const F=rn(Te,"links"),R=ti(F,Bi("supercuration_ids","array-contains",t)),oe=(await ta(R)).docs.map(_e=>({id:_e.id,..._e.data()}));a(oe)}catch(A){console.error("Error fetching supercuration:",A),h(A instanceof Error?A.message:"Failed to load supercuration")}finally{u(!1)}})()},[t]);const B=async D=>{try{const A=i.find(F=>F.id===D);if(!A)return;const k=(A.supercuration_ids||[]).filter(F=>F!==t);await r(D,{supercuration_ids:k}),a(F=>F.filter(R=>R.id!==D))}catch(A){console.error("Failed to remove link:",A)}},V=(e==null?void 0:e.id)===(n==null?void 0:n.created_by);if(o)return d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(c||!n)return d.jsx("div",{className:"text-center py-8 text-red-600",children:c||"Supercuration not found"});const N=T.length>0?i.filter(D=>{var k;const A=((k=D.supercuration_tags)==null?void 0:k[t])||[];return T.some(F=>A.includes(F))}):i;return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[n.thumbnail_url&&d.jsx("img",{src:n.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold mb-2",children:n.title}),d.jsx("p",{className:"text-gray-600",children:n.description})]}),V&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 text-purple-700 bg-purple-50 rounded-lg hover:bg-purple-100",children:[d.jsx(Gh,{className:"w-4 h-4"}),"Tag Wizard"]}),d.jsx("button",{onClick:()=>x(!0),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-50",children:d.jsx(sF,{className:"w-5 h-5"})})]})]}),n.is_public&&n.slug&&d.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[d.jsx(Dc,{className:"w-4 h-4 text-gray-400"}),d.jsxs("a",{href:`/s/${n.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:["Public URL",d.jsx(oo,{className:"w-3 h-3"})]})]})]})]}),((I=n.tagCategories)==null?void 0:I.length)>0&&d.jsx("div",{className:"flex flex-wrap gap-4 bg-white rounded-lg shadow-sm p-4",children:n.tagCategories.map(D=>d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:D.color}}),d.jsx("span",{className:"text-sm font-medium",children:D.name})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:D.tags.map(A=>d.jsx("button",{onClick:()=>O(k=>k.includes(A)?k.filter(F=>F!==A):[...k,A]),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${T.includes(A)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${D.color}15`,color:D.color,borderColor:T.includes(A)?D.color:"transparent"},children:A},A))})]},D.id))}),d.jsx("div",{className:"flex justify-end",children:d.jsxs("div",{className:"flex items-center gap-2 border rounded-full p-1 bg-white",children:[d.jsx("button",{onClick:()=>m("grid"),className:`p-1.5 rounded-full ${p==="grid"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(UC,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m("list"),className:`p-1.5 rounded-full ${p==="list"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(qC,{className:"w-4 h-4"})})]})}),p==="grid"?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(D=>{var A,k;return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[D.thumbnail_url&&d.jsx("img",{src:D.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:text-blue-600 block mb-2",children:D.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:D.description})]}),V&&d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("button",{onClick:()=>v(D),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:d.jsx(Lo,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>B(D.id),className:"p-1 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",children:d.jsx(oo,{className:"w-4 h-4"})})]})]}),((k=(A=D.supercuration_tags)==null?void 0:A[t])==null?void 0:k.length)>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:D.supercuration_tags[t].map(F=>{var Q;const R=(Q=n.tagCategories)==null?void 0:Q.find(oe=>oe.tags.includes(F));return R?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${R.color}15`,color:R.color},children:F},F):null})})]})]},D.id)})}):d.jsx("div",{className:"space-y-4",children:N.map(D=>{var A,k;return d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden p-4 hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"flex gap-4",children:[D.thumbnail_url&&d.jsx("img",{src:D.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{children:[d.jsx("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:text-blue-600",children:D.title}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:D.description})]}),V&&d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("button",{onClick:()=>v(D),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:d.jsx(Lo,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>B(D.id),className:"p-1 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",children:d.jsx(oo,{className:"w-4 h-4"})})]})]}),((k=(A=D.supercuration_tags)==null?void 0:A[t])==null?void 0:k.length)>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:D.supercuration_tags[t].map(F=>{var Q;const R=(Q=n.tagCategories)==null?void 0:Q.find(oe=>oe.tags.includes(F));return R?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${R.color}15`,color:R.color},children:F},F):null})})]})]})},D.id)})}),E&&d.jsx(p$,{link:E,supercurationId:t,onClose:()=>v(null)}),_&&d.jsx(E$,{supercuration:n,onClose:()=>x(!1)}),w&&d.jsx(T$,{isOpen:!0,onClose:()=>b(!1),supercurationId:t,links:i,tagCategories:n.tagCategories||[]})]})}function x$(){const{slug:t}=A2();$r();const[e,r]=M.useState(null),[n,s]=M.useState([]),[i,a]=M.useState(!0),[o,u]=M.useState(null),[c,h]=M.useState("grid");return M.useEffect(()=>{t&&(async()=>{try{a(!0),u(null);const m=collection(Te,"supercurations"),E=query(m,where("slug","==",t),where("is_public","==",!0)),v=await getDocs(E);if(v.empty)throw new Error("Supercuration not found");const _={id:v.docs[0].id,...v.docs[0].data()};r(_);const x=collection(Te,"links"),w=query(x,where("supercuration_ids","array-contains",_.id)),T=(await getDocs(w)).docs.map(O=>({id:O.id,...O.data()}));s(T)}catch(m){console.error("Error fetching supercuration:",m),u(m instanceof Error?m.message:"Failed to load supercuration")}finally{a(!1)}})()},[t]),i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o||!e?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),d.jsx("p",{className:"text-gray-600",children:"This supercuration doesn't exist or is private"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs(Helmet,{children:[d.jsxs("title",{children:[e.title," - Supercurators"]}),d.jsx("meta",{name:"description",content:e.description}),e.thumbnail_url&&d.jsx("meta",{property:"og:image",content:e.thumbnail_url})]}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[e.thumbnail_url&&d.jsx("div",{className:"h-64 w-full mb-6",children:d.jsx("img",{src:e.thumbnail_url,alt:"",className:"w-full h-full object-cover rounded-lg"})}),d.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),d.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),d.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm",children:[d.jsx("img",{src:e.user.avatar_url,alt:e.user.name,className:"w-12 h-12 rounded-full"}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-medium",children:e.user.name}),e.user.bio&&d.jsx("p",{className:"text-sm text-gray-500",children:e.user.bio}),e.user.website&&d.jsx("a",{href:e.user.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700",children:new URL(e.user.website).hostname})]})]})]}),d.jsx("div",{className:"flex justify-end mb-6",children:d.jsxs("div",{className:"flex items-center gap-2 border rounded-full p-1 bg-white",children:[d.jsx("button",{onClick:()=>h("grid"),className:`p-1.5 rounded-full ${c==="grid"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(UC,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>h("list"),className:`p-1.5 rounded-full ${c==="list"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(qC,{className:"w-4 h-4"})})]})}),c==="grid"?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(p=>{var m;return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[p.thumbnail_url&&d.jsx("img",{src:p.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-lg hover:text-blue-600",children:p.title}),d.jsx("p",{className:"text-sm text-gray-500 mt-2 line-clamp-2",children:p.description}),d.jsx("div",{className:"mt-4 flex flex-wrap gap-1.5",children:(m=p.emoji_tags)==null?void 0:m.map(E=>d.jsx("span",{className:"text-lg",children:E},E))})]})]},p.id)})}):d.jsx("div",{className:"space-y-4",children:n.map(p=>{var m;return d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden p-4 hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"flex gap-4",children:[p.thumbnail_url&&d.jsx("img",{src:p.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-lg hover:text-blue-600",children:p.title}),d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:p.description}),d.jsx("div",{className:"mt-4 flex flex-wrap gap-1.5",children:(m=p.emoji_tags)==null?void 0:m.map(E=>d.jsx("span",{className:"text-lg",children:E},E))})]})]})},p.id)})})]})]})}function w$(){return Hr(e=>e.isOffline)?d.jsxs("div",{className:"fixed bottom-4 right-4 bg-yellow-50 text-yellow-800 px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[d.jsx(oF,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm font-medium",children:"You are offline"})]}):null}function I$(){const t=qr(r=>r.initialize),e=Hr(r=>r.setOfflineStatus);return M.useEffect(()=>{let r=!0;(async()=>{try{r&&await y9()&&r&&await t()}catch(a){console.error("Initialization error:",a)}})();const s=()=>e(!1),i=()=>e(!0);return window.addEventListener("online",s),window.addEventListener("offline",i),()=>{r=!1,window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[t,e]),d.jsxs(ZR,{children:[d.jsxs(GR,{children:[d.jsxs(lr,{element:d.jsx(G9,{}),children:[d.jsx(lr,{path:"/login",element:d.jsx(hF,{})}),d.jsx(lr,{path:"/register",element:d.jsx(fF,{})})]}),d.jsxs(lr,{element:d.jsx(cF,{}),children:[d.jsx(lr,{path:"/home",element:d.jsx(s$,{})}),d.jsx(lr,{path:"/saved",element:d.jsx(l$,{})}),d.jsx(lr,{path:"/dashboard",element:d.jsx(d$,{})}),d.jsx(lr,{path:"/supercurations",element:d.jsx(h$,{})}),d.jsx(lr,{path:"/supercurations/new",element:d.jsx(f$,{})}),d.jsx(lr,{path:"/supercurations/:id",element:d.jsx(A$,{})}),d.jsx(lr,{path:"/profile/:id",element:d.jsx(c$,{})})]}),d.jsx(lr,{path:"/s/:slug",element:d.jsx(x$,{})}),d.jsx(lr,{path:"/",element:d.jsx(dF,{})})]}),d.jsx(w$,{})]})}const iT=document.getElementById("root");iT&&bx(iT).render(d.jsx(M.StrictMode,{children:d.jsx(I$,{})}));
