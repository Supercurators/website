var $N=Object.defineProperty;var zN=(t,e,r)=>e in t?$N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Pn=(t,e,r)=>zN(t,typeof e!="symbol"?e+"":e,r);function GN(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var OT={exports:{}},pf={},LT={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),WN=Symbol.for("react.portal"),KN=Symbol.for("react.fragment"),YN=Symbol.for("react.strict_mode"),QN=Symbol.for("react.profiler"),XN=Symbol.for("react.provider"),JN=Symbol.for("react.context"),ZN=Symbol.for("react.forward_ref"),e3=Symbol.for("react.suspense"),t3=Symbol.for("react.memo"),r3=Symbol.for("react.lazy"),xy=Symbol.iterator;function n3(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var FT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BT=Object.assign,MT={};function Go(t,e,r){this.props=t,this.context=e,this.refs=MT,this.updater=r||FT}Go.prototype.isReactComponent={};Go.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Go.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jT(){}jT.prototype=Go.prototype;function Bg(t,e,r){this.props=t,this.context=e,this.refs=MT,this.updater=r||FT}var Mg=Bg.prototype=new jT;Mg.constructor=Bg;BT(Mg,Go.prototype);Mg.isPureReactComponent=!0;var wy=Array.isArray,UT=Object.prototype.hasOwnProperty,jg={current:null},VT={key:!0,ref:!0,__self:!0,__source:!0};function qT(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)UT.call(e,n)&&!VT.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];s.children=u}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:gc,type:t,key:i,ref:a,props:s,_owner:jg.current}}function s3(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ug(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function i3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Iy=/\/+/g;function Hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i3(""+t.key):e.toString(36)}function Ld(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case gc:case WN:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Hp(a,0):n,wy(s)?(r="",t!=null&&(r=t.replace(Iy,"$&/")+"/"),Ld(s,e,r,"",function(l){return l})):s!=null&&(Ug(s)&&(s=s3(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Iy,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",wy(t))for(var o=0;o<t.length;o++){i=t[o];var u=n+Hp(i,o);a+=Ld(i,e,r,u,s)}else if(u=n3(t),typeof u=="function")for(t=u.call(t),o=0;!(i=t.next()).done;)i=i.value,u=n+Hp(i,o++),a+=Ld(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ad(t,e,r){if(t==null)return t;var n=[],s=0;return Ld(t,n,"","",function(i){return e.call(r,i,s++)}),n}function a3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ur={current:null},Fd={transition:null},o3={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Fd,ReactCurrentOwner:jg};function HT(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:ad,forEach:function(t,e,r){ad(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!Ug(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Go;De.Fragment=KN;De.Profiler=QN;De.PureComponent=Bg;De.StrictMode=YN;De.Suspense=e3;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o3;De.act=HT;De.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=BT({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=jg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)UT.call(e,u)&&!VT.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:gc,type:t.type,key:s,ref:i,props:n,_owner:a}};De.createContext=function(t){return t={$$typeof:JN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XN,_context:t},t.Consumer=t};De.createElement=qT;De.createFactory=function(t){var e=qT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:ZN,render:t}};De.isValidElement=Ug;De.lazy=function(t){return{$$typeof:r3,_payload:{_status:-1,_result:t},_init:a3}};De.memo=function(t,e){return{$$typeof:t3,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Fd.transition;Fd.transition={};try{t()}finally{Fd.transition=e}};De.unstable_act=HT;De.useCallback=function(t,e){return ur.current.useCallback(t,e)};De.useContext=function(t){return ur.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return ur.current.useDeferredValue(t)};De.useEffect=function(t,e){return ur.current.useEffect(t,e)};De.useId=function(){return ur.current.useId()};De.useImperativeHandle=function(t,e,r){return ur.current.useImperativeHandle(t,e,r)};De.useInsertionEffect=function(t,e){return ur.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return ur.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return ur.current.useMemo(t,e)};De.useReducer=function(t,e,r){return ur.current.useReducer(t,e,r)};De.useRef=function(t){return ur.current.useRef(t)};De.useState=function(t){return ur.current.useState(t)};De.useSyncExternalStore=function(t,e,r){return ur.current.useSyncExternalStore(t,e,r)};De.useTransition=function(){return ur.current.useTransition()};De.version="18.3.1";LT.exports=De;var M=LT.exports;const yn=zo(M),u3=GN({__proto__:null,default:yn},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l3=M,c3=Symbol.for("react.element"),d3=Symbol.for("react.fragment"),h3=Object.prototype.hasOwnProperty,f3=l3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p3={key:!0,ref:!0,__self:!0,__source:!0};function $T(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)h3.call(e,n)&&!p3.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:c3,type:t,key:i,ref:a,props:s,_owner:f3.current}}pf.Fragment=d3;pf.jsx=$T;pf.jsxs=$T;OT.exports=pf;var d=OT.exports,zT={exports:{}},Pr={},GT={exports:{}},WT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,B){var V=Z.length;Z.push(B);e:for(;0<V;){var Y=V-1>>>1,se=Z[Y];if(0<s(se,B))Z[Y]=B,Z[V]=se,V=Y;else break e}}function r(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var B=Z[0],V=Z.pop();if(V!==B){Z[0]=V;e:for(var Y=0,se=Z.length,U=se>>>1;Y<U;){var G=2*(Y+1)-1,le=Z[G],ue=G+1,oe=Z[ue];if(0>s(le,V))ue<se&&0>s(oe,le)?(Z[Y]=oe,Z[ue]=V,Y=ue):(Z[Y]=le,Z[G]=V,Y=G);else if(ue<se&&0>s(oe,V))Z[Y]=oe,Z[ue]=V,Y=ue;else break e}}return B}function s(Z,B){var V=Z.sortIndex-B.sortIndex;return V!==0?V:Z.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var u=[],l=[],h=1,p=null,m=3,E=!1,_=!1,v=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Z){for(var B=r(l);B!==null;){if(B.callback===null)n(l);else if(B.startTime<=Z)n(l),B.sortIndex=B.expirationTime,e(u,B);else break;B=r(l)}}function F(Z){if(v=!1,T(Z),!_)if(r(u)!==null)_=!0,de(j);else{var B=r(l);B!==null&&me(F,B.startTime-Z)}}function j(Z,B){_=!1,v&&(v=!1,x(w),w=-1),E=!0;var V=m;try{for(T(B),p=r(u);p!==null&&(!(p.expirationTime>B)||Z&&!P());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,m=p.priorityLevel;var se=Y(p.expirationTime<=B);B=t.unstable_now(),typeof se=="function"?p.callback=se:p===r(u)&&n(u),T(B)}else n(u);p=r(u)}if(p!==null)var U=!0;else{var G=r(l);G!==null&&me(F,G.startTime-B),U=!1}return U}finally{p=null,m=V,E=!1}}var $=!1,D=null,w=-1,k=5,I=-1;function P(){return!(t.unstable_now()-I<k)}function O(){if(D!==null){var Z=t.unstable_now();I=Z;var B=!0;try{B=D(!0,Z)}finally{B?N():($=!1,D=null)}}else $=!1}var N;if(typeof b=="function")N=function(){b(O)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ee=Ee.port2;Ee.port1.onmessage=O,N=function(){ee.postMessage(null)}}else N=function(){A(O,0)};function de(Z){D=Z,$||($=!0,N())}function me(Z,B){w=A(function(){Z(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){_||E||(_=!0,de(j))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var V=m;m=B;try{return Z()}finally{m=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,B){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var V=m;m=Z;try{return B()}finally{m=V}},t.unstable_scheduleCallback=function(Z,B,V){var Y=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Y+V:Y):V=Y,Z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=V+se,Z={id:h++,callback:B,priorityLevel:Z,startTime:V,expirationTime:se,sortIndex:-1},V>Y?(Z.sortIndex=V,e(l,Z),r(u)===null&&Z===r(l)&&(v?(x(w),w=-1):v=!0,me(F,V-Y))):(Z.sortIndex=se,e(u,Z),_||E||(_=!0,de(j))),Z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Z){var B=m;return function(){var V=m;m=B;try{return Z.apply(this,arguments)}finally{m=V}}}})(WT);GT.exports=WT;var m3=GT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g3=M,Nr=m3;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KT=new Set,Sl={};function oa(t,e){_o(t,e),_o(t+"Capture",e)}function _o(t,e){for(Sl[t]=e,t=0;t<e.length;t++)KT.add(e[t])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zm=Object.prototype.hasOwnProperty,E3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},Dy={};function y3(t){return zm.call(Dy,t)?!0:zm.call(Cy,t)?!1:E3.test(t)?Dy[t]=!0:(Cy[t]=!0,!1)}function _3(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b3(t,e,r,n){if(e===null||typeof e>"u"||_3(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lr(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vg=/[\-:]([a-z])/g;function qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vg,qg);jt[e]=new lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vg,qg);jt[e]=new lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vg,qg);jt[e]=new lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new lr(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hg(t,e,r,n){var s=jt.hasOwnProperty(e)?jt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(b3(e,r,s,n)&&(r=null),n||s===null?y3(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var os=g3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,od=Symbol.for("react.element"),Ma=Symbol.for("react.portal"),ja=Symbol.for("react.fragment"),$g=Symbol.for("react.strict_mode"),Gm=Symbol.for("react.profiler"),YT=Symbol.for("react.provider"),QT=Symbol.for("react.context"),zg=Symbol.for("react.forward_ref"),Wm=Symbol.for("react.suspense"),Km=Symbol.for("react.suspense_list"),Gg=Symbol.for("react.memo"),_s=Symbol.for("react.lazy"),XT=Symbol.for("react.offscreen"),Sy=Symbol.iterator;function Su(t){return t===null||typeof t!="object"?null:(t=Sy&&t[Sy]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,$p;function Xu(t){if($p===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);$p=e&&e[1]||""}return`
`+$p+t}var zp=!1;function Gp(t,e){if(!t||zp)return"";zp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=o);break}}}finally{zp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Xu(t):""}function v3(t){switch(t.tag){case 5:return Xu(t.type);case 16:return Xu("Lazy");case 13:return Xu("Suspense");case 19:return Xu("SuspenseList");case 0:case 2:case 15:return t=Gp(t.type,!1),t;case 11:return t=Gp(t.type.render,!1),t;case 1:return t=Gp(t.type,!0),t;default:return""}}function Ym(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ja:return"Fragment";case Ma:return"Portal";case Gm:return"Profiler";case $g:return"StrictMode";case Wm:return"Suspense";case Km:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QT:return(t.displayName||"Context")+".Consumer";case YT:return(t._context.displayName||"Context")+".Provider";case zg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gg:return e=t.displayName||null,e!==null?e:Ym(t.type)||"Memo";case _s:e=t._payload,t=t._init;try{return Ym(t(e))}catch{}}return null}function T3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ym(e);case 8:return e===$g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A3(t){var e=JT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ud(t){t._valueTracker||(t._valueTracker=A3(t))}function ZT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=JT(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qm(t,e){var r=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ny(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ei(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eA(t,e){e=e.checked,e!=null&&Hg(t,"checked",e,!1)}function Xm(t,e){eA(t,e);var r=ei(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jm(t,e.type,r):e.hasOwnProperty("defaultValue")&&Jm(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ry(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Jm(t,e,r){(e!=="number"||ch(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ju=Array.isArray;function ro(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ei(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ky(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(Ju(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ei(r)}}function tA(t,e){var r=ei(e.value),n=ei(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Py(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ld,nA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ld=ld||document.createElement("div"),ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x3=["Webkit","ms","Moz","O"];Object.keys(ll).forEach(function(t){x3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ll[e]=ll[t]})});function sA(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ll.hasOwnProperty(t)&&ll[t]?(""+e).trim():e+"px"}function iA(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=sA(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var w3=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t0(t,e){if(e){if(w3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function r0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=null;function Wg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var s0=null,no=null,so=null;function Oy(t){if(t=_c(t)){if(typeof s0!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=_f(e),s0(t.stateNode,t.type,e))}}function aA(t){no?so?so.push(t):so=[t]:no=t}function oA(){if(no){var t=no,e=so;if(so=no=null,Oy(t),e)for(t=0;t<e.length;t++)Oy(e[t])}}function uA(t,e){return t(e)}function lA(){}var Wp=!1;function cA(t,e,r){if(Wp)return t(e,r);Wp=!0;try{return uA(t,e,r)}finally{Wp=!1,(no!==null||so!==null)&&(lA(),oA())}}function Rl(t,e){var r=t.stateNode;if(r===null)return null;var n=_f(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var i0=!1;if(Jn)try{var Nu={};Object.defineProperty(Nu,"passive",{get:function(){i0=!0}}),window.addEventListener("test",Nu,Nu),window.removeEventListener("test",Nu,Nu)}catch{i0=!1}function I3(t,e,r,n,s,i,a,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(h){this.onError(h)}}var cl=!1,dh=null,hh=!1,a0=null,C3={onError:function(t){cl=!0,dh=t}};function D3(t,e,r,n,s,i,a,o,u){cl=!1,dh=null,I3.apply(C3,arguments)}function S3(t,e,r,n,s,i,a,o,u){if(D3.apply(this,arguments),cl){if(cl){var l=dh;cl=!1,dh=null}else throw Error(ne(198));hh||(hh=!0,a0=l)}}function ua(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function dA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ly(t){if(ua(t)!==t)throw Error(ne(188))}function N3(t){var e=t.alternate;if(!e){if(e=ua(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ly(s),t;if(i===n)return Ly(s),e;i=i.sibling}throw Error(ne(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function hA(t){return t=N3(t),t!==null?fA(t):null}function fA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fA(t);if(e!==null)return e;t=t.sibling}return null}var pA=Nr.unstable_scheduleCallback,Fy=Nr.unstable_cancelCallback,R3=Nr.unstable_shouldYield,k3=Nr.unstable_requestPaint,ft=Nr.unstable_now,P3=Nr.unstable_getCurrentPriorityLevel,Kg=Nr.unstable_ImmediatePriority,mA=Nr.unstable_UserBlockingPriority,fh=Nr.unstable_NormalPriority,O3=Nr.unstable_LowPriority,gA=Nr.unstable_IdlePriority,mf=null,Tn=null;function L3(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:M3,F3=Math.log,B3=Math.LN2;function M3(t){return t>>>=0,t===0?32:31-(F3(t)/B3|0)|0}var cd=64,dd=4194304;function Zu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ph(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Zu(o):(i&=a,i!==0&&(n=Zu(i)))}else a=r&~s,a!==0?n=Zu(a):i!==0&&(n=Zu(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-sn(e),s=1<<r,n|=t[r],e&=~s;return n}function j3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U3(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-sn(i),o=1<<a,u=s[a];u===-1?(!(o&r)||o&n)&&(s[a]=j3(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}}function o0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function EA(){var t=cd;return cd<<=1,!(cd&4194240)&&(cd=64),t}function Kp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ec(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=r}function V3(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-sn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Yg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-sn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var je=0;function yA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _A,Qg,bA,vA,TA,u0=!1,hd=[],Ms=null,js=null,Us=null,kl=new Map,Pl=new Map,Ts=[],q3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function By(t,e){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(e.pointerId)}}function Ru(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_c(e),e!==null&&Qg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function H3(t,e,r,n,s){switch(e){case"focusin":return Ms=Ru(Ms,t,e,r,n,s),!0;case"dragenter":return js=Ru(js,t,e,r,n,s),!0;case"mouseover":return Us=Ru(Us,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return kl.set(i,Ru(kl.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Pl.set(i,Ru(Pl.get(i)||null,t,e,r,n,s)),!0}return!1}function AA(t){var e=ki(t.target);if(e!==null){var r=ua(e);if(r!==null){if(e=r.tag,e===13){if(e=dA(r),e!==null){t.blockedOn=e,TA(t.priority,function(){bA(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=l0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);n0=n,r.target.dispatchEvent(n),n0=null}else return e=_c(r),e!==null&&Qg(e),t.blockedOn=r,!1;e.shift()}return!0}function My(t,e,r){Bd(t)&&r.delete(e)}function $3(){u0=!1,Ms!==null&&Bd(Ms)&&(Ms=null),js!==null&&Bd(js)&&(js=null),Us!==null&&Bd(Us)&&(Us=null),kl.forEach(My),Pl.forEach(My)}function ku(t,e){t.blockedOn===e&&(t.blockedOn=null,u0||(u0=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,$3)))}function Ol(t){function e(s){return ku(s,t)}if(0<hd.length){ku(hd[0],t);for(var r=1;r<hd.length;r++){var n=hd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ms!==null&&ku(Ms,t),js!==null&&ku(js,t),Us!==null&&ku(Us,t),kl.forEach(e),Pl.forEach(e),r=0;r<Ts.length;r++)n=Ts[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ts.length&&(r=Ts[0],r.blockedOn===null);)AA(r),r.blockedOn===null&&Ts.shift()}var io=os.ReactCurrentBatchConfig,mh=!0;function z3(t,e,r,n){var s=je,i=io.transition;io.transition=null;try{je=1,Xg(t,e,r,n)}finally{je=s,io.transition=i}}function G3(t,e,r,n){var s=je,i=io.transition;io.transition=null;try{je=4,Xg(t,e,r,n)}finally{je=s,io.transition=i}}function Xg(t,e,r,n){if(mh){var s=l0(t,e,r,n);if(s===null)sm(t,e,n,gh,r),By(t,n);else if(H3(s,t,e,r,n))n.stopPropagation();else if(By(t,n),e&4&&-1<q3.indexOf(t)){for(;s!==null;){var i=_c(s);if(i!==null&&_A(i),i=l0(t,e,r,n),i===null&&sm(t,e,n,gh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else sm(t,e,n,null,r)}}var gh=null;function l0(t,e,r,n){if(gh=null,t=Wg(n),t=ki(t),t!==null)if(e=ua(t),e===null)t=null;else if(r=e.tag,r===13){if(t=dA(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gh=t,null}function xA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P3()){case Kg:return 1;case mA:return 4;case fh:case O3:return 16;case gA:return 536870912;default:return 16}default:return 16}}var Ns=null,Jg=null,Md=null;function wA(){if(Md)return Md;var t,e=Jg,r=e.length,n,s="value"in Ns?Ns.value:Ns.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Md=s.slice(t,1<n?1-n:void 0)}function jd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fd(){return!0}function jy(){return!1}function Or(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fd:jy,this.isPropagationStopped=jy,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),e}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zg=Or(Wo),yc=ot({},Wo,{view:0,detail:0}),W3=Or(yc),Yp,Qp,Pu,gf=ot({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pu&&(Pu&&t.type==="mousemove"?(Yp=t.screenX-Pu.screenX,Qp=t.screenY-Pu.screenY):Qp=Yp=0,Pu=t),Yp)},movementY:function(t){return"movementY"in t?t.movementY:Qp}}),Uy=Or(gf),K3=ot({},gf,{dataTransfer:0}),Y3=Or(K3),Q3=ot({},yc,{relatedTarget:0}),Xp=Or(Q3),X3=ot({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),J3=Or(X3),Z3=ot({},Wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eR=Or(Z3),tR=ot({},Wo,{data:0}),Vy=Or(tR),rR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sR[t])?!!e[t]:!1}function e2(){return iR}var aR=ot({},yc,{key:function(t){if(t.key){var e=rR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e2,charCode:function(t){return t.type==="keypress"?jd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oR=Or(aR),uR=ot({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=Or(uR),lR=ot({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e2}),cR=Or(lR),dR=ot({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),hR=Or(dR),fR=ot({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pR=Or(fR),mR=[9,13,27,32],t2=Jn&&"CompositionEvent"in window,dl=null;Jn&&"documentMode"in document&&(dl=document.documentMode);var gR=Jn&&"TextEvent"in window&&!dl,IA=Jn&&(!t2||dl&&8<dl&&11>=dl),Hy=" ",$y=!1;function CA(t,e){switch(t){case"keyup":return mR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function ER(t,e){switch(t){case"compositionend":return DA(e);case"keypress":return e.which!==32?null:($y=!0,Hy);case"textInput":return t=e.data,t===Hy&&$y?null:t;default:return null}}function yR(t,e){if(Ua)return t==="compositionend"||!t2&&CA(t,e)?(t=wA(),Md=Jg=Ns=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IA&&e.locale!=="ko"?null:e.data;default:return null}}var _R={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_R[t.type]:e==="textarea"}function SA(t,e,r,n){aA(n),e=Eh(e,"onChange"),0<e.length&&(r=new Zg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var hl=null,Ll=null;function bR(t){UA(t,0)}function Ef(t){var e=Ha(t);if(ZT(e))return t}function vR(t,e){if(t==="change")return e}var NA=!1;if(Jn){var Jp;if(Jn){var Zp="oninput"in document;if(!Zp){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),Zp=typeof Gy.oninput=="function"}Jp=Zp}else Jp=!1;NA=Jp&&(!document.documentMode||9<document.documentMode)}function Wy(){hl&&(hl.detachEvent("onpropertychange",RA),Ll=hl=null)}function RA(t){if(t.propertyName==="value"&&Ef(Ll)){var e=[];SA(e,Ll,t,Wg(t)),cA(bR,e)}}function TR(t,e,r){t==="focusin"?(Wy(),hl=e,Ll=r,hl.attachEvent("onpropertychange",RA)):t==="focusout"&&Wy()}function AR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(Ll)}function xR(t,e){if(t==="click")return Ef(e)}function wR(t,e){if(t==="input"||t==="change")return Ef(e)}function IR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:IR;function Fl(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!zm.call(e,s)||!un(t[s],e[s]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yy(t,e){var r=Ky(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ky(r)}}function kA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PA(){for(var t=window,e=ch();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ch(t.document)}return e}function r2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CR(t){var e=PA(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&kA(r.ownerDocument.documentElement,r)){if(n!==null&&r2(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Yy(r,i);var a=Yy(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DR=Jn&&"documentMode"in document&&11>=document.documentMode,Va=null,c0=null,fl=null,d0=!1;function Qy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;d0||Va==null||Va!==ch(n)||(n=Va,"selectionStart"in n&&r2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fl&&Fl(fl,n)||(fl=n,n=Eh(c0,"onSelect"),0<n.length&&(e=new Zg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Va)))}function pd(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var qa={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},em={},OA={};Jn&&(OA=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function yf(t){if(em[t])return em[t];if(!qa[t])return t;var e=qa[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in OA)return em[t]=e[r];return t}var LA=yf("animationend"),FA=yf("animationiteration"),BA=yf("animationstart"),MA=yf("transitionend"),jA=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(t,e){jA.set(t,e),oa(e,[t])}for(var tm=0;tm<Xy.length;tm++){var rm=Xy[tm],SR=rm.toLowerCase(),NR=rm[0].toUpperCase()+rm.slice(1);ii(SR,"on"+NR)}ii(LA,"onAnimationEnd");ii(FA,"onAnimationIteration");ii(BA,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(MA,"onTransitionEnd");_o("onMouseEnter",["mouseout","mouseover"]);_o("onMouseLeave",["mouseout","mouseover"]);_o("onPointerEnter",["pointerout","pointerover"]);_o("onPointerLeave",["pointerout","pointerover"]);oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RR=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function Jy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,S3(n,e,void 0,t),t.currentTarget=null}function UA(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==i&&s.isPropagationStopped())break e;Jy(s,o,l),i=u}else for(a=0;a<n.length;a++){if(o=n[a],u=o.instance,l=o.currentTarget,o=o.listener,u!==i&&s.isPropagationStopped())break e;Jy(s,o,l),i=u}}}if(hh)throw t=a0,hh=!1,a0=null,t}function We(t,e){var r=e[g0];r===void 0&&(r=e[g0]=new Set);var n=t+"__bubble";r.has(n)||(VA(e,t,2,!1),r.add(n))}function nm(t,e,r){var n=0;e&&(n|=4),VA(r,t,n,e)}var md="_reactListening"+Math.random().toString(36).slice(2);function Bl(t){if(!t[md]){t[md]=!0,KT.forEach(function(r){r!=="selectionchange"&&(RR.has(r)||nm(r,!1,t),nm(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[md]||(e[md]=!0,nm("selectionchange",!1,e))}}function VA(t,e,r,n){switch(xA(e)){case 1:var s=z3;break;case 4:s=G3;break;default:s=Xg}r=s.bind(null,e,r,t),s=void 0,!i0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function sm(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;o!==null;){if(a=ki(o),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}o=o.parentNode}}n=n.return}cA(function(){var l=i,h=Wg(r),p=[];e:{var m=jA.get(t);if(m!==void 0){var E=Zg,_=t;switch(t){case"keypress":if(jd(r)===0)break e;case"keydown":case"keyup":E=oR;break;case"focusin":_="focus",E=Xp;break;case"focusout":_="blur",E=Xp;break;case"beforeblur":case"afterblur":E=Xp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Y3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=cR;break;case LA:case FA:case BA:E=J3;break;case MA:E=hR;break;case"scroll":E=W3;break;case"wheel":E=pR;break;case"copy":case"cut":case"paste":E=eR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=qy}var v=(e&4)!==0,A=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var b=l,T;b!==null;){T=b;var F=T.stateNode;if(T.tag===5&&F!==null&&(T=F,x!==null&&(F=Rl(b,x),F!=null&&v.push(Ml(b,F,T)))),A)break;b=b.return}0<v.length&&(m=new E(m,_,null,r,h),p.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",m&&r!==n0&&(_=r.relatedTarget||r.fromElement)&&(ki(_)||_[Zn]))break e;if((E||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,E?(_=r.relatedTarget||r.toElement,E=l,_=_?ki(_):null,_!==null&&(A=ua(_),_!==A||_.tag!==5&&_.tag!==6)&&(_=null)):(E=null,_=l),E!==_)){if(v=Uy,F="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=qy,F="onPointerLeave",x="onPointerEnter",b="pointer"),A=E==null?m:Ha(E),T=_==null?m:Ha(_),m=new v(F,b+"leave",E,r,h),m.target=A,m.relatedTarget=T,F=null,ki(h)===l&&(v=new v(x,b+"enter",_,r,h),v.target=T,v.relatedTarget=A,F=v),A=F,E&&_)t:{for(v=E,x=_,b=0,T=v;T;T=wa(T))b++;for(T=0,F=x;F;F=wa(F))T++;for(;0<b-T;)v=wa(v),b--;for(;0<T-b;)x=wa(x),T--;for(;b--;){if(v===x||x!==null&&v===x.alternate)break t;v=wa(v),x=wa(x)}v=null}else v=null;E!==null&&Zy(p,m,E,v,!1),_!==null&&A!==null&&Zy(p,A,_,v,!0)}}e:{if(m=l?Ha(l):window,E=m.nodeName&&m.nodeName.toLowerCase(),E==="select"||E==="input"&&m.type==="file")var j=vR;else if(zy(m))if(NA)j=wR;else{j=AR;var $=TR}else(E=m.nodeName)&&E.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=xR);if(j&&(j=j(t,l))){SA(p,j,r,h);break e}$&&$(t,m,l),t==="focusout"&&($=m._wrapperState)&&$.controlled&&m.type==="number"&&Jm(m,"number",m.value)}switch($=l?Ha(l):window,t){case"focusin":(zy($)||$.contentEditable==="true")&&(Va=$,c0=l,fl=null);break;case"focusout":fl=c0=Va=null;break;case"mousedown":d0=!0;break;case"contextmenu":case"mouseup":case"dragend":d0=!1,Qy(p,r,h);break;case"selectionchange":if(DR)break;case"keydown":case"keyup":Qy(p,r,h)}var D;if(t2)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ua?CA(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(IA&&r.locale!=="ko"&&(Ua||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ua&&(D=wA()):(Ns=h,Jg="value"in Ns?Ns.value:Ns.textContent,Ua=!0)),$=Eh(l,w),0<$.length&&(w=new Vy(w,t,null,r,h),p.push({event:w,listeners:$}),D?w.data=D:(D=DA(r),D!==null&&(w.data=D)))),(D=gR?ER(t,r):yR(t,r))&&(l=Eh(l,"onBeforeInput"),0<l.length&&(h=new Vy("onBeforeInput","beforeinput",null,r,h),p.push({event:h,listeners:l}),h.data=D))}UA(p,e)})}function Ml(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Eh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rl(t,r),i!=null&&n.unshift(Ml(t,i,s)),i=Rl(t,e),i!=null&&n.push(Ml(t,i,s))),t=t.return}return n}function wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zy(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,u=o.alternate,l=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&l!==null&&(o=l,s?(u=Rl(r,i),u!=null&&a.unshift(Ml(r,u,o))):s||(u=Rl(r,i),u!=null&&a.push(Ml(r,u,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var kR=/\r\n?/g,PR=/\u0000|\uFFFD/g;function e_(t){return(typeof t=="string"?t:""+t).replace(kR,`
`).replace(PR,"")}function gd(t,e,r){if(e=e_(e),e_(t)!==e&&r)throw Error(ne(425))}function yh(){}var h0=null,f0=null;function p0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var m0=typeof setTimeout=="function"?setTimeout:void 0,OR=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,LR=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(t){return t_.resolve(null).then(t).catch(FR)}:m0;function FR(t){setTimeout(function(){throw t})}function im(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ol(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ol(e)}function Vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),gn="__reactFiber$"+Ko,jl="__reactProps$"+Ko,Zn="__reactContainer$"+Ko,g0="__reactEvents$"+Ko,BR="__reactListeners$"+Ko,MR="__reactHandles$"+Ko;function ki(t){var e=t[gn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Zn]||r[gn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=r_(t);t!==null;){if(r=t[gn])return r;t=r_(t)}return e}t=r,r=t.parentNode}return null}function _c(t){return t=t[gn]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function _f(t){return t[jl]||null}var E0=[],$a=-1;function ai(t){return{current:t}}function Ke(t){0>$a||(t.current=E0[$a],E0[$a]=null,$a--)}function ze(t,e){$a++,E0[$a]=t.current,t.current=e}var ti={},Qt=ai(ti),br=ai(!1),Vi=ti;function bo(t,e){var r=t.type.contextTypes;if(!r)return ti;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vr(t){return t=t.childContextTypes,t!=null}function _h(){Ke(br),Ke(Qt)}function n_(t,e,r){if(Qt.current!==ti)throw Error(ne(168));ze(Qt,e),ze(br,r)}function qA(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ne(108,T3(t)||"Unknown",s));return ot({},r,n)}function bh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ti,Vi=Qt.current,ze(Qt,t),ze(br,br.current),!0}function s_(t,e,r){var n=t.stateNode;if(!n)throw Error(ne(169));r?(t=qA(t,e,Vi),n.__reactInternalMemoizedMergedChildContext=t,Ke(br),Ke(Qt),ze(Qt,t)):Ke(br),ze(br,r)}var Un=null,bf=!1,am=!1;function HA(t){Un===null?Un=[t]:Un.push(t)}function jR(t){bf=!0,HA(t)}function oi(){if(!am&&Un!==null){am=!0;var t=0,e=je;try{var r=Un;for(je=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Un=null,bf=!1}catch(s){throw Un!==null&&(Un=Un.slice(t+1)),pA(Kg,oi),s}finally{je=e,am=!1}}return null}var za=[],Ga=0,vh=null,Th=0,Mr=[],jr=0,qi=null,qn=1,Hn="";function Ai(t,e){za[Ga++]=Th,za[Ga++]=vh,vh=t,Th=e}function $A(t,e,r){Mr[jr++]=qn,Mr[jr++]=Hn,Mr[jr++]=qi,qi=t;var n=qn;t=Hn;var s=32-sn(n)-1;n&=~(1<<s),r+=1;var i=32-sn(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,qn=1<<32-sn(e)+s|r<<s|n,Hn=i+t}else qn=1<<i|r<<s|n,Hn=t}function n2(t){t.return!==null&&(Ai(t,1),$A(t,1,0))}function s2(t){for(;t===vh;)vh=za[--Ga],za[Ga]=null,Th=za[--Ga],za[Ga]=null;for(;t===qi;)qi=Mr[--jr],Mr[jr]=null,Hn=Mr[--jr],Mr[jr]=null,qn=Mr[--jr],Mr[jr]=null}var Sr=null,Cr=null,Ze=!1,tn=null;function zA(t,e){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function i_(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sr=t,Cr=Vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=qi!==null?{id:qn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Sr=t,Cr=null,!0):!1;default:return!1}}function y0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _0(t){if(Ze){var e=Cr;if(e){var r=e;if(!i_(t,e)){if(y0(t))throw Error(ne(418));e=Vs(r.nextSibling);var n=Sr;e&&i_(t,e)?zA(n,r):(t.flags=t.flags&-4097|2,Ze=!1,Sr=t)}}else{if(y0(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Ze=!1,Sr=t}}}function a_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sr=t}function Ed(t){if(t!==Sr)return!1;if(!Ze)return a_(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!p0(t.type,t.memoizedProps)),e&&(e=Cr)){if(y0(t))throw GA(),Error(ne(418));for(;e;)zA(t,e),e=Vs(e.nextSibling)}if(a_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Cr=Vs(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=Sr?Vs(t.stateNode.nextSibling):null;return!0}function GA(){for(var t=Cr;t;)t=Vs(t.nextSibling)}function vo(){Cr=Sr=null,Ze=!1}function i2(t){tn===null?tn=[t]:tn.push(t)}var UR=os.ReactCurrentBatchConfig;function Ou(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function yd(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o_(t){var e=t._init;return e(t._payload)}function WA(t){function e(x,b){if(t){var T=x.deletions;T===null?(x.deletions=[b],x.flags|=16):T.push(b)}}function r(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function s(x,b){return x=zs(x,b),x.index=0,x.sibling=null,x}function i(x,b,T){return x.index=T,t?(T=x.alternate,T!==null?(T=T.index,T<b?(x.flags|=2,b):T):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,b,T,F){return b===null||b.tag!==6?(b=fm(T,x.mode,F),b.return=x,b):(b=s(b,T),b.return=x,b)}function u(x,b,T,F){var j=T.type;return j===ja?h(x,b,T.props.children,F,T.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_s&&o_(j)===b.type)?(F=s(b,T.props),F.ref=Ou(x,b,T),F.return=x,F):(F=Gd(T.type,T.key,T.props,null,x.mode,F),F.ref=Ou(x,b,T),F.return=x,F)}function l(x,b,T,F){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=pm(T,x.mode,F),b.return=x,b):(b=s(b,T.children||[]),b.return=x,b)}function h(x,b,T,F,j){return b===null||b.tag!==7?(b=Mi(T,x.mode,F,j),b.return=x,b):(b=s(b,T),b.return=x,b)}function p(x,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fm(""+b,x.mode,T),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case od:return T=Gd(b.type,b.key,b.props,null,x.mode,T),T.ref=Ou(x,null,b),T.return=x,T;case Ma:return b=pm(b,x.mode,T),b.return=x,b;case _s:var F=b._init;return p(x,F(b._payload),T)}if(Ju(b)||Su(b))return b=Mi(b,x.mode,T,null),b.return=x,b;yd(x,b)}return null}function m(x,b,T,F){var j=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return j!==null?null:o(x,b,""+T,F);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case od:return T.key===j?u(x,b,T,F):null;case Ma:return T.key===j?l(x,b,T,F):null;case _s:return j=T._init,m(x,b,j(T._payload),F)}if(Ju(T)||Su(T))return j!==null?null:h(x,b,T,F,null);yd(x,T)}return null}function E(x,b,T,F,j){if(typeof F=="string"&&F!==""||typeof F=="number")return x=x.get(T)||null,o(b,x,""+F,j);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case od:return x=x.get(F.key===null?T:F.key)||null,u(b,x,F,j);case Ma:return x=x.get(F.key===null?T:F.key)||null,l(b,x,F,j);case _s:var $=F._init;return E(x,b,T,$(F._payload),j)}if(Ju(F)||Su(F))return x=x.get(T)||null,h(b,x,F,j,null);yd(b,F)}return null}function _(x,b,T,F){for(var j=null,$=null,D=b,w=b=0,k=null;D!==null&&w<T.length;w++){D.index>w?(k=D,D=null):k=D.sibling;var I=m(x,D,T[w],F);if(I===null){D===null&&(D=k);break}t&&D&&I.alternate===null&&e(x,D),b=i(I,b,w),$===null?j=I:$.sibling=I,$=I,D=k}if(w===T.length)return r(x,D),Ze&&Ai(x,w),j;if(D===null){for(;w<T.length;w++)D=p(x,T[w],F),D!==null&&(b=i(D,b,w),$===null?j=D:$.sibling=D,$=D);return Ze&&Ai(x,w),j}for(D=n(x,D);w<T.length;w++)k=E(D,x,w,T[w],F),k!==null&&(t&&k.alternate!==null&&D.delete(k.key===null?w:k.key),b=i(k,b,w),$===null?j=k:$.sibling=k,$=k);return t&&D.forEach(function(P){return e(x,P)}),Ze&&Ai(x,w),j}function v(x,b,T,F){var j=Su(T);if(typeof j!="function")throw Error(ne(150));if(T=j.call(T),T==null)throw Error(ne(151));for(var $=j=null,D=b,w=b=0,k=null,I=T.next();D!==null&&!I.done;w++,I=T.next()){D.index>w?(k=D,D=null):k=D.sibling;var P=m(x,D,I.value,F);if(P===null){D===null&&(D=k);break}t&&D&&P.alternate===null&&e(x,D),b=i(P,b,w),$===null?j=P:$.sibling=P,$=P,D=k}if(I.done)return r(x,D),Ze&&Ai(x,w),j;if(D===null){for(;!I.done;w++,I=T.next())I=p(x,I.value,F),I!==null&&(b=i(I,b,w),$===null?j=I:$.sibling=I,$=I);return Ze&&Ai(x,w),j}for(D=n(x,D);!I.done;w++,I=T.next())I=E(D,x,w,I.value,F),I!==null&&(t&&I.alternate!==null&&D.delete(I.key===null?w:I.key),b=i(I,b,w),$===null?j=I:$.sibling=I,$=I);return t&&D.forEach(function(O){return e(x,O)}),Ze&&Ai(x,w),j}function A(x,b,T,F){if(typeof T=="object"&&T!==null&&T.type===ja&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case od:e:{for(var j=T.key,$=b;$!==null;){if($.key===j){if(j=T.type,j===ja){if($.tag===7){r(x,$.sibling),b=s($,T.props.children),b.return=x,x=b;break e}}else if($.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_s&&o_(j)===$.type){r(x,$.sibling),b=s($,T.props),b.ref=Ou(x,$,T),b.return=x,x=b;break e}r(x,$);break}else e(x,$);$=$.sibling}T.type===ja?(b=Mi(T.props.children,x.mode,F,T.key),b.return=x,x=b):(F=Gd(T.type,T.key,T.props,null,x.mode,F),F.ref=Ou(x,b,T),F.return=x,x=F)}return a(x);case Ma:e:{for($=T.key;b!==null;){if(b.key===$)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){r(x,b.sibling),b=s(b,T.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else e(x,b);b=b.sibling}b=pm(T,x.mode,F),b.return=x,x=b}return a(x);case _s:return $=T._init,A(x,b,$(T._payload),F)}if(Ju(T))return _(x,b,T,F);if(Su(T))return v(x,b,T,F);yd(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(r(x,b.sibling),b=s(b,T),b.return=x,x=b):(r(x,b),b=fm(T,x.mode,F),b.return=x,x=b),a(x)):r(x,b)}return A}var To=WA(!0),KA=WA(!1),Ah=ai(null),xh=null,Wa=null,a2=null;function o2(){a2=Wa=xh=null}function u2(t){var e=Ah.current;Ke(Ah),t._currentValue=e}function b0(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ao(t,e){xh=t,a2=Wa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yr=!0),t.firstContext=null)}function $r(t){var e=t._currentValue;if(a2!==t)if(t={context:t,memoizedValue:e,next:null},Wa===null){if(xh===null)throw Error(ne(308));Wa=t,xh.dependencies={lanes:0,firstContext:t}}else Wa=Wa.next=t;return e}var Pi=null;function l2(t){Pi===null?Pi=[t]:Pi.push(t)}function YA(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,l2(e)):(r.next=s.next,s.next=r),e.interleaved=r,es(t,n)}function es(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var bs=!1;function c2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,es(t,r)}return s=n.interleaved,s===null?(e.next=e,l2(n)):(e.next=s.next,s.next=e),n.interleaved=e,es(t,r)}function Ud(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yg(t,r)}}function u_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function wh(t,e,r,n){var s=t.updateQueue;bs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,l=u.next;u.next=null,a===null?i=l:a.next=l,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;a=0,h=l=u=null,o=i;do{var m=o.lane,E=o.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:E,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var _=t,v=o;switch(m=e,E=r,v.tag){case 1:if(_=v.payload,typeof _=="function"){p=_.call(E,p,m);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,m=typeof _=="function"?_.call(E,p,m):_,m==null)break e;p=ot({},p,m);break e;case 2:bs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else E={eventTime:E,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(l=h=E,u=p):h=h.next=E,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=l,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$i|=a,t.lanes=a,t.memoizedState=p}}function l_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ne(191,s));s.call(n)}}}var bc={},An=ai(bc),Ul=ai(bc),Vl=ai(bc);function Oi(t){if(t===bc)throw Error(ne(174));return t}function d2(t,e){switch(ze(Vl,e),ze(Ul,t),ze(An,bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:e0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=e0(e,t)}Ke(An),ze(An,e)}function Ao(){Ke(An),Ke(Ul),Ke(Vl)}function XA(t){Oi(Vl.current);var e=Oi(An.current),r=e0(e,t.type);e!==r&&(ze(Ul,t),ze(An,r))}function h2(t){Ul.current===t&&(Ke(An),Ke(Ul))}var nt=ai(0);function Ih(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var om=[];function f2(){for(var t=0;t<om.length;t++)om[t]._workInProgressVersionPrimary=null;om.length=0}var Vd=os.ReactCurrentDispatcher,um=os.ReactCurrentBatchConfig,Hi=0,it=null,vt=null,Dt=null,Ch=!1,pl=!1,ql=0,VR=0;function Ht(){throw Error(ne(321))}function p2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!un(t[r],e[r]))return!1;return!0}function m2(t,e,r,n,s,i){if(Hi=i,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vd.current=t===null||t.memoizedState===null?zR:GR,t=r(n,s),pl){i=0;do{if(pl=!1,ql=0,25<=i)throw Error(ne(301));i+=1,Dt=vt=null,e.updateQueue=null,Vd.current=WR,t=r(n,s)}while(pl)}if(Vd.current=Dh,e=vt!==null&&vt.next!==null,Hi=0,Dt=vt=it=null,Ch=!1,e)throw Error(ne(300));return t}function g2(){var t=ql!==0;return ql=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?it.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function zr(){if(vt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=Dt===null?it.memoizedState:Dt.next;if(e!==null)Dt=e,vt=t;else{if(t===null)throw Error(ne(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Dt===null?it.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Hl(t,e){return typeof e=="function"?e(t):e}function lm(t){var e=zr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=vt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,u=null,l=i;do{var h=l.lane;if((Hi&h)===h)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var p={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=p,a=n):u=u.next=p,it.lanes|=h,$i|=h}l=l.next}while(l!==null&&l!==i);u===null?a=n:u.next=o,un(n,e.memoizedState)||(yr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,it.lanes|=i,$i|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function cm(t){var e=zr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);un(i,e.memoizedState)||(yr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function JA(){}function ZA(t,e){var r=it,n=zr(),s=e(),i=!un(n.memoizedState,s);if(i&&(n.memoizedState=s,yr=!0),n=n.queue,E2(rx.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Dt!==null&&Dt.memoizedState.tag&1){if(r.flags|=2048,$l(9,tx.bind(null,r,n,s,e),void 0,null),Nt===null)throw Error(ne(349));Hi&30||ex(r,e,s)}return s}function ex(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function tx(t,e,r,n){e.value=r,e.getSnapshot=n,nx(e)&&sx(t)}function rx(t,e,r){return r(function(){nx(e)&&sx(t)})}function nx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!un(t,r)}catch{return!0}}function sx(t){var e=es(t,1);e!==null&&an(e,t,1,-1)}function c_(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=$R.bind(null,it,t),[e.memoizedState,t]}function $l(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ix(){return zr().memoizedState}function qd(t,e,r,n){var s=pn();it.flags|=t,s.memoizedState=$l(1|e,r,void 0,n===void 0?null:n)}function vf(t,e,r,n){var s=zr();n=n===void 0?null:n;var i=void 0;if(vt!==null){var a=vt.memoizedState;if(i=a.destroy,n!==null&&p2(n,a.deps)){s.memoizedState=$l(e,r,i,n);return}}it.flags|=t,s.memoizedState=$l(1|e,r,i,n)}function d_(t,e){return qd(8390656,8,t,e)}function E2(t,e){return vf(2048,8,t,e)}function ax(t,e){return vf(4,2,t,e)}function ox(t,e){return vf(4,4,t,e)}function ux(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lx(t,e,r){return r=r!=null?r.concat([t]):null,vf(4,4,ux.bind(null,e,t),r)}function y2(){}function cx(t,e){var r=zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&p2(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function dx(t,e){var r=zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&p2(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function hx(t,e,r){return Hi&21?(un(r,e)||(r=EA(),it.lanes|=r,$i|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yr=!0),t.memoizedState=r)}function qR(t,e){var r=je;je=r!==0&&4>r?r:4,t(!0);var n=um.transition;um.transition={};try{t(!1),e()}finally{je=r,um.transition=n}}function fx(){return zr().memoizedState}function HR(t,e,r){var n=$s(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},px(t))mx(e,r);else if(r=YA(t,e,r,n),r!==null){var s=ir();an(r,t,n,s),gx(r,e,n)}}function $R(t,e,r){var n=$s(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(px(t))mx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,un(o,a)){var u=e.interleaved;u===null?(s.next=s,l2(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=YA(t,e,s,n),r!==null&&(s=ir(),an(r,t,n,s),gx(r,e,n))}}function px(t){var e=t.alternate;return t===it||e!==null&&e===it}function mx(t,e){pl=Ch=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function gx(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yg(t,r)}}var Dh={readContext:$r,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},zR={readContext:$r,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:$r,useEffect:d_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,qd(4194308,4,ux.bind(null,e,t),r)},useLayoutEffect:function(t,e){return qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return qd(4,2,t,e)},useMemo:function(t,e){var r=pn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=pn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=HR.bind(null,it,t),[n.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:c_,useDebugValue:y2,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=c_(!1),e=t[0];return t=qR.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=it,s=pn();if(Ze){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),Nt===null)throw Error(ne(349));Hi&30||ex(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,d_(rx.bind(null,n,i,t),[t]),n.flags|=2048,$l(9,tx.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=pn(),e=Nt.identifierPrefix;if(Ze){var r=Hn,n=qn;r=(n&~(1<<32-sn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ql++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=VR++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GR={readContext:$r,useCallback:cx,useContext:$r,useEffect:E2,useImperativeHandle:lx,useInsertionEffect:ax,useLayoutEffect:ox,useMemo:dx,useReducer:lm,useRef:ix,useState:function(){return lm(Hl)},useDebugValue:y2,useDeferredValue:function(t){var e=zr();return hx(e,vt.memoizedState,t)},useTransition:function(){var t=lm(Hl)[0],e=zr().memoizedState;return[t,e]},useMutableSource:JA,useSyncExternalStore:ZA,useId:fx,unstable_isNewReconciler:!1},WR={readContext:$r,useCallback:cx,useContext:$r,useEffect:E2,useImperativeHandle:lx,useInsertionEffect:ax,useLayoutEffect:ox,useMemo:dx,useReducer:cm,useRef:ix,useState:function(){return cm(Hl)},useDebugValue:y2,useDeferredValue:function(t){var e=zr();return vt===null?e.memoizedState=t:hx(e,vt.memoizedState,t)},useTransition:function(){var t=cm(Hl)[0],e=zr().memoizedState;return[t,e]},useMutableSource:JA,useSyncExternalStore:ZA,useId:fx,unstable_isNewReconciler:!1};function Jr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function v0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ot({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Tf={isMounted:function(t){return(t=t._reactInternals)?ua(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ir(),s=$s(t),i=Yn(n,s);i.payload=e,r!=null&&(i.callback=r),e=qs(t,i,s),e!==null&&(an(e,t,s,n),Ud(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ir(),s=$s(t),i=Yn(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=qs(t,i,s),e!==null&&(an(e,t,s,n),Ud(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ir(),n=$s(t),s=Yn(r,n);s.tag=2,e!=null&&(s.callback=e),e=qs(t,s,n),e!==null&&(an(e,t,n,r),Ud(e,t,n))}};function h_(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Fl(r,n)||!Fl(s,i):!0}function Ex(t,e,r){var n=!1,s=ti,i=e.contextType;return typeof i=="object"&&i!==null?i=$r(i):(s=vr(e)?Vi:Qt.current,n=e.contextTypes,i=(n=n!=null)?bo(t,s):ti),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function f_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Tf.enqueueReplaceState(e,e.state,null)}function T0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},c2(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$r(i):(i=vr(e)?Vi:Qt.current,s.context=bo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(v0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tf.enqueueReplaceState(s,s.state,null),wh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xo(t,e){try{var r="",n=e;do r+=v3(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dm(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function A0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var KR=typeof WeakMap=="function"?WeakMap:Map;function yx(t,e,r){r=Yn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Nh||(Nh=!0,P0=n),A0(t,e)},r}function _x(t,e,r){r=Yn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){A0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){A0(t,e),typeof n!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function p_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new KR;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=u4.bind(null,t,e,r),e.then(t,t))}function m_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function g_(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Yn(-1,1),e.tag=2,qs(r,e,1))),r.lanes|=1),t)}var YR=os.ReactCurrentOwner,yr=!1;function tr(t,e,r,n){e.child=t===null?KA(e,null,r,n):To(e,t.child,r,n)}function E_(t,e,r,n,s){r=r.render;var i=e.ref;return ao(e,s),n=m2(t,e,r,n,i,s),r=g2(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ts(t,e,s)):(Ze&&r&&n2(e),e.flags|=1,tr(t,e,n,s),e.child)}function y_(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!I2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,bx(t,e,i,n,s)):(t=Gd(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fl,r(a,n)&&t.ref===e.ref)return ts(t,e,s)}return e.flags|=1,t=zs(i,n),t.ref=e.ref,t.return=e,e.child=t}function bx(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Fl(i,n)&&t.ref===e.ref)if(yr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(yr=!0);else return e.lanes=t.lanes,ts(t,e,s)}return x0(t,e,r,n,s)}function vx(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Ya,xr),xr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Ya,xr),xr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ze(Ya,xr),xr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ze(Ya,xr),xr|=n;return tr(t,e,s,r),e.child}function Tx(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function x0(t,e,r,n,s){var i=vr(r)?Vi:Qt.current;return i=bo(e,i),ao(e,s),r=m2(t,e,r,n,i,s),n=g2(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ts(t,e,s)):(Ze&&n&&n2(e),e.flags|=1,tr(t,e,r,s),e.child)}function __(t,e,r,n,s){if(vr(r)){var i=!0;bh(e)}else i=!1;if(ao(e,s),e.stateNode===null)Hd(t,e),Ex(e,r,n),T0(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=$r(l):(l=vr(r)?Vi:Qt.current,l=bo(e,l));var h=r.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||u!==l)&&f_(e,a,n,l),bs=!1;var m=e.memoizedState;a.state=m,wh(e,n,a,s),u=e.memoizedState,o!==n||m!==u||br.current||bs?(typeof h=="function"&&(v0(e,r,h,n),u=e.memoizedState),(o=bs||h_(e,r,o,n,m,u,l))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=l,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,QA(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:Jr(e.type,o),a.props=l,p=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=$r(u):(u=vr(r)?Vi:Qt.current,u=bo(e,u));var E=r.getDerivedStateFromProps;(h=typeof E=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==u)&&f_(e,a,n,u),bs=!1,m=e.memoizedState,a.state=m,wh(e,n,a,s);var _=e.memoizedState;o!==p||m!==_||br.current||bs?(typeof E=="function"&&(v0(e,r,E,n),_=e.memoizedState),(l=bs||h_(e,r,l,n,m,_,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,_,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,_,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=_),a.props=n,a.state=_,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return w0(t,e,r,n,i,s)}function w0(t,e,r,n,s,i){Tx(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&s_(e,r,!1),ts(t,e,i);n=e.stateNode,YR.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=To(e,t.child,null,i),e.child=To(e,null,o,i)):tr(t,e,o,i),e.memoizedState=n.state,s&&s_(e,r,!0),e.child}function Ax(t){var e=t.stateNode;e.pendingContext?n_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n_(t,e.context,!1),d2(t,e.containerInfo)}function b_(t,e,r,n,s){return vo(),i2(s),e.flags|=256,tr(t,e,r,n),e.child}var I0={dehydrated:null,treeContext:null,retryLane:0};function C0(t){return{baseLanes:t,cachePool:null,transitions:null}}function xx(t,e,r){var n=e.pendingProps,s=nt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ze(nt,s&1),t===null)return _0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=wf(a,n,0,null),t=Mi(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=C0(r),e.memoizedState=I0,t):_2(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return QR(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=zs(s,u),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=zs(o,i):(i=Mi(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?C0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=I0,n}return i=t.child,t=i.sibling,n=zs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function _2(t,e){return e=wf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _d(t,e,r,n){return n!==null&&i2(n),To(e,t.child,null,r),t=_2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QR(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=dm(Error(ne(422))),_d(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=wf({mode:"visible",children:n.children},s,0,null),i=Mi(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&To(e,t.child,null,a),e.child.memoizedState=C0(a),e.memoizedState=I0,i);if(!(e.mode&1))return _d(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(ne(419)),n=dm(i,n,void 0),_d(t,e,a,n)}if(o=(a&t.childLanes)!==0,yr||o){if(n=Nt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,es(t,s),an(n,t,s,-1))}return w2(),n=dm(Error(ne(421))),_d(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=l4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cr=Vs(s.nextSibling),Sr=e,Ze=!0,tn=null,t!==null&&(Mr[jr++]=qn,Mr[jr++]=Hn,Mr[jr++]=qi,qn=t.id,Hn=t.overflow,qi=e),e=_2(e,n.children),e.flags|=4096,e)}function v_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),b0(t.return,e,r)}function hm(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function wx(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(tr(t,e,n.children,r),n=nt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v_(t,r,e);else if(t.tag===19)v_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ze(nt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Ih(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),hm(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}hm(e,!0,r,null,i);break;case"together":hm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ts(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),$i|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=zs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=zs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function XR(t,e,r){switch(e.tag){case 3:Ax(e),vo();break;case 5:XA(e);break;case 1:vr(e.type)&&bh(e);break;case 4:d2(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ze(Ah,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ze(nt,nt.current&1),e.flags|=128,null):r&e.child.childLanes?xx(t,e,r):(ze(nt,nt.current&1),t=ts(t,e,r),t!==null?t.sibling:null);ze(nt,nt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return wx(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(nt,nt.current),n)break;return null;case 22:case 23:return e.lanes=0,vx(t,e,r)}return ts(t,e,r)}var Ix,D0,Cx,Dx;Ix=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};D0=function(){};Cx=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Oi(An.current);var i=null;switch(r){case"input":s=Qm(t,s),n=Qm(t,n),i=[];break;case"select":s=ot({},s,{value:void 0}),n=ot({},n,{value:void 0}),i=[];break;case"textarea":s=Zm(t,s),n=Zm(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=yh)}t0(r,n);var a;r=null;for(l in s)if(!n.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var o=s[l];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Sl.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in n){var u=n[l];if(o=s!=null?s[l]:void 0,n.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&We("scroll",t),i||o===u||(i=[])):(i=i||[]).push(l,u))}r&&(i=i||[]).push("style",r);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};Dx=function(t,e,r,n){r!==n&&(e.flags|=4)};function Lu(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function JR(t,e,r){var n=e.pendingProps;switch(s2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return vr(e.type)&&_h(),$t(e),null;case 3:return n=e.stateNode,Ao(),Ke(br),Ke(Qt),f2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ed(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(F0(tn),tn=null))),D0(t,e),$t(e),null;case 5:h2(e);var s=Oi(Vl.current);if(r=e.type,t!==null&&e.stateNode!=null)Cx(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ne(166));return $t(e),null}if(t=Oi(An.current),Ed(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[gn]=e,n[jl]=i,t=(e.mode&1)!==0,r){case"dialog":We("cancel",n),We("close",n);break;case"iframe":case"object":case"embed":We("load",n);break;case"video":case"audio":for(s=0;s<el.length;s++)We(el[s],n);break;case"source":We("error",n);break;case"img":case"image":case"link":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"input":Ny(n,i),We("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},We("invalid",n);break;case"textarea":ky(n,i),We("invalid",n)}t0(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&gd(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&gd(n.textContent,o,t),s=["children",""+o]):Sl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&We("scroll",n)}switch(r){case"input":ud(n),Ry(n,i,!0);break;case"textarea":ud(n),Py(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rA(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[gn]=e,t[jl]=n,Ix(t,e,!1,!1),e.stateNode=t;e:{switch(a=r0(r,n),r){case"dialog":We("cancel",t),We("close",t),s=n;break;case"iframe":case"object":case"embed":We("load",t),s=n;break;case"video":case"audio":for(s=0;s<el.length;s++)We(el[s],t);s=n;break;case"source":We("error",t),s=n;break;case"img":case"image":case"link":We("error",t),We("load",t),s=n;break;case"details":We("toggle",t),s=n;break;case"input":Ny(t,n),s=Qm(t,n),We("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ot({},n,{value:void 0}),We("invalid",t);break;case"textarea":ky(t,n),s=Zm(t,n),We("invalid",t);break;default:s=n}t0(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var u=o[i];i==="style"?iA(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nA(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Nl(t,u):typeof u=="number"&&Nl(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&We("scroll",t):u!=null&&Hg(t,i,u,a))}switch(r){case"input":ud(t),Ry(t,n,!1);break;case"textarea":ud(t),Py(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ei(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ro(t,!!n.multiple,i,!1):n.defaultValue!=null&&ro(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)Dx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Oi(Vl.current),Oi(An.current),Ed(e)){if(n=e.stateNode,r=e.memoizedProps,n[gn]=e,(i=n.nodeValue!==r)&&(t=Sr,t!==null))switch(t.tag){case 3:gd(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gd(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gn]=e,e.stateNode=n}return $t(e),null;case 13:if(Ke(nt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Cr!==null&&e.mode&1&&!(e.flags&128))GA(),vo(),e.flags|=98560,i=!1;else if(i=Ed(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[gn]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),i=!1}else tn!==null&&(F0(tn),tn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?Tt===0&&(Tt=3):w2())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Ao(),D0(t,e),t===null&&Bl(e.stateNode.containerInfo),$t(e),null;case 10:return u2(e.type._context),$t(e),null;case 17:return vr(e.type)&&_h(),$t(e),null;case 19:if(Ke(nt),i=e.memoizedState,i===null)return $t(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Lu(i,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ih(t),a!==null){for(e.flags|=128,Lu(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ze(nt,nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ft()>wo&&(e.flags|=128,n=!0,Lu(i,!1),e.lanes=4194304)}else{if(!n)if(t=Ih(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Lu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ze)return $t(e),null}else 2*ft()-i.renderingStartTime>wo&&r!==1073741824&&(e.flags|=128,n=!0,Lu(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ft(),e.sibling=null,r=nt.current,ze(nt,n?r&1|2:r&1),e):($t(e),null);case 22:case 23:return x2(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?xr&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function ZR(t,e){switch(s2(e),e.tag){case 1:return vr(e.type)&&_h(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ao(),Ke(br),Ke(Qt),f2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return h2(e),null;case 13:if(Ke(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(nt),null;case 4:return Ao(),null;case 10:return u2(e.type._context),null;case 22:case 23:return x2(),null;case 24:return null;default:return null}}var bd=!1,Wt=!1,e4=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Ka(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ht(t,e,n)}else r.current=null}function S0(t,e,r){try{r()}catch(n){ht(t,e,n)}}var T_=!1;function t4(t,e){if(h0=mh,t=PA(),r2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,u=-1,l=0,h=0,p=t,m=null;t:for(;;){for(var E;p!==r||s!==0&&p.nodeType!==3||(o=a+s),p!==i||n!==0&&p.nodeType!==3||(u=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(E=p.firstChild)!==null;)m=p,p=E;for(;;){if(p===t)break t;if(m===r&&++l===s&&(o=a),m===i&&++h===n&&(u=a),(E=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=E}r=o===-1||u===-1?null:{start:o,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(f0={focusedElem:t,selectionRange:r},mh=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,A=_.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Jr(e.type,v),A);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(F){ht(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return _=T_,T_=!1,_}function ml(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&S0(e,r,i)}s=s.next}while(s!==n)}}function Af(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function N0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Sx(t){var e=t.alternate;e!==null&&(t.alternate=null,Sx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[jl],delete e[g0],delete e[BR],delete e[MR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nx(t){return t.tag===5||t.tag===3||t.tag===4}function A_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function R0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=yh));else if(n!==4&&(t=t.child,t!==null))for(R0(t,e,r),t=t.sibling;t!==null;)R0(t,e,r),t=t.sibling}function k0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(k0(t,e,r),t=t.sibling;t!==null;)k0(t,e,r),t=t.sibling}var Ot=null,Zr=!1;function ps(t,e,r){for(r=r.child;r!==null;)Rx(t,e,r),r=r.sibling}function Rx(t,e,r){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(mf,r)}catch{}switch(r.tag){case 5:Wt||Ka(r,e);case 6:var n=Ot,s=Zr;Ot=null,ps(t,e,r),Ot=n,Zr=s,Ot!==null&&(Zr?(t=Ot,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ot.removeChild(r.stateNode));break;case 18:Ot!==null&&(Zr?(t=Ot,r=r.stateNode,t.nodeType===8?im(t.parentNode,r):t.nodeType===1&&im(t,r),Ol(t)):im(Ot,r.stateNode));break;case 4:n=Ot,s=Zr,Ot=r.stateNode.containerInfo,Zr=!0,ps(t,e,r),Ot=n,Zr=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&S0(r,e,a),s=s.next}while(s!==n)}ps(t,e,r);break;case 1:if(!Wt&&(Ka(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ht(r,e,o)}ps(t,e,r);break;case 21:ps(t,e,r);break;case 22:r.mode&1?(Wt=(n=Wt)||r.memoizedState!==null,ps(t,e,r),Wt=n):ps(t,e,r);break;default:ps(t,e,r)}}function x_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new e4),e.forEach(function(n){var s=c4.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Yr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ot=o.stateNode,Zr=!1;break e;case 3:Ot=o.stateNode.containerInfo,Zr=!0;break e;case 4:Ot=o.stateNode.containerInfo,Zr=!0;break e}o=o.return}if(Ot===null)throw Error(ne(160));Rx(i,a,s),Ot=null,Zr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(l){ht(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kx(e,t),e=e.sibling}function kx(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yr(e,t),hn(t),n&4){try{ml(3,t,t.return),Af(3,t)}catch(v){ht(t,t.return,v)}try{ml(5,t,t.return)}catch(v){ht(t,t.return,v)}}break;case 1:Yr(e,t),hn(t),n&512&&r!==null&&Ka(r,r.return);break;case 5:if(Yr(e,t),hn(t),n&512&&r!==null&&Ka(r,r.return),t.flags&32){var s=t.stateNode;try{Nl(s,"")}catch(v){ht(t,t.return,v)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&eA(s,i),r0(o,a);var l=r0(o,i);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];h==="style"?iA(s,p):h==="dangerouslySetInnerHTML"?nA(s,p):h==="children"?Nl(s,p):Hg(s,h,p,l)}switch(o){case"input":Xm(s,i);break;case"textarea":tA(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?ro(s,!!i.multiple,E,!1):m!==!!i.multiple&&(i.defaultValue!=null?ro(s,!!i.multiple,i.defaultValue,!0):ro(s,!!i.multiple,i.multiple?[]:"",!1))}s[jl]=i}catch(v){ht(t,t.return,v)}}break;case 6:if(Yr(e,t),hn(t),n&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ht(t,t.return,v)}}break;case 3:if(Yr(e,t),hn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(v){ht(t,t.return,v)}break;case 4:Yr(e,t),hn(t);break;case 13:Yr(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(T2=ft())),n&4&&x_(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Wt=(l=Wt)||h,Yr(e,t),Wt=l):Yr(e,t),hn(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!h&&t.mode&1)for(fe=t,h=t.child;h!==null;){for(p=fe=h;fe!==null;){switch(m=fe,E=m.child,m.tag){case 0:case 11:case 14:case 15:ml(4,m,m.return);break;case 1:Ka(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){ht(n,r,v)}}break;case 5:Ka(m,m.return);break;case 22:if(m.memoizedState!==null){I_(p);continue}}E!==null?(E.return=m,fe=E):I_(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=sA("display",a))}catch(v){ht(t,t.return,v)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(v){ht(t,t.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Yr(e,t),hn(t),n&4&&x_(t);break;case 21:break;default:Yr(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Nx(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Nl(s,""),n.flags&=-33);var i=A_(t);k0(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=A_(t);R0(t,o,a);break;default:throw Error(ne(161))}}catch(u){ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r4(t,e,r){fe=t,Px(t)}function Px(t,e,r){for(var n=(t.mode&1)!==0;fe!==null;){var s=fe,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||bd;if(!a){var o=s.alternate,u=o!==null&&o.memoizedState!==null||Wt;o=bd;var l=Wt;if(bd=a,(Wt=u)&&!l)for(fe=s;fe!==null;)a=fe,u=a.child,a.tag===22&&a.memoizedState!==null?C_(s):u!==null?(u.return=a,fe=u):C_(s);for(;i!==null;)fe=i,Px(i),i=i.sibling;fe=s,bd=o,Wt=l}w_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,fe=i):w_(t)}}function w_(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||Af(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Wt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Jr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&l_(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}l_(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var h=l.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Ol(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Wt||e.flags&512&&N0(e)}catch(m){ht(e,e.return,m)}}if(e===t){fe=null;break}if(r=e.sibling,r!==null){r.return=e.return,fe=r;break}fe=e.return}}function I_(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,fe=r;break}fe=e.return}}function C_(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Af(4,e)}catch(u){ht(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){ht(e,s,u)}}var i=e.return;try{N0(e)}catch(u){ht(e,i,u)}break;case 5:var a=e.return;try{N0(e)}catch(u){ht(e,a,u)}}}catch(u){ht(e,e.return,u)}if(e===t){fe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,fe=o;break}fe=e.return}}var n4=Math.ceil,Sh=os.ReactCurrentDispatcher,b2=os.ReactCurrentOwner,qr=os.ReactCurrentBatchConfig,Oe=0,Nt=null,_t=null,Mt=0,xr=0,Ya=ai(0),Tt=0,zl=null,$i=0,xf=0,v2=0,gl=null,gr=null,T2=0,wo=1/0,Bn=null,Nh=!1,P0=null,Hs=null,vd=!1,Rs=null,Rh=0,El=0,O0=null,$d=-1,zd=0;function ir(){return Oe&6?ft():$d!==-1?$d:$d=ft()}function $s(t){return t.mode&1?Oe&2&&Mt!==0?Mt&-Mt:UR.transition!==null?(zd===0&&(zd=EA()),zd):(t=je,t!==0||(t=window.event,t=t===void 0?16:xA(t.type)),t):1}function an(t,e,r,n){if(50<El)throw El=0,O0=null,Error(ne(185));Ec(t,r,n),(!(Oe&2)||t!==Nt)&&(t===Nt&&(!(Oe&2)&&(xf|=r),Tt===4&&As(t,Mt)),Tr(t,n),r===1&&Oe===0&&!(e.mode&1)&&(wo=ft()+500,bf&&oi()))}function Tr(t,e){var r=t.callbackNode;U3(t,e);var n=ph(t,t===Nt?Mt:0);if(n===0)r!==null&&Fy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fy(r),e===1)t.tag===0?jR(D_.bind(null,t)):HA(D_.bind(null,t)),LR(function(){!(Oe&6)&&oi()}),r=null;else{switch(yA(n)){case 1:r=Kg;break;case 4:r=mA;break;case 16:r=fh;break;case 536870912:r=gA;break;default:r=fh}r=Vx(r,Ox.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ox(t,e){if($d=-1,zd=0,Oe&6)throw Error(ne(327));var r=t.callbackNode;if(oo()&&t.callbackNode!==r)return null;var n=ph(t,t===Nt?Mt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=kh(t,n);else{e=n;var s=Oe;Oe|=2;var i=Fx();(Nt!==t||Mt!==e)&&(Bn=null,wo=ft()+500,Bi(t,e));do try{a4();break}catch(o){Lx(t,o)}while(!0);o2(),Sh.current=i,Oe=s,_t!==null?e=0:(Nt=null,Mt=0,e=Tt)}if(e!==0){if(e===2&&(s=o0(t),s!==0&&(n=s,e=L0(t,s))),e===1)throw r=zl,Bi(t,0),As(t,n),Tr(t,ft()),r;if(e===6)As(t,n);else{if(s=t.current.alternate,!(n&30)&&!s4(s)&&(e=kh(t,n),e===2&&(i=o0(t),i!==0&&(n=i,e=L0(t,i))),e===1))throw r=zl,Bi(t,0),As(t,n),Tr(t,ft()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ne(345));case 2:xi(t,gr,Bn);break;case 3:if(As(t,n),(n&130023424)===n&&(e=T2+500-ft(),10<e)){if(ph(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){ir(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=m0(xi.bind(null,t,gr,Bn),e);break}xi(t,gr,Bn);break;case 4:if(As(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-sn(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=ft()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*n4(n/1960))-n,10<n){t.timeoutHandle=m0(xi.bind(null,t,gr,Bn),n);break}xi(t,gr,Bn);break;case 5:xi(t,gr,Bn);break;default:throw Error(ne(329))}}}return Tr(t,ft()),t.callbackNode===r?Ox.bind(null,t):null}function L0(t,e){var r=gl;return t.current.memoizedState.isDehydrated&&(Bi(t,e).flags|=256),t=kh(t,e),t!==2&&(e=gr,gr=r,e!==null&&F0(e)),t}function F0(t){gr===null?gr=t:gr.push.apply(gr,t)}function s4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~v2,e&=~xf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sn(e),n=1<<r;t[r]=-1,e&=~n}}function D_(t){if(Oe&6)throw Error(ne(327));oo();var e=ph(t,0);if(!(e&1))return Tr(t,ft()),null;var r=kh(t,e);if(t.tag!==0&&r===2){var n=o0(t);n!==0&&(e=n,r=L0(t,n))}if(r===1)throw r=zl,Bi(t,0),As(t,e),Tr(t,ft()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xi(t,gr,Bn),Tr(t,ft()),null}function A2(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(wo=ft()+500,bf&&oi())}}function zi(t){Rs!==null&&Rs.tag===0&&!(Oe&6)&&oo();var e=Oe;Oe|=1;var r=qr.transition,n=je;try{if(qr.transition=null,je=1,t)return t()}finally{je=n,qr.transition=r,Oe=e,!(Oe&6)&&oi()}}function x2(){xr=Ya.current,Ke(Ya)}function Bi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,OR(r)),_t!==null)for(r=_t.return;r!==null;){var n=r;switch(s2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_h();break;case 3:Ao(),Ke(br),Ke(Qt),f2();break;case 5:h2(n);break;case 4:Ao();break;case 13:Ke(nt);break;case 19:Ke(nt);break;case 10:u2(n.type._context);break;case 22:case 23:x2()}r=r.return}if(Nt=t,_t=t=zs(t.current,null),Mt=xr=e,Tt=0,zl=null,v2=xf=$i=0,gr=gl=null,Pi!==null){for(e=0;e<Pi.length;e++)if(r=Pi[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Pi=null}return t}function Lx(t,e){do{var r=_t;try{if(o2(),Vd.current=Dh,Ch){for(var n=it.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ch=!1}if(Hi=0,Dt=vt=it=null,pl=!1,ql=0,b2.current=null,r===null||r.return===null){Tt=1,zl=e,_t=null;break}e:{var i=t,a=r.return,o=r,u=e;if(e=Mt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,h=o,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=m_(a);if(E!==null){E.flags&=-257,g_(E,a,o,i,e),E.mode&1&&p_(i,l,e),e=E,u=l;var _=e.updateQueue;if(_===null){var v=new Set;v.add(u),e.updateQueue=v}else _.add(u);break e}else{if(!(e&1)){p_(i,l,e),w2();break e}u=Error(ne(426))}}else if(Ze&&o.mode&1){var A=m_(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),g_(A,a,o,i,e),i2(xo(u,o));break e}}i=u=xo(u,o),Tt!==4&&(Tt=2),gl===null?gl=[i]:gl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=yx(i,u,e);u_(i,x);break e;case 1:o=u;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Hs===null||!Hs.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var F=_x(i,o,e);u_(i,F);break e}}i=i.return}while(i!==null)}Mx(r)}catch(j){e=j,_t===r&&r!==null&&(_t=r=r.return);continue}break}while(!0)}function Fx(){var t=Sh.current;return Sh.current=Dh,t===null?Dh:t}function w2(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Nt===null||!($i&268435455)&&!(xf&268435455)||As(Nt,Mt)}function kh(t,e){var r=Oe;Oe|=2;var n=Fx();(Nt!==t||Mt!==e)&&(Bn=null,Bi(t,e));do try{i4();break}catch(s){Lx(t,s)}while(!0);if(o2(),Oe=r,Sh.current=n,_t!==null)throw Error(ne(261));return Nt=null,Mt=0,Tt}function i4(){for(;_t!==null;)Bx(_t)}function a4(){for(;_t!==null&&!R3();)Bx(_t)}function Bx(t){var e=Ux(t.alternate,t,xr);t.memoizedProps=t.pendingProps,e===null?Mx(t):_t=e,b2.current=null}function Mx(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ZR(r,e),r!==null){r.flags&=32767,_t=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,_t=null;return}}else if(r=JR(r,e,xr),r!==null){_t=r;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Tt===0&&(Tt=5)}function xi(t,e,r){var n=je,s=qr.transition;try{qr.transition=null,je=1,o4(t,e,r,n)}finally{qr.transition=s,je=n}return null}function o4(t,e,r,n){do oo();while(Rs!==null);if(Oe&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(V3(t,i),t===Nt&&(_t=Nt=null,Mt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||vd||(vd=!0,Vx(fh,function(){return oo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=qr.transition,qr.transition=null;var a=je;je=1;var o=Oe;Oe|=4,b2.current=null,t4(t,r),kx(r,t),CR(f0),mh=!!h0,f0=h0=null,t.current=r,r4(r),k3(),Oe=o,je=a,qr.transition=i}else t.current=r;if(vd&&(vd=!1,Rs=t,Rh=s),i=t.pendingLanes,i===0&&(Hs=null),L3(r.stateNode),Tr(t,ft()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Nh)throw Nh=!1,t=P0,P0=null,t;return Rh&1&&t.tag!==0&&oo(),i=t.pendingLanes,i&1?t===O0?El++:(El=0,O0=t):El=0,oi(),null}function oo(){if(Rs!==null){var t=yA(Rh),e=qr.transition,r=je;try{if(qr.transition=null,je=16>t?16:t,Rs===null)var n=!1;else{if(t=Rs,Rs=null,Rh=0,Oe&6)throw Error(ne(331));var s=Oe;for(Oe|=4,fe=t.current;fe!==null;){var i=fe,a=i.child;if(fe.flags&16){var o=i.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for(fe=l;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:ml(8,h,i)}var p=h.child;if(p!==null)p.return=h,fe=p;else for(;fe!==null;){h=fe;var m=h.sibling,E=h.return;if(Sx(h),h===l){fe=null;break}if(m!==null){m.return=E,fe=m;break}fe=E}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var A=v.sibling;v.sibling=null,v=A}while(v!==null)}}fe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,fe=a;else e:for(;fe!==null;){if(i=fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ml(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,fe=x;break e}fe=i.return}}var b=t.current;for(fe=b;fe!==null;){a=fe;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,fe=T;else e:for(a=b;fe!==null;){if(o=fe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Af(9,o)}}catch(j){ht(o,o.return,j)}if(o===a){fe=null;break e}var F=o.sibling;if(F!==null){F.return=o.return,fe=F;break e}fe=o.return}}if(Oe=s,oi(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(mf,t)}catch{}n=!0}return n}finally{je=r,qr.transition=e}}return!1}function S_(t,e,r){e=xo(r,e),e=yx(t,e,1),t=qs(t,e,1),e=ir(),t!==null&&(Ec(t,1,e),Tr(t,e))}function ht(t,e,r){if(t.tag===3)S_(t,t,r);else for(;e!==null;){if(e.tag===3){S_(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hs===null||!Hs.has(n))){t=xo(r,t),t=_x(e,t,1),e=qs(e,t,1),t=ir(),e!==null&&(Ec(e,1,t),Tr(e,t));break}}e=e.return}}function u4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ir(),t.pingedLanes|=t.suspendedLanes&r,Nt===t&&(Mt&r)===r&&(Tt===4||Tt===3&&(Mt&130023424)===Mt&&500>ft()-T2?Bi(t,0):v2|=r),Tr(t,e)}function jx(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var r=ir();t=es(t,e),t!==null&&(Ec(t,e,r),Tr(t,r))}function l4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),jx(t,r)}function c4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(e),jx(t,r)}var Ux;Ux=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||br.current)yr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return yr=!1,XR(t,e,r);yr=!!(t.flags&131072)}else yr=!1,Ze&&e.flags&1048576&&$A(e,Th,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Hd(t,e),t=e.pendingProps;var s=bo(e,Qt.current);ao(e,r),s=m2(null,e,n,t,s,r);var i=g2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vr(n)?(i=!0,bh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,c2(e),s.updater=Tf,e.stateNode=s,s._reactInternals=e,T0(e,n,t,r),e=w0(null,e,n,!0,i,r)):(e.tag=0,Ze&&i&&n2(e),tr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Hd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=h4(n),t=Jr(n,t),s){case 0:e=x0(null,e,n,t,r);break e;case 1:e=__(null,e,n,t,r);break e;case 11:e=E_(null,e,n,t,r);break e;case 14:e=y_(null,e,n,Jr(n.type,t),r);break e}throw Error(ne(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Jr(n,s),x0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Jr(n,s),__(t,e,n,s,r);case 3:e:{if(Ax(e),t===null)throw Error(ne(387));n=e.pendingProps,i=e.memoizedState,s=i.element,QA(t,e),wh(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xo(Error(ne(423)),e),e=b_(t,e,n,r,s);break e}else if(n!==s){s=xo(Error(ne(424)),e),e=b_(t,e,n,r,s);break e}else for(Cr=Vs(e.stateNode.containerInfo.firstChild),Sr=e,Ze=!0,tn=null,r=KA(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vo(),n===s){e=ts(t,e,r);break e}tr(t,e,n,r)}e=e.child}return e;case 5:return XA(e),t===null&&_0(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,p0(n,s)?a=null:i!==null&&p0(n,i)&&(e.flags|=32),Tx(t,e),tr(t,e,a,r),e.child;case 6:return t===null&&_0(e),null;case 13:return xx(t,e,r);case 4:return d2(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=To(e,null,n,r):tr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Jr(n,s),E_(t,e,n,s,r);case 7:return tr(t,e,e.pendingProps,r),e.child;case 8:return tr(t,e,e.pendingProps.children,r),e.child;case 12:return tr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ze(Ah,n._currentValue),n._currentValue=a,i!==null)if(un(i.value,a)){if(i.children===s.children&&!br.current){e=ts(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Yn(-1,r&-r),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),b0(i.return,r,e),o.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ne(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),b0(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}tr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ao(e,r),s=$r(s),n=n(s),e.flags|=1,tr(t,e,n,r),e.child;case 14:return n=e.type,s=Jr(n,e.pendingProps),s=Jr(n.type,s),y_(t,e,n,s,r);case 15:return bx(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Jr(n,s),Hd(t,e),e.tag=1,vr(n)?(t=!0,bh(e)):t=!1,ao(e,r),Ex(e,n,s),T0(e,n,s,r),w0(null,e,n,!0,t,r);case 19:return wx(t,e,r);case 22:return vx(t,e,r)}throw Error(ne(156,e.tag))};function Vx(t,e){return pA(t,e)}function d4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,r,n){return new d4(t,e,r,n)}function I2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h4(t){if(typeof t=="function")return I2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zg)return 11;if(t===Gg)return 14}return 2}function zs(t,e){var r=t.alternate;return r===null?(r=Ur(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Gd(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")I2(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ja:return Mi(r.children,s,i,e);case $g:a=8,s|=8;break;case Gm:return t=Ur(12,r,e,s|2),t.elementType=Gm,t.lanes=i,t;case Wm:return t=Ur(13,r,e,s),t.elementType=Wm,t.lanes=i,t;case Km:return t=Ur(19,r,e,s),t.elementType=Km,t.lanes=i,t;case XT:return wf(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YT:a=10;break e;case QT:a=9;break e;case zg:a=11;break e;case Gg:a=14;break e;case _s:a=16,n=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Ur(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Mi(t,e,r,n){return t=Ur(7,t,n,e),t.lanes=r,t}function wf(t,e,r,n){return t=Ur(22,t,n,e),t.elementType=XT,t.lanes=r,t.stateNode={isHidden:!1},t}function fm(t,e,r){return t=Ur(6,t,null,e),t.lanes=r,t}function pm(t,e,r){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function f4(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kp(0),this.expirationTimes=Kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kp(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function C2(t,e,r,n,s,i,a,o,u){return t=new f4(t,e,r,o,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ur(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},c2(i),t}function p4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ma,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function qx(t){if(!t)return ti;t=t._reactInternals;e:{if(ua(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(vr(r))return qA(t,r,e)}return e}function Hx(t,e,r,n,s,i,a,o,u){return t=C2(r,n,!0,t,s,i,a,o,u),t.context=qx(null),r=t.current,n=ir(),s=$s(r),i=Yn(n,s),i.callback=e??null,qs(r,i,s),t.current.lanes=s,Ec(t,s,n),Tr(t,n),t}function If(t,e,r,n){var s=e.current,i=ir(),a=$s(s);return r=qx(r),e.context===null?e.context=r:e.pendingContext=r,e=Yn(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qs(s,e,a),t!==null&&(an(t,s,a,i),Ud(t,s,a)),a}function Ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function D2(t,e){N_(t,e),(t=t.alternate)&&N_(t,e)}function m4(){return null}var $x=typeof reportError=="function"?reportError:function(t){console.error(t)};function S2(t){this._internalRoot=t}Cf.prototype.render=S2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));If(t,e,null,null)};Cf.prototype.unmount=S2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){If(null,t,null,null)}),e[Zn]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=vA();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ts.length&&e!==0&&e<Ts[r].priority;r++);Ts.splice(r,0,t),r===0&&AA(t)}};function N2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function R_(){}function g4(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var l=Ph(a);i.call(l)}}var a=Hx(e,n,t,0,null,!1,!1,"",R_);return t._reactRootContainer=a,t[Zn]=a.current,Bl(t.nodeType===8?t.parentNode:t),zi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var l=Ph(u);o.call(l)}}var u=C2(t,0,!1,null,null,!1,!1,"",R_);return t._reactRootContainer=u,t[Zn]=u.current,Bl(t.nodeType===8?t.parentNode:t),zi(function(){If(e,u,r,n)}),u}function Sf(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var u=Ph(a);o.call(u)}}If(e,a,t,s)}else a=g4(r,e,t,s,n);return Ph(a)}_A=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Zu(e.pendingLanes);r!==0&&(Yg(e,r|1),Tr(e,ft()),!(Oe&6)&&(wo=ft()+500,oi()))}break;case 13:zi(function(){var n=es(t,1);if(n!==null){var s=ir();an(n,t,1,s)}}),D2(t,1)}};Qg=function(t){if(t.tag===13){var e=es(t,134217728);if(e!==null){var r=ir();an(e,t,134217728,r)}D2(t,134217728)}};bA=function(t){if(t.tag===13){var e=$s(t),r=es(t,e);if(r!==null){var n=ir();an(r,t,e,n)}D2(t,e)}};vA=function(){return je};TA=function(t,e){var r=je;try{return je=t,e()}finally{je=r}};s0=function(t,e,r){switch(e){case"input":if(Xm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=_f(n);if(!s)throw Error(ne(90));ZT(n),Xm(n,s)}}}break;case"textarea":tA(t,r);break;case"select":e=r.value,e!=null&&ro(t,!!r.multiple,e,!1)}};uA=A2;lA=zi;var E4={usingClientEntryPoint:!1,Events:[_c,Ha,_f,aA,oA,A2]},Fu={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y4={bundleType:Fu.bundleType,version:Fu.version,rendererPackageName:Fu.rendererPackageName,rendererConfig:Fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hA(t),t===null?null:t.stateNode},findFiberByHostInstance:Fu.findFiberByHostInstance||m4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{mf=Td.inject(y4),Tn=Td}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E4;Pr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N2(e))throw Error(ne(200));return p4(t,e,null,r)};Pr.createRoot=function(t,e){if(!N2(t))throw Error(ne(299));var r=!1,n="",s=$x;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=C2(t,1,!1,null,null,r,!1,n,s),t[Zn]=e.current,Bl(t.nodeType===8?t.parentNode:t),new S2(e)};Pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=hA(e),t=t===null?null:t.stateNode,t};Pr.flushSync=function(t){return zi(t)};Pr.hydrate=function(t,e,r){if(!Df(e))throw Error(ne(200));return Sf(null,t,e,!0,r)};Pr.hydrateRoot=function(t,e,r){if(!N2(t))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=$x;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Hx(e,null,t,1,r??null,s,!1,i,a),t[Zn]=e.current,Bl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Cf(e)};Pr.render=function(t,e,r){if(!Df(e))throw Error(ne(200));return Sf(null,t,e,!1,r)};Pr.unmountComponentAtNode=function(t){if(!Df(t))throw Error(ne(40));return t._reactRootContainer?(zi(function(){Sf(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Pr.unstable_batchedUpdates=A2;Pr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Df(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Sf(t,e,r,!1,n)};Pr.version="18.3.1-next-f1338f8080-20240426";function zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zx)}catch(t){console.error(t)}}zx(),zT.exports=Pr;var _4=zT.exports,Gx,k_=_4;Gx=k_.createRoot,k_.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gl.apply(this,arguments)}var ks;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ks||(ks={}));const P_="popstate";function b4(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return B0("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Oh(s)}return T4(e,r,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v4(){return Math.random().toString(36).substr(2,8)}function O_(t,e){return{usr:t.state,key:t.key,idx:e}}function B0(t,e,r,n){return r===void 0&&(r=null),Gl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yo(e):e,{state:r,key:e&&e.key||n||v4()})}function Oh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function T4(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o=ks.Pop,u=null,l=h();l==null&&(l=0,a.replaceState(Gl({},a.state,{idx:l}),""));function h(){return(a.state||{idx:null}).idx}function p(){o=ks.Pop;let A=h(),x=A==null?null:A-l;l=A,u&&u({action:o,location:v.location,delta:x})}function m(A,x){o=ks.Push;let b=B0(v.location,A,x);l=h()+1;let T=O_(b,l),F=v.createHref(b);try{a.pushState(T,"",F)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(F)}i&&u&&u({action:o,location:v.location,delta:1})}function E(A,x){o=ks.Replace;let b=B0(v.location,A,x);l=h();let T=O_(b,l),F=v.createHref(b);a.replaceState(T,"",F),i&&u&&u({action:o,location:v.location,delta:0})}function _(A){let x=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof A=="string"?A:Oh(A);return b=b.replace(/ $/,"%20"),mt(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let v={get action(){return o},get location(){return t(s,a)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(P_,p),u=A,()=>{s.removeEventListener(P_,p),u=null}},createHref(A){return e(s,A)},createURL:_,encodeLocation(A){let x=_(A);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:E,go(A){return a.go(A)}};return v}var L_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(L_||(L_={}));function A4(t,e,r){return r===void 0&&(r="/"),x4(t,e,r,!1)}function x4(t,e,r,n){let s=typeof e=="string"?Yo(e):e,i=R2(s.pathname||"/",r);if(i==null)return null;let a=Kx(t);w4(a);let o=null;for(let u=0;o==null&&u<a.length;++u){let l=F4(i);o=O4(a[u],l,n)}return o}function Kx(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,o)=>{let u={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(mt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=Gs([n,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Kx(i.children,e,h,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:k4(l,i.index),routesMeta:h})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let u of Yx(i.path))s(i,a,u)}),e}function Yx(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Yx(n.join("/")),o=[];return o.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&o.push(...a),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function w4(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:P4(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const I4=/^:[\w-]+$/,C4=3,D4=2,S4=1,N4=10,R4=-2,F_=t=>t==="*";function k4(t,e){let r=t.split("/"),n=r.length;return r.some(F_)&&(n+=R4),e&&(n+=D4),r.filter(s=>!F_(s)).reduce((s,i)=>s+(I4.test(i)?C4:i===""?S4:N4),n)}function P4(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function O4(t,e,r){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let u=n[o],l=o===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=B_({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},h),m=u.route;if(!p&&l&&r&&!n[n.length-1].route.index&&(p=B_({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Gs([i,p.pathname]),pathnameBase:U4(Gs([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Gs([i,p.pathnameBase]))}return a}function B_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=L4(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((l,h,p)=>{let{paramName:m,isOptional:E}=h;if(m==="*"){let v=o[p]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const _=o[p];return E&&!_?l[m]=void 0:l[m]=(_||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:a,pattern:t}}function L4(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Wx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,u)=>(n.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function F4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function R2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function B4(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Yo(t):t;return{pathname:r?r.startsWith("/")?r:M4(r,e):e,search:V4(n),hash:q4(s)}}function M4(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function mm(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j4(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function k2(t,e){let r=j4(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function P2(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Yo(t):(s=Gl({},t),mt(!s.pathname||!s.pathname.includes("?"),mm("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),mm("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),mm("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let p=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}o=p>=0?e[p]:"/"}let u=B4(s,o),l=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(l||h)&&(u.pathname+="/"),u}const Gs=t=>t.join("/").replace(/\/\/+/g,"/"),U4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,q4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function H4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Qx=["post","put","patch","delete"];new Set(Qx);const $4=["get",...Qx];new Set($4);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wl.apply(this,arguments)}const O2=M.createContext(null),z4=M.createContext(null),ui=M.createContext(null),Nf=M.createContext(null),Sn=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Xx=M.createContext(null);function G4(t,e){let{relative:r}=e===void 0?{}:e;Qo()||mt(!1);let{basename:n,navigator:s}=M.useContext(ui),{hash:i,pathname:a,search:o}=Zx(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:Gs([n,a])),s.createHref({pathname:u,search:o,hash:i})}function Qo(){return M.useContext(Nf)!=null}function Xo(){return Qo()||mt(!1),M.useContext(Nf).location}function Jx(t){M.useContext(ui).static||M.useLayoutEffect(t)}function Jo(){let{isDataRoute:t}=M.useContext(Sn);return t?ok():W4()}function W4(){Qo()||mt(!1);let t=M.useContext(O2),{basename:e,future:r,navigator:n}=M.useContext(ui),{matches:s}=M.useContext(Sn),{pathname:i}=Xo(),a=JSON.stringify(k2(s,r.v7_relativeSplatPath)),o=M.useRef(!1);return Jx(()=>{o.current=!0}),M.useCallback(function(l,h){if(h===void 0&&(h={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let p=P2(l,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Gs([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,a,i,t])}const K4=M.createContext(null);function Y4(t){let e=M.useContext(Sn).outlet;return e&&M.createElement(K4.Provider,{value:t},e)}function L2(){let{matches:t}=M.useContext(Sn),e=t[t.length-1];return e?e.params:{}}function Zx(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=M.useContext(ui),{matches:s}=M.useContext(Sn),{pathname:i}=Xo(),a=JSON.stringify(k2(s,n.v7_relativeSplatPath));return M.useMemo(()=>P2(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function Q4(t,e){return X4(t,e)}function X4(t,e,r,n){Qo()||mt(!1);let{navigator:s}=M.useContext(ui),{matches:i}=M.useContext(Sn),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=Xo(),h;if(e){var p;let A=typeof e=="string"?Yo(e):e;u==="/"||(p=A.pathname)!=null&&p.startsWith(u)||mt(!1),h=A}else h=l;let m=h.pathname||"/",E=m;if(u!=="/"){let A=u.replace(/^\//,"").split("/");E="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let _=A4(t,{pathname:E}),v=rk(_&&_.map(A=>Object.assign({},A,{params:Object.assign({},o,A.params),pathname:Gs([u,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:Gs([u,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,r,n);return e&&v?M.createElement(Nf.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ks.Pop}},v):v}function J4(){let t=ak(),e=H4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),r?M.createElement("pre",{style:s},r):null,null)}const Z4=M.createElement(J4,null);class ek extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?M.createElement(Sn.Provider,{value:this.props.routeContext},M.createElement(Xx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tk(t){let{routeContext:e,match:r,children:n}=t,s=M.useContext(O2);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),M.createElement(Sn.Provider,{value:e},n)}function rk(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);h>=0||mt(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(l=h),p.route.id){let{loaderData:m,errors:E}=r,_=p.route.loader&&m[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||_){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((h,p,m)=>{let E,_=!1,v=null,A=null;r&&(E=o&&p.route.id?o[p.route.id]:void 0,v=p.route.errorElement||Z4,u&&(l<0&&m===0?(_=!0,A=null):l===m&&(_=!0,A=p.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,m+1)),b=()=>{let T;return E?T=v:_?T=A:p.route.Component?T=M.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=h,M.createElement(tk,{match:p,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:T})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?M.createElement(ek,{location:r.location,revalidation:r.revalidation,component:v,error:E,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var ew=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ew||{}),Lh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Lh||{});function nk(t){let e=M.useContext(O2);return e||mt(!1),e}function sk(t){let e=M.useContext(z4);return e||mt(!1),e}function ik(t){let e=M.useContext(Sn);return e||mt(!1),e}function tw(t){let e=ik(),r=e.matches[e.matches.length-1];return r.route.id||mt(!1),r.route.id}function ak(){var t;let e=M.useContext(Xx),r=sk(Lh.UseRouteError),n=tw(Lh.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function ok(){let{router:t}=nk(ew.UseNavigateStable),e=tw(Lh.UseNavigateStable),r=M.useRef(!1);return Jx(()=>{r.current=!0}),M.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Wl({fromRouteId:e},i)))},[t,e])}const M_={};function uk(t,e){M_[e]||(M_[e]=!0,console.warn(e))}const j_=(t,e,r)=>uk(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function lk(t,e){t!=null&&t.v7_startTransition||j_("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&j_("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function F2(t){let{to:e,replace:r,state:n,relative:s}=t;Qo()||mt(!1);let{future:i,static:a}=M.useContext(ui),{matches:o}=M.useContext(Sn),{pathname:u}=Xo(),l=Jo(),h=P2(e,k2(o,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(h);return M.useEffect(()=>l(JSON.parse(p),{replace:r,state:n,relative:s}),[l,p,s,r,n]),null}function rw(t){return Y4(t.context)}function er(t){mt(!1)}function ck(t){let{basename:e="/",children:r=null,location:n,navigationType:s=ks.Pop,navigator:i,static:a=!1,future:o}=t;Qo()&&mt(!1);let u=e.replace(/^\/*/,"/"),l=M.useMemo(()=>({basename:u,navigator:i,static:a,future:Wl({v7_relativeSplatPath:!1},o)}),[u,o,i,a]);typeof n=="string"&&(n=Yo(n));let{pathname:h="/",search:p="",hash:m="",state:E=null,key:_="default"}=n,v=M.useMemo(()=>{let A=R2(h,u);return A==null?null:{location:{pathname:A,search:p,hash:m,state:E,key:_},navigationType:s}},[u,h,p,m,E,_,s]);return v==null?null:M.createElement(ui.Provider,{value:l},M.createElement(Nf.Provider,{children:r,value:v}))}function dk(t){let{children:e,location:r}=t;return Q4(M0(e),r)}new Promise(()=>{});function M0(t,e){e===void 0&&(e=[]);let r=[];return M.Children.forEach(t,(n,s)=>{if(!M.isValidElement(n))return;let i=[...e,s];if(n.type===M.Fragment){r.push.apply(r,M0(n.props.children,i));return}n.type!==er&&mt(!1),!n.props.index||!n.props.children||mt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=M0(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function j0(){return j0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j0.apply(this,arguments)}function hk(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function fk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pk(t,e){return t.button===0&&(!e||e==="_self")&&!fk(t)}const mk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gk="6";try{window.__reactRouterVersion=gk}catch{}const Ek="startTransition",U_=u3[Ek];function yk(t){let{basename:e,children:r,future:n,window:s}=t,i=M.useRef();i.current==null&&(i.current=b4({window:s,v5Compat:!0}));let a=i.current,[o,u]=M.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},h=M.useCallback(p=>{l&&U_?U_(()=>u(p)):u(p)},[u,l]);return M.useLayoutEffect(()=>a.listen(h),[a,h]),M.useEffect(()=>lk(n),[n]),M.createElement(ck,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:a,future:n})}const _k=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=M.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:o,target:u,to:l,preventScrollReset:h,viewTransition:p}=e,m=hk(e,mk),{basename:E}=M.useContext(ui),_,v=!1;if(typeof l=="string"&&bk.test(l)&&(_=l,_k))try{let T=new URL(window.location.href),F=l.startsWith("//")?new URL(T.protocol+l):new URL(l),j=R2(F.pathname,E);F.origin===T.origin&&j!=null?l=j+F.search+F.hash:v=!0}catch{}let A=G4(l,{relative:s}),x=vk(l,{replace:a,state:o,target:u,preventScrollReset:h,relative:s,viewTransition:p});function b(T){n&&n(T),T.defaultPrevented||x(T)}return M.createElement("a",j0({},m,{href:_||A,onClick:v||i?n:b,ref:r,target:u}))});var V_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(V_||(V_={}));var q_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(q_||(q_={}));function vk(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,u=Jo(),l=Xo(),h=Zx(t,{relative:a});return M.useCallback(p=>{if(pk(p,r)){p.preventDefault();let m=n!==void 0?n:Oh(l)===Oh(h);u(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[l,u,h,n,s,r,t,i,a,o])}var Tk=typeof Element<"u",Ak=typeof Map=="function",xk=typeof Set=="function",wk=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Wd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,s;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!Wd(t[n],e[n]))return!1;return!0}var i;if(Ak&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;for(i=t.entries();!(n=i.next()).done;)if(!Wd(n.value[1],e.get(n.value[0])))return!1;return!0}if(xk&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(wk&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;if(Tk&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&t.$$typeof)&&!Wd(t[s[n]],e[s[n]]))return!1;return!0}return t!==t&&e!==e}var Ik=function(e,r){try{return Wd(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Ck=zo(Ik);var Dk=function(t,e,r,n,s,i,a,o){if(!t){var u;if(e===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,s,i,a,o],h=0;u=new Error(e.replace(/%s/g,function(){return l[h++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}},Sk=Dk;const H_=zo(Sk);var Nk=function(e,r,n,s){var i=n?n.call(s,e,r):void 0;if(i!==void 0)return!!i;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var a=Object.keys(e),o=Object.keys(r);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(r),l=0;l<a.length;l++){var h=a[l];if(!u(h))return!1;var p=e[h],m=r[h];if(i=n?n.call(s,p,m,h):void 0,i===!1||i===void 0&&p!==m)return!1}return!0};const Rk=zo(Nk);var nw=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(nw||{}),gm={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},$_=Object.values(nw),B2={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},kk=Object.entries(B2).reduce((t,[e,r])=>(t[r]=e,t),{}),rn="data-rh",uo={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},lo=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const n=t[r];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},Pk=t=>{let e=lo(t,"title");const r=lo(t,uo.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const n=lo(t,uo.DEFAULT_TITLE);return e||n||void 0},Ok=t=>lo(t,uo.ON_CHANGE_CLIENT_STATE)||(()=>{}),Em=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,n)=>({...r,...n}),{}),Lk=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const s=Object.keys(n);for(let i=0;i<s.length;i+=1){const o=s[i].toLowerCase();if(t.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),Fk=t=>console&&typeof console.warn=="function"&&console.warn(t),Bu=(t,e,r)=>{const n={};return r.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&Fk(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,i)=>{const a={};i.filter(u=>{let l;const h=Object.keys(u);for(let m=0;m<h.length;m+=1){const E=h[m],_=E.toLowerCase();e.indexOf(_)!==-1&&!(l==="rel"&&u[l].toLowerCase()==="canonical")&&!(_==="rel"&&u[_].toLowerCase()==="stylesheet")&&(l=_),e.indexOf(E)!==-1&&(E==="innerHTML"||E==="cssText"||E==="itemprop")&&(l=E)}if(!l||!u[l])return!1;const p=u[l].toLowerCase();return n[l]||(n[l]={}),a[l]||(a[l]={}),n[l][p]?!1:(a[l][p]=!0,!0)}).reverse().forEach(u=>s.push(u));const o=Object.keys(a);for(let u=0;u<o.length;u+=1){const l=o[u],h={...n[l],...a[l]};n[l]=h}return s},[]).reverse()},Bk=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},Mk=t=>({baseTag:Lk(["href"],t),bodyAttributes:Em("bodyAttributes",t),defer:lo(t,uo.DEFER),encode:lo(t,uo.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Em("htmlAttributes",t),linkTags:Bu("link",["rel","href"],t),metaTags:Bu("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Bu("noscript",["innerHTML"],t),onChangeClientState:Ok(t),scriptTags:Bu("script",["src","innerHTML"],t),styleTags:Bu("style",["cssText"],t),title:Pk(t),titleAttributes:Em("titleAttributes",t),prioritizeSeoTags:Bk(t,uo.PRIORITIZE_SEO_TAGS)}),sw=t=>Array.isArray(t)?t.join(""):t,jk=(t,e)=>{const r=Object.keys(t);for(let n=0;n<r.length;n+=1)if(e[r[n]]&&e[r[n]].includes(t[r[n]]))return!0;return!1},ym=(t,e)=>Array.isArray(t)?t.reduce((r,n)=>(jk(n,e)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:t,priority:[]},z_=(t,e)=>({...t,[e]:void 0}),Uk=["noscript","script","style"],U0=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),iw=t=>Object.keys(t).reduce((e,r)=>{const n=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${n}`:n},""),Vk=(t,e,r,n)=>{const s=iw(r),i=sw(e);return s?`<${t} ${rn}="true" ${s}>${U0(i,n)}</${t}>`:`<${t} ${rn}="true">${U0(i,n)}</${t}>`},qk=(t,e,r=!0)=>e.reduce((n,s)=>{const i=s,a=Object.keys(i).filter(l=>!(l==="innerHTML"||l==="cssText")).reduce((l,h)=>{const p=typeof i[h]>"u"?h:`${h}="${U0(i[h],r)}"`;return l?`${l} ${p}`:p},""),o=i.innerHTML||i.cssText||"",u=Uk.indexOf(t)===-1;return`${n}<${t} ${rn}="true" ${a}${u?"/>":`>${o}</${t}>`}`},""),aw=(t,e={})=>Object.keys(t).reduce((r,n)=>{const s=B2[n];return r[s||n]=t[n],r},e),Hk=(t,e,r)=>{const n={key:e,[rn]:!0},s=aw(r,n);return[yn.createElement("title",s,e)]},Kd=(t,e)=>e.map((r,n)=>{const s={key:n,[rn]:!0};return Object.keys(r).forEach(i=>{const o=B2[i]||i;if(o==="innerHTML"||o==="cssText"){const u=r.innerHTML||r.cssText;s.dangerouslySetInnerHTML={__html:u}}else s[o]=r[i]}),yn.createElement(t,s)}),Fr=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>Hk(t,e.title,e.titleAttributes),toString:()=>Vk(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>aw(e),toString:()=>iw(e)};default:return{toComponent:()=>Kd(t,e),toString:()=>qk(t,e,r)}}},$k=({metaTags:t,linkTags:e,scriptTags:r,encode:n})=>{const s=ym(t,gm.meta),i=ym(e,gm.link),a=ym(r,gm.script);return{priorityMethods:{toComponent:()=>[...Kd("meta",s.priority),...Kd("link",i.priority),...Kd("script",a.priority)],toString:()=>`${Fr("meta",s.priority,n)} ${Fr("link",i.priority,n)} ${Fr("script",a.priority,n)}`},metaTags:s.default,linkTags:i.default,scriptTags:a.default}},zk=t=>{const{baseTag:e,bodyAttributes:r,encode:n=!0,htmlAttributes:s,noscriptTags:i,styleTags:a,title:o="",titleAttributes:u,prioritizeSeoTags:l}=t;let{linkTags:h,metaTags:p,scriptTags:m}=t,E={toComponent:()=>{},toString:()=>""};return l&&({priorityMethods:E,linkTags:h,metaTags:p,scriptTags:m}=$k(t)),{priority:E,base:Fr("base",e,n),bodyAttributes:Fr("bodyAttributes",r,n),htmlAttributes:Fr("htmlAttributes",s,n),link:Fr("link",h,n),meta:Fr("meta",p,n),noscript:Fr("noscript",i,n),script:Fr("script",m,n),style:Fr("style",a,n),title:Fr("title",{title:o,titleAttributes:u},n)}},V0=zk,Ad=[],ow=!!(typeof window<"u"&&window.document&&window.document.createElement),q0=class{constructor(t,e){Pn(this,"instances",[]);Pn(this,"canUseDOM",ow);Pn(this,"context");Pn(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Ad:this.instances,add:t=>{(this.canUseDOM?Ad:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Ad:this.instances).indexOf(t);(this.canUseDOM?Ad:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=V0({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Gk={},uw=yn.createContext(Gk),Fi,lw=(Fi=class extends M.Component{constructor(r){super(r);Pn(this,"helmetData");this.helmetData=new q0(this.props.context||{},Fi.canUseDOM)}render(){return yn.createElement(uw.Provider,{value:this.helmetData.value},this.props.children)}},Pn(Fi,"canUseDOM",ow),Fi),Ia=(t,e)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${t}[${rn}]`),s=[].slice.call(n),i=[];let a;return e&&e.length&&e.forEach(o=>{const u=document.createElement(t);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l))if(l==="innerHTML")u.innerHTML=o.innerHTML;else if(l==="cssText")u.styleSheet?u.styleSheet.cssText=o.cssText:u.appendChild(document.createTextNode(o.cssText));else{const h=l,p=typeof o[h]>"u"?"":o[h];u.setAttribute(l,p)}u.setAttribute(rn,"true"),s.some((l,h)=>(a=h,u.isEqualNode(l)))?s.splice(a,1):i.push(u)}),s.forEach(o=>{var u;return(u=o.parentNode)==null?void 0:u.removeChild(o)}),i.forEach(o=>r.appendChild(o)),{oldTags:s,newTags:i}},H0=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const n=r.getAttribute(rn),s=n?n.split(","):[],i=[...s],a=Object.keys(e);for(const o of a){const u=e[o]||"";r.getAttribute(o)!==u&&r.setAttribute(o,u),s.indexOf(o)===-1&&s.push(o);const l=i.indexOf(o);l!==-1&&i.splice(l,1)}for(let o=i.length-1;o>=0;o-=1)r.removeAttribute(i[o]);s.length===i.length?r.removeAttribute(rn):r.getAttribute(rn)!==a.join(",")&&r.setAttribute(rn,a.join(","))},Wk=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=sw(t)),H0("title",e)},G_=(t,e)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:s,linkTags:i,metaTags:a,noscriptTags:o,onChangeClientState:u,scriptTags:l,styleTags:h,title:p,titleAttributes:m}=t;H0("body",n),H0("html",s),Wk(p,m);const E={baseTag:Ia("base",r),linkTags:Ia("link",i),metaTags:Ia("meta",a),noscriptTags:Ia("noscript",o),scriptTags:Ia("script",l),styleTags:Ia("style",h)},_={},v={};Object.keys(E).forEach(A=>{const{newTags:x,oldTags:b}=E[A];x.length&&(_[A]=x),b.length&&(v[A]=E[A].oldTags)}),e&&e(),u(t,_,v)},Mu=null,Kk=t=>{Mu&&cancelAnimationFrame(Mu),t.defer?Mu=requestAnimationFrame(()=>{G_(t,()=>{Mu=null})}):(G_(t),Mu=null)},Yk=Kk,W_=class extends M.Component{constructor(){super(...arguments);Pn(this,"rendered",!1)}shouldComponentUpdate(e){return!Rk(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:r}=this.props.context;let n=null;const s=Mk(e.get().map(i=>{const a={...i.props};return delete a.context,a}));lw.canUseDOM?Yk(s):V0&&(n=V0(s)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},$m,cw=($m=class extends M.Component{shouldComponentUpdate(t){return!Ck(z_(this.props,"helmetData"),z_(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,n){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,n)}]}}mapObjectTypeChildren(t,e,r,n){switch(t.type){case"title":return{...e,[t.type]:n,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(n=>{r={...r,[n]:t[n]}}),r}warnOnInvalidChildren(t,e){return H_($_.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${$_.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),H_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return yn.Children.forEach(t,n=>{if(!n||!n.props)return;const{children:s,...i}=n.props,a=Object.keys(i).reduce((u,l)=>(u[kk[l]||l]=i[l],u),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,s),o){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,a,s);break;default:e=this.mapObjectTypeChildren(n,e,a,s);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:n}=e;if(t&&(r=this.mapChildrenToProps(t,r)),n&&!(n instanceof q0)){const s=n;n=new q0(s.context,!0),delete r.helmetData}return n?yn.createElement(W_,{...r,context:n.value}):yn.createElement(uw.Consumer,null,s=>yn.createElement(W_,{...r,context:s}))}},Pn($m,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),$m),K_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},Qk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,u=s+2<t.length,l=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|o>>4;let m=(o&15)<<2|l>>6,E=l&63;u||(E=64,a||(m=64)),n.push(r[h],r[p],r[m],r[E])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const l=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||l==null||p==null)throw new Xk;const m=i<<2|o>>4;if(n.push(m),l!==64){const E=o<<4&240|l>>2;if(n.push(E),p!==64){const _=l<<6&192|p;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Xk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jk=function(t){const e=dw(t);return hw.encodeByteArray(e,!0)},fw=function(t){return Jk(t).replace(/\./g,"")},pw=function(t){try{return hw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=()=>Zk().__FIREBASE_DEFAULTS__,t6=()=>{if(typeof process>"u"||typeof K_>"u")return;const t=K_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},r6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pw(t[1]);return e&&JSON.parse(e)},Rf=()=>{try{return e6()||t6()||r6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},n6=t=>{var e,r;return(r=(e=Rf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},mw=()=>{var t;return(t=Rf())===null||t===void 0?void 0:t.config},gw=t=>{var e;return(e=Rf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function a6(){var t;const e=(t=Rf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function u6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function l6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c6(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ew(){return!a6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yw(){try{return typeof indexedDB=="object"}catch{return!1}}function d6(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="FirebaseError";class Nn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=h6,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?f6(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Nn(s,o,n)}}function f6(t,e){return t.replace(p6,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const p6=/\{\$([^}]+)}/g;function m6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kl(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(Y_(i)&&Y_(a)){if(!Kl(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Y_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function rl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function g6(t,e){const r=new E6(t,e);return r.subscribe.bind(r)}class E6{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");y6(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=_m),s.error===void 0&&(s.error=_m),s.complete===void 0&&(s.complete=_m);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function y6(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function _m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t){return t&&t._delegate?t._delegate:t}class Gi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new s6;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v6(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:b6(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b6(t){return t===wi?void 0:t}function v6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new _6(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const A6={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},x6=Ne.INFO,w6={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},I6=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=w6[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class M2{constructor(e){this.name=e,this._logLevel=x6,this._logHandler=I6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const C6=(t,e)=>e.some(r=>t instanceof r);let Q_,X_;function D6(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S6(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _w=new WeakMap,$0=new WeakMap,bw=new WeakMap,bm=new WeakMap,j2=new WeakMap;function N6(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(Ws(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&_w.set(r,t)}).catch(()=>{}),j2.set(e,t),e}function R6(t){if($0.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});$0.set(t,e)}let z0={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return $0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ws(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function k6(t){z0=t(z0)}function P6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(vm(this),e,...r);return bw.set(n,e.sort?e.sort():[e]),Ws(n)}:S6().includes(t)?function(...e){return t.apply(vm(this),e),Ws(_w.get(this))}:function(...e){return Ws(t.apply(vm(this),e))}}function O6(t){return typeof t=="function"?P6(t):(t instanceof IDBTransaction&&R6(t),C6(t,D6())?new Proxy(t,z0):t)}function Ws(t){if(t instanceof IDBRequest)return N6(t);if(bm.has(t))return bm.get(t);const e=O6(t);return e!==t&&(bm.set(t,e),j2.set(e,t)),e}const vm=t=>j2.get(t);function L6(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Ws(a);return n&&a.addEventListener("upgradeneeded",u=>{n(Ws(a.result),u.oldVersion,u.newVersion,Ws(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),o.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const F6=["get","getKey","getAll","getAllKeys","count"],B6=["put","add","delete","clear"],Tm=new Map;function J_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=B6.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||F6.includes(r)))return;const i=async function(a,...o){const u=this.transaction(a,s?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[r](...o),s&&u.done]))[0]};return Tm.set(e,i),i}k6(t=>({...t,get:(e,r,n)=>J_(e,r)||t.get(e,r,n),has:(e,r)=>!!J_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(j6(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function j6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const G0="@firebase/app",Z_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new M2("@firebase/app"),U6="@firebase/app-compat",V6="@firebase/analytics-compat",q6="@firebase/analytics",H6="@firebase/app-check-compat",$6="@firebase/app-check",z6="@firebase/auth",G6="@firebase/auth-compat",W6="@firebase/database",K6="@firebase/data-connect",Y6="@firebase/database-compat",Q6="@firebase/functions",X6="@firebase/functions-compat",J6="@firebase/installations",Z6="@firebase/installations-compat",eP="@firebase/messaging",tP="@firebase/messaging-compat",rP="@firebase/performance",nP="@firebase/performance-compat",sP="@firebase/remote-config",iP="@firebase/remote-config-compat",aP="@firebase/storage",oP="@firebase/storage-compat",uP="@firebase/firestore",lP="@firebase/vertexai-preview",cP="@firebase/firestore-compat",dP="firebase",hP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="[DEFAULT]",fP={[G0]:"fire-core",[U6]:"fire-core-compat",[q6]:"fire-analytics",[V6]:"fire-analytics-compat",[$6]:"fire-app-check",[H6]:"fire-app-check-compat",[z6]:"fire-auth",[G6]:"fire-auth-compat",[W6]:"fire-rtdb",[K6]:"fire-data-connect",[Y6]:"fire-rtdb-compat",[Q6]:"fire-fn",[X6]:"fire-fn-compat",[J6]:"fire-iid",[Z6]:"fire-iid-compat",[eP]:"fire-fcm",[tP]:"fire-fcm-compat",[rP]:"fire-perf",[nP]:"fire-perf-compat",[sP]:"fire-rc",[iP]:"fire-rc-compat",[aP]:"fire-gcs",[oP]:"fire-gcs-compat",[uP]:"fire-fst",[cP]:"fire-fst-compat",[lP]:"fire-vertex","fire-js":"fire-js",[dP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Map,pP=new Map,K0=new Map;function eb(t,e){try{t.container.addComponent(e)}catch(r){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Io(t){const e=t.name;if(K0.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;K0.set(e,t);for(const r of Fh.values())eb(r,t);for(const r of pP.values())eb(r,t);return!0}function U2(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new vc("app","Firebase",mP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=hP;function vw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:W0,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(r||(r=mw()),!r)throw Ks.create("no-options");const i=Fh.get(s);if(i){if(Kl(r,i.options)&&Kl(n,i.config))return i;throw Ks.create("duplicate-app",{appName:s})}const a=new T6(s);for(const u of K0.values())a.addComponent(u);const o=new gP(r,n,a);return Fh.set(s,o),o}function EP(t=W0){const e=Fh.get(t);if(!e&&t===W0&&mw())return vw();if(!e)throw Ks.create("no-app",{appName:t});return e}function Ys(t,e,r){var n;let s=(n=fP[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(o.join(" "));return}Io(new Gi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="firebase-heartbeat-database",_P=1,Yl="firebase-heartbeat-store";let Am=null;function Tw(){return Am||(Am=L6(yP,_P,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yl)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),Am}async function bP(t){try{const r=(await Tw()).transaction(Yl),n=await r.objectStore(Yl).get(Aw(t));return await r.done,n}catch(e){if(e instanceof Nn)rs.warn(e.message);else{const r=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rs.warn(r.message)}}}async function tb(t,e){try{const n=(await Tw()).transaction(Yl,"readwrite");await n.objectStore(Yl).put(e,Aw(t)),await n.done}catch(r){if(r instanceof Nn)rs.warn(r.message);else{const n=Ks.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});rs.warn(n.message)}}}function Aw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=1024,TP=30*24*60*60*1e3;class AP{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new wP(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=TP}),this._storage.overwrite(this._heartbeatsCache))}catch(n){rs.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=rb(),{heartbeatsToSend:n,unsentEntries:s}=xP(this._heartbeatsCache.heartbeats),i=fw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return rs.warn(r),""}}}function rb(){return new Date().toISOString().substring(0,10)}function xP(t,e=vP){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),nb(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),nb(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class wP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yw()?d6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await bP(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return tb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return tb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nb(t){return fw(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){Io(new Gi("platform-logger",e=>new M6(e),"PRIVATE")),Io(new Gi("heartbeat",e=>new AP(e),"PRIVATE")),Ys(G0,Z_,t),Ys(G0,Z_,"esm2017"),Ys("fire-js","")}IP("");var CP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(CP,DP,"app");function V2(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function xw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SP=xw,ww=new vc("auth","Firebase",xw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new M2("@firebase/auth");function NP(t,...e){Bh.logLevel<=Ne.WARN&&Bh.warn(`Auth (${Zo}): ${t}`,...e)}function Yd(t,...e){Bh.logLevel<=Ne.ERROR&&Bh.error(`Auth (${Zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw q2(t,...e)}function xn(t,...e){return q2(t,...e)}function Iw(t,e,r){const n=Object.assign(Object.assign({},SP()),{[e]:r});return new vc("auth","Firebase",n).create(e,{appName:t.name})}function Qn(t){return Iw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q2(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return ww.create(t,...e)}function Ae(t,e,...r){if(!t)throw q2(e,...r)}function $n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yd(e),new Error(e)}function ns(t,e){t||$n(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function RP(){return sb()==="http:"||sb()==="https:"}function sb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RP()||u6()||"connection"in navigator)?navigator.onLine:!0}function PP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,r){this.shortDelay=e,this.longDelay=r,ns(r>e,"Short delay should be less than long delay!"),this.isMobile=i6()||l6()}get(){return kP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t,e){ns(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new Ac(3e4,6e4);function li(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function us(t,e,r,n,s={}){return Dw(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Tc(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:u},i);return o6()||(l.referrerPolicy="no-referrer"),Cw.fetch()(Sw(t,t.config.apiHost,r,o),l)})}async function Dw(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},OP),e);try{const s=new BP(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw xd(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[u,l]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw xd(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw xd(t,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Iw(t,h,l);ln(t,h)}}catch(s){if(s instanceof Nn)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function xc(t,e,r,n,s={}){const i=await us(t,e,r,n,s);return"mfaPendingCredential"in i&&ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Sw(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?H2(t.config,s):`${t.config.apiScheme}://${s}`}function FP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(xn(this.auth,"network-request-failed")),LP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xd(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=xn(t,e,n);return s.customData._tokenResponse=r,s}function ib(t){return t!==void 0&&t.enterprise!==void 0}class MP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return FP(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function jP(t,e){return us(t,"GET","/v2/recaptchaConfig",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t,e){return us(t,"POST","/v1/accounts:delete",e)}async function Nw(t,e){return us(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VP(t,e=!1){const r=ut(t),n=await r.getIdToken(e),s=$2(n);Ae(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:yl(xm(s.auth_time)),issuedAtTime:yl(xm(s.iat)),expirationTime:yl(xm(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xm(t){return Number(t)*1e3}function $2(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{const s=pw(r);return s?JSON.parse(s):(Yd("Failed to decode base64 JWT payload"),null)}catch(s){return Yd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ab(t){const e=$2(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Nn&&qP(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function qP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Co(t,Nw(r,{idToken:n}));Ae(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Rw(i.providerUserInfo):[],o=zP(t.providerData,a),u=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=u?l:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Q0(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function $P(t){const e=ut(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zP(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Rw(t){return t.map(e=>{var{providerId:r}=e,n=V2(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e){const r=await Dw(t,{},async()=>{const n=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Sw(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Cw.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function WP(t,e){return us(t,"POST","/v2/accounts:revokeToken",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ab(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const r=ab(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await GP(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new co;return n&&(Ae(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Ae(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Ae(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=V2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Q0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Co(this,this.stsTokenManager.getToken(this.auth,e));return Ae(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return VP(this,e)}reload(){return $P(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Mh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Qn(this.auth));const e=await this.getIdToken();return await Co(this,UP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,u,l,h;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(s=r.email)!==null&&s!==void 0?s:void 0,E=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,_=(a=r.photoURL)!==null&&a!==void 0?a:void 0,v=(o=r.tenantId)!==null&&o!==void 0?o:void 0,A=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=r.createdAt)!==null&&l!==void 0?l:void 0,b=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:F,isAnonymous:j,providerData:$,stsTokenManager:D}=r;Ae(T&&D,e,"internal-error");const w=co.fromJSON(this.name,D);Ae(typeof T=="string",e,"internal-error"),ms(p,e.name),ms(m,e.name),Ae(typeof F=="boolean",e,"internal-error"),Ae(typeof j=="boolean",e,"internal-error"),ms(E,e.name),ms(_,e.name),ms(v,e.name),ms(A,e.name),ms(x,e.name),ms(b,e.name);const k=new zn({uid:T,auth:e,email:m,emailVerified:F,displayName:p,isAnonymous:j,photoURL:_,phoneNumber:E,tenantId:v,stsTokenManager:w,createdAt:x,lastLoginAt:b});return $&&Array.isArray($)&&(k.providerData=$.map(I=>Object.assign({},I))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,r,n=!1){const s=new co;s.updateFromServerResponse(r);const i=new zn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Mh(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Rw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new co;o.updateFromIdToken(n);const u=new zn({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),l={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Q0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;function Gn(t){ns(t instanceof Function,"Expected a class definition");let e=ob.get(t);return e?(ns(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ob.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}kw.type="NONE";const ub=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e,r){return`firebase:${t}:${e}:${r}`}class ho{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Qd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qd("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ho(Gn(ub),e,n);const s=(await Promise.all(r.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=s[0]||Gn(ub);const a=Qd(n,e.config.apiKey,e.name);let o=null;for(const l of r)try{const h=await l._get(a);if(h){const p=zn._fromJSON(e,h);l!==i&&(o=p),i=l;break}}catch{}const u=s.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ho(i,e,n):(i=u[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async l=>{if(l!==i)try{await l._remove(a)}catch{}})),new ho(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mw(e))return"Blackberry";if(jw(e))return"Webos";if(Ow(e))return"Safari";if((e.includes("chrome/")||Lw(e))&&!e.includes("edge/"))return"Chrome";if(Bw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Pw(t=xt()){return/firefox\//i.test(t)}function Ow(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lw(t=xt()){return/crios\//i.test(t)}function Fw(t=xt()){return/iemobile/i.test(t)}function Bw(t=xt()){return/android/i.test(t)}function Mw(t=xt()){return/blackberry/i.test(t)}function jw(t=xt()){return/webos/i.test(t)}function z2(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KP(t=xt()){var e;return z2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YP(){return c6()&&document.documentMode===10}function Uw(t=xt()){return z2(t)||Bw(t)||jw(t)||Mw(t)||/windows phone/i.test(t)||Fw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e=[]){let r;switch(t){case"Browser":r=lb(xt());break;case"Worker":r=`${lb(xt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const u=e(i);a(u)}catch(u){o(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e={}){return us(t,"GET","/v2/passwordPolicy",li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=6;class ZP{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:JP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cb(this),this.idTokenSubscription=new cb(this),this.beforeStateQueue=new QP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Gn(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Nw(this,{idToken:e}),n=await zn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(_n(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===o)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Qn(this));const r=e?ut(e):null;return r&&Ae(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XP(this),r=new ZP(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await WP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Gn(e)||this._popupRedirectResolver;Ae(r,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Gn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&NP(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function la(t){return ut(t)}class cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=g6(r=>this.observer=r)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t5(t){kf=t}function qw(t){return kf.loadJS(t)}function r5(){return kf.recaptchaEnterpriseScript}function n5(){return kf.gapiScript}function s5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const i5="recaptcha-enterprise",a5="NO_RECAPTCHA";class o5{constructor(e){this.type=i5,this.auth=la(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{jP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const l=new MP(u);return i.tenantId==null?i._agentRecaptchaConfig=l:i._tenantRecaptchaConfigs[i.tenantId]=l,a(l.siteKey)}}).catch(u=>{o(u)})})}function s(i,a,o){const u=window.grecaptcha;ib(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(l=>{a(l)}).catch(()=>{a(a5)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&ib(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=r5();u.length!==0&&(u+=o),qw(u).then(()=>{s(o,i,a)}).catch(l=>{a(l)})}}).catch(o=>{a(o)})})}}async function db(t,e,r,n=!1){const s=new o5(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function X0(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await db(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await db(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t,e){const r=U2(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Kl(i,e??{}))return s;ln(s,"already-initialized")}return r.initialize({options:e})}function l5(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function c5(t,e,r){const n=la(t);Ae(n._canInitEmulator,n,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Hw(e),{host:a,port:o}=d5(e),u=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),h5()}function Hw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d5(t){const e=Hw(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:hb(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:hb(a)}}}function hb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function h5(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,r){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}}async function f5(t,e){return us(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e){return xc(t,"POST","/v1/accounts:signInWithPassword",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}async function g5(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends G2{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Ql(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ql(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X0(e,r,"signInWithPassword",p5);case"emailLink":return m5(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X0(e,n,"signUpPassword",f5);case"emailLink":return g5(e,{idToken:r,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t,e){return xc(t,"POST","/v1/accounts:signInWithIdp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="http://localhost";class Wi extends G2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ln("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=V2(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Wi(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return fo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,fo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,fo(e,r)}buildRequest(){const e={requestUri:E5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Tc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _5(t){const e=tl(rl(t)).link,r=e?tl(rl(e)).deep_link_id:null,n=tl(rl(t)).deep_link_id;return(n?tl(rl(n)).link:null)||n||r||e||t}class W2{constructor(e){var r,n,s,i,a,o;const u=tl(rl(e)),l=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,p=y5((s=u.mode)!==null&&s!==void 0?s:null);Ae(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=_5(e);try{return new W2(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.providerId=eu.PROVIDER_ID}static credential(e,r){return Ql._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=W2.parseLink(r);return Ae(n,"argument-error"),Ql._fromEmailAndCode(e,n.code,n.tenantId)}}eu.PROVIDER_ID="password";eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends $w{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends wc{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Wi._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ws.credential(r,n)}catch{return null}}}ws.GOOGLE_SIGN_IN_METHOD="google.com";ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends wc{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends wc{constructor(){super("twitter.com")}static credential(e,r){return Wi._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Cs.credential(r,n)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(t,e){return xc(t,"POST","/v1/accounts:signUp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await zn._fromIdTokenResponse(e,n,s),a=fb(n);return new Ki({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=fb(n);return new Ki({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends Nn{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,jh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new jh(e,r,n,s)}}function zw(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jh._fromErrorAndOperation(t,i,e,n):i})}async function v5(t,e,r=!1){const n=await Co(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ki._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T5(t,e,r=!1){const{auth:n}=t;if(_n(n.app))return Promise.reject(Qn(n));const s="reauthenticate";try{const i=await Co(t,zw(n,s,e,t),r);Ae(i.idToken,n,"internal-error");const a=$2(i.idToken);Ae(a,n,"internal-error");const{sub:o}=a;return Ae(t.uid===o,n,"user-mismatch"),Ki._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ln(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(t,e,r=!1){if(_n(t.app))return Promise.reject(Qn(t));const n="signIn",s=await zw(t,n,e),i=await Ki._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function A5(t,e){return Gw(la(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(t){const e=la(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function x5(t,e,r){if(_n(t.app))return Promise.reject(Qn(t));const n=la(t),a=await X0(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",b5).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Ww(t),u}),o=await Ki._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function w5(t,e,r){return _n(t.app)?Promise.reject(Qn(t)):A5(ut(t),eu.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Ww(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(t,e){return us(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=ut(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await Co(n,I5(n.auth,i));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:u})=>u==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t,e){return ut(t).setPersistence(e)}function D5(t,e,r,n){return ut(t).onIdTokenChanged(e,r,n)}function S5(t,e,r){return ut(t).beforeAuthStateChanged(e,r)}function N5(t,e,r,n){return ut(t).onAuthStateChanged(e,r,n)}function R5(t){return ut(t).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=1e3,P5=10;class Yw extends Kw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);YP()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,P5):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},k5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const Qw=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends Kw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Xw.type="SESSION";const Jw=Xw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Pf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async l=>l(r.origin,i)),u=await O5(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,u)=>{const l=K2("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function F5(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function B5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function j5(){return Zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebaseLocalStorageDb",U5=1,Vh="firebaseLocalStorage",tI="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Of(t,e){return t.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function V5(){const t=indexedDB.deleteDatabase(eI);return new Ic(t).toPromise()}function J0(){const t=indexedDB.open(eI,U5);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Vh,{keyPath:tI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Vh)?e(n):(n.close(),await V5(),e(await J0()))})})}async function mb(t,e,r){const n=Of(t,!0).put({[tI]:e,value:r});return new Ic(n).toPromise()}async function q5(t,e){const r=Of(t,!1).get(e),n=await new Ic(r).toPromise();return n===void 0?null:n.value}function gb(t,e){const r=Of(t,!0).delete(e);return new Ic(r).toPromise()}const H5=800,$5=3;class rI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>$5)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(j5()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await B5(),!this.activeServiceWorker)return;this.sender=new L5(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J0();return await mb(e,Uh,"1"),await gb(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>mb(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>q5(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Of(s,!1).getAll();return new Ic(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rI.type="LOCAL";const z5=rI;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e){return e?Gn(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2 extends G2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return fo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function W5(t){return Gw(t.auth,new Y2(t),t.bypassAuthState)}function K5(t){const{auth:e,user:r}=t;return Ae(r,e,"internal-error"),T5(r,new Y2(t),t.bypassAuthState)}async function Y5(t){const{auth:e,user:r}=t;return Ae(r,e,"internal-error"),v5(r,new Y2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W5;case"linkViaPopup":case"linkViaRedirect":return Y5;case"reauthViaPopup":case"reauthViaRedirect":return K5;default:ln(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=new Ac(2e3,1e4);class Qa extends nI{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=K2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q5.get())};e()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="pendingRedirect",Xd=new Map;class J5 extends nI{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Xd.get(this.auth._key());if(!e){try{const n=await Z5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z5(t,e){const r=rO(e),n=tO(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function eO(t,e){Xd.set(t._key(),e)}function tO(t){return Gn(t._redirectPersistence)}function rO(t){return Qd(X5,t.config.apiKey,t.name)}async function nO(t,e,r=!1){if(_n(t.app))return Promise.reject(Qn(t));const n=la(t),s=G5(n,e),a=await new J5(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=10*60*1e3;class iO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aO(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!sI(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(xn(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eb(e))}saveEventToCache(e){this.cachedEventUids.add(Eb(e)),this.lastProcessedEventTime=Date.now()}}function Eb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t,e={}){return us(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lO=/^https?/;async function cO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oO(t);for(const r of e)try{if(dO(r))return}catch{}ln(t,"unauthorized-domain")}function dO(t){const e=Y0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!lO.test(r))return!1;if(uO.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=new Ac(3e4,6e4);function yb(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function fO(t){return new Promise((e,r)=>{var n,s,i;function a(){yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yb(),r(xn(t,"network-request-failed"))},timeout:hO.get()})}if(!((s=(n=wn().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)a();else{const o=s5("iframefcb");return wn()[o]=()=>{gapi.load?a():r(xn(t,"network-request-failed"))},qw(`${n5()}?onload=${o}`).catch(u=>r(u))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function pO(t){return Jd=Jd||fO(t),Jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=new Ac(5e3,15e3),gO="__/auth/iframe",EO="emulator/auth/iframe",yO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_O=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bO(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?H2(e,EO):`https://${t.config.authDomain}/${gO}`,n={apiKey:e.apiKey,appName:t.name,v:Zo},s=_O.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Tc(n).slice(1)}`}async function vO(t){const e=await pO(t),r=wn().gapi;return Ae(r,t,"internal-error"),e.open({where:document.body,url:bO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yO,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=xn(t,"network-request-failed"),o=wn().setTimeout(()=>{i(a)},mO.get());function u(){wn().clearTimeout(o),s(n)}n.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AO=500,xO=600,wO="_blank",IO="http://localhost";class _b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CO(t,e,r,n=AO,s=xO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const u=Object.assign(Object.assign({},TO),{width:n.toString(),height:s.toString(),top:i,left:a}),l=xt().toLowerCase();r&&(o=Lw(l)?wO:r),Pw(l)&&(e=e||IO,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[E,_])=>`${m}${E}=${_},`,"");if(KP(l)&&o!=="_self")return DO(e||"",o),new _b(null);const p=window.open(e||"",o,h);Ae(p,t,"popup-blocked");try{p.focus()}catch{}return new _b(p)}function DO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="__/auth/handler",NO="emulator/auth/handler",RO=encodeURIComponent("fac");async function bb(t,e,r,n,s,i){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Zo,eventId:s};if(e instanceof $w){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",m6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof wc){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await t._getAppCheckToken(),l=u?`#${RO}=${encodeURIComponent(u)}`:"";return`${kO(t)}?${Tc(o).slice(1)}${l}`}function kO({config:t}){return t.emulator?H2(t,NO):`https://${t.authDomain}/${SO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class PO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=nO,this._overrideRedirectResult=eO}async _openPopup(e,r,n,s){var i;ns((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await bb(e,r,n,Y0(),s);return CO(e,a,K2())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await bb(e,r,n,Y0(),s);return F5(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(ns(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await vO(e),n=new iO(e);return r.register("authEvent",s=>(Ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(wm,{type:wm},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wm];a!==void 0&&r(!!a),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=cO(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Uw()||Ow()||z2()}}const OO=PO;var vb="@firebase/auth",Tb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BO(t){Io(new Gi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Ae(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vw(t)},l=new e5(n,s,i,u);return l5(l,r),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Io(new Gi("auth-internal",e=>{const r=la(e.getProvider("auth").getImmediate());return(n=>new LO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(vb,Tb,FO(t)),Ys(vb,Tb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=5*60,jO=gw("authIdTokenMaxAge")||MO;let Ab=null;const UO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>jO)return;const s=r==null?void 0:r.token;Ab!==s&&(Ab=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VO(t=EP()){const e=U2(t,"auth");if(e.isInitialized())return e.getImmediate();const r=u5(t,{popupRedirectResolver:OO,persistence:[z5,Qw,Jw]}),n=gw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=UO(i.toString());S5(r,a,()=>a(r.currentUser)),D5(r,o=>a(o))}}const s=n6("auth");return s&&c5(r,`http://${s}`),r}function qO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}t5({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=xn("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",qO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BO("Browser");var xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,iI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function k(){}k.prototype=w.prototype,D.D=w.prototype,D.prototype=new k,D.prototype.constructor=D,D.C=function(I,P,O){for(var N=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)N[Ee-2]=arguments[Ee];return w.prototype[P].apply(I,N)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,w,k){k||(k=0);var I=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)I[P]=w.charCodeAt(k++)|w.charCodeAt(k++)<<8|w.charCodeAt(k++)<<16|w.charCodeAt(k++)<<24;else for(P=0;16>P;++P)I[P]=w[k++]|w[k++]<<8|w[k++]<<16|w[k++]<<24;w=D.g[0],k=D.g[1],P=D.g[2];var O=D.g[3],N=w+(O^k&(P^O))+I[0]+3614090360&4294967295;w=k+(N<<7&4294967295|N>>>25),N=O+(P^w&(k^P))+I[1]+3905402710&4294967295,O=w+(N<<12&4294967295|N>>>20),N=P+(k^O&(w^k))+I[2]+606105819&4294967295,P=O+(N<<17&4294967295|N>>>15),N=k+(w^P&(O^w))+I[3]+3250441966&4294967295,k=P+(N<<22&4294967295|N>>>10),N=w+(O^k&(P^O))+I[4]+4118548399&4294967295,w=k+(N<<7&4294967295|N>>>25),N=O+(P^w&(k^P))+I[5]+1200080426&4294967295,O=w+(N<<12&4294967295|N>>>20),N=P+(k^O&(w^k))+I[6]+2821735955&4294967295,P=O+(N<<17&4294967295|N>>>15),N=k+(w^P&(O^w))+I[7]+4249261313&4294967295,k=P+(N<<22&4294967295|N>>>10),N=w+(O^k&(P^O))+I[8]+1770035416&4294967295,w=k+(N<<7&4294967295|N>>>25),N=O+(P^w&(k^P))+I[9]+2336552879&4294967295,O=w+(N<<12&4294967295|N>>>20),N=P+(k^O&(w^k))+I[10]+4294925233&4294967295,P=O+(N<<17&4294967295|N>>>15),N=k+(w^P&(O^w))+I[11]+2304563134&4294967295,k=P+(N<<22&4294967295|N>>>10),N=w+(O^k&(P^O))+I[12]+1804603682&4294967295,w=k+(N<<7&4294967295|N>>>25),N=O+(P^w&(k^P))+I[13]+4254626195&4294967295,O=w+(N<<12&4294967295|N>>>20),N=P+(k^O&(w^k))+I[14]+2792965006&4294967295,P=O+(N<<17&4294967295|N>>>15),N=k+(w^P&(O^w))+I[15]+1236535329&4294967295,k=P+(N<<22&4294967295|N>>>10),N=w+(P^O&(k^P))+I[1]+4129170786&4294967295,w=k+(N<<5&4294967295|N>>>27),N=O+(k^P&(w^k))+I[6]+3225465664&4294967295,O=w+(N<<9&4294967295|N>>>23),N=P+(w^k&(O^w))+I[11]+643717713&4294967295,P=O+(N<<14&4294967295|N>>>18),N=k+(O^w&(P^O))+I[0]+3921069994&4294967295,k=P+(N<<20&4294967295|N>>>12),N=w+(P^O&(k^P))+I[5]+3593408605&4294967295,w=k+(N<<5&4294967295|N>>>27),N=O+(k^P&(w^k))+I[10]+38016083&4294967295,O=w+(N<<9&4294967295|N>>>23),N=P+(w^k&(O^w))+I[15]+3634488961&4294967295,P=O+(N<<14&4294967295|N>>>18),N=k+(O^w&(P^O))+I[4]+3889429448&4294967295,k=P+(N<<20&4294967295|N>>>12),N=w+(P^O&(k^P))+I[9]+568446438&4294967295,w=k+(N<<5&4294967295|N>>>27),N=O+(k^P&(w^k))+I[14]+3275163606&4294967295,O=w+(N<<9&4294967295|N>>>23),N=P+(w^k&(O^w))+I[3]+4107603335&4294967295,P=O+(N<<14&4294967295|N>>>18),N=k+(O^w&(P^O))+I[8]+1163531501&4294967295,k=P+(N<<20&4294967295|N>>>12),N=w+(P^O&(k^P))+I[13]+2850285829&4294967295,w=k+(N<<5&4294967295|N>>>27),N=O+(k^P&(w^k))+I[2]+4243563512&4294967295,O=w+(N<<9&4294967295|N>>>23),N=P+(w^k&(O^w))+I[7]+1735328473&4294967295,P=O+(N<<14&4294967295|N>>>18),N=k+(O^w&(P^O))+I[12]+2368359562&4294967295,k=P+(N<<20&4294967295|N>>>12),N=w+(k^P^O)+I[5]+4294588738&4294967295,w=k+(N<<4&4294967295|N>>>28),N=O+(w^k^P)+I[8]+2272392833&4294967295,O=w+(N<<11&4294967295|N>>>21),N=P+(O^w^k)+I[11]+1839030562&4294967295,P=O+(N<<16&4294967295|N>>>16),N=k+(P^O^w)+I[14]+4259657740&4294967295,k=P+(N<<23&4294967295|N>>>9),N=w+(k^P^O)+I[1]+2763975236&4294967295,w=k+(N<<4&4294967295|N>>>28),N=O+(w^k^P)+I[4]+1272893353&4294967295,O=w+(N<<11&4294967295|N>>>21),N=P+(O^w^k)+I[7]+4139469664&4294967295,P=O+(N<<16&4294967295|N>>>16),N=k+(P^O^w)+I[10]+3200236656&4294967295,k=P+(N<<23&4294967295|N>>>9),N=w+(k^P^O)+I[13]+681279174&4294967295,w=k+(N<<4&4294967295|N>>>28),N=O+(w^k^P)+I[0]+3936430074&4294967295,O=w+(N<<11&4294967295|N>>>21),N=P+(O^w^k)+I[3]+3572445317&4294967295,P=O+(N<<16&4294967295|N>>>16),N=k+(P^O^w)+I[6]+76029189&4294967295,k=P+(N<<23&4294967295|N>>>9),N=w+(k^P^O)+I[9]+3654602809&4294967295,w=k+(N<<4&4294967295|N>>>28),N=O+(w^k^P)+I[12]+3873151461&4294967295,O=w+(N<<11&4294967295|N>>>21),N=P+(O^w^k)+I[15]+530742520&4294967295,P=O+(N<<16&4294967295|N>>>16),N=k+(P^O^w)+I[2]+3299628645&4294967295,k=P+(N<<23&4294967295|N>>>9),N=w+(P^(k|~O))+I[0]+4096336452&4294967295,w=k+(N<<6&4294967295|N>>>26),N=O+(k^(w|~P))+I[7]+1126891415&4294967295,O=w+(N<<10&4294967295|N>>>22),N=P+(w^(O|~k))+I[14]+2878612391&4294967295,P=O+(N<<15&4294967295|N>>>17),N=k+(O^(P|~w))+I[5]+4237533241&4294967295,k=P+(N<<21&4294967295|N>>>11),N=w+(P^(k|~O))+I[12]+1700485571&4294967295,w=k+(N<<6&4294967295|N>>>26),N=O+(k^(w|~P))+I[3]+2399980690&4294967295,O=w+(N<<10&4294967295|N>>>22),N=P+(w^(O|~k))+I[10]+4293915773&4294967295,P=O+(N<<15&4294967295|N>>>17),N=k+(O^(P|~w))+I[1]+2240044497&4294967295,k=P+(N<<21&4294967295|N>>>11),N=w+(P^(k|~O))+I[8]+1873313359&4294967295,w=k+(N<<6&4294967295|N>>>26),N=O+(k^(w|~P))+I[15]+4264355552&4294967295,O=w+(N<<10&4294967295|N>>>22),N=P+(w^(O|~k))+I[6]+2734768916&4294967295,P=O+(N<<15&4294967295|N>>>17),N=k+(O^(P|~w))+I[13]+1309151649&4294967295,k=P+(N<<21&4294967295|N>>>11),N=w+(P^(k|~O))+I[4]+4149444226&4294967295,w=k+(N<<6&4294967295|N>>>26),N=O+(k^(w|~P))+I[11]+3174756917&4294967295,O=w+(N<<10&4294967295|N>>>22),N=P+(w^(O|~k))+I[2]+718787259&4294967295,P=O+(N<<15&4294967295|N>>>17),N=k+(O^(P|~w))+I[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+O&4294967295}n.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var k=w-this.blockSize,I=this.B,P=this.h,O=0;O<w;){if(P==0)for(;O<=k;)s(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<w;)if(I[P++]=D.charCodeAt(O++),P==this.blockSize){s(this,I),P=0;break}}else for(;O<w;)if(I[P++]=D[O++],P==this.blockSize){s(this,I),P=0;break}}this.h=P,this.o+=w},n.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var k=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=k&255,k/=256;for(this.u(D),D=Array(16),w=k=0;4>w;++w)for(var I=0;32>I;I+=8)D[k++]=this.g[w]>>>I&255;return D};function i(D,w){var k=o;return Object.prototype.hasOwnProperty.call(k,D)?k[D]:k[D]=w(D)}function a(D,w){this.h=w;for(var k=[],I=!0,P=D.length-1;0<=P;P--){var O=D[P]|0;I&&O==w||(k[P]=O,I=!1)}this.g=k}var o={};function u(D){return-128<=D&&128>D?i(D,function(w){return new a([w|0],0>w?-1:0)}):new a([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return A(l(-D));for(var w=[],k=1,I=0;D>=k;I++)w[I]=D/k|0,k*=4294967296;return new a(w,0)}function h(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return A(h(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(w,8)),I=p,P=0;P<D.length;P+=8){var O=Math.min(8,D.length-P),N=parseInt(D.substring(P,P+O),w);8>O?(O=l(Math.pow(w,O)),I=I.j(O).add(l(N))):(I=I.j(k),I=I.add(l(N)))}return I}var p=u(0),m=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(v(this))return-A(this).m();for(var D=0,w=1,k=0;k<this.g.length;k++){var I=this.i(k);D+=(0<=I?I:4294967296+I)*w,w*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(_(this))return"0";if(v(this))return"-"+A(this).toString(D);for(var w=l(Math.pow(D,6)),k=this,I="";;){var P=F(k,w).g;k=x(k,P.j(w));var O=((0<k.g.length?k.g[0]:k.h)>>>0).toString(D);if(k=P,_(k))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function _(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function v(D){return D.h==-1}t.l=function(D){return D=x(this,D),v(D)?-1:_(D)?0:1};function A(D){for(var w=D.g.length,k=[],I=0;I<w;I++)k[I]=~D.g[I];return new a(k,~D.h).add(m)}t.abs=function(){return v(this)?A(this):this},t.add=function(D){for(var w=Math.max(this.g.length,D.g.length),k=[],I=0,P=0;P<=w;P++){var O=I+(this.i(P)&65535)+(D.i(P)&65535),N=(O>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);I=N>>>16,O&=65535,N&=65535,k[P]=N<<16|O}return new a(k,k[k.length-1]&-2147483648?-1:0)};function x(D,w){return D.add(A(w))}t.j=function(D){if(_(this)||_(D))return p;if(v(this))return v(D)?A(this).j(A(D)):A(A(this).j(D));if(v(D))return A(this.j(A(D)));if(0>this.l(E)&&0>D.l(E))return l(this.m()*D.m());for(var w=this.g.length+D.g.length,k=[],I=0;I<2*w;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<D.g.length;P++){var O=this.i(I)>>>16,N=this.i(I)&65535,Ee=D.i(P)>>>16,ee=D.i(P)&65535;k[2*I+2*P]+=N*ee,b(k,2*I+2*P),k[2*I+2*P+1]+=O*ee,b(k,2*I+2*P+1),k[2*I+2*P+1]+=N*Ee,b(k,2*I+2*P+1),k[2*I+2*P+2]+=O*Ee,b(k,2*I+2*P+2)}for(I=0;I<w;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=w;I<2*w;I++)k[I]=0;return new a(k,0)};function b(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function T(D,w){this.g=D,this.h=w}function F(D,w){if(_(w))throw Error("division by zero");if(_(D))return new T(p,p);if(v(D))return w=F(A(D),w),new T(A(w.g),A(w.h));if(v(w))return w=F(D,A(w)),new T(A(w.g),w.h);if(30<D.g.length){if(v(D)||v(w))throw Error("slowDivide_ only works with positive integers.");for(var k=m,I=w;0>=I.l(D);)k=j(k),I=j(I);var P=$(k,1),O=$(I,1);for(I=$(I,2),k=$(k,2);!_(I);){var N=O.add(I);0>=N.l(D)&&(P=P.add(k),O=N),I=$(I,1),k=$(k,1)}return w=x(D,P.j(w)),new T(P,w)}for(P=p;0<=D.l(w);){for(k=Math.max(1,Math.floor(D.m()/w.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=l(k),N=O.j(w);v(N)||0<N.l(D);)k-=I,O=l(k),N=O.j(w);_(O)&&(O=m),P=P.add(O),D=x(D,N)}return new T(P,D)}t.A=function(D){return F(this,D).h},t.and=function(D){for(var w=Math.max(this.g.length,D.g.length),k=[],I=0;I<w;I++)k[I]=this.i(I)&D.i(I);return new a(k,this.h&D.h)},t.or=function(D){for(var w=Math.max(this.g.length,D.g.length),k=[],I=0;I<w;I++)k[I]=this.i(I)|D.i(I);return new a(k,this.h|D.h)},t.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),k=[],I=0;I<w;I++)k[I]=this.i(I)^D.i(I);return new a(k,this.h^D.h)};function j(D){for(var w=D.g.length+1,k=[],I=0;I<w;I++)k[I]=D.i(I)<<1|D.i(I-1)>>>31;return new a(k,D.h)}function $(D,w){var k=w>>5;w%=32;for(var I=D.g.length-k,P=[],O=0;O<I;O++)P[O]=0<w?D.i(O+k)>>>w|D.i(O+k+1)<<32-w:D.i(O+k);return new a(P,D.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,iI=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=h,ji=a}).apply(typeof xb<"u"?xb:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aI,nl,oI,Zd,Z0,uI,lI,cI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,y){return c==Array.prototype||c==Object.prototype||(c[g]=y.value),c};function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var g=0;g<c.length;++g){var y=c[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var n=r(this);function s(c,g){if(g)e:{var y=n;c=c.split(".");for(var C=0;C<c.length-1;C++){var H=c[C];if(!(H in y))break e;y=y[H]}c=c[c.length-1],C=y[c],g=g(C),g!=C&&g!=null&&e(y,c,{configurable:!0,writable:!0,value:g})}}function i(c,g){c instanceof String&&(c+="");var y=0,C=!1,H={next:function(){if(!C&&y<c.length){var W=y++;return{value:g(W,c[W]),done:!1}}return C=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(c){return c||function(){return i(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function u(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function l(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function h(c,g,y){return c.call.apply(c.bind,arguments)}function p(c,g,y){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,C),c.apply(g,H)}}return function(){return c.apply(g,arguments)}}function m(c,g,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function E(c,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function _(c,g){function y(){}y.prototype=g.prototype,c.aa=g.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(C,H,W){for(var ae=Array(arguments.length-2),He=2;He<arguments.length;He++)ae[He-2]=arguments[He];return g.prototype[H].apply(C,ae)}}function v(c){const g=c.length;if(0<g){const y=Array(g);for(let C=0;C<g;C++)y[C]=c[C];return y}return[]}function A(c,g){for(let y=1;y<arguments.length;y++){const C=arguments[y];if(u(C)){const H=c.length||0,W=C.length||0;c.length=H+W;for(let ae=0;ae<W;ae++)c[H+ae]=C[ae]}else c.push(C)}}class x{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=o.navigator;return c&&(c=c.userAgent)?c:""}function F(c){return F[" "](c),c}F[" "]=function(){};var j=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function $(c,g,y){for(const C in c)g.call(y,c[C],C,c)}function D(c,g){for(const y in c)g.call(void 0,c[y],y,c)}function w(c){const g={};for(const y in c)g[y]=c[y];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,g){let y,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(y in C)c[y]=C[y];for(let W=0;W<k.length;W++)y=k[W],Object.prototype.hasOwnProperty.call(C,y)&&(c[y]=C[y])}}function P(c){var g=1;c=c.split(":");const y=[];for(;0<g&&c.length;)y.push(c.shift()),g--;return c.length&&y.push(c.join(":")),y}function O(c){o.setTimeout(()=>{throw c},0)}function N(){var c=B;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Ee{constructor(){this.h=this.g=null}add(g,y){const C=ee.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var ee=new x(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let me,Z=!1,B=new Ee,V=()=>{const c=o.Promise.resolve(void 0);me=()=>{c.then(Y)}};var Y=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(y){O(y)}var g=ee;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}Z=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var G=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,g),o.removeEventListener("test",y,g)}catch{}return c}();function le(c,g){if(U.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(j){e:{try{F(g.nodeName);var H=!0;break e}catch{}H=!1}H||(g=null)}}else y=="mouseover"?g=c.fromElement:y=="mouseout"&&(g=c.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ue[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&le.aa.h.call(this)}}_(le,U);var ue={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),Te=0;function $e(c,g,y,C,H){this.listener=c,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=H,this.key=++Te,this.da=this.fa=!1}function ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ye(c){this.src=c,this.g={},this.h=0}Ye.prototype.add=function(c,g,y,C,H){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ae=dr(c,g,C,H);return-1<ae?(g=c[ae],y||(g.fa=!1)):(g=new $e(g,this.src,W,!!C,H),g.fa=y,c.push(g)),g};function cr(c,g){var y=g.type;if(y in c.g){var C=c.g[y],H=Array.prototype.indexOf.call(C,g,void 0),W;(W=0<=H)&&Array.prototype.splice.call(C,H,1),W&&(ct(g),c.g[y].length==0&&(delete c.g[y],c.h--))}}function dr(c,g,y,C){for(var H=0;H<c.length;++H){var W=c[H];if(!W.da&&W.listener==g&&W.capture==!!y&&W.ha==C)return H}return-1}var Lr="closure_lm_"+(1e6*Math.random()|0),dn={};function mi(c,g,y,C,H){if(Array.isArray(g)){for(var W=0;W<g.length;W++)mi(c,g[W],y,C,H);return null}return y=DE(y),c&&c[oe]?c.K(g,y,l(C)?!!C.capture:!!C,H):mN(c,g,y,!1,C,H)}function mN(c,g,y,C,H,W){if(!g)throw Error("Invalid event type");var ae=l(H)?!!H.capture:!!H,He=wp(c);if(He||(c[Lr]=He=new Ye(c)),y=He.add(g,y,C,ae,W),y.proxy)return y;if(C=gN(),y.proxy=C,C.src=c,C.listener=y,c.addEventListener)G||(H=ae),H===void 0&&(H=!1),c.addEventListener(g.toString(),C,H);else if(c.attachEvent)c.attachEvent(CE(g.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function gN(){function c(y){return g.call(c.src,c.listener,y)}const g=EN;return c}function IE(c,g,y,C,H){if(Array.isArray(g))for(var W=0;W<g.length;W++)IE(c,g[W],y,C,H);else C=l(C)?!!C.capture:!!C,y=DE(y),c&&c[oe]?(c=c.i,g=String(g).toString(),g in c.g&&(W=c.g[g],y=dr(W,y,C,H),-1<y&&(ct(W[y]),Array.prototype.splice.call(W,y,1),W.length==0&&(delete c.g[g],c.h--)))):c&&(c=wp(c))&&(g=c.g[g.toString()],c=-1,g&&(c=dr(g,y,C,H)),(y=-1<c?g[c]:null)&&xp(y))}function xp(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[oe])cr(g.i,c);else{var y=c.type,C=c.proxy;g.removeEventListener?g.removeEventListener(y,C,c.capture):g.detachEvent?g.detachEvent(CE(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=wp(g))?(cr(y,c),y.h==0&&(y.src=null,g[Lr]=null)):ct(c)}}}function CE(c){return c in dn?dn[c]:dn[c]="on"+c}function EN(c,g){if(c.da)c=!0;else{g=new le(g,this);var y=c.listener,C=c.ha||c.src;c.fa&&xp(c),c=y.call(C,g)}return c}function wp(c){return c=c[Lr],c instanceof Ye?c:null}var Ip="__closure_events_fn_"+(1e9*Math.random()>>>0);function DE(c){return typeof c=="function"?c:(c[Ip]||(c[Ip]=function(g){return c.handleEvent(g)}),c[Ip])}function Ut(){se.call(this),this.i=new Ye(this),this.M=this,this.F=null}_(Ut,se),Ut.prototype[oe]=!0,Ut.prototype.removeEventListener=function(c,g,y,C){IE(this,c,g,y,C)};function Jt(c,g){var y,C=c.F;if(C)for(y=[];C;C=C.F)y.push(C);if(c=c.M,C=g.type||g,typeof g=="string")g=new U(g,c);else if(g instanceof U)g.target=g.target||c;else{var H=g;g=new U(C,c),I(g,H)}if(H=!0,y)for(var W=y.length-1;0<=W;W--){var ae=g.g=y[W];H=$c(ae,C,!0,g)&&H}if(ae=g.g=c,H=$c(ae,C,!0,g)&&H,H=$c(ae,C,!1,g)&&H,y)for(W=0;W<y.length;W++)ae=g.g=y[W],H=$c(ae,C,!1,g)&&H}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var y=c.g[g],C=0;C<y.length;C++)ct(y[C]);delete c.g[g],c.h--}}this.F=null},Ut.prototype.K=function(c,g,y,C){return this.i.add(String(c),g,!1,y,C)},Ut.prototype.L=function(c,g,y,C){return this.i.add(String(c),g,!0,y,C)};function $c(c,g,y,C){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var H=!0,W=0;W<g.length;++W){var ae=g[W];if(ae&&!ae.da&&ae.capture==y){var He=ae.listener,Pt=ae.ha||ae.src;ae.fa&&cr(c.i,ae),H=He.call(Pt,C)!==!1&&H}}return H&&!C.defaultPrevented}function SE(c,g,y){if(typeof c=="function")y&&(c=m(c,y));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(c,g||0)}function NE(c){c.g=SE(()=>{c.g=null,c.i&&(c.i=!1,NE(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class yN extends se{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:NE(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gu(c){se.call(this),this.h=c,this.g={}}_(gu,se);var RE=[];function kE(c){$(c.g,function(g,y){this.g.hasOwnProperty(y)&&xp(g)},c),c.g={}}gu.prototype.N=function(){gu.aa.N.call(this),kE(this)},gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cp=o.JSON.stringify,_N=o.JSON.parse,bN=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Dp(){}Dp.prototype.h=null;function PE(c){return c.h||(c.h=c.i())}function OE(){}var Eu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sp(){U.call(this,"d")}_(Sp,U);function Np(){U.call(this,"c")}_(Np,U);var gi={},LE=null;function zc(){return LE=LE||new Ut}gi.La="serverreachability";function FE(c){U.call(this,gi.La,c)}_(FE,U);function yu(c){const g=zc();Jt(g,new FE(g))}gi.STAT_EVENT="statevent";function BE(c,g){U.call(this,gi.STAT_EVENT,c),this.stat=g}_(BE,U);function Zt(c){const g=zc();Jt(g,new BE(g,c))}gi.Ma="timingevent";function ME(c,g){U.call(this,gi.Ma,c),this.size=g}_(ME,U);function _u(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},g)}function bu(){this.g=!0}bu.prototype.xa=function(){this.g=!1};function vN(c,g,y,C,H,W){c.info(function(){if(c.g)if(W)for(var ae="",He=W.split("&"),Pt=0;Pt<He.length;Pt++){var Le=He[Pt].split("=");if(1<Le.length){var Vt=Le[0];Le=Le[1];var qt=Vt.split("_");ae=2<=qt.length&&qt[1]=="type"?ae+(Vt+"="+Le+"&"):ae+(Vt+"=redacted&")}}else ae=null;else ae=W;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+g+`
`+y+`
`+ae})}function TN(c,g,y,C,H,W,ae){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+g+`
`+y+`
`+W+" "+ae})}function va(c,g,y,C){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+xN(c,y)+(C?" "+C:"")})}function AN(c,g){c.info(function(){return"TIMEOUT: "+g})}bu.prototype.info=function(){};function xN(c,g){if(!c.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var C=y[c];if(!(2>C.length)){var H=C[1];if(Array.isArray(H)&&!(1>H.length)){var W=H[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return Cp(y)}catch{return g}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rp;function Wc(){}_(Wc,Dp),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},Rp=new Wc;function ds(c,g,y,C){this.j=c,this.i=g,this.l=y,this.R=C||1,this.U=new gu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new UE}function UE(){this.i=null,this.g="",this.h=!1}var VE={},kp={};function Pp(c,g,y){c.L=1,c.v=Xc(Rn(g)),c.m=y,c.P=!0,qE(c,null)}function qE(c,g){c.F=Date.now(),Kc(c),c.A=Rn(c.v);var y=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),ry(y.i,"t",C),c.C=0,y=c.j.J,c.h=new UE,c.g=by(c.j,y?g:null,!c.m),0<c.O&&(c.M=new yN(m(c.Y,c,c.g),c.O)),g=c.U,y=c.g,C=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(RE[0]=H.toString()),H=RE);for(var W=0;W<H.length;W++){var ae=mi(y,H[W],C||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),yu(),vN(c.i,c.u,c.A,c.l,c.R,c.m)}ds.prototype.ca=function(c){c=c.target;const g=this.M;g&&kn(c)==3?g.j():this.Y(c)},ds.prototype.Y=function(c){try{if(c==this.g)e:{const qt=kn(this.g);var g=this.g.Ba();const xa=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||ly(this.g)))){this.J||qt!=4||g==7||(g==8||0>=xa?yu(3):yu(2)),Op(this);var y=this.g.Z();this.X=y;t:if(HE(this)){var C=ly(this.g);c="";var H=C.length,W=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ei(this),vu(this);var ae="";break t}this.h.i=new o.TextDecoder}for(g=0;g<H;g++)this.h.h=!0,c+=this.h.i.decode(C[g],{stream:!(W&&g==H-1)});C.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=y==200,TN(this.i,this.u,this.A,this.l,this.R,qt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Pt=this.g;if((He=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(He)){var Le=He;break t}}Le=null}if(y=Le)va(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lp(this,y);else{this.o=!1,this.s=3,Zt(12),Ei(this),vu(this);break e}}if(this.P){y=!0;let Kr;for(;!this.J&&this.C<ae.length;)if(Kr=wN(this,ae),Kr==kp){qt==4&&(this.s=4,Zt(14),y=!1),va(this.i,this.l,null,"[Incomplete Response]");break}else if(Kr==VE){this.s=4,Zt(15),va(this.i,this.l,ae,"[Invalid Chunk]"),y=!1;break}else va(this.i,this.l,Kr,null),Lp(this,Kr);if(HE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||ae.length!=0||this.h.h||(this.s=1,Zt(16),y=!1),this.o=this.o&&y,!y)va(this.i,this.l,ae,"[Invalid Chunked Response]"),Ei(this),vu(this);else if(0<ae.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Vp(Vt),Vt.M=!0,Zt(11))}}else va(this.i,this.l,ae,null),Lp(this,ae);qt==4&&Ei(this),this.o&&!this.J&&(qt==4?gy(this.j,this):(this.o=!1,Kc(this)))}else qN(this.g),y==400&&0<ae.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),Ei(this),vu(this)}}}catch{}finally{}};function HE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wN(c,g){var y=c.C,C=g.indexOf(`
`,y);return C==-1?kp:(y=Number(g.substring(y,C)),isNaN(y)?VE:(C+=1,C+y>g.length?kp:(g=g.slice(C,C+y),c.C=C+y,g)))}ds.prototype.cancel=function(){this.J=!0,Ei(this)};function Kc(c){c.S=Date.now()+c.I,$E(c,c.I)}function $E(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=_u(m(c.ba,c),g)}function Op(c){c.B&&(o.clearTimeout(c.B),c.B=null)}ds.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(AN(this.i,this.A),this.L!=2&&(yu(),Zt(17)),Ei(this),this.s=2,vu(this)):$E(this,this.S-c)};function vu(c){c.j.G==0||c.J||gy(c.j,c)}function Ei(c){Op(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,kE(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Lp(c,g){try{var y=c.j;if(y.G!=0&&(y.g==c||Fp(y.h,c))){if(!c.K&&Fp(y.h,c)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)nd(y),td(y);else break e;Up(y),Zt(18)}}else y.za=H[1],0<y.za-y.T&&37500>H[2]&&y.F&&y.v==0&&!y.C&&(y.C=_u(m(y.Za,y),6e3));if(1>=WE(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else _i(y,11)}else if((c.K||y.g==c)&&nd(y),!b(g))for(H=y.Da.g.parse(g),g=0;g<H.length;g++){let Le=H[g];if(y.T=Le[0],Le=Le[1],y.G==2)if(Le[0]=="c"){y.K=Le[1],y.ia=Le[2];const Vt=Le[3];Vt!=null&&(y.la=Vt,y.j.info("VER="+y.la));const qt=Le[4];qt!=null&&(y.Aa=qt,y.j.info("SVER="+y.Aa));const xa=Le[5];xa!=null&&typeof xa=="number"&&0<xa&&(C=1.5*xa,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const Kr=c.g;if(Kr){const id=Kr.g?Kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(id){var W=C.h;W.g||id.indexOf("spdy")==-1&&id.indexOf("quic")==-1&&id.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Bp(W,W.h),W.h=null))}if(C.D){const qp=Kr.g?Kr.g.getResponseHeader("X-HTTP-Session-Id"):null;qp&&(C.ya=qp,Ge(C.I,C.D,qp))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var ae=c;if(C.qa=_y(C,C.J?C.ia:null,C.W),ae.K){KE(C.h,ae);var He=ae,Pt=C.L;Pt&&(He.I=Pt),He.B&&(Op(He),Kc(He)),C.g=ae}else py(C);0<y.i.length&&rd(y)}else Le[0]!="stop"&&Le[0]!="close"||_i(y,7);else y.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?_i(y,7):jp(y):Le[0]!="noop"&&y.l&&y.l.ta(Le),y.v=0)}}yu(4)}catch{}}var IN=class{constructor(c,g){this.g=c,this.map=g}};function zE(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function GE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function WE(c){return c.h?1:c.g?c.g.size:0}function Fp(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Bp(c,g){c.g?c.g.add(g):c.h=g}function KE(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}zE.prototype.cancel=function(){if(this.i=YE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function YE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const y of c.g.values())g=g.concat(y.D);return g}return v(c.i)}function CN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var g=[],y=c.length,C=0;C<y;C++)g.push(c[C]);return g}g=[],y=0;for(C in c)g[y++]=c[C];return g}function DN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var g=[];c=c.length;for(var y=0;y<c;y++)g.push(y);return g}g=[],y=0;for(const C in c)g[y++]=C;return g}}}function QE(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var y=DN(c),C=CN(c),H=C.length,W=0;W<H;W++)g.call(void 0,C[W],y&&y[W],c)}var XE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SN(c,g){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var C=c[y].indexOf("="),H=null;if(0<=C){var W=c[y].substring(0,C);H=c[y].substring(C+1)}else W=c[y];g(W,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function yi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof yi){this.h=c.h,Yc(this,c.j),this.o=c.o,this.g=c.g,Qc(this,c.s),this.l=c.l;var g=c.i,y=new xu;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),JE(this,y),this.m=c.m}else c&&(g=String(c).match(XE))?(this.h=!1,Yc(this,g[1]||"",!0),this.o=Tu(g[2]||""),this.g=Tu(g[3]||"",!0),Qc(this,g[4]),this.l=Tu(g[5]||"",!0),JE(this,g[6]||"",!0),this.m=Tu(g[7]||"")):(this.h=!1,this.i=new xu(null,this.h))}yi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Au(g,ZE,!0),":");var y=this.g;return(y||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Au(g,ZE,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Au(y,y.charAt(0)=="/"?kN:RN,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Au(y,ON)),c.join("")};function Rn(c){return new yi(c)}function Yc(c,g,y){c.j=y?Tu(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Qc(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function JE(c,g,y){g instanceof xu?(c.i=g,LN(c.i,c.h)):(y||(g=Au(g,PN)),c.i=new xu(g,c.h))}function Ge(c,g,y){c.i.set(g,y)}function Xc(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Tu(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Au(c,g,y){return typeof c=="string"?(c=encodeURI(c).replace(g,NN),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function NN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ZE=/[#\/\?@]/g,RN=/[#\?:]/g,kN=/[#\?]/g,PN=/[#\?@]/g,ON=/#/g;function xu(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function hs(c){c.g||(c.g=new Map,c.h=0,c.i&&SN(c.i,function(g,y){c.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=xu.prototype,t.add=function(c,g){hs(this),this.i=null,c=Ta(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(g),this.h+=1,this};function ey(c,g){hs(c),g=Ta(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function ty(c,g){return hs(c),g=Ta(c,g),c.g.has(g)}t.forEach=function(c,g){hs(this),this.g.forEach(function(y,C){y.forEach(function(H){c.call(g,H,C,this)},this)},this)},t.na=function(){hs(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){const H=c[C];for(let W=0;W<H.length;W++)y.push(g[C])}return y},t.V=function(c){hs(this);let g=[];if(typeof c=="string")ty(this,c)&&(g=g.concat(this.g.get(Ta(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)g=g.concat(c[y])}return g},t.set=function(c,g){return hs(this),this.i=null,c=Ta(this,c),ty(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ry(c,g,y){ey(c,g),0<y.length&&(c.i=null,c.g.set(Ta(c,g),v(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];const W=encodeURIComponent(String(C)),ae=this.V(C);for(C=0;C<ae.length;C++){var H=W;ae[C]!==""&&(H+="="+encodeURIComponent(String(ae[C]))),c.push(H)}}return this.i=c.join("&")};function Ta(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function LN(c,g){g&&!c.j&&(hs(c),c.i=null,c.g.forEach(function(y,C){var H=C.toLowerCase();C!=H&&(ey(this,C),ry(this,H,y))},c)),c.j=g}function FN(c,g){const y=new bu;if(o.Image){const C=new Image;C.onload=E(fs,y,"TestLoadImage: loaded",!0,g,C),C.onerror=E(fs,y,"TestLoadImage: error",!1,g,C),C.onabort=E(fs,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=E(fs,y,"TestLoadImage: timeout",!1,g,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else g(!1)}function BN(c,g){const y=new bu,C=new AbortController,H=setTimeout(()=>{C.abort(),fs(y,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:C.signal}).then(W=>{clearTimeout(H),W.ok?fs(y,"TestPingServer: ok",!0,g):fs(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(H),fs(y,"TestPingServer: error",!1,g)})}function fs(c,g,y,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(y)}catch{}}function MN(){this.g=new bN}function jN(c,g,y){const C=y||"";try{QE(c,function(H,W){let ae=H;l(H)&&(ae=Cp(H)),g.push(C+W+"="+encodeURIComponent(ae))})}catch(H){throw g.push(C+"type="+encodeURIComponent("_badmap")),H}}function Jc(c){this.l=c.Ub||null,this.j=c.eb||!1}_(Jc,Dp),Jc.prototype.g=function(){return new Zc(this.l,this.j)},Jc.prototype.i=function(c){return function(){return c}}({});function Zc(c,g){Ut.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Zc,Ut),t=Zc.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Iu(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wu(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Iu(this)),this.g&&(this.readyState=3,Iu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ny(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ny(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?wu(this):Iu(this),this.readyState==3&&ny(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,wu(this))},t.Qa=function(c){this.g&&(this.response=c,wu(this))},t.ga=function(){this.g&&wu(this)};function wu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Iu(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=g.next();return c.join(`\r
`)};function Iu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sy(c){let g="";return $(c,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function Mp(c,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=sy(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Ge(c,g,y))}function dt(c){Ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(dt,Ut);var UN=/^https?$/i,VN=["POST","PUT"];t=dt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rp.g(),this.v=this.o?PE(this.o):PE(Rp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(W){iy(this,W);return}if(c=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)y.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const W of C.keys())y.set(W,C.get(W));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(W=>W.toLowerCase()=="content-type"),H=o.FormData&&c instanceof o.FormData,!(0<=Array.prototype.indexOf.call(VN,g,void 0))||C||H||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ae]of y)this.g.setRequestHeader(W,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uy(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){iy(this,W)}};function iy(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ay(c),ed(c)}function ay(c){c.A||(c.A=!0,Jt(c,"complete"),Jt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Jt(this,"complete"),Jt(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?oy(this):this.bb())},t.bb=function(){oy(this)};function oy(c){if(c.h&&typeof a<"u"&&(!c.v[1]||kn(c)!=4||c.Z()!=2)){if(c.u&&kn(c)==4)SE(c.Ea,0,c);else if(Jt(c,"readystatechange"),kn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=ae===0){var H=String(c.D).match(XE)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),C=!UN.test(H?H.toLowerCase():"")}y=C}if(y)Jt(c,"complete"),Jt(c,"success");else{c.m=6;try{var W=2<kn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",ay(c)}}finally{ed(c)}}}}function ed(c,g){if(c.g){uy(c);const y=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Jt(c,"ready");try{y.onreadystatechange=C}catch{}}}function uy(c){c.I&&(o.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function kn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),_N(g)}};function ly(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qN(c){const g={};c=(c.g&&2<=kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(b(c[C]))continue;var y=P(c[C]);const H=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const W=g[H]||[];g[H]=W,W.push(y)}D(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cu(c,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||g}function cy(c){this.Aa=0,this.i=[],this.j=new bu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cu("baseRetryDelayMs",5e3,c),this.cb=Cu("retryDelaySeedMs",1e4,c),this.Wa=Cu("forwardChannelMaxRetries",2,c),this.wa=Cu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zE(c&&c.concurrentRequestLimit),this.Da=new MN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cy.prototype,t.la=8,t.G=1,t.connect=function(c,g,y,C){Zt(0),this.W=c,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=_y(this,null,this.W),rd(this)};function jp(c){if(dy(c),c.G==3){var g=c.U++,y=Rn(c.I);if(Ge(y,"SID",c.K),Ge(y,"RID",g),Ge(y,"TYPE","terminate"),Du(c,y),g=new ds(c,c.j,g),g.L=2,g.v=Xc(Rn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&o.Image&&(new Image().src=g.v,y=!0),y||(g.g=by(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Kc(g)}yy(c)}function td(c){c.g&&(Vp(c),c.g.cancel(),c.g=null)}function dy(c){td(c),c.u&&(o.clearTimeout(c.u),c.u=null),nd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&o.clearTimeout(c.s),c.s=null)}function rd(c){if(!GE(c.h)&&!c.s){c.s=!0;var g=c.Ga;me||V(),Z||(me(),Z=!0),B.add(g,c),c.B=0}}function HN(c,g){return WE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=_u(m(c.Ga,c,g),Ey(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new ds(this,this.j,c);let W=this.o;if(this.S&&(W?(W=w(W),I(W,this.S)):W=this.S),this.m!==null||this.O||(H.H=W,W=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=fy(this,H,g),y=Rn(this.I),Ge(y,"RID",c),Ge(y,"CVER",22),this.D&&Ge(y,"X-HTTP-Session-Id",this.D),Du(this,y),W&&(this.O?g="headers="+encodeURIComponent(String(sy(W)))+"&"+g:this.m&&Mp(y,this.m,W)),Bp(this.h,H),this.Ua&&Ge(y,"TYPE","init"),this.P?(Ge(y,"$req",g),Ge(y,"SID","null"),H.T=!0,Pp(H,y,null)):Pp(H,y,g),this.G=2}}else this.G==3&&(c?hy(this,c):this.i.length==0||GE(this.h)||hy(this))};function hy(c,g){var y;g?y=g.l:y=c.U++;const C=Rn(c.I);Ge(C,"SID",c.K),Ge(C,"RID",y),Ge(C,"AID",c.T),Du(c,C),c.m&&c.o&&Mp(C,c.m,c.o),y=new ds(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),g&&(c.i=g.D.concat(c.i)),g=fy(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bp(c.h,y),Pp(y,C,g)}function Du(c,g){c.H&&$(c.H,function(y,C){Ge(g,C,y)}),c.l&&QE({},function(y,C){Ge(g,C,y)})}function fy(c,g,y){y=Math.min(c.i.length,y);var C=c.l?m(c.l.Na,c.l,c):null;e:{var H=c.i;let W=-1;for(;;){const ae=["count="+y];W==-1?0<y?(W=H[0].g,ae.push("ofs="+W)):W=0:ae.push("ofs="+W);let He=!0;for(let Pt=0;Pt<y;Pt++){let Le=H[Pt].g;const Vt=H[Pt].map;if(Le-=W,0>Le)W=Math.max(0,H[Pt].g-100),He=!1;else try{jN(Vt,ae,"req"+Le+"_")}catch{C&&C(Vt)}}if(He){C=ae.join("&");break e}}}return c=c.i.splice(0,y),g.D=c,C}function py(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;me||V(),Z||(me(),Z=!0),B.add(g,c),c.v=0}}function Up(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=_u(m(c.Fa,c),Ey(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,my(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=_u(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),td(this),my(this))};function Vp(c){c.A!=null&&(o.clearTimeout(c.A),c.A=null)}function my(c){c.g=new ds(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Rn(c.qa);Ge(g,"RID","rpc"),Ge(g,"SID",c.K),Ge(g,"AID",c.T),Ge(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(g,"TO",c.ja),Ge(g,"TYPE","xmlhttp"),Du(c,g),c.m&&c.o&&Mp(g,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Xc(Rn(g)),y.m=null,y.P=!0,qE(y,c)}t.Za=function(){this.C!=null&&(this.C=null,td(this),Up(this),Zt(19))};function nd(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function gy(c,g){var y=null;if(c.g==g){nd(c),Vp(c),c.g=null;var C=2}else if(Fp(c.h,g))y=g.D,KE(c.h,g),C=1;else return;if(c.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var H=c.B;C=zc(),Jt(C,new ME(C,y)),rd(c)}else py(c);else if(H=g.s,H==3||H==0&&0<g.X||!(C==1&&HN(c,g)||C==2&&Up(c)))switch(y&&0<y.length&&(g=c.h,g.i=g.i.concat(y)),H){case 1:_i(c,5);break;case 4:_i(c,10);break;case 3:_i(c,6);break;default:_i(c,2)}}}function Ey(c,g){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*g}function _i(c,g){if(c.j.info("Error code "+g),g==2){var y=m(c.fb,c),C=c.Xa;const H=!C;C=new yi(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Yc(C,"https"),Xc(C),H?FN(C.toString(),y):BN(C.toString(),y)}else Zt(2);c.G=0,c.l&&c.l.sa(g),yy(c),dy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function yy(c){if(c.G=0,c.ka=[],c.l){const g=YE(c.h);(g.length!=0||c.i.length!=0)&&(A(c.ka,g),A(c.ka,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.ra()}}function _y(c,g,y){var C=y instanceof yi?Rn(y):new yi(y);if(C.g!="")g&&(C.g=g+"."+C.g),Qc(C,C.s);else{var H=o.location;C=H.protocol,g=g?g+"."+H.hostname:H.hostname,H=+H.port;var W=new yi(null);C&&Yc(W,C),g&&(W.g=g),H&&Qc(W,H),y&&(W.l=y),C=W}return y=c.D,g=c.ya,y&&g&&Ge(C,y,g),Ge(C,"VER",c.la),Du(c,C),C}function by(c,g,y){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new dt(new Jc({eb:y})):new dt(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vy(){}t=vy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sd(){}sd.prototype.g=function(c,g){return new Ar(c,g)};function Ar(c,g){Ut.call(this),this.g=new cy(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!b(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Aa(this)}_(Ar,Ut),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){jp(this.g)},Ar.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Cp(c),c=y);g.i.push(new IN(g.Ya++,c)),g.G==3&&rd(g)},Ar.prototype.N=function(){this.g.l=null,delete this.j,jp(this.g),delete this.g,Ar.aa.N.call(this)};function Ty(c){Sp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const y in g){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}_(Ty,Sp);function Ay(){Np.call(this),this.status=1}_(Ay,Np);function Aa(c){this.g=c}_(Aa,vy),Aa.prototype.ua=function(){Jt(this.g,"a")},Aa.prototype.ta=function(c){Jt(this.g,new Ty(c))},Aa.prototype.sa=function(c){Jt(this.g,new Ay)},Aa.prototype.ra=function(){Jt(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,cI=function(){return new sd},lI=function(){return zc()},uI=gi,Z0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,Zd=Gc,jE.COMPLETE="complete",oI=jE,OE.EventType=Eu,Eu.OPEN="a",Eu.CLOSE="b",Eu.ERROR="c",Eu.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,nl=OE,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,aI=dt}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const wb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new M2("@firebase/firestore");function ka(){return Yi.logLevel}function re(t,...e){if(Yi.logLevel<=Ne.DEBUG){const r=e.map(Q2);Yi.debug(`Firestore (${tu}): ${t}`,...r)}}function nr(t,...e){if(Yi.logLevel<=Ne.ERROR){const r=e.map(Q2);Yi.error(`Firestore (${tu}): ${t}`,...r)}}function Do(t,...e){if(Yi.logLevel<=Ne.WARN){const r=e.map(Q2);Yi.warn(`Firestore (${tu}): ${t}`,...r)}}function Q2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: `+t;throw nr(e),new Error(e)}function ge(t,e){t||pe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Nn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(rr.UNAUTHENTICATED))}shutdown(){}}class zO{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ge(this.o===void 0);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new on;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new on,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},o=u=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new on)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ge(typeof n.accessToken=="string"),new HO(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new rr(e)}}class GO{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WO{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new GO(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){ge(this.o===void 0);const n=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ge(typeof r.token=="string"),this.R=r.token,new KO(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=QO(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function we(t,e){return t<e?-1:t>e?1:0}function So(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function hI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ie(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ie(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ie(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new at(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new at(0,0))}static max(){return new ye(new at(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,r,n){r===void 0?r=0:r>e.length&&pe(),n===void 0?n=e.length-r:n>e.length-r&&pe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Xl.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Xl?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Fe extends Xl{construct(e,r,n){return new Fe(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ie(Q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Fe(r)}static emptyPath(){return new Fe([])}}const XO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Xl{construct(e,r,n){return new st(e,r,n)}static isValidIdentifier(e){return XO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ie(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new ie(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new ie(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(r)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Fe.fromString(e))}static fromName(e){return new ce(Fe.fromString(e).popFirst(5))}static empty(){return new ce(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Fe.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function eg(t){return t.fields.find(e=>e.kind===2)}function Ii(t){return t.fields.filter(e=>e.kind!==2)}qh.UNKNOWN_ID=-1;class eh{constructor(e,r){this.fieldPath=e,this.kind=r}}class Jl{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Jl(0,Rr.min())}}function JO(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(n===1e9?new at(r+1,0):new at(r,n));return new Rr(s,ce.empty(),e)}function fI(t){return new Rr(t.readTime,t.key,-1)}class Rr{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Rr(ye.min(),ce.empty(),-1)}static max(){return new Rr(ye.max(),ce.empty(),-1)}}function X2(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ce.comparator(t.documentKey,e.documentKey),r!==0?r:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==pI)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new z((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof z?r:z.resolve(r)}catch(r){return z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):z.reject(r)}static resolve(e){return new z((r,n)=>{r(e)})}static reject(e){return new z((r,n)=>{n(e)})}static waitFor(e){return new z((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},u=>n(u))}),a=!0,i===s&&r()})}static or(e){let r=z.resolve(!1);for(const n of e)r=r.next(s=>s?z.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new z((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let u=0;u<i;u++){const l=u;r(e[l]).next(h=>{a[l]=h,++o,o===i&&n(a)},h=>s(h))}})}static doWhile(e,r){return new z((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new on,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new _l(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=J2(n.target.error);this.V.reject(new _l(e,s))}}static open(e,r,n,s){try{return new Lf(r,e.transaction(s,n))}catch(i){throw new _l(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new eL(r)}}class Qs{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Qs.S(xt())===12.2&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),Ci(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!yw())return!1;if(Qs.v())return!0;const e=xt(),r=Qs.S(e),n=0<r&&r<10,s=gI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(re("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new _l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new ie(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new ie(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new _l(e,a))},s.onupgradeneeded=i=>{re("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{re("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Lf.open(this.db,e,i?"readonly":"readwrite",n),u=s(o).next(l=>(o.g(),l)).catch(l=>(o.abort(l),z.reject(l))).toPromise();return u.catch(()=>{}),await o.m,u}catch(o){const u=o,l=u.name!=="FirebaseError"&&a<3;if(re("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gI(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ZO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ci(this.B.delete())}}class _l extends ie{constructor(e,r){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ci(t){return t.name==="IndexedDbTransactionError"}class eL{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(re("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ci(n)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),Ci(this.store.add(e))}get(e){return Ci(this.store.get(e)).next(r=>(r===void 0&&(r=null),re("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),Ci(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),Ci(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new z((a,o)=>{i.onerror=u=>{o(u.target.error)},i.onsuccess=u=>{a(u.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,u)=>{a.push(u)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new z((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){re("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new z((n,s)=>{r.onerror=i=>{const a=J2(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new z((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const u=new ZO(o),l=r(o.primaryKey,o.value,u);if(l instanceof z){const h=l.catch(p=>(u.done(),z.reject(p)));n.push(h)}u.isDone?s():u.K===null?o.continue():o.continue(u.K)}}).next(()=>z.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Ci(t){return new z((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=J2(n.target.error);r(s)}})}let Ib=!1;function J2(t){const e=Qs.S(xt());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ib||(Ib=!0,setTimeout(()=>{throw n},0)),n}}return t}class tL{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){re("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{re("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ci(r)?re("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ca(r)}await this.X(6e4)})}}class rL{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return z.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return re("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(re("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=fI(i);X2(a,n)>0&&(n=a)}),new Rr(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vr.oe=-1;function Cc(t){return t==null}function Zl(t){return t===0&&1/t==-1/0}function nL(t){return typeof t=="number"&&Number.isInteger(t)&&!Zl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Cb(e)),e=sL(t.get(r),e);return Cb(e)}function sL(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function Cb(t){return t+""}function bn(t){const e=t.length;if(ge(e>=2),e===2)return ge(t.charAt(0)===""&&t.charAt(1)===""),Fe.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&pe(),t.charAt(a+1)){case"":const o=t.substring(i,a);let u;s.length===0?u=o:(s+=o,u=s,s=""),n.push(u);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:pe()}i=a+2}return new Fe(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e){return[t,ar(e)]}function EI(t,e,r){return[t,ar(e),r]}const iL={},aL=["prefixPath","collectionGroup","readTime","documentId"],oL=["prefixPath","collectionGroup","documentId"],uL=["collectionGroup","readTime","prefixPath","documentId"],lL=["canonicalId","targetId"],cL=["targetId","path"],dL=["path","targetId"],hL=["collectionId","parent"],fL=["indexId","uid"],pL=["uid","sequenceNumber"],mL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gL=["indexId","uid","orderedDocumentKey"],EL=["userId","collectionPath","documentId"],yL=["userId","collectionPath","largestBatchId"],_L=["userId","collectionGroup","largestBatchId"],yI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bL=[...yI,"documentOverlays"],_I=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bI=_I,Z2=[...bI,"indexConfiguration","indexState","indexEntries"],vL=Z2,TL=[...Z2,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends mI{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function wt(t,e){const r=ve(t);return Qs.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function da(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,r){this.comparator=e,this.root=r||Lt.EMPTY}insert(e,r){return new rt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Id(this.root,e,this.comparator,!1)}getReverseIterator(){return new Id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Id(this.root,e,this.comparator,!0)}}class Id{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Lt.RED,this.left=s??Lt.EMPTY,this.right=i??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Lt(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Lt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Lt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Nb(this.data.getIterator())}getIteratorFrom(e){return new Nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new qe(this.comparator);return r.data=e,r}}class Nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ca(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new _r([])}unionWith(e){let r=new qe(st.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new _r(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new TI("Invalid base64 string: "+i):i}}(e);return new bt(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new bt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const AL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(t){if(ge(!!t),typeof t=="string"){let e=0;const r=AL.exec(t);if(ge(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function t1(t){const e=t.mapValue.fields.__previous_value__;return e1(e)?t1(e):e}function ec(t){const e=ss(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,r,n,s,i,a,o,u,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=l}}class Qi{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Qi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rh={nullValue:"NULL_VALUE"};function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?e1(t)?4:AI(t)?9007199254740991:Ff(t)?10:11:pe()}function Dn(t,e){if(t===e)return!0;const r=Xi(t);if(r!==Xi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ec(t).isEqual(ec(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ss(s.timestampValue),o=ss(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ri(s.bytesValue).isEqual(ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Xe(s.geoPointValue.latitude)===Xe(i.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Xe(s.integerValue)===Xe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Xe(s.doubleValue),o=Xe(i.doubleValue);return a===o?Zl(a)===Zl(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(Sb(a)!==Sb(o))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(o[u]===void 0||!Dn(a[u],o[u])))return!1;return!0}(t,e);default:return pe()}}function tc(t,e){return(t.values||[]).find(r=>Dn(r,e))!==void 0}function ni(t,e){if(t===e)return 0;const r=Xi(t),n=Xi(e);if(r!==n)return we(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Xe(i.integerValue||i.doubleValue),u=Xe(a.integerValue||a.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return Rb(t.timestampValue,e.timestampValue);case 4:return Rb(ec(t),ec(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(i,a){const o=ri(i),u=ri(a);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),u=a.split("/");for(let l=0;l<o.length&&l<u.length;l++){const h=we(o[l],u[l]);if(h!==0)return h}return we(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=we(Xe(i.latitude),Xe(a.latitude));return o!==0?o:we(Xe(i.longitude),Xe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kb(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,u,l,h;const p=i.fields||{},m=a.fields||{},E=(o=p.value)===null||o===void 0?void 0:o.arrayValue,_=(u=m.value)===null||u===void 0?void 0:u.arrayValue,v=we(((l=E==null?void 0:E.values)===null||l===void 0?void 0:l.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:kb(E,_)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ps.mapValue&&a===Ps.mapValue)return 0;if(i===Ps.mapValue)return 1;if(a===Ps.mapValue)return-1;const o=i.fields||{},u=Object.keys(o),l=a.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=we(u[p],h[p]);if(m!==0)return m;const E=ni(o[u[p]],l[h[p]]);if(E!==0)return E}return we(u.length,h.length)}(t.mapValue,e.mapValue);default:throw pe()}}function Rb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const r=ss(t),n=ss(e),s=we(r.seconds,n.seconds);return s!==0?s:we(r.nanos,n.nanos)}function kb(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=ni(r[s],n[s]);if(i)return i}return we(r.length,n.length)}function No(t){return rg(t)}function rg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ss(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ri(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ce.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=rg(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${rg(r.fields[a])}`;return s+"}"}(t.mapValue):pe()}function rc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ng(t){return!!t&&"integerValue"in t}function nc(t){return!!t&&"arrayValue"in t}function Pb(t){return!!t&&"nullValue"in t}function Ob(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nh(t){return!!t&&"mapValue"in t}function Ff(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=bl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=bl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function AI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const xI={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function wL(t){return"nullValue"in t?rh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?rc(Qi.empty(),ce.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ff(t)?xI:{mapValue:{}}:pe()}function IL(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?rc(Qi.empty(),ce.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?xI:"mapValue"in t?Ff(t)?{mapValue:{}}:Ps:pe()}function Lb(t,e){const r=ni(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Fb(t,e){const r=ni(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!nh(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(r)}setAll(e){let r=st.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=bl(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());nh(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];nh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){da(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Ft(bl(this.value))}}function wI(t){const e=[];return da(t.fields,(r,n)=>{const s=new st([r]);if(nh(n)){const i=wI(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new et(e,0,ye.min(),ye.min(),ye.min(),Ft.empty(),0)}static newFoundDocument(e,r,n,s){return new et(e,1,r,ye.min(),n,s,0)}static newNoDocument(e,r){return new et(e,2,r,ye.min(),ye.min(),Ft.empty(),0)}static newUnknownDocument(e,r){return new et(e,3,r,ye.min(),ye.min(),Ft.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,r){this.position=e,this.inclusive=r}}function Bb(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=ce.comparator(ce.fromName(a.referenceValue),r.key):n=ni(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Mb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Dn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,r="asc"){this.field=e,this.dir=r}}function CL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class Re extends II{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new DL(e,r,n):r==="array-contains"?new RL(e,n):r==="in"?new kI(e,n):r==="not-in"?new kL(e,n):r==="array-contains-any"?new PL(e,n):new Re(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new SL(e,n):new NL(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ni(r,this.value)):r!==null&&Xi(this.value)===Xi(r)&&this.matchesComparison(ni(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Me extends II{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Me(e,r)}matches(e){return ko(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ko(t){return t.op==="and"}function sg(t){return t.op==="or"}function r1(t){return CI(t)&&ko(t)}function CI(t){for(const e of t.filters)if(e instanceof Me)return!1;return!0}function ig(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+No(t.value);if(r1(t))return t.filters.map(e=>ig(e)).join(",");{const e=t.filters.map(r=>ig(r)).join(",");return`${t.op}(${e})`}}function DI(t,e){return t instanceof Re?function(n,s){return s instanceof Re&&n.op===s.op&&n.field.isEqual(s.field)&&Dn(n.value,s.value)}(t,e):t instanceof Me?function(n,s){return s instanceof Me&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&DI(a,s.filters[o]),!0):!1}(t,e):void pe()}function SI(t,e){const r=t.filters.concat(e);return Me.create(r,t.op)}function NI(t){return t instanceof Re?function(r){return`${r.field.canonicalString()} ${r.op} ${No(r.value)}`}(t):t instanceof Me?function(r){return r.op.toString()+" {"+r.getFilters().map(NI).join(" ,")+"}"}(t):"Filter"}class DL extends Re{constructor(e,r,n){super(e,r,n),this.key=ce.fromName(n.referenceValue)}matches(e){const r=ce.comparator(e.key,this.key);return this.matchesComparison(r)}}class SL extends Re{constructor(e,r){super(e,"in",r),this.keys=RI("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class NL extends Re{constructor(e,r){super(e,"not-in",r),this.keys=RI("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function RI(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ce.fromName(n.referenceValue))}class RL extends Re{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return nc(r)&&tc(r.arrayValue,this.value)}}class kI extends Re{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&tc(this.value.arrayValue,r)}}class kL extends Re{constructor(e,r){super(e,"not-in",r)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!tc(this.value.arrayValue,r)}}class PL extends Re{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!nc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>tc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function ag(t,e=null,r=[],n=[],s=null,i=null,a=null){return new OL(t,e,r,n,s,i,a)}function Ji(t){const e=ve(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>ig(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Cc(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>No(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>No(n)).join(",")),e.ue=r}return e.ue}function Dc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!CL(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!DI(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mb(t.startAt,e.startAt)&&Mb(t.endAt,e.endAt)}function Hh(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $h(t,e){return t.filters.filter(r=>r instanceof Re&&r.field.isEqual(e))}function jb(t,e,r){let n=rh,s=!0;for(const i of $h(t,e)){let a=rh,o=!0;switch(i.op){case"<":case"<=":a=wL(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=rh}Lb({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];Lb({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function Ub(t,e,r){let n=Ps,s=!0;for(const i of $h(t,e)){let a=Ps,o=!0;switch(i.op){case">=":case">":a=IL(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Ps}Fb({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];Fb({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LL(t,e,r,n,s,i,a,o){return new ru(t,e,r,n,s,i,a,o)}function Bf(t){return new ru(t)}function Vb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PI(t){return t.collectionGroup!==null}function vl(t){const e=ve(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new qe(st.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(o=o.add(l.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new sc(i,n))}),r.has(st.keyField().canonicalString())||e.ce.push(new sc(st.keyField(),n))}return e.ce}function Hr(t){const e=ve(t);return e.le||(e.le=FL(e,vl(t))),e.le}function FL(t,e){if(t.limitType==="F")return ag(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sc(s.field,i)});const r=t.endAt?new Ro(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ro(t.startAt.position,t.startAt.inclusive):null;return ag(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function og(t,e){const r=t.filters.concat([e]);return new ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ug(t,e,r){return new ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Mf(t,e){return Dc(Hr(t),Hr(e))&&t.limitType===e.limitType}function OI(t){return`${Ji(Hr(t))}|lt:${t.limitType}`}function Pa(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>NI(s)).join(", ")}]`),Cc(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>No(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>No(s)).join(",")),`Target(${n})`}(Hr(t))}; limitType=${t.limitType})`}function Sc(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ce.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of vl(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,u){const l=Bb(a,o,u);return a.inclusive?l<=0:l<0}(n.startAt,vl(n),s)||n.endAt&&!function(a,o,u){const l=Bb(a,o,u);return a.inclusive?l>=0:l>0}(n.endAt,vl(n),s))}(t,e)}function BL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LI(t){return(e,r)=>{let n=!1;for(const s of vl(t)){const i=ML(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function ML(t,e,r){const n=t.field.isKeyField()?ce.comparator(e.key,r.key):function(i,a,o){const u=a.data.field(i),l=o.data.field(i);return u!==null&&l!==null?ni(u,l):pe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return vI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new rt(ce.comparator);function Dr(){return jL}const FI=new rt(ce.comparator);function sl(...t){let e=FI;for(const r of t)e=e.insert(r.key,r);return e}function BI(t){let e=FI;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function vn(){return Tl()}function MI(){return Tl()}function Tl(){return new di(t=>t.toString(),(t,e)=>t.isEqual(e))}const UL=new rt(ce.comparator),VL=new qe(ce.comparator);function Ce(...t){let e=VL;for(const r of t)e=e.add(r);return e}const qL=new qe(we);function HL(){return qL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function jI(t){return{integerValue:""+t}}function UI(t,e){return nL(e)?jI(e):n1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function $L(t,e,r){return t instanceof Po?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&e1(i)&&(i=t1(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Oo?qI(t,e):t instanceof Lo?HI(t,e):function(s,i){const a=VI(s,i),o=qb(a)+qb(s.Pe);return ng(a)&&ng(s.Pe)?jI(o):n1(s.serializer,o)}(t,e)}function zL(t,e,r){return t instanceof Oo?qI(t,e):t instanceof Lo?HI(t,e):r}function VI(t,e){return t instanceof Fo?function(n){return ng(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Po extends jf{}class Oo extends jf{constructor(e){super(),this.elements=e}}function qI(t,e){const r=$I(e);for(const n of t.elements)r.some(s=>Dn(s,n))||r.push(n);return{arrayValue:{values:r}}}class Lo extends jf{constructor(e){super(),this.elements=e}}function HI(t,e){let r=$I(e);for(const n of t.elements)r=r.filter(s=>!Dn(s,n));return{arrayValue:{values:r}}}class Fo extends jf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function qb(t){return Xe(t.integerValue||t.doubleValue)}function $I(t){return nc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,r){this.field=e,this.transform=r}}function GL(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Oo&&s instanceof Oo||n instanceof Lo&&s instanceof Lo?So(n.elements,s.elements,Dn):n instanceof Fo&&s instanceof Fo?Dn(n.Pe,s.Pe):n instanceof Po&&s instanceof Po}(t.transform,e.transform)}class WL{constructor(e,r){this.version=e,this.transformResults=r}}class tt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new tt}static exists(e){return new tt(void 0,e)}static updateTime(e){return new tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uf{}function zI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new su(t.key,tt.none()):new nu(t.key,t.data,tt.none());{const r=t.data,n=Ft.empty();let s=new qe(st.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new ls(t.key,n,new _r(s.toArray()),tt.none())}}function KL(t,e,r){t instanceof nu?function(s,i,a){const o=s.value.clone(),u=$b(s.fieldTransforms,i,a.transformResults);o.setAll(u),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof ls?function(s,i,a){if(!sh(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=$b(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(GI(s)),u.setAll(o),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Al(t,e,r,n){return t instanceof nu?function(i,a,o,u){if(!sh(i.precondition,a))return o;const l=i.value.clone(),h=zb(i.fieldTransforms,u,a);return l.setAll(h),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof ls?function(i,a,o,u){if(!sh(i.precondition,a))return o;const l=zb(i.fieldTransforms,u,a),h=a.data;return h.setAll(GI(i)),h.setAll(l),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,r,n):function(i,a,o){return sh(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function YL(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=VI(n.transform,s||null);i!=null&&(r===null&&(r=Ft.empty()),r.set(n.field,i))}return r||null}function Hb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&So(n,s,(i,a)=>GL(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nu extends Uf{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ls extends Uf{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GI(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function $b(t,e,r){const n=new Map;ge(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,zL(a,o,r[s]))}return n}function zb(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,$L(i,a,e))}return n}class su extends Uf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i1 extends Uf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&KL(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Al(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Al(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=MI();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const u=zI(a,o);u!==null&&n.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ce())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(r,n)=>Hb(r,n))&&So(this.baseMutations,e.baseMutations,(r,n)=>Hb(r,n))}}class o1{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){ge(e.mutations.length===n.length);let s=function(){return UL}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new o1(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,ke;function WI(t){switch(t){default:return pe();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function KI(t){if(t===void 0)return nr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Et.OK:return Q.OK;case Et.CANCELLED:return Q.CANCELLED;case Et.UNKNOWN:return Q.UNKNOWN;case Et.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Et.INTERNAL:return Q.INTERNAL;case Et.UNAVAILABLE:return Q.UNAVAILABLE;case Et.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Et.NOT_FOUND:return Q.NOT_FOUND;case Et.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Et.ABORTED:return Q.ABORTED;case Et.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Et.DATA_LOSS:return Q.DATA_LOSS;default:return pe()}}(ke=Et||(Et={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=new ji([4294967295,4294967295],0);function Gb(t){const e=XL().encode(t),r=new iI;return r.update(e),new Uint8Array(r.digest())}function Wb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ji([r,n],0),new ji([s,i],0)]}class l1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new il(`Invalid padding: ${r}`);if(n<0)throw new il(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new il(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ji.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(ji.fromNumber(n)));return s.compare(JL)===1&&(s=new ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Gb(e),[n,s]=Wb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new l1(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=Gb(e),[n,s]=Wb(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Vf(ye.min(),s,new rt(we),Dr(),Ce())}}class Nc{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Nc(n,r,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class YI{constructor(e,r){this.targetId=e,this.me=r}}class QI{constructor(e,r,n=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class Kb{constructor(){this.fe=0,this.ge=Qb(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ce(),r=Ce(),n=Ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:pe()}}),new Nc(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Qb()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Dr(),this.qe=Yb(),this.Qe=new rt(we)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Hh(i))if(n===0){const a=new ce(i.path);this.Ue(r,a,et.newNoDocument(a,ye.min()))}else ge(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),u=o?this.Xe(o,e,a):1;if(u!==0){this.je(r);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,l)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=ri(n).toUint8Array()}catch(u){if(u instanceof TI)return Do("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new l1(a,s,i)}catch(u){return Do(u instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&Hh(o.target)){const u=new ce(o.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,et.newNoDocument(u,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=Ce();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Vf(e,r,this.Qe,this.ke,n);return this.ke=Dr(),this.qe=Yb(),this.Qe=new rt(we),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Kb,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new qe(we),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||re("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kb),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Yb(){return new rt(ce.comparator)}function Qb(){return new rt(ce.comparator)}const e8={asc:"ASCENDING",desc:"DESCENDING"},t8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r8={and:"AND",or:"OR"};class n8{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function lg(t,e){return t.useProto3Json||Cc(e)?e:{value:e}}function Bo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s8(t,e){return Bo(t,e.toTimestamp())}function Rt(t){return ge(!!t),ye.fromTimestamp(function(r){const n=ss(r);return new at(n.seconds,n.nanos)}(t))}function c1(t,e){return cg(t,e).canonicalString()}function cg(t,e){const r=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function JI(t){const e=Fe.fromString(t);return ge(oC(e)),e}function ic(t,e){return c1(t.databaseId,e.path)}function Xn(t,e){const r=JI(e);if(r.get(1)!==t.databaseId.projectId)throw new ie(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ie(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ce(tC(r))}function ZI(t,e){return c1(t.databaseId,e)}function eC(t){const e=JI(t);return e.length===4?Fe.emptyPath():tC(e)}function dg(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tC(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Xb(t,e,r){return{name:ic(t,e),fields:r.value.mapValue.fields}}function i8(t,e,r){const n=Xn(t,e.name),s=Rt(e.updateTime),i=e.createTime?Rt(e.createTime):ye.min(),a=new Ft({mapValue:{fields:e.fields}}),o=et.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function a8(t,e){return"found"in e?function(n,s){ge(!!s.found),s.found.name,s.found.updateTime;const i=Xn(n,s.found.name),a=Rt(s.found.updateTime),o=s.found.createTime?Rt(s.found.createTime):ye.min(),u=new Ft({mapValue:{fields:s.found.fields}});return et.newFoundDocument(i,a,o,u)}(t,e):"missing"in e?function(n,s){ge(!!s.missing),ge(!!s.readTime);const i=Xn(n,s.missing),a=Rt(s.readTime);return et.newNoDocument(i,a)}(t,e):pe()}function o8(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string"),bt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array),bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(l){const h=l.code===void 0?Q.UNKNOWN:KI(l.code);return new ie(h,l.message||"")}(a);r=new QI(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Xn(t,n.document.name),i=Rt(n.document.updateTime),a=n.document.createTime?Rt(n.document.createTime):ye.min(),o=new Ft({mapValue:{fields:n.document.fields}}),u=et.newFoundDocument(s,i,a,o),l=n.targetIds||[],h=n.removedTargetIds||[];r=new ih(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Xn(t,n.document),i=n.readTime?Rt(n.readTime):ye.min(),a=et.newNoDocument(s,i),o=n.removedTargetIds||[];r=new ih([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Xn(t,n.document),i=n.removedTargetIds||[];r=new ih([],i,s,null)}else{if(!("filter"in e))return pe();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new QL(s,i),o=n.targetId;r=new YI(o,a)}}return r}function ac(t,e){let r;if(e instanceof nu)r={update:Xb(t,e.key,e.value)};else if(e instanceof su)r={delete:ic(t,e.key)};else if(e instanceof ls)r={update:Xb(t,e.key,e.data),updateMask:f8(e.fieldMask)};else{if(!(e instanceof i1))return pe();r={verify:ic(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof Po)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Oo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Lo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Fo)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw pe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:s8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe()}(t,e.precondition)),r}function hg(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?tt.updateTime(Rt(i.updateTime)):i.exists!==void 0?tt.exists(i.exists):tt.none()}(e.currentDocument):tt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let u=null;if("setToServerValue"in o)ge(o.setToServerValue==="REQUEST_TIME"),u=new Po;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];u=new Oo(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];u=new Lo(h)}else"increment"in o?u=new Fo(a,o.increment):pe();const l=st.fromServerFormat(o.fieldPath);return new s1(l,u)}(t,s)):[];if(e.update){e.update.name;const s=Xn(t,e.update.name),i=new Ft({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(u){const l=u.fieldPaths||[];return new _r(l.map(h=>st.fromServerFormat(h)))}(e.updateMask);return new ls(s,i,a,r,n)}return new nu(s,i,r,n)}if(e.delete){const s=Xn(t,e.delete);return new su(s,r)}if(e.verify){const s=Xn(t,e.verify);return new i1(s,r)}return pe()}function u8(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?Rt(s.updateTime):Rt(i);return a.isEqual(ye.min())&&(a=Rt(i)),new WL(a,s.transformResults||[])}(r,e))):[]}function rC(t,e){return{documents:[ZI(t,e.path)]}}function nC(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=ZI(t,s);const i=function(l){if(l.length!==0)return aC(Me.create(l,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Oa(m.field),direction:c8(m.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=lg(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:r,parent:s}}function sC(t){let e=eC(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){ge(n===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(p){const m=iC(p);return m instanceof Me&&r1(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(p){return p.map(m=>function(_){return new sc(La(_.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(p){let m;return m=typeof p=="object"?p.value:p,Cc(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(p){const m=!!p.before,E=p.values||[];return new Ro(E,m)}(r.startAt));let l=null;return r.endAt&&(l=function(p){const m=!p.before,E=p.values||[];return new Ro(E,m)}(r.endAt)),LL(e,s,a,i,o,"F",u,l)}function l8(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function iC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=La(r.unaryFilter.field);return Re.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=La(r.unaryFilter.field);return Re.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=La(r.unaryFilter.field);return Re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=La(r.unaryFilter.field);return Re.create(a,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(r){return Re.create(La(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Me.create(r.compositeFilter.filters.map(n=>iC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return pe()}}(r.compositeFilter.op))}(t):pe()}function c8(t){return e8[t]}function d8(t){return t8[t]}function h8(t){return r8[t]}function Oa(t){return{fieldPath:t.canonicalString()}}function La(t){return st.fromServerFormat(t.fieldPath)}function aC(t){return t instanceof Re?function(r){if(r.op==="=="){if(Ob(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NAN"}};if(Pb(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ob(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NOT_NAN"}};if(Pb(r.value))return{unaryFilter:{field:Oa(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(r.field),op:d8(r.op),value:r.value}}}(t):t instanceof Me?function(r){const n=r.getFilters().map(s=>aC(s));return n.length===1?n[0]:{compositeFilter:{op:h8(r.op),filters:n}}}(t):pe()}function f8(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function oC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,r,n,s,i=ye.min(),a=ye.min(),o=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new Wn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.ct=e}}function p8(t,e){let r;if(e.document)r=i8(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ce.fromSegments(e.noDocument.path),s=ea(e.noDocument.readTime);r=et.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe();{const n=ce.fromSegments(e.unknownDocument.path),s=ea(e.unknownDocument.version);r=et.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new at(s[0],s[1]);return ye.fromTimestamp(i)}(e.readTime)),r}function Jb(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:zh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:ic(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Bo(i,a.version.toTimestamp()),createTime:Bo(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Zi(e.version)};else{if(!e.isUnknownDocument())return pe();n.unknownDocument={path:r.path.toArray(),version:Zi(e.version)}}return n}function zh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ea(t){const e=new at(t.seconds,t.nanoseconds);return ye.fromTimestamp(e)}function Di(t,e){const r=(e.baseMutations||[]).map(i=>hg(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>hg(t.ct,i)),s=at.fromMillis(e.localWriteTimeMs);return new a1(e.batchId,s,r,n)}function al(t){const e=ea(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?ea(t.lastLimboFreeSnapshotVersion):ye.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return ge(i.documents.length===1),Hr(Bf(eC(i.documents[0])))}(t.query):function(i){return Hr(sC(i))}(t.query),new Wn(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,bt.fromBase64String(t.resumeToken))}function lC(t,e){const r=Zi(e.snapshotVersion),n=Zi(e.lastLimboFreeSnapshotVersion);let s;s=Hh(e.target)?rC(t.ct,e.target):nC(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ji(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function cC(t){const e=sC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ug(e,e.limit,"L"):e}function Im(t,e){return new u1(e.largestBatchId,hg(t.ct,e.overlayMutation))}function Zb(t,e){const r=e.path.lastSegment();return[t,ar(e.path.popLast()),r]}function ev(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Zi(n.readTime),documentKey:ar(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{getBundleMetadata(e,r){return tv(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:ea(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return tv(e).put(function(s){return{bundleId:s.id,createTime:Zi(Rt(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return rv(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:cC(i.bundledQuery),readTime:ea(i.readTime)}}(n)})}saveNamedQuery(e,r){return rv(e).put(function(s){return{name:s.name,readTime:Zi(Rt(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function tv(t){return wt(t,"bundles")}function rv(t){return wt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new qf(e,n)}getOverlay(e,r){return ju(e).get(Zb(this.userId,r)).next(n=>n?Im(this.serializer,n):null)}getOverlays(e,r){const n=vn();return z.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new u1(r,a);s.push(this.ht(e,o))}),z.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(ar(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(ju(e).j("collectionPathOverlayIndex",o))}),z.waitFor(i)}getOverlaysForCollection(e,r,n){const s=vn(),i=ar(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ju(e).U("collectionPathOverlayIndex",a).next(o=>{for(const u of o){const l=Im(this.serializer,u);s.set(l.getKey(),l)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=vn();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ju(e).J({index:"collectionGroupOverlayIndex",range:o},(u,l,h)=>{const p=Im(this.serializer,l);i.size()<s||p.largestBatchId===a?(i.set(p.getKey(),p),a=p.largestBatchId):h.done()}).next(()=>i)}ht(e,r){return ju(e).put(function(s,i,a){const[o,u,l]=Zb(i,a.mutation.key);return{userId:i,collectionPath:u,documentId:l,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ac(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function ju(t){return wt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{Pt(e){return wt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?bt.fromUint8Array(n):bt.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Xe(e.integerValue));else if("doubleValue"in e){const n=Xe(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Zl(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=ss(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(ri(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?AI(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Ff(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):pe()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Xe(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),ce.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Si.vt=new Si;function E8(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function nv(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=E8(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class y8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=nv(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=nv(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class _8{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class b8{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Uu{constructor(){this.jt=new y8,this.Ht=new _8(this.jt),this.Jt=new b8(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ni(this.indexId,this.documentKey,this.arrayValue,n)}}function gs(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=sv(t.arrayValue,e.arrayValue),r!==0?r:(r=sv(t.directionalValue,e.directionalValue),r!==0?r:ce.comparator(t.documentKey,e.documentKey)))}function sv(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.Xt=new qe((r,n)=>st.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(ge(e.collectionGroup===this.collectionId),this.nn)return!1;const r=eg(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ii(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const u=n[i];if(!this.on(o,u)||!this._n(this.en[a++],u))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new qe(st.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new eh(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new eh(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new eh(n.field,n.dir==="asc"?0:1)));return new qh(qh.UNKNOWN_ID,this.collectionId,r,Jl.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){var e,r;if(ge(t instanceof Re||t instanceof Me),t instanceof Re){if(t instanceof kI){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>Re.create(t.field,"==",i)))||[];return Me.create(s,"or")}return t}const n=t.filters.map(s=>dC(s));return Me.create(n,t.op)}function v8(t){if(t.getFilters().length===0)return[];const e=mg(dC(t));return ge(hC(e)),fg(e)||pg(e)?[e]:e.getFilters()}function fg(t){return t instanceof Re}function pg(t){return t instanceof Me&&r1(t)}function hC(t){return fg(t)||pg(t)||function(r){if(r instanceof Me&&sg(r)){for(const n of r.getFilters())if(!fg(n)&&!pg(n))return!1;return!0}return!1}(t)}function mg(t){if(ge(t instanceof Re||t instanceof Me),t instanceof Re)return t;if(t.filters.length===1)return mg(t.filters[0]);const e=t.filters.map(n=>mg(n));let r=Me.create(e,t.op);return r=Gh(r),hC(r)?r:(ge(r instanceof Me),ge(ko(r)),ge(r.filters.length>1),r.filters.reduce((n,s)=>d1(n,s)))}function d1(t,e){let r;return ge(t instanceof Re||t instanceof Me),ge(e instanceof Re||e instanceof Me),r=t instanceof Re?e instanceof Re?function(s,i){return Me.create([s,i],"and")}(t,e):av(t,e):e instanceof Re?av(e,t):function(s,i){if(ge(s.filters.length>0&&i.filters.length>0),ko(s)&&ko(i))return SI(s,i.getFilters());const a=sg(s)?s:i,o=sg(s)?i:s,u=a.filters.map(l=>d1(l,o));return Me.create(u,"or")}(t,e),Gh(r)}function av(t,e){if(ko(e))return SI(e,t.getFilters());{const r=e.filters.map(n=>d1(t,n));return Me.create(r,"or")}}function Gh(t){if(ge(t instanceof Re||t instanceof Me),t instanceof Re)return t;const e=t.getFilters();if(e.length===1)return Gh(e[0]);if(CI(t))return t;const r=e.map(s=>Gh(s)),n=[];return r.forEach(s=>{s instanceof Re?n.push(s):s instanceof Me&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Me.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(){this.un=new h1}addToCollectionParentIndex(e,r){return this.un.add(r),z.resolve()}getCollectionParents(e,r){return z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return z.resolve()}deleteFieldIndex(e,r){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,r){return z.resolve()}getDocumentsMatchingTarget(e,r){return z.resolve(null)}getIndexType(e,r){return z.resolve(0)}getFieldIndexes(e,r){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,r){return z.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,r){return z.resolve(Rr.min())}updateCollectionGroup(e,r,n){return z.resolve()}updateIndexEntries(e,r){return z.resolve()}}class h1{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new qe(Fe.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new qe(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Uint8Array(0);class A8{constructor(e,r){this.databaseId=r,this.cn=new h1,this.ln=new di(n=>Ji(n),(n,s)=>Dc(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:ar(s)};return ov(e).put(i)}return z.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[hI(r),""],!1,!0);return ov(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(bn(a.parent))}return n})}addFieldIndex(e,r){const n=Vu(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=Sa(e);return i.next(o=>{a.put(ev(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Vu(e),s=Sa(e),i=Da(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Vu(e),n=Da(e),s=Sa(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return z.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new iv(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=Da(e);let s=!0;const i=new Map;return z.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=Ce();const o=[];return z.forEach(i,(u,l)=>{re("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(u)} to execute ${Ji(r)}`);const h=function(T,F){const j=eg(F);if(j===void 0)return null;for(const $ of $h(T,j.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(l,u),p=function(T,F){const j=new Map;for(const $ of Ii(F))for(const D of $h(T,$.fieldPath))switch(D.op){case"==":case"in":j.set($.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return j.set($.fieldPath.canonicalString(),D.value),Array.from(j.values())}return null}(l,u),m=function(T,F){const j=[];let $=!0;for(const D of Ii(F)){const w=D.kind===0?jb(T,D.fieldPath,T.startAt):Ub(T,D.fieldPath,T.startAt);j.push(w.value),$&&($=w.inclusive)}return new Ro(j,$)}(l,u),E=function(T,F){const j=[];let $=!0;for(const D of Ii(F)){const w=D.kind===0?Ub(T,D.fieldPath,T.endAt):jb(T,D.fieldPath,T.endAt);j.push(w.value),$&&($=w.inclusive)}return new Ro(j,$)}(l,u),_=this.In(u,l,m),v=this.In(u,l,E),A=this.Tn(u,l,p),x=this.En(u.indexId,h,_,m.inclusive,v,E.inclusive,A);return z.forEach(x,b=>n.G(b,r.limit).next(T=>{T.forEach(F=>{const j=ce.fromSegments(F.documentKey);a.has(j)||(a=a.add(j),o.push(j))})}))}).next(()=>o)}return z.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=v8(Me.create(e.filters,"and")).map(n=>ag(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const u=(r!=null?r.length:1)*Math.max(n.length,i.length),l=u/(r!=null?r.length:1),h=[];for(let p=0;p<u;++p){const m=r?this.dn(r[p/l]):Cd,E=this.An(e,m,n[p%l],s),_=this.Rn(e,m,i[p%l],a),v=o.map(A=>this.An(e,m,A,!0));h.push(...this.createRange(E,_,v))}return h}An(e,r,n,s){const i=new Ni(e,ce.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new Ni(e,ce.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new iv(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return z.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(u){let l=new qe(st.comparator),h=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Uu;for(const s of Ii(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);Si.vt.It(i,a)}return n.zt()}dn(e){const r=new Uu;return Si.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Uu;return Si.vt.It(rc(this.databaseId,r),n.Yt(function(i){const a=Ii(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Uu);let i=0;for(const a of Ii(e)){const o=n[i++];for(const u of s)if(this.fn(r,a.fieldPath)&&nc(o))s=this.gn(s,a,o);else{const l=u.Yt(a.kind);Si.vt.It(o,l)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const u=new Uu;u.seed(o.zt()),Si.vt.It(a,u.Yt(r.kind)),i.push(u)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof Re&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Vu(e),s=Sa(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return z.forEach(i,o=>s.get([o.indexId,this.uid]).next(u=>{a.push(function(h,p){const m=p?new Jl(p.sequenceNumber,new Rr(ea(p.readTime),new ce(bn(p.documentKey)),p.largestBatchId)):Jl.empty(),E=h.fields.map(([_,v])=>new eh(st.fromServerFormat(_),v));return new qh(h.indexId,h.collectionGroup,E,m)}(o,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:we(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Vu(e),i=Sa(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>z.forEach(o,u=>i.put(ev(u.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return z.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?z.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),z.forEach(o,u=>this.wn(e,s,u).next(l=>{const h=this.Sn(i,u);return l.isEqual(h)?z.resolve():this.bn(e,i,u,l,h)}))))})}Dn(e,r,n,s){return Da(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Da(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Da(e);let i=new qe(gs);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new Ni(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new qe(gs);const s=this.Vn(r,e);if(s==null)return n;const i=eg(r);if(i!=null){const a=e.data.field(i.fieldPath);if(nc(a))for(const o of a.arrayValue.values||[])n=n.add(new Ni(r.indexId,e.key,this.dn(o),s))}else n=n.add(new Ni(r.indexId,e.key,Cd,s));return n}bn(e,r,n,s,i){re("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(u,l,h,p,m){const E=u.getIterator(),_=l.getIterator();let v=Ca(E),A=Ca(_);for(;v||A;){let x=!1,b=!1;if(v&&A){const T=h(v,A);T<0?b=!0:T>0&&(x=!0)}else v!=null?b=!0:x=!0;x?(p(A),A=Ca(_)):b?(m(v),v=Ca(E)):(v=Ca(E),A=Ca(_))}}(s,i,gs,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),z.waitFor(a)}yn(e){let r=1;return Sa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>gs(a,o)).filter((a,o,u)=>!o||gs(a,u[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=gs(a,e),u=gs(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&u<0)s.push(a),s.push(a.Zt());else if(u>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Cd,[]],u=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Cd,[]];i.push(IDBKeyRange.bound(o,u))}return i}Cn(e,r){return gs(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(uv)}getMinOffset(e,r){return z.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||pe())).next(uv)}}function ov(t){return wt(t,"collectionParents")}function Da(t){return wt(t,"indexEntries")}function Vu(t){return wt(t,"indexConfiguration")}function Sa(t){return wt(t,"indexState")}function uv(t){ge(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;X2(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new Rr(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new pr(e,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const u=n.J({range:a},(h,p,m)=>(o++,m.delete()));i.push(u.next(()=>{ge(o===1)}));const l=[];for(const h of r.mutations){const p=EI(e,h.key.path,r.batchId);i.push(s.delete(p)),l.push(h.key)}return z.waitFor(i).next(()=>l)}function Wh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(41943040,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);class Hf{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){ge(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Hf(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Es(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Fa(e),a=Es(e);return a.add({}).next(o=>{ge(typeof o=="number");const u=new a1(o,r,n,s),l=function(E,_,v){const A=v.baseMutations.map(b=>ac(E.ct,b)),x=v.mutations.map(b=>ac(E.ct,b));return{userId:_,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:A,mutations:x}}(this.serializer,this.userId,u),h=[];let p=new qe((m,E)=>we(m.canonicalString(),E.canonicalString()));for(const m of s){const E=EI(this.userId,m.key.path,o);p=p.add(m.key.path.popLast()),h.push(a.put(l)),h.push(i.put(E,iL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[o]=u.keys()}),z.waitFor(h).next(()=>u)})}lookupMutationBatch(e,r){return Es(e).get(r).next(n=>n?(ge(n.userId===this.userId),Di(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?z.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Es(e).J({index:"userMutationsIndex",range:s},(a,o,u)=>{o.userId===this.userId&&(ge(o.batchId>=n),i=Di(this.serializer,o)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Es(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Es(e).U("userMutationsIndex",r).next(n=>n.map(s=>Di(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=th(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Fa(e).J({range:s},(a,o,u)=>{const[l,h,p]=a,m=bn(h);if(l===this.userId&&r.path.isEqual(m))return Es(e).get(p).next(E=>{if(!E)throw pe();ge(E.userId===this.userId),i.push(Di(this.serializer,E))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new qe(we);const s=[];return r.forEach(i=>{const a=th(this.userId,i.path),o=IDBKeyRange.lowerBound(a),u=Fa(e).J({range:o},(l,h,p)=>{const[m,E,_]=l,v=bn(E);m===this.userId&&i.path.isEqual(v)?n=n.add(_):p.done()});s.push(u)}),z.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=th(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new qe(we);return Fa(e).J({range:a},(u,l,h)=>{const[p,m,E]=u,_=bn(m);p===this.userId&&n.isPrefixOf(_)?_.length===s&&(o=o.add(E)):h.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(Es(e).get(i).next(a=>{if(a===null)throw pe();ge(a.userId===this.userId),n.push(Di(this.serializer,a))}))}),z.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return fC(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),z.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return z.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Fa(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const u=bn(i[1]);s.push(u)}else o.done()}).next(()=>{ge(s.length===0)})})}containsKey(e,r){return pC(e,this.userId,r)}Nn(e){return mC(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pC(t,e,r){const n=th(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Fa(t).J({range:i,H:!0},(o,u,l)=>{const[h,p,m]=o;h===e&&p===s&&(a=!0),l.done()}).next(()=>a)}function Es(t){return wt(t,"mutations")}function Fa(t){return wt(t,"documentMutations")}function mC(t){return wt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ta(0)}static kn(){return new ta(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new ta(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>ye.fromTimestamp(new at(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Na(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(ge(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Na(e).J((a,o)=>{const u=al(o);u.sequenceNumber<=r&&n.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>z.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Na(e).J((n,s)=>{const i=al(s);r(i)})}qn(e){return cv(e).get("targetGlobalKey").next(r=>(ge(r!==null),r))}Qn(e,r){return cv(e).put("targetGlobalKey",r)}Kn(e,r){return Na(e).put(lC(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Ji(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Na(e).J({range:s,index:"queryTargetsIndex"},(a,o,u)=>{const l=al(o);Dc(r,l.target)&&(i=l,u.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=Ds(e);return r.forEach(a=>{const o=ar(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),z.waitFor(s)}removeMatchingKeys(e,r,n){const s=Ds(e);return z.forEach(r,i=>{const a=ar(i.path);return z.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=Ds(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=Ds(e);let i=Ce();return s.J({range:n,H:!0},(a,o,u)=>{const l=bn(a[1]),h=new ce(l);i=i.add(h)}).next(()=>i)}containsKey(e,r){const n=ar(r.path),s=IDBKeyRange.bound([n],[hI(n)],!1,!0);let i=0;return Ds(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],u,l)=>{a!==0&&(i++,l.done())}).next(()=>i>0)}ot(e,r){return Na(e).get(r).next(n=>n?al(n):null)}}function Na(t){return wt(t,"targets")}function cv(t){return wt(t,"targetGlobal")}function Ds(t){return wt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv([t,e],[r,n]){const s=we(t,r);return s===0?we(e,n):s}class w8{constructor(e){this.Un=e,this.buffer=new qe(dv),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();dv(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class I8{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ci(r)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ca(r)}await this.Hn(3e5)})}}class C8{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return z.resolve(Vr.oe);const n=new w8(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(lv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lv):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(n=p,o=Date.now(),this.removeTargets(e,n,r))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(l=Date.now(),ka()<=Ne.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(u-o)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function D8(t,e){return new C8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,r){this.db=e,this.garbageCollector=D8(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Dd(e,n)}removeReference(e,r,n){return Dd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Dd(e,r)}nr(e,r){return function(s,i){let a=!1;return mC(s).Y(o=>pC(s,o,i).next(u=>(u&&(a=!0),z.resolve(!u)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const u=this.nr(e,a).next(l=>{if(!l)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,ye.min()),Ds(e).delete(function(p){return[0,ar(p.path)]}(a))))});s.push(u)}}).next(()=>z.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Dd(e,r)}tr(e,r){const n=Ds(e);let s,i=Vr.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:u,sequenceNumber:l})=>{a===0?(i!==Vr.oe&&r(new ce(bn(s)),i),i=l,s=u):i=Vr.oe}).next(()=>{i!==Vr.oe&&r(new ce(bn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dd(t,e){return Ds(t).put(function(n,s){return{targetId:0,path:ar(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.changes=new di(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return bi(e).put(n)}removeEntry(e,r,n){return bi(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],zh(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=et.newInvalidDocument(r);return bi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qu(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:et.newInvalidDocument(r)};return bi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qu(r))},(s,i)=>{n={document:this.ir(r,i),size:Wh(i)}}).next(()=>n)}getEntries(e,r){let n=Dr();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Dr(),s=new rt(ce.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,Wh(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return z.resolve();let s=new qe(pv);r.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(qu(s.first()),qu(s.last())),a=s.getIterator();let o=a.getNext();return bi(e).J({index:"documentKeyIndex",range:i},(u,l,h)=>{const p=ce.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;o&&pv(o,p)<0;)n(o,null),o=a.getNext();o&&o.isEqual(p)&&(n(o,l),o=a.hasNext()?a.getNext():null),o?h.$(qu(o)):h.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),zh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bi(e).U(IDBKeyRange.bound(o,u,!0)).next(l=>{i==null||i.incrementDocumentReadCount(l.length);let h=Dr();for(const p of l){const m=this.ir(ce.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Sc(r,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,r,n,s){let i=Dr();const a=fv(r,n),o=fv(r,Rr.max());return bi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(u,l,h)=>{const p=this.ir(ce.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(p.key,p),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new R8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return hv(e).get("remoteDocumentGlobalKey").next(r=>(ge(!!r),r))}rr(e,r){return hv(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=p8(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(ye.min())))return n}return et.newInvalidDocument(e)}}function EC(t){return new N8(t)}class R8 extends gC{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new di(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new qe((i,a)=>we(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const u=Jb(this.cr.serializer,a);s=s.add(i.path.popLast());const l=Wh(u);n+=l-o.size,r.push(this.cr.addEntry(e,i,u))}else if(n-=o.size,this.trackRemovals){const u=Jb(this.cr.serializer,a.convertToNoDocument(ye.min()));r.push(this.cr.addEntry(e,i,u))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),z.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function hv(t){return wt(t,"remoteDocumentGlobal")}function bi(t){return wt(t,"remoteDocumentsV14")}function qu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fv(t,e){const r=e.documentKey.path.toArray();return[t,zh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function pv(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=we(r[i],n[i]),s)return s;return s=we(r.length,n.length),s||(s=we(r[r.length-2],n[n.length-2]),s||we(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Al(n.mutation,s,_r.empty(),at.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ce()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ce()){const s=vn();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=sl();return i.forEach((o,u)=>{a=a.insert(o,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=vn();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ce()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Dr();const a=Tl(),o=function(){return Tl()}();return r.forEach((u,l)=>{const h=n.get(l.key);s.has(l.key)&&(h===void 0||h.mutation instanceof ls)?i=i.insert(l.key,l):h!==void 0?(a.set(l.key,h.mutation.getFieldMask()),Al(h.mutation,l,h.mutation.getFieldMask(),at.now())):a.set(l.key,_r.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((l,h)=>a.set(l,h)),r.forEach((l,h)=>{var p;return o.set(l,new k8(h,(p=a.get(l))!==null&&p!==void 0?p:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Tl();let s=new rt((a,o)=>a-o),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(u=>{const l=r.get(u);if(l===null)return;let h=n.get(u)||_r.empty();h=o.applyToLocalView(l,h),n.set(u,h);const p=(s.get(o.batchId)||Ce()).add(u);s=s.insert(o.batchId,p)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),l=u.key,h=u.value,p=MI();h.forEach(m=>{if(!i.has(m)){const E=zI(r.get(m),n.get(m));E!==null&&p.set(m,E),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,l,p))}return z.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):PI(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):z.resolve(vn());let o=-1,u=i;return a.next(l=>z.forEach(l,(h,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),i.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,u,l,Ce())).next(h=>({batchId:o,changes:BI(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ce(r)).next(n=>{let s=sl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=sl();return this.indexManager.getCollectionParents(e,i).next(o=>z.forEach(o,u=>{const l=function(p,m){return new ru(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,n,s).next(h=>{h.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((u,l)=>{const h=l.getKey();a.get(h)===null&&(a=a.insert(h,et.newInvalidDocument(h)))});let o=sl();return a.forEach((u,l)=>{const h=i.get(u);h!==void 0&&Al(h.mutation,l,_r.empty(),at.now()),Sc(r,l)&&(o=o.insert(u,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Rt(s.createTime)}}(r)),z.resolve()}getNamedQuery(e,r){return z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:cC(s.bundledQuery),readTime:Rt(s.readTime)}}(r)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(){this.overlays=new rt(ce.comparator),this.Ir=new Map}getOverlay(e,r){return z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=vn();return z.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),z.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),z.resolve()}getOverlaysForCollection(e,r,n){const s=vn(),i=r.length+1,a=new ce(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const u=o.getNext().value,l=u.getKey();if(!r.isPrefixOf(l.path))break;l.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new rt((l,h)=>l-h);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===r&&l.largestBatchId>n){let h=i.get(l.largestBatchId);h===null&&(h=vn(),i=i.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const o=vn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>o.set(l,h)),!(o.size()>=s)););return z.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new u1(r,n));let i=this.Ir.get(r);i===void 0&&(i=Ce(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.Tr=new qe(Ct.Er),this.dr=new qe(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Ct(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Ct(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ce(new Fe([])),n=new Ct(r,e),s=new Ct(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ce(new Fe([])),n=new Ct(r,e),s=new Ct(r,e+1);let i=Ce();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new Ct(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ct{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ce.comparator(e.key,r.key)||we(e.wr,r.wr)}static Ar(e,r){return we(e.wr,r.wr)||ce.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new qe(Ct.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new a1(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Ct(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,r){return z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ct(r,0),s=new Ct(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new qe(we);return r.forEach(s=>{const i=new Ct(s,0),a=new Ct(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;ce.isDocumentKey(i)||(i=i.child(""));const a=new Ct(new ce(i),0);let o=new qe(we);return this.br.forEachWhile(u=>{const l=u.key.path;return!!n.isPrefixOf(l)&&(l.length===s&&(o=o.add(u.wr)),!0)},a),z.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ge(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return z.forEach(r.mutations,s=>{const i=new Ct(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Ct(r,0),s=this.br.firstAfterOrEqual(n);return z.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.Mr=e,this.docs=function(){return new rt(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return z.resolve(n?n.document.mutableCopy():et.newInvalidDocument(r))}getEntries(e,r){let n=Dr();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))}),z.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Dr();const a=r.path,o=new ce(a.child("")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||X2(fI(h),n)<=0||(s.has(h.key)||Sc(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,r,n,s){pe()}Or(e,r){return z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new M8(this)}getSize(e){return z.resolve(this.size)}}class M8 extends gC{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e){this.persistence=e,this.Nr=new di(r=>Ji(r),Dc),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new f1,this.targetCount=0,this.kr=ta.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ta(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,z.resolve()}updateTargetData(e,r){return this.Kn(r),z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return z.resolve(n)}containsKey(e,r){return z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Vr(0),this.Kr=!1,this.Kr=!0,this.$r=new L8,this.referenceDelegate=e(this),this.Ur=new j8(this),this.indexManager=new T8,this.remoteDocumentCache=function(s){return new B8(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new uC(r),this.Gr=new P8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new O8,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new F8(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){re("MemoryPersistence","Starting transaction:",e);const s=new U8(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class U8 extends mI{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Jr=new f1,this.Yr=null}static Zr(e){return new $f(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,n=>{const s=ce.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,ye.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return z.or([()=>z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Lf("createOrUpgrade",r);n<1&&s>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Db,{unique:!0}),u.createObjectStore("documentMutations")}(e),mv(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=z.resolve();return n<3&&s>=3&&(n!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),mv(e)),a=a.next(()=>function(u){const l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ye.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Db,{unique:!0});const p=l.store("mutations"),m=h.map(E=>p.put(E));return z.waitFor(m)})}(e,i))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(u){const l=u.createObjectStore("documentOverlays",{keyPath:EL});l.createIndex("collectionPathOverlayIndex",yL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",_L,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:aL});l.createIndex("documentKeyIndex",oL),l.createIndex("collectionGroupIndex",uL)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:fL}).createIndex("sequenceNumberIndex",pL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:mL}).createIndex("documentKeyIndex",gL,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Wh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>z.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>z.forEach(o,u=>{ge(u.userId===i.userId);const l=Di(this.serializer,u);return fC(e,i.userId,l).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const u=new Fe(a),l=function(p){return[0,ar(p)]}(u);i.push(r.get(l).next(h=>h?z.resolve():(p=>r.put({targetId:0,path:ar(p),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>z.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:hL});const n=r.store("collectionParents"),s=new h1,i=a=>{if(s.add(a)){const o=a.lastSegment(),u=a.popLast();return n.put({collectionId:o,parent:ar(u)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const u=new Fe(a);return i(u.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,u],l)=>{const h=bn(o);return i(h.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=al(s),a=lC(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),u=function(p){return p.document?new ce(Fe.fromString(p.document.name).popFirst(5)):p.noDocument?ce.fromSegments(p.noDocument.path):p.unknownDocument?ce.fromSegments(p.unknownDocument.path):pe()}(a).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(l))}).next(()=>z.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=EC(this.serializer),i=new _C($f.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(u=>{var l;let h=(l=o.get(u.userId))!==null&&l!==void 0?l:Ce();Di(this.serializer,u).keys().forEach(p=>h=h.add(p)),o.set(u.userId,h)}),z.forEach(o,(u,l)=>{const h=new rr(l),p=qf.lt(this.serializer,h),m=i.getIndexManager(h),E=Hf.lt(h,this.serializer,m,i.referenceDelegate);return new yC(s,E,p,m).recalculateAndSaveOverlaysForDocumentKeys(new tg(r,Vr.oe),u).next()})})}}function mv(t){t.createObjectStore("targetDocuments",{keyPath:cL}).createIndex("documentTargetsIndex",dL,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lL,{unique:!0}),t.createObjectStore("targetGlobal")}const Cm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class p1{constructor(e,r,n,s,i,a,o,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!p1.D())throw new ie(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new S8(this,s),this.Ai=r+"main",this.serializer=new uC(u),this.Ri=new Qs(this.Ai,this.hi,new V8(this.serializer)),this.$r=new g8,this.Ur=new x8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EC(this.serializer),this.Gr=new m8,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(Q.FAILED_PRECONDITION,Cm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Vr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ci(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Hu(e).get("owner").next(r=>z.resolve(this.vi(r)))}Ci(e){return Sd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=wt(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return z.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?z.resolve(!0):Hu(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ie(Q.FAILED_PRECONDITION,Cm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sd(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&re("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new tg(e,Vr.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sd(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Hf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A8(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){re("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(u){return u===17?TL:u===16?vL:u===15?Z2:u===14?bI:u===13?_I:u===12?bL:u===11?yI:void pe()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new tg(o,this.Qr?this.Qr.next():Vr.oe),r==="readwrite-primary"?this.wi(a).next(u=>!!u||this.Si(a)).next(u=>{if(!u)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ie(Q.FAILED_PRECONDITION,pI);return n(a)}).next(u=>this.Di(a).next(()=>u)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Hu(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ie(Q.FAILED_PRECONDITION,Cm)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hu(e).put("owner",r)}static D(){return Qs.D()}bi(e){const r=Hu(e);return r.get("owner").next(n=>this.vi(n)?(re("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):z.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(nr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;Ew()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return re("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return nr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hu(t){return wt(t,"owner")}function Sd(t){return wt(t,"clientMetadata")}function q8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Ce(),s=Ce();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new m1(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ew()?8:gI(xt())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new H8;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(ka()<=Ne.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Pa(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(ka()<=Ne.DEBUG&&re("QueryEngine","Query:",Pa(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(ka()<=Ne.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Pa(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(r))):z.resolve())}Yi(e,r){if(Vb(r))return z.resolve(null);let n=Hr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=ug(r,null,"F"),n=Hr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Ce(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(u=>{const l=this.ts(r,o);return this.ns(r,l,a,u.readTime)?this.Yi(e,ug(r,null,"F")):this.rs(e,l,r,u)}))})))}Zi(e,r,n,s){return Vb(r)||s.isEqual(ye.min())?z.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?z.resolve(null):(ka()<=Ne.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pa(r)),this.rs(e,a,r,JO(s,-1)).next(o=>o))})}ts(e,r){let n=new qe(LI(e));return r.forEach((s,i)=>{Sc(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return ka()<=Ne.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Pa(r)),this.Ji.getDocumentsMatchingQuery(e,r,Rr.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new rt(we),this._s=new di(i=>Ji(i),Dc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function vC(t,e,r,n){return new $8(t,e,r,n)}async function TC(t,e){const r=ve(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let u=Ce();for(const l of s){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of i){o.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(l=>({hs:l,removedBatchIds:a,addedBatchIds:o}))})})}function z8(t,e){const r=ve(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,u,l,h){const p=l.batch,m=p.keys();let E=z.resolve();return m.forEach(_=>{E=E.next(()=>h.getEntry(u,_)).next(v=>{const A=l.docVersions.get(_);ge(A!==null),v.version.compareTo(A)<0&&(p.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),h.addEntry(v)))})}),E.next(()=>o.mutationQueue.removeMutationBatch(u,p))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let u=Ce();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(u=u.add(o.batch.mutations[l].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function AC(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function G8(t,e){const r=ve(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;o.push(r.Ur.removeMatchingKeys(i,h.removedDocuments,p).next(()=>r.Ur.addMatchingKeys(i,h.addedDocuments,p)));let E=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,n)),s=s.insert(p,E),function(v,A,x){return v.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,E,h)&&o.push(r.Ur.updateTargetData(i,E))});let u=Dr(),l=Ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(W8(i,a,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!n.isEqual(ye.min())){const h=r.Ur.getLastRemoteSnapshotVersion(i).next(p=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(h)}return z.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,l)).next(()=>u)}).then(i=>(r.os=s,i))}function W8(t,e,r){let n=Ce(),s=Ce();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Dr();return r.forEach((o,u)=>{const l=i.get(o);u.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(o)),u.isNoDocument()&&u.version.isEqual(ye.min())?(e.removeEntry(o,u.readTime),a=a.insert(o,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),a=a.insert(o,u)):re("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function K8(t,e){const r=ve(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Y8(t,e){const r=ve(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,z.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new Wn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function gg(t,e,r){const n=ve(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ci(a))throw a;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function gv(t,e,r){const n=ve(t);let s=ye.min(),i=Ce();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,l,h){const p=ve(u),m=p._s.get(h);return m!==void 0?z.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(n,a,Hr(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(u=>{i=u})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:ye.min(),r?i:Ce())).next(o=>(Q8(n,BL(e),o),{documents:o,Ts:i})))}function Q8(t,e,r){let n=t.us.get(e)||ye.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class Ev{constructor(){this.activeTargetIds=HL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xC{constructor(){this.so=new Ev,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ev,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd=null;function Dm(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class e9 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=Dm(),u=this.xo(r,n.toUriEncodedString());re("RestConnection",`Sending RPC '${r}' ${o}:`,u,s);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,i,a),this.No(r,u,l,s).then(h=>(re("RestConnection",`Received RPC '${r}' ${o}: `,h),h),h=>{throw Do("RestConnection",`RPC '${r}' ${o} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tu}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=J8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=Dm();return new Promise((a,o)=>{const u=new aI;u.setWithCredentials(!0),u.listenOnce(oI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zd.NO_ERROR:const h=u.getResponseJson();re(zt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case Zd.TIMEOUT:re(zt,`RPC '${e}' ${i} timed out`),o(new ie(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const p=u.getStatus();if(re(zt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const E=m==null?void 0:m.error;if(E&&E.status&&E.message){const _=function(A){const x=A.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(x)>=0?x:Q.UNKNOWN}(E.status);o(new ie(_,E.message))}else o(new ie(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new ie(Q.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{re(zt,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(s);re(zt,`RPC '${e}' ${i} sending request:`,s),u.send(r,"POST",l,n,15)})}Bo(e,r,n){const s=Dm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cI(),o=lI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=i.join("");re(zt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=a.createWebChannel(h,u);let m=!1,E=!1;const _=new Z8({Io:A=>{E?re(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(m||(re(zt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),re(zt,`RPC '${e}' stream ${s} sending:`,A),p.send(A))},To:()=>p.close()}),v=(A,x,b)=>{A.listen(x,T=>{try{b(T)}catch(F){setTimeout(()=>{throw F},0)}})};return v(p,nl.EventType.OPEN,()=>{E||(re(zt,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),v(p,nl.EventType.CLOSE,()=>{E||(E=!0,re(zt,`RPC '${e}' stream ${s} transport closed`),_.So())}),v(p,nl.EventType.ERROR,A=>{E||(E=!0,Do(zt,`RPC '${e}' stream ${s} transport errored:`,A),_.So(new ie(Q.UNAVAILABLE,"The operation could not be completed")))}),v(p,nl.EventType.MESSAGE,A=>{var x;if(!E){const b=A.data[0];ge(!!b);const T=b,F=T.error||((x=T[0])===null||x===void 0?void 0:x.error);if(F){re(zt,`RPC '${e}' stream ${s} received error:`,F);const j=F.status;let $=function(k){const I=Et[k];if(I!==void 0)return KI(I)}(j),D=F.message;$===void 0&&($=Q.INTERNAL,D="Unknown error status: "+j+" with message "+F.message),E=!0,_.So(new ie($,D)),p.close()}else re(zt,`RPC '${e}' stream ${s} received:`,b),_.bo(b)}}),v(o,uI.STAT_EVENT,A=>{A.stat===Z0.PROXY?re(zt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Z0.NOPROXY&&re(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(){return typeof window<"u"?window:null}function ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t){return new n8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,r,n,s,i,a,o,u){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g1(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Q.RESOURCE_EXHAUSTED?(nr(r.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new ie(Q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r9 extends wC{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=o8(this.serializer,e),n=function(i){if(!("targetChange"in i))return ye.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ye.min():a.readTime?Rt(a.readTime):ye.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=dg(this.serializer),r.addTarget=function(i,a){let o;const u=a.target;if(o=Hh(u)?{documents:rC(i,u)}:{query:nC(i,u)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=XI(i,a.resumeToken);const l=lg(i,a.expectedCount);l!==null&&(o.expectedCount=l)}else if(a.snapshotVersion.compareTo(ye.min())>0){o.readTime=Bo(i,a.snapshotVersion.toTimestamp());const l=lg(i,a.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const n=l8(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=dg(this.serializer),r.removeTarget=e,this.a_(r)}}class n9 extends wC{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=u8(e.writeResults,e.commitTime),n=Rt(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=dg(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>ac(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ie(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,cg(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(Q.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,cg(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(Q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class i9{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nr(r),this.D_=!1):re("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{ha(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=ve(u);l.L_.add(4),await iu(l),l.q_.set("Unknown"),l.L_.delete(4),await Rc(l)}(this))})}),this.q_=new i9(n,s)}}async function Rc(t){if(ha(t))for(const e of t.B_)await e(!0)}async function iu(t){for(const e of t.B_)await e(!1)}function IC(t,e){const r=ve(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),b1(r)?_1(r):au(r).r_()&&y1(r,e))}function E1(t,e){const r=ve(t),n=au(r);r.N_.delete(e),n.r_()&&CC(r,e),r.N_.size===0&&(n.r_()?n.o_():ha(r)&&r.q_.set("Unknown"))}function y1(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}au(t).A_(e)}function CC(t,e){t.Q_.xe(e),au(t).R_(e)}function _1(t){t.Q_=new ZL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),au(t).start(),t.q_.v_()}function b1(t){return ha(t)&&!au(t).n_()&&t.N_.size>0}function ha(t){return ve(t).L_.size===0}function DC(t){t.Q_=void 0}async function o9(t){t.q_.set("Online")}async function u9(t){t.N_.forEach((e,r)=>{y1(t,e)})}async function l9(t,e){DC(t),b1(t)?(t.q_.M_(e),_1(t)):t.q_.set("Unknown")}async function c9(t,e,r){if(t.q_.set("Online"),e instanceof QI&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Kh(t,n)}else if(e instanceof ih?t.Q_.Ke(e):e instanceof YI?t.Q_.He(e):t.Q_.We(e),!r.isEqual(ye.min()))try{const n=await AC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(l);h&&i.N_.set(l,h.withResumeToken(u.resumeToken,a))}}),o.targetMismatches.forEach((u,l)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),CC(i,u);const p=new Wn(h.target,u,l,h.sequenceNumber);y1(i,p)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){re("RemoteStore","Failed to raise snapshot:",n),await Kh(t,n)}}async function Kh(t,e,r){if(!ci(e))throw e;t.L_.add(1),await iu(t),t.q_.set("Offline"),r||(r=()=>AC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Rc(t)})}function SC(t,e){return e().catch(r=>Kh(t,r,e))}async function kc(t){const e=ve(t),r=si(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;d9(e);)try{const s=await K8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,h9(e,s)}catch(s){await Kh(e,s)}NC(e)&&RC(e)}function d9(t){return ha(t)&&t.O_.length<10}function h9(t,e){t.O_.push(e);const r=si(t);r.r_()&&r.V_&&r.m_(e.mutations)}function NC(t){return ha(t)&&!si(t).n_()&&t.O_.length>0}function RC(t){si(t).start()}async function f9(t){si(t).p_()}async function p9(t){const e=si(t);for(const r of t.O_)e.m_(r.mutations)}async function m9(t,e,r){const n=t.O_.shift(),s=o1.from(n,e,r);await SC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kc(t)}async function g9(t,e){e&&si(t).V_&&await async function(n,s){if(function(a){return WI(a)&&a!==Q.ABORTED}(s.code)){const i=n.O_.shift();si(n).s_(),await SC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kc(n)}}(t,e),NC(t)&&RC(t)}async function _v(t,e){const r=ve(t);r.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const n=ha(r);r.L_.add(3),await iu(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Rc(r)}async function E9(t,e){const r=ve(t);e?(r.L_.delete(2),await Rc(r)):e||(r.L_.add(2),await iu(r),r.q_.set("Unknown"))}function au(t){return t.K_||(t.K_=function(r,n,s){const i=ve(r);return i.w_(),new r9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:o9.bind(null,t),Ro:u9.bind(null,t),mo:l9.bind(null,t),d_:c9.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),b1(t)?_1(t):t.q_.set("Unknown")):(await t.K_.stop(),DC(t))})),t.K_}function si(t){return t.U_||(t.U_=function(r,n,s){const i=ve(r);return i.w_(),new n9(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:f9.bind(null,t),mo:g9.bind(null,t),f_:p9.bind(null,t),g_:m9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await kc(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new on,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new v1(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T1(t,e){if(nr("AsyncQueue",`${e}: ${t}`),ci(t))return new ie(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ce.comparator(r.key,n.key):(r,n)=>ce.comparator(r.key,n.key),this.keyedMap=sl(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new po;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.W_=new rt(ce.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Mo{constructor(e,r,n,s,i,a,o,u,l){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new Mo(e,r,po.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _9{constructor(){this.queries=vv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=ve(r),i=s.queries;s.queries=vv(),i.forEach((a,o)=>{for(const u of o.j_)u.onError(n)})})(this,new ie(Q.ABORTED,"Firestore shutting down"))}}function vv(){return new di(t=>OI(t),Mf)}async function kC(t,e){const r=ve(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new y9,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=T1(a,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&A1(r)}async function PC(t,e){const r=ve(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function b9(t,e){const r=ve(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&A1(r)}function v9(t,e,r){const n=ve(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function A1(t){t.Y_.forEach(e=>{e.next()})}var Eg,Tv;(Tv=Eg||(Eg={})).ea="default",Tv.Cache="cache";class OC{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Mo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.key=e}}class FC{constructor(e){this.key=e}}class T9{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ce(),this.mutatedKeys=Ce(),this.Aa=LI(e),this.Ra=new po(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new bv,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),E=Sc(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),v=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;m&&E?m.data.isEqual(E.data)?_!==v&&(n.track({type:3,doc:E}),A=!0):this.ga(m,E)||(n.track({type:2,doc:E}),A=!0,(u&&this.Aa(E,u)>0||l&&this.Aa(E,l)<0)&&(o=!0)):!m&&E?(n.track({type:0,doc:E}),A=!0):m&&!E&&(n.track({type:1,doc:m}),A=!0,(u||l)&&(o=!0)),A&&(E?(a=a.add(E),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,p)=>function(E,_){const v=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return v(E)-v(_)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,l=u!==this.Ea;return this.Ea=u,a.length!==0||l?{snapshot:new Mo(this.query,e.Ra,i,a,e.mutatedKeys,u===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ce(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new FC(n))}),this.da.forEach(n=>{e.has(n)||r.push(new LC(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ce();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class A9{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class x9{constructor(e){this.key=e,this.va=!1}}class w9{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new di(o=>OI(o),Mf),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(ce.comparator),this.Na=new Map,this.La=new f1,this.Ba={},this.ka=new Map,this.qa=ta.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function I9(t,e,r=!0){const n=qC(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await BC(n,e,r,!0),s}async function C9(t,e){const r=qC(t);await BC(r,e,!0,!1)}async function BC(t,e,r,n){const s=await Y8(t.localStore,Hr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await D9(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&IC(t.remoteStore,s),o}async function D9(t,e,r,n,s){t.Ka=(p,m,E)=>async function(v,A,x,b){let T=A.view.ma(x);T.ns&&(T=await gv(v.localStore,A.query,!1).then(({documents:D})=>A.view.ma(D,T)));const F=b&&b.targetChanges.get(A.targetId),j=b&&b.targetMismatches.get(A.targetId)!=null,$=A.view.applyChanges(T,v.isPrimaryClient,F,j);return xv(v,A.targetId,$.wa),$.snapshot}(t,p,m,E);const i=await gv(t.localStore,e,!0),a=new T9(e,i.Ts),o=a.ma(i.documents),u=Nc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),l=a.applyChanges(o,t.isPrimaryClient,u);xv(t,r,l.wa);const h=new A9(e,r,a);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),l.snapshot}async function S9(t,e,r){const n=ve(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Mf(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await gg(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&E1(n.remoteStore,s.targetId),yg(n,s.targetId)}).catch(ca)):(yg(n,s.targetId),await gg(n.localStore,s.targetId,!0))}async function N9(t,e){const r=ve(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),E1(r.remoteStore,n.targetId))}async function R9(t,e,r){const n=HC(t);try{const s=await function(a,o){const u=ve(a),l=at.now(),h=o.reduce((E,_)=>E.add(_.key),Ce());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let _=Dr(),v=Ce();return u.cs.getEntries(E,h).next(A=>{_=A,_.forEach((x,b)=>{b.isValidDocument()||(v=v.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,_)).next(A=>{p=A;const x=[];for(const b of o){const T=YL(b,p.get(b.key).overlayedDocument);T!=null&&x.push(new ls(b.key,T,wI(T.value.mapValue),tt.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,x,o)}).next(A=>{m=A;const x=A.applyToLocalDocumentSet(p,v);return u.documentOverlayCache.saveOverlays(E,A.batchId,x)})}).then(()=>({batchId:m.batchId,changes:BI(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,u){let l=a.Ba[a.currentUser.toKey()];l||(l=new rt(we)),l=l.insert(o,u),a.Ba[a.currentUser.toKey()]=l}(n,s.batchId,r),await Pc(n,s.changes),await kc(n.remoteStore)}catch(s){const i=T1(s,"Failed to persist write");r.reject(i)}}async function MC(t,e){const r=ve(t);try{const n=await G8(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ge(a.va):s.removedDocuments.size>0&&(ge(a.va),a.va=!1))}),await Pc(r,n,e)}catch(n){await ca(n)}}function Av(t,e,r){const n=ve(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const u=ve(a);u.onlineState=o;let l=!1;u.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(o)&&(l=!0)}),l&&A1(u)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function k9(t,e,r){const n=ve(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new rt(ce.comparator);a=a.insert(i,et.newNoDocument(i,ye.min()));const o=Ce().add(i),u=new Vf(ye.min(),new Map,new rt(we),a,o);await MC(n,u),n.Oa=n.Oa.remove(i),n.Na.delete(e),x1(n)}else await gg(n.localStore,e,!1).then(()=>yg(n,e,r)).catch(ca)}async function P9(t,e){const r=ve(t),n=e.batch.batchId;try{const s=await z8(r.localStore,e);UC(r,n,null),jC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Pc(r,s)}catch(s){await ca(s)}}async function O9(t,e,r){const n=ve(t);try{const s=await function(a,o){const u=ve(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,o).next(p=>(ge(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(n.localStore,e);UC(n,e,r),jC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Pc(n,s)}catch(s){await ca(s)}}function jC(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function UC(t,e,r){const n=ve(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function yg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||VC(t,n)})}function VC(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(E1(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),x1(t))}function xv(t,e,r){for(const n of r)n instanceof LC?(t.La.addReference(n.key,e),L9(t,n)):n instanceof FC?(re("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||VC(t,n.key)):pe()}function L9(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(re("SyncEngine","New document in limbo: "+r),t.xa.add(n),x1(t))}function x1(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ce(Fe.fromString(e)),n=t.qa.next();t.Na.set(n,new x9(r)),t.Oa=t.Oa.insert(r,n),IC(t.remoteStore,new Wn(Hr(Bf(r.path)),n,"TargetPurposeLimboResolution",Vr.oe))}}async function Pc(t,e,r){const n=ve(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,u)=>{a.push(n.Ka(u,e,r).then(l=>{var h;if((l||r)&&n.isPrimaryClient){const p=l?!l.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){s.push(l);const p=m1.Wi(u.targetId,l);i.push(p)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(u,l){const h=ve(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(l,m=>z.forEach(m.$i,E=>h.persistence.referenceDelegate.addReference(p,m.targetId,E)).next(()=>z.forEach(m.Ui,E=>h.persistence.referenceDelegate.removeReference(p,m.targetId,E)))))}catch(p){if(!ci(p))throw p;re("LocalStore","Failed to update sequence numbers: "+p)}for(const p of l){const m=p.targetId;if(!p.fromCache){const E=h.os.get(m),_=E.snapshotVersion,v=E.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(m,v)}}}(n.localStore,i))}async function F9(t,e){const r=ve(t);if(!r.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const n=await TC(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(u=>{u.reject(new ie(Q.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Pc(r,n.hs)}}function B9(t,e){const r=ve(t),n=r.Na.get(e);if(n&&n.va)return Ce().add(n.key);{let s=Ce();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function qC(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k9.bind(null,e),e.Ca.d_=b9.bind(null,e.eventManager),e.Ca.$a=v9.bind(null,e.eventManager),e}function HC(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O9.bind(null,e),e}class oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return vC(this.persistence,new bC,e.initialUser,this.serializer)}Ga(e){return new _C($f.Zr,this.serializer)}Wa(e){return new xC}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oc.provider={build:()=>new oc};class M9 extends oc{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await HC(this.Ja.syncEngine),await kc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return vC(this.persistence,new bC,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new I8(n,e.asyncQueue,r)}Ha(e,r){const n=new rL(r,this.persistence);return new tL(e.asyncQueue,n)}Ga(e){const r=q8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new p1(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,t9(),ah(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new xC}}class Yh{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Av(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=F9.bind(null,this.syncEngine),await E9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _9}()}createDatastore(e){const r=zf(e.databaseInfo.databaseId),n=function(i){return new e9(i)}(e.databaseInfo);return function(i,a,o,u){return new s9(i,a,o,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new a9(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>Av(this.syncEngine,r,0),function(){return yv.D()?new yv:new X8}())}createSyncEngine(e,r){return function(s,i,a,o,u,l,h){const p=new w9(s,i,a,o,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=ve(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await iu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Yh.provider={build:()=>new Yh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=ve(s),o={documents:i.map(p=>ic(a.serializer,p))},u=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Fe.emptyPath(),o,i.length),l=new Map;u.forEach(p=>{const m=a8(a.serializer,p);l.set(m.key.toString(),m)});const h=[];return i.forEach(p=>{const m=l.get(p.toString());ge(!!m),h.push(m)}),h}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=ce.fromPath(n);this.mutations.push(new i1(s,this.precondition(s)))}),await async function(n,s){const i=ve(n),a={writes:s.map(o=>ac(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,Fe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw pe();r=ye.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ie(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(ye.min())?tt.exists(!1):tt.updateTime(r):tt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(ye.min()))throw new ie(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tt.updateTime(r)}return tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new g1(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new j9(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Cc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!WI(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=rr.UNAUTHENTICATED,this.clientId=dI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{re("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(re("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new on;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=T1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Sm(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await TC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wv(t,e){t.asyncQueue.verifyOperationInProgress();const r=await zC(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>_v(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>_v(e.remoteStore,s)),t._onlineComponents=e}async function zC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Q.FAILED_PRECONDITION||s.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Do("Error using user provided cache. Falling back to memory cache: "+r),await Sm(t,new oc)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await Sm(t,new oc);return t._offlineComponents}async function Gf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await wv(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await wv(t,new Yh))),t._onlineComponents}function GC(t){return zC(t).then(e=>e.persistence)}function WC(t){return Gf(t).then(e=>e.remoteStore)}function q9(t){return Gf(t).then(e=>e.syncEngine)}function H9(t){return Gf(t).then(e=>e.datastore)}async function KC(t){const e=await Gf(t),r=e.eventManager;return r.onListen=I9.bind(null,e.syncEngine),r.onUnlisten=S9.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=C9.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=N9.bind(null,e.syncEngine),r}function $9(t){return t.asyncQueue.enqueue(async()=>{const e=await GC(t),r=await WC(t);return e.setNetworkEnabled(!0),function(s){const i=ve(s);return i.L_.delete(0),Rc(i)}(r)})}function z9(t){return t.asyncQueue.enqueue(async()=>{const e=await GC(t),r=await WC(t);return e.setNetworkEnabled(!1),async function(s){const i=ve(s);i.L_.add(0),await iu(i),i.q_.set("Offline")}(r)})}function G9(t,e,r={}){const n=new on;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,u,l){const h=new $C({next:m=>{h.Za(),a.enqueueAndForget(()=>PC(i,p));const E=m.docs.has(o);!E&&m.fromCache?l.reject(new ie(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&m.fromCache&&u&&u.source==="server"?l.reject(new ie(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new OC(Bf(o.path),h,{includeMetadataChanges:!0,_a:!0});return kC(i,p)}(await KC(t),t.asyncQueue,e,r,n)),n.promise}function W9(t,e,r={}){const n=new on;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,u,l){const h=new $C({next:m=>{h.Za(),a.enqueueAndForget(()=>PC(i,p)),m.fromCache&&u.source==="server"?l.reject(new ie(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new OC(o,h,{includeMetadataChanges:!0,_a:!0});return kC(i,p)}(await KC(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t,e,r){if(!r)throw new ie(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K9(t,e,r,n){if(e===!0&&n===!0)throw new ie(Q.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Cv(t){if(!ce.isDocumentKey(t))throw new ie(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dv(t){if(ce.isDocumentKey(t))throw new ie(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Wf(t);throw new ie(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ie(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ie(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class w1{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sv(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new $O;switch(n.type){case"firstParty":return new WO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ie(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Iv.get(r);n&&(re("ComponentProvider","Removing Datastore"),Iv.delete(r),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class Yt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class Xs extends fa{constructor(e,r,n){super(e,r,Bf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new ce(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function At(t,e,...r){if(t=ut(t),QC("collection","path",e),t instanceof w1){const n=Fe.fromString(e,...r);return Dv(n),new Xs(t,null,n)}{if(!(t instanceof Yt||t instanceof Xs))throw new ie(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fe.fromString(e,...r));return Dv(n),new Xs(t.firestore,null,n)}}function Ve(t,e,...r){if(t=ut(t),arguments.length===1&&(e=dI.newId()),QC("doc","path",e),t instanceof w1){const n=Fe.fromString(e,...r);return Cv(n),new Yt(t,null,new ce(n))}{if(!(t instanceof Yt||t instanceof Xs))throw new ie(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fe.fromString(e,...r));return Cv(n),new Yt(t.firestore,t instanceof Xs?t.converter:null,new ce(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g1(this,"async_queue_retry"),this.Vu=()=>{const n=ah();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=ah();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=ah();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new on;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ci(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw nr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=v1.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=-1;class Gr extends w1{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Nv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nv(e),this._firestoreClient=void 0,await e}}}function Q9(t,e,r){r||(r="(default)");const n=U2(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Kl(i,e))return s;throw new ie(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function pa(t){if(t._terminated)throw new ie(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XC(t),t._firestoreClient}function XC(t){var e,r,n;const s=t._freezeSettings(),i=function(o,u,l,h){return new xL(o,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,YC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new V9(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(t._componentsProvider))}function X9(t,e){Do("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return J9(t,Yh.provider,{build:n=>new M9(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function J9(t,e,r){if((t=or(t,Gr))._firestoreClient||t._terminated)throw new ie(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ie(Q.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},XC(t)}function Z9(t){return $9(pa(t=or(t,Gr)))}function eF(t){return z9(pa(t=or(t,Gr)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(bt.fromBase64String(e))}catch(r){throw new ie(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ra(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ie(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ie(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ie(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=/^__.*__$/;class rF{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,r,this.fieldTransforms):new nu(e,this.data,r,this.fieldTransforms)}}class JC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ls(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ZC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class D1{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new D1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ZC(this.Cu)&&tF.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nF{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||zf(e)}Qu(e,r,n,s=!1){return new D1({Cu:e,methodName:r,qu:n,path:st.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uu(t){const e=t._freezeSettings(),r=zf(t._databaseId);return new nF(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Kf(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);P1("Data must be an object, but it was:",a,n);const o=eD(n,a);let u,l;if(i.merge)u=new _r(a.fieldMask),l=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=_g(e,p,r);if(!a.contains(m))throw new ie(Q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rD(h,m)||h.push(m)}u=new _r(h),l=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=a.fieldTransforms;return new rF(new Ft(o),u,l)}class Lc extends Oc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lc}}class S1 extends Oc{_toFieldTransform(e){return new s1(e.path,new Po)}isEqual(e){return e instanceof S1}}class N1 extends Oc{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Fo(e.serializer,UI(e.serializer,this.$u));return new s1(e.path,r)}isEqual(e){return e instanceof N1&&this.$u===e.$u}}function R1(t,e,r,n){const s=t.Qu(1,e,r);P1("Data must be an object, but it was:",s,n);const i=[],a=Ft.empty();da(n,(u,l)=>{const h=O1(e,u,r);l=ut(l);const p=s.Nu(h);if(l instanceof Lc)i.push(h);else{const m=Fc(l,p);m!=null&&(i.push(h),a.set(h,m))}});const o=new _r(i);return new JC(a,o,s.fieldTransforms)}function k1(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[_g(e,n,r)],u=[s];if(i.length%2!=0)throw new ie(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(_g(e,i[m])),u.push(i[m+1]);const l=[],h=Ft.empty();for(let m=o.length-1;m>=0;--m)if(!rD(l,o[m])){const E=o[m];let _=u[m];_=ut(_);const v=a.Nu(E);if(_ instanceof Lc)l.push(E);else{const A=Fc(_,v);A!=null&&(l.push(E),h.set(E,A))}}const p=new _r(l);return new JC(h,p,a.fieldTransforms)}function sF(t,e,r,n=!1){return Fc(r,t.Qu(n?4:3,e))}function Fc(t,e){if(tD(t=ut(t)))return P1("Unsupported field value:",e,t),eD(t,e);if(t instanceof Oc)return function(n,s){if(!ZC(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let u=Fc(o,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=ut(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return UI(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=at.fromDate(n);return{timestampValue:Bo(s.serializer,i)}}if(n instanceof at){const i=new at(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Bo(s.serializer,i)}}if(n instanceof I1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ra)return{bytesValue:XI(s.serializer,n._byteString)};if(n instanceof Yt){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:c1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof C1)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Bu("VectorValues must only contain numeric values.");return n1(o.serializer,u)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Wf(n)}`)}(t,e)}function eD(t,e){const r={};return vI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(n,s)=>{const i=Fc(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function tD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof I1||t instanceof ra||t instanceof Yt||t instanceof Oc||t instanceof C1)}function P1(t,e,r){if(!tD(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Wf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function _g(t,e,r){if((e=ut(e))instanceof ou)return e._internalPath;if(typeof e=="string")return O1(t,e);throw Qh("Field path arguments must be of type string or ",t,!1,void 0,r)}const iF=new RegExp("[~\\*/\\[\\]]");function O1(t,e,r){if(e.search(iF)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ou(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Qh(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${n}`),a&&(u+=` in document ${s}`),u+=")"),new ie(Q.INVALID_ARGUMENT,o+t+u)}function rD(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Yf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class aF extends Xh{data(){return super.data()}}function Yf(t,e){return typeof e=="string"?O1(t,e):e instanceof ou?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L1{}class nD extends L1{}function Kt(t,e,...r){let n=[];e instanceof L1&&n.push(e),n=n.concat(r),function(i){const a=i.filter(u=>u instanceof F1).length,o=i.filter(u=>u instanceof Qf).length;if(a>1||a>0&&o>0)throw new ie(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Qf extends nD{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Qf(e,r,n)}_apply(e){const r=this._parse(e);return sD(e._query,r),new fa(e.firestore,e.converter,og(e._query,r))}_parse(e){const r=uu(e.firestore);return function(i,a,o,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){kv(p,h);const E=[];for(const _ of p)E.push(Rv(u,i,_));m={arrayValue:{values:E}}}else m=Rv(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||kv(p,h),m=sF(o,a,p,h==="in"||h==="not-in");return Re.create(l,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Bt(t,e,r){const n=e,s=Yf("where",t);return Qf._create(s,n,r)}class F1 extends L1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new F1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Me.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const u of o)sD(a,u),a=og(a,u)}(e._query,r),new fa(e.firestore,e.converter,og(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class B1 extends nD{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new B1(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new ie(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(i,a)}(e._query,this._field,this._direction);return new fa(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new ru(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Jh(t,e="asc"){const r=e,n=Yf("orderBy",t);return B1._create(n,r)}function Rv(t,e,r){if(typeof(r=ut(r))=="string"){if(r==="")throw new ie(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PI(e)&&r.indexOf("/")!==-1)throw new ie(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Fe.fromString(r));if(!ce.isDocumentKey(n))throw new ie(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rc(t,new ce(n))}if(r instanceof Yt)return rc(t,r._key);throw new ie(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(r)}.`)}function kv(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sD(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ie(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class iD{convertValue(e,r="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return da(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Xe(a.doubleValue));return new C1(i)}convertGeoPoint(e){return new I1(Xe(e.latitude),Xe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=t1(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const r=ss(e);return new at(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Fe.fromString(e);ge(oC(n));const s=new Qi(n.get(1),n.get(3)),i=new ce(n.popFirst(5));return s.isEqual(r)||nr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class uF extends iD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class M1 extends Xh{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Yf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class oh extends M1{data(e={}){return super.data(e)}}class lF{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Xa(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new oh(this._firestore,this._userDataWriter,n.key,n,new Xa(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ie(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const u=new oh(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xa(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const u=new oh(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Xa(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,h=-1;return o.type!==0&&(l=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:cF(o.type),doc:u,oldIndex:l,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function cF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){t=or(t,Yt);const e=or(t.firestore,Gr);return G9(pa(e),t._key).then(r=>dF(e,t,r))}class j1 extends iD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,r)}}function sr(t){t=or(t,fa);const e=or(t.firestore,Gr),r=pa(e),n=new j1(e);return oF(t._query),W9(r,t._query).then(s=>new lF(e,n,t,s))}function ol(t,e,r){t=or(t,Yt);const n=or(t.firestore,Gr),s=Xf(t.converter,e,r);return Bc(n,[Kf(uu(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,tt.none())])}function Os(t,e,r,...n){t=or(t,Yt);const s=or(t.firestore,Gr),i=uu(s);let a;return a=typeof(e=ut(e))=="string"||e instanceof ou?k1(i,"updateDoc",t._key,e,r,n):R1(i,"updateDoc",t._key,e),Bc(s,[a.toMutation(t._key,tt.exists(!0))])}function jo(t){return Bc(or(t.firestore,Gr),[new su(t._key,tt.none())])}function U1(t,e){const r=or(t.firestore,Gr),n=Ve(t),s=Xf(t.converter,e);return Bc(r,[Kf(uu(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,tt.exists(!1))]).then(()=>n)}function Bc(t,e){return function(n,s){const i=new on;return n.asyncQueue.enqueueAndForget(async()=>R9(await q9(n),s,i)),i.promise}(pa(t),e)}function dF(t,e,r){const n=r.docs.get(e._key),s=new j1(t);return new M1(t,s,e._key,n,new Xa(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=uu(e)}set(e,r,n){this._verifyNotCommitted();const s=Ss(e,this._firestore),i=Xf(s.converter,r,n),a=Kf(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,tt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Ss(e,this._firestore);let a;return a=typeof(r=ut(r))=="string"||r instanceof ou?k1(this._dataReader,"WriteBatch.update",i._key,r,n,s):R1(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,tt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Ss(e,this._firestore);return this._mutations=this._mutations.concat(new su(r._key,tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ss(t,e){if((t=ut(t)).firestore!==e)throw new ie(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=uu(r)}get(r){const n=Ss(r,this._firestore),s=new uF(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return pe();const a=i[0];if(a.isFoundDocument())return new Xh(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new Xh(this._firestore,s,n._key,null,n.converter);throw pe()})}set(r,n,s){const i=Ss(r,this._firestore),a=Xf(i.converter,n,s),o=Kf(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=Ss(r,this._firestore);let o;return o=typeof(n=ut(n))=="string"||n instanceof ou?k1(this._dataReader,"Transaction.update",a._key,n,s,i):R1(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=Ss(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Ss(e,this._firestore),n=new j1(this._firestore);return super.get(e).then(s=>new M1(this._firestore,n,r._key,s._document,new Xa(!1,!1),r.converter))}}function Pv(t,e,r){t=or(t,Gr);const n=Object.assign(Object.assign({},hF),r);return function(i){if(i.maxAttempts<1)throw new ie(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const u=new on;return i.asyncQueue.enqueueAndForget(async()=>{const l=await H9(i);new U9(i.asyncQueue,l,o,a,u).au()}),u.promise}(pa(t),s=>e(new pF(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(){return new Lc("deleteField")}function V1(){return new S1("serverTimestamp")}function Li(t){return new N1("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t){return pa(t=or(t,Gr)),new fF(t,e=>Bc(t,e))}(function(e,r=!0){(function(s){tu=s})(Zo),Io(new Gi("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new Gr(new zO(n.getProvider("auth-internal")),new YO(n.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ie(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qi(l.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ys(wb,"4.7.3",e),Ys(wb,"4.7.3","esm2017")})();const EF={apiKey:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",authDomain:"supercurators.firebaseapp.com",projectId:"supercurators",storageBucket:"supercurators.appspot.com",messagingSenderId:"901131239470",appId:"1:901131239470:web:abc123def456"},aD=vw(EF),pt=VO(aD),_e=Q9(aD,{cacheSizeBytes:Y9,experimentalForceLongPolling:!0}),yF=async()=>{try{try{await X9(_e),console.log("Offline persistence enabled")}catch(t){t instanceof Nn&&(t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence enabled in another tab"):t.code==="unimplemented"&&console.warn("Browser does not support persistence"))}return await pt.authStateReady(),console.log("Firebase initialized successfully"),!0}catch(t){return console.error("Firebase initialization error:",t),!1}},_F={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",VITE_FIREBASE_APP_ID:"1:901131239470:web:abc123def456",VITE_FIREBASE_AUTH_DOMAIN:"supercurators.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"901131239470",VITE_FIREBASE_PROJECT_ID:"supercurators",VITE_FIREBASE_STORAGE_BUCKET:"supercurators.appspot.com"},Ov=t=>{let e;const r=new Set,n=(h,p)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const E=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(_=>_(e,E))}},s=()=>e,u={setState:n,getState:s,getInitialState:()=>l,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{(_F?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=e=t(n,s,u);return u},bF=t=>t?Ov(t):Ov;var oD={exports:{}},uD={},lD={exports:{}},cD={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=M;function vF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TF=typeof Object.is=="function"?Object.is:vF,AF=Uo.useState,xF=Uo.useEffect,wF=Uo.useLayoutEffect,IF=Uo.useDebugValue;function CF(t,e){var r=e(),n=AF({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return wF(function(){s.value=r,s.getSnapshot=e,Nm(s)&&i({inst:s})},[t,r,e]),xF(function(){return Nm(s)&&i({inst:s}),t(function(){Nm(s)&&i({inst:s})})},[t]),IF(r),r}function Nm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!TF(t,r)}catch{return!0}}function DF(t,e){return e()}var SF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?DF:CF;cD.useSyncExternalStore=Uo.useSyncExternalStore!==void 0?Uo.useSyncExternalStore:SF;lD.exports=cD;var NF=lD.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=M,RF=NF;function kF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var PF=typeof Object.is=="function"?Object.is:kF,OF=RF.useSyncExternalStore,LF=Jf.useRef,FF=Jf.useEffect,BF=Jf.useMemo,MF=Jf.useDebugValue;uD.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=LF(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=BF(function(){function u(E){if(!l){if(l=!0,h=E,E=n(E),s!==void 0&&a.hasValue){var _=a.value;if(s(_,E))return p=_}return p=E}if(_=p,PF(h,E))return _;var v=n(E);return s!==void 0&&s(_,v)?_:(h=E,p=v)}var l=!1,h,p,m=r===void 0?null:r;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,r,n,s]);var o=OF(t,i[0],i[1]);return FF(function(){a.hasValue=!0,a.value=o},[o]),MF(o),o};oD.exports=uD;var jF=oD.exports;const UF=zo(jF),dD={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",VITE_FIREBASE_APP_ID:"1:901131239470:web:abc123def456",VITE_FIREBASE_AUTH_DOMAIN:"supercurators.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"901131239470",VITE_FIREBASE_PROJECT_ID:"supercurators",VITE_FIREBASE_STORAGE_BUCKET:"supercurators.appspot.com"},{useDebugValue:VF}=yn,{useSyncExternalStoreWithSelector:qF}=UF;let Lv=!1;const HF=t=>t;function $F(t,e=HF,r){(dD?"production":void 0)!=="production"&&r&&!Lv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Lv=!0);const n=qF(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return VF(n),n}const Fv=t=>{(dD?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?bF(t):t,r=(n,s)=>$F(e,n,s);return Object.assign(r,e),r},Mc=t=>t?Fv(t):Fv,Wr=Mc(t=>({user:null,loading:!1,error:null,initialized:!1,initialize:async()=>{try{try{await C5(pt,Qw)}catch(e){console.warn("Failed to set persistence:",e)}return new Promise(e=>{const r=N5(pt,async n=>{try{if(n){const s=await Js(Ve(_e,"users",n.uid));if(s.exists())t({user:s.data(),initialized:!0});else{const i={id:n.uid,email:n.email,name:n.displayName||n.email.split("@")[0],avatar_url:n.photoURL||`https://api.dicebear.com/7.x/bottts/svg?seed=${n.email}`,created_at:new Date().toISOString()};await ol(Ve(_e,"users",n.uid),i),t({user:i,initialized:!0})}}else t({user:null,initialized:!0})}catch(s){console.error("Error during auth state change:",s),t({user:null,initialized:!0,error:"Authentication failed"})}finally{r(),e()}});setTimeout(()=>{r(),t({initialized:!0,error:"Authentication timed out"}),e()},1e4)})}catch(e){console.error("Error during initialization:",e),t({initialized:!0,error:"Failed to initialize auth"})}},setUser:e=>t({user:e}),clearError:()=>t({error:null}),login:async(e,r)=>{try{t({loading:!0,error:null});const{user:n}=await w5(pt,e,r),s=await Js(Ve(_e,"users",n.uid));if(s.exists())t({user:s.data()});else{const i={id:n.uid,email:n.email,name:n.displayName||e.split("@")[0],avatar_url:n.photoURL||`https://api.dicebear.com/7.x/bottts/svg?seed=${e}`,created_at:new Date().toISOString()};await ol(Ve(_e,"users",n.uid),i),t({user:i})}}catch(n){throw console.error("Login error:",n),t({error:n.code==="auth/invalid-credential"?"Invalid email or password":"Failed to sign in. Please try again.",user:null}),n}finally{t({loading:!1})}},register:async e=>{try{t({loading:!0,error:null});const{user:r}=await x5(pt,e.email,e.password);await pb(r,{displayName:e.name,photoURL:e.avatar_url||`https://api.dicebear.com/7.x/bottts/svg?seed=${e.email}`});const n={id:r.uid,email:e.email,name:e.name,avatar_url:e.avatar_url||`https://api.dicebear.com/7.x/bottts/svg?seed=${e.email}`,created_at:new Date().toISOString()};await ol(Ve(_e,"users",r.uid),n),t({user:n})}catch(r){throw console.error("Registration error:",r),t({error:r.code==="auth/email-already-in-use"?"Email already in use":"Failed to create account. Please try again.",user:null}),r}finally{t({loading:!1})}},updateProfile:async e=>{try{t({loading:!0,error:null});const r=pt.currentUser;if(!r)throw new Error("Not authenticated");const n=Ve(_e,"users",r.uid);if(await ol(n,e,{merge:!0}),e.name||e.avatar_url)try{await pb(r,{displayName:e.name||null,photoURL:e.avatar_url||null})}catch(i){console.warn("Firebase auth profile update failed:",i)}const s=await Js(n);if(!s.exists())throw new Error("User profile not found");t({user:s.data()})}catch(r){throw console.error("Profile update error:",r),t({error:"Failed to update profile. Please try again."}),r}finally{t({loading:!1})}},logout:async()=>{try{t({loading:!0,error:null}),await R5(pt),t({user:null})}catch(e){throw console.error("Logout error:",e),t({error:"Failed to sign out. Please try again."}),e}finally{t({loading:!1})}}}));function zF(){return Wr(e=>e.user)?d.jsx(F2,{to:"/home",replace:!0}):d.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Supercurators"})}),d.jsx(rw,{})]})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Se=(t,e)=>{const r=M.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:u,...l},h)=>M.createElement("svg",{ref:h,...GF,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${WF(t)}`,o].join(" "),...l},[...e.map(([p,m])=>M.createElement(p,m)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Se("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Se("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=Se("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=Se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=Se("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Se("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=Se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=Se("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Se("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=Se("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function dB({onClose:t,onSave:e}){const{user:r,updateProfile:n,error:s}=Wr(),i=M.useRef(null),[a,o]=M.useState({name:(r==null?void 0:r.name)||"",avatar_url:(r==null?void 0:r.avatar_url)||"",bio:(r==null?void 0:r.bio)||"",location:(r==null?void 0:r.location)||"",website:(r==null?void 0:r.website)||""}),[u,l]=M.useState(!1),h=m=>{var _;const E=(_=m.target.files)==null?void 0:_[0];if(E){const v=new FileReader;v.onloadend=()=>{o(A=>({...A,avatar_url:v.result}))},v.readAsDataURL(E)}},p=async m=>{if(m.preventDefault(),!!r)try{l(!0),await n(a),e()}catch(E){console.error("Failed to update profile:",E)}finally{l(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:t}),d.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-2xl shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsx("button",{onClick:t,children:d.jsx(kr,{className:"w-5 h-5"})}),d.jsx("h2",{className:"text-xl font-bold",children:"Edit profile"})]}),d.jsx("button",{onClick:p,disabled:u,className:"px-4 py-1.5 bg-gray-900 text-white rounded-full font-bold text-sm hover:bg-gray-800 disabled:opacity-50",children:u?"Saving...":"Save"})]}),d.jsxs("form",{className:"p-4 space-y-6",onSubmit:p,children:[s&&d.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:s}),d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"h-32 bg-gray-100 rounded-lg mb-16",children:d.jsx("div",{className:"absolute -bottom-16 left-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:a.avatar_url,alt:a.name,className:"w-32 h-32 rounded-full border-4 border-white object-cover bg-gray-100"}),d.jsx("button",{type:"button",onClick:()=>{var m;return(m=i.current)==null?void 0:m.click()},className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(JF,{className:"w-6 h-6 text-white"})})]})})}),d.jsx("input",{ref:i,type:"file",accept:"image/*",className:"hidden",onChange:h})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),d.jsx("input",{type:"text",value:a.name,onChange:m=>o({...a,name:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),d.jsx("textarea",{value:a.bio,onChange:m=>o({...a,bio:m.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),d.jsx("input",{type:"text",value:a.location,onChange:m=>o({...a,location:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),d.jsx("input",{type:"url",value:a.website,onChange:m=>o({...a,website:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]})]})]})})}function hB({children:t}){const e=Xo(),{user:r,logout:n}=Wr(),[s,i]=M.useState(!1),[a,o]=M.useState(!1),u=p=>e.pathname===p,l=async p=>{p.preventDefault();try{await n()}catch(m){console.error("Logout failed:",m)}},h=()=>d.jsxs(d.Fragment,{children:[d.jsxs(yt,{to:"/home",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${u("/home")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(nB,{className:"w-6 h-6 mr-4"}),"Home"]}),d.jsxs(yt,{to:"/saved",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${u("/saved")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(QF,{className:"w-6 h-6 mr-4"}),"My Feed"]}),d.jsxs(yt,{to:"/supercurations",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${e.pathname.startsWith("/supercurations")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(sB,{className:"w-6 h-6 mr-4"}),"Supercurations"]}),d.jsxs(yt,{to:"/dashboard",className:`flex items-center px-2 py-3 text-lg rounded-full transition-colors ${u("/dashboard")?"font-bold":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>o(!1),children:[d.jsx(lB,{className:"w-6 h-6 mr-4"}),"My Subscribers"]})]});return d.jsxs("div",{className:"min-h-screen bg-white",children:[d.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-white border-b z-20 px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-full",children:[d.jsxs(yt,{to:"/home",className:"flex items-center gap-2",children:[d.jsx("div",{className:"text-blue-500 text-2xl",children:""}),d.jsx("span",{className:"text-xl font-bold",children:"Supercurators"})]}),d.jsx("button",{onClick:()=>o(!a),className:"p-2 text-gray-600",children:a?d.jsx(kr,{className:"w-6 h-6"}):d.jsx(aB,{className:"w-6 h-6"})})]})}),a&&d.jsx("div",{className:"lg:hidden fixed inset-0 z-10 bg-white pt-16",children:d.jsxs("div",{className:"p-4",children:[d.jsx("nav",{className:"space-y-1",children:d.jsx(h,{})}),d.jsx("div",{className:"mt-4 pt-4 border-t",children:d.jsxs("div",{onClick:()=>{i(!0),o(!1)},className:"flex items-center gap-3 p-2 rounded-full hover:bg-gray-50 cursor-pointer",children:[d.jsx("img",{src:r==null?void 0:r.avatar_url,alt:r==null?void 0:r.name,className:"w-10 h-10 rounded-full bg-gray-100"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium text-gray-900 truncate",children:r==null?void 0:r.name}),d.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",r==null?void 0:r.email.split("@")[0]]})]}),d.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600",title:"Sign out",children:d.jsx(Bv,{className:"w-5 h-5"})})]})})]})}),d.jsx("div",{className:"hidden lg:block fixed left-0 top-0 h-full w-64 border-r border-gray-100",children:d.jsxs("div",{className:"flex flex-col h-full px-4 py-4",children:[d.jsxs(yt,{to:"/home",className:"flex items-center gap-2 px-2 mb-8",children:[d.jsx("div",{className:"text-blue-500 text-2xl",children:""}),d.jsx("span",{className:"text-xl font-bold",children:"Supercurators"})]}),d.jsx("nav",{className:"space-y-1",children:d.jsx(h,{})}),d.jsx("div",{className:"mt-auto",children:d.jsxs("div",{onClick:()=>i(!0),className:"w-full flex items-center gap-3 p-2 rounded-full hover:bg-gray-50 cursor-pointer",children:[d.jsx("img",{src:r==null?void 0:r.avatar_url,alt:r==null?void 0:r.name,className:"w-10 h-10 rounded-full bg-gray-100"}),d.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[d.jsx("p",{className:"font-medium text-gray-900 truncate",children:r==null?void 0:r.name}),d.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",r==null?void 0:r.email.split("@")[0]]})]}),d.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600",title:"Sign out",children:d.jsx(Bv,{className:"w-5 h-5"})})]})})]})}),d.jsx("main",{className:"lg:pl-64 pt-20 lg:pt-4",children:d.jsx("div",{className:"max-w-2xl mx-auto py-4",children:t})}),s&&d.jsx(dB,{onClose:()=>i(!1),onSave:()=>i(!1)})]})}function fB(){const{user:t,initialized:e}=Wr();return e?t?d.jsx(hB,{children:d.jsx(rw,{})}):d.jsx(F2,{to:"/login",replace:!0}):d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx(lc,{className:"w-8 h-8 animate-spin text-blue-600"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]})})}function pB(){return Wr(e=>e.user)?d.jsx(F2,{to:"/home",replace:!0}):d.jsx("div",{className:"min-h-screen bg-black",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"pt-6",children:d.jsxs("nav",{className:"flex justify-end space-x-4",children:[d.jsx(yt,{to:"/login",className:"text-gray-300 hover:text-white px-4 py-2 text-sm font-medium",children:"Log in"}),d.jsx(yt,{to:"/register",className:"bg-white text-black hover:bg-gray-100 px-4 py-2 rounded-full text-sm font-medium",children:"Sign up"})]})}),d.jsxs("div",{className:"pt-24 pb-20 text-center",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("span",{className:"text-6xl",children:""})}),d.jsx("h1",{className:"text-6xl sm:text-8xl font-extrabold text-white tracking-tight mb-8",children:"Supercurators"}),d.jsx("p",{className:"text-2xl sm:text-3xl text-gray-400 font-light max-w-3xl mx-auto mb-12",children:"Internet. Curated."}),d.jsx(yt,{to:"/register",className:"inline-flex items-center px-8 py-3 border border-transparent text-lg font-medium rounded-full text-black bg-white hover:bg-gray-100",children:"Get Started"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 py-20 text-white",children:[d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"text-3xl mb-4",children:""}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Discover Quality Content"}),d.jsx("p",{className:"text-gray-400",children:"Find the best content curated by people who share your interests"})]}),d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"text-3xl mb-4",children:""}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Build Your Network"}),d.jsx("p",{className:"text-gray-400",children:"Connect with curators who consistently share valuable resources"})]}),d.jsxs("div",{className:"text-center px-6",children:[d.jsx("div",{className:"text-3xl mb-4",children:""}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Stay Informed"}),d.jsx("p",{className:"text-gray-400",children:"Never miss important content with personalized email updates"})]})]})]})})}function mB(){const t=Jo(),{login:e,loading:r,error:n,clearError:s,user:i,initialized:a}=Wr(),[o,u]=M.useState(""),[l,h]=M.useState("");M.useEffect(()=>{s()},[s]),M.useEffect(()=>{i&&a&&t("/home")},[i,a,t]);const p=async m=>{if(m.preventDefault(),!(!o.trim()||!l.trim()))try{await e(o.trim(),l.trim())}catch(E){console.error("Login failed:",E)}};return d.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:d.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[r&&!a?d.jsx("div",{className:"flex items-center justify-center py-6",children:d.jsx(lc,{className:"w-6 h-6 text-blue-600 animate-spin"})}):d.jsxs("form",{className:"space-y-6",onSubmit:p,children:[n&&d.jsx("div",{className:"rounded-md bg-red-50 p-4",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(KF,{className:"h-5 w-5 text-red-400"})}),d.jsx("div",{className:"ml-3",children:d.jsx("h3",{className:"text-sm font-medium text-red-800",children:n})})]})}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),d.jsx("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:o,onChange:m=>u(m.target.value),disabled:r})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{id:"password",type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:l,onChange:m=>h(m.target.value),disabled:r})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:r||!o.trim()||!l.trim(),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(lc,{className:"w-4 h-4 animate-spin"}),"Signing in..."]}):"Sign in"})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),d.jsx("div",{className:"mt-6",children:d.jsx(yt,{to:"/register",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create new account"})})]})]})})}function gB(){const t=Jo(),{register:e,loading:r,error:n,clearError:s}=Wr(),[i,a]=M.useState({email:"",password:"",name:"",avatar_url:`https://api.dicebear.com/7.x/bottts/svg?seed=${Math.random()}`});M.useEffect(()=>{s()},[]);const o=async u=>{u.preventDefault();try{await e(i),t("/home")}catch{}};return d.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:d.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[d.jsxs("form",{className:"space-y-6",onSubmit:o,children:[n&&d.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:n}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full name"}),d.jsx("input",{id:"name",type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:i.name,onChange:u=>a({...i,name:u.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),d.jsx("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:i.email,onChange:u=>a({...i,email:u.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{id:"password",type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:i.password,onChange:u=>a({...i,password:u.target.value})})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating account...":"Create account"})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),d.jsx("div",{className:"mt-6",children:d.jsx(yt,{to:"/login",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"})})]})]})})}function ef(t){const e=Object.entries(t).reduce((r,[n,s])=>(s===void 0||Array.isArray(s)&&s.length===0||s===null||(r[n]=s),r),{});return e.created_at||(e.created_at=V1()),e}function EB(t){return!!(t.title&&typeof t.title=="string"&&t.description&&typeof t.description=="string")}async function yB(){try{const t=At(_e,"links"),e=Kt(t,Bt("id","==",null)),r=await sr(e);console.log(`Found ${r.size} invalid links`);const n=r.docs.map(async a=>{console.log("Deleting invalid link with doc ID:",a.id);try{return await jo(a.ref),!0}catch(o){return console.error("Error deleting doc:",a.id,o),!1}}),i=(await Promise.all(n)).filter(Boolean).length;return console.log(`Successfully deleted ${i} invalid links`),i}catch(t){throw console.error("Error cleaning up invalid links:",t),t}}const lu=Mc((t,e)=>({links:[],loading:!1,error:null,isOffline:!navigator.onLine,fetchLinks:async()=>{try{t({loading:!0,error:null});const r=Kt(At(_e,"links"),Jh("created_at","desc")),n=await sr(r),s=pt.currentUser,i=[];let a=[];if(s){const o=Kt(At(_e,"likes"),Bt("userId","==",s.uid));a=(await sr(o)).docs.map(l=>l.data().linkId)}n.forEach(o=>{var l,h,p;const u=o.data();i.push({id:o.id,...u,created_at:((p=(h=(l=u.created_at)==null?void 0:l.toDate)==null?void 0:h.call(l))==null?void 0:p.toISOString())||new Date().toISOString(),liked:a.includes(o.id),likes:u.likes||0,emoji_tags:u.emoji_tags||[],topic_ids:u.topic_ids||[],supercuration_ids:u.supercuration_ids||[],user:u.user||{id:u.created_by,name:"Unknown User",avatar_url:`https://api.dicebear.com/7.x/avatars/svg?seed=${u.created_by}`}})}),t({links:i,error:null})}catch(r){console.error("Error fetching links:",r),t({error:"Failed to fetch links"})}finally{t({loading:!1})}},addLink:async r=>{var n,s;try{const i=pt.currentUser;if(!i)throw new Error("Must be logged in to share links");if(!EB(r))throw new Error("Invalid link data");const a=ef({...r,created_by:i.uid,user:{id:i.uid,name:i.displayName||((n=i.email)==null?void 0:n.split("@")[0])||"Anonymous",avatar_url:i.photoURL||`https://api.dicebear.com/7.x/avatars/svg?seed=${i.email}`}}),u={id:(await U1(At(_e,"links"),a)).id,...r,created_by:i.uid,created_at:new Date().toISOString(),liked:!1,likes:0,reposts_count:0,user:a.user};if(t(l=>({links:[u,...l.links],error:null})),(s=r.supercuration_ids)!=null&&s.length){const l=gF(_e);for(const h of r.supercuration_ids){const p=Ve(_e,"supercurations",h);l.update(p,{links_count:Li(1)})}await l.commit()}}catch(i){throw console.error("Error sharing link:",i),i}},updateLink:async(r,n)=>{try{if(!pt.currentUser)throw new Error("Must be logged in to update links");const i=Ve(_e,"links",r);await Os(i,ef(n)),t(a=>({links:a.links.map(o=>o.id===r?{...o,...n}:o),error:null}))}catch(s){throw console.error("Error updating link:",s),s}},removeLink:async r=>{try{console.log("Attempting to delete link with ID:",r);const n=pt.currentUser;if(!n)throw new Error("Must be logged in to delete links");const s=Ve(_e,"links",r),i=await Js(s);if(!i.exists()){console.log("Document not found in Firestore. Collection path:",s.path),t(o=>({links:o.links.filter(u=>u.id!==r),error:null}));return}const a=i.data();if((a==null?void 0:a.created_by)!==n.uid)throw new Error("You can only delete your own links");await jo(s),t(o=>({links:o.links.filter(u=>u.id!==r),error:null})),console.log("Link successfully deleted")}catch(n){throw console.error("Error deleting link:",n),n}},toggleLike:async r=>{try{const n=pt.currentUser;if(!n)throw new Error("Must be logged in to like links");const s=`${r}_${n.uid}`,i=Ve(_e,"likes",s),a=Ve(_e,"links",r);(await Js(i)).exists()?(await jo(i),await Os(a,{likes:Li(-1)}),t(u=>({links:u.links.map(l=>l.id===r?{...l,liked:!1,likes:l.likes-1}:l),error:null}))):(await ol(i,{userId:n.uid,linkId:r,createdAt:V1()}),await Os(a,{likes:Li(1)}),t(u=>({links:u.links.map(l=>l.id===r?{...l,liked:!0,likes:l.likes+1}:l),error:null})))}catch(n){throw console.error("Error toggling like:",n),n}},setOfflineStatus:async r=>{try{r?await eF(_e):(await Z9(_e),await e().fetchLinks()),t({isOffline:r})}catch(n){console.error("Error updating network status:",n)}},updateLinkTopics:async(r,n)=>{},updateLinkFormats:async(r,n)=>{},removeTopicFromLinks:async r=>{}})),_B={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyB0XCHI7DqiFJRRi9iNxTT1kyIrIwoELOI",VITE_FIREBASE_APP_ID:"1:901131239470:web:abc123def456",VITE_FIREBASE_AUTH_DOMAIN:"supercurators.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"901131239470",VITE_FIREBASE_PROJECT_ID:"supercurators",VITE_FIREBASE_STORAGE_BUCKET:"supercurators.appspot.com"};function bB(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var i;const a=u=>u===null?null:JSON.parse(u,void 0),o=(i=r.getItem(s))!=null?i:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,i)=>r.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>r.removeItem(s)}}const dc=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return dc(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return dc(n)(r)}}}},vB=(t,e)=>(r,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:A=>A,version:0,merge:(A,x)=>({...x,...A}),...e},a=!1;const o=new Set,u=new Set;let l;try{l=i.getStorage()}catch{}if(!l)return t((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...A)},n,s);const h=dc(i.serialize),p=()=>{const A=i.partialize({...n()});let x;const b=h({state:A,version:i.version}).then(T=>l.setItem(i.name,T)).catch(T=>{x=T});if(x)throw x;return b},m=s.setState;s.setState=(A,x)=>{m(A,x),p()};const E=t((...A)=>{r(...A),p()},n,s);let _;const v=()=>{var A;if(!l)return;a=!1,o.forEach(b=>b(n()));const x=((A=i.onRehydrateStorage)==null?void 0:A.call(i,n()))||void 0;return dc(l.getItem.bind(l))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var T;return _=i.merge(b,(T=n())!=null?T:E),r(_,!0),p()}).then(()=>{x==null||x(_,void 0),a=!0,u.forEach(b=>b(_))}).catch(b=>{x==null||x(void 0,b)})};return s.persist={setOptions:A=>{i={...i,...A},A.getStorage&&(l=A.getStorage())},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:A=>(o.add(A),()=>{o.delete(A)}),onFinishHydration:A=>(u.add(A),()=>{u.delete(A)})},v(),_||E},TB=(t,e)=>(r,n,s)=>{let i={storage:bB(()=>localStorage),partialize:v=>v,version:0,merge:(v,A)=>({...A,...v}),...e},a=!1;const o=new Set,u=new Set;let l=i.storage;if(!l)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...v)},n,s);const h=()=>{const v=i.partialize({...n()});return l.setItem(i.name,{state:v,version:i.version})},p=s.setState;s.setState=(v,A)=>{p(v,A),h()};const m=t((...v)=>{r(...v),h()},n,s);s.getInitialState=()=>m;let E;const _=()=>{var v,A;if(!l)return;a=!1,o.forEach(b=>{var T;return b((T=n())!=null?T:m)});const x=((A=i.onRehydrateStorage)==null?void 0:A.call(i,(v=n())!=null?v:m))||void 0;return dc(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var T;const[F,j]=b;if(E=i.merge(j,(T=n())!=null?T:m),r(E,!0),F)return h()}).then(()=>{x==null||x(E,void 0),E=n(),a=!0,u.forEach(b=>b(E))}).catch(b=>{x==null||x(void 0,b)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(l=v.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>_(),hasHydrated:()=>a,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(u.add(v),()=>{u.delete(v)})},i.skipHydration||_(),E||m},AB=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((_B?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),vB(t,e)):TB(t,e),xB=AB,hi=Mc()(xB(t=>({topics:[{id:"future-of-work",name:"Future of Work",color:"#2563eb",createdAt:new Date().toISOString()},{id:"productivity",name:"Productivity",color:"#dc2626",createdAt:new Date().toISOString()},{id:"ai",name:"AI",color:"#059669",createdAt:new Date().toISOString()},{id:"tech-politique",name:"Tech & Politique",color:"#7c3aed",createdAt:new Date().toISOString()},{id:"tech-social",name:"Tech & Social",color:"#db2777",createdAt:new Date().toISOString()},{id:"tech-retail",name:"Tech & Retail",color:"#ea580c",createdAt:new Date().toISOString()},{id:"silicon-valley",name:"Silicon Valley",color:"#ca8a04",createdAt:new Date().toISOString()},{id:"ia-audio-video",name:"IA Audio/Video",color:"#4f46e5",createdAt:new Date().toISOString()},{id:"strategie-innovation",name:"Stratgie & Innovation",color:"#0891b2",createdAt:new Date().toISOString()},{id:"creator-economy",name:"Creator Economy",color:"#be123c",createdAt:new Date().toISOString()},{id:"marketing",name:"Marketing",color:"#15803d",createdAt:new Date().toISOString()},{id:"tourisme",name:"Tourisme",color:"#86198f",createdAt:new Date().toISOString()},{id:"product-management",name:"Product Management",color:"#0f766e",createdAt:new Date().toISOString()},{id:"growth",name:"Growth",color:"#b45309",createdAt:new Date().toISOString()},{id:"medias",name:"Mdias",color:"#9333ea",createdAt:new Date().toISOString()},{id:"dystopie",name:"Dystopie",color:"#e11d48",createdAt:new Date().toISOString()},{id:"culturetech",name:"CultureTech",color:"#0369a1",createdAt:new Date().toISOString()},{id:"chine",name:"Chine",color:"#b91c1c",createdAt:new Date().toISOString()},{id:"us",name:"US",color:"#1d4ed8",createdAt:new Date().toISOString()},{id:"neuroscience",name:"Neuroscience",color:"#4338ca",createdAt:new Date().toISOString()}],addTopic:(e,r)=>{const n={id:e.toLowerCase().replace(/\s+/g,"-"),name:e,color:r,createdAt:new Date().toISOString()};return t(s=>({topics:[...s.topics,n]})),n},removeTopic:e=>{t(r=>({topics:r.topics.filter(n=>n.id!==e)}))},updateTopic:(e,r)=>{t(n=>({topics:n.topics.map(s=>s.id===e?{...s,...r}:s)}))}}),{name:"category-storage"})),rp=Mc(t=>({supercurations:[],loading:!1,error:null,fetchSupercurations:async()=>{try{t({loading:!0,error:null});const e=Kt(At(_e,"supercurations"),Jh("created_at","desc")),n=(await sr(e)).docs.map(s=>{var i,a,o;return{id:s.id,...s.data(),created_at:((o=(a=(i=s.data().created_at)==null?void 0:i.toDate)==null?void 0:a.call(i))==null?void 0:o.toISOString())||new Date().toISOString(),tagCategories:s.data().tagCategories||[]}});t({supercurations:n,error:null})}catch(e){console.error("Error fetching supercurations:",e),t({error:"Failed to fetch supercurations"})}finally{t({loading:!1})}},addSupercuration:async e=>{var r;try{const n=pt.currentUser;if(!n)throw new Error("Must be logged in to create supercurations");const s=ef({...e,created_by:n.uid,created_at:V1(),links_count:0,tagCategories:e.tagCategories||[],user:{id:n.uid,name:n.displayName||((r=n.email)==null?void 0:r.split("@")[0])||"Anonymous",avatar_url:n.photoURL||`https://api.dicebear.com/7.x/avatars/svg?seed=${n.email}`}}),a={id:(await U1(At(_e,"supercurations"),s)).id,...s,created_at:new Date().toISOString()};return t(o=>({supercurations:[a,...o.supercurations],error:null})),a}catch(n){throw console.error("Error adding supercuration:",n),n}},updateSupercuration:async(e,r)=>{try{if(!pt.currentUser)throw new Error("Must be logged in to update supercurations");const s=Ve(_e,"supercurations",e),i=ef(r);await Os(s,i),t(a=>({supercurations:a.supercurations.map(o=>o.id===e?{...o,...r}:o),error:null}))}catch(n){throw console.error("Error updating supercuration:",n),n}},removeSupercuration:async e=>{try{if(!pt.currentUser)throw new Error("Must be logged in to remove supercurations");await jo(Ve(_e,"supercurations",e)),t(n=>({supercurations:n.supercurations.filter(s=>s.id!==e),error:null}))}catch(r){throw console.error("Error removing supercuration:",r),r}}})),wB=[{emoji:"",label:"Article"},{emoji:"",label:"Video"},{emoji:"",label:"Podcast"},{emoji:"",label:"Newsletter"},{emoji:"",label:"Tool"},{emoji:"",label:"Tutorial"},{emoji:"",label:"Design"},{emoji:"",label:"AI"},{emoji:"",label:"Dev"},{emoji:"",label:"Other"}];function mD({onClose:t,onSave:e,preview:r}){const{topics:n,addTopic:s}=hi(),[i,a]=M.useState([]),[o,u]=M.useState([]),[l,h]=M.useState(!1),[p,m]=M.useState(!1),[E,_]=M.useState({name:"",color:"#2563eb"}),[v,A]=M.useState({url:r.url||"",title:r.title||"",description:r.description||"",thumbnail_url:r.thumbnail_url||"",imageType:"url"}),x=T=>{var j;const F=(j=T.target.files)==null?void 0:j[0];if(F){const $=new FileReader;$.onloadend=()=>{A(D=>({...D,thumbnail_url:$.result}))},$.readAsDataURL(F)}},b=()=>{if(E.name.trim()){const T=s(E.name.trim(),E.color);u(F=>[...F,T.id]),_({name:"",color:"#2563eb"}),m(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:t}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Preview & Share"}),d.jsxs("div",{className:"mb-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:v.title,onChange:T=>A({...v,title:T.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{value:v.description,onChange:T=>A({...v,description:T.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL (optional)"}),d.jsx("div",{className:"flex gap-2",children:d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"url",value:v.url,onChange:T=>A({...v,url:T.target.value}),className:"w-full pl-9 pr-3 py-2 border rounded-md",placeholder:"Enter URL (optional)"})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail Image"}),d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsxs("button",{type:"button",onClick:()=>A(T=>({...T,imageType:"url"})),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${v.imageType==="url"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(uc,{className:"w-4 h-4"}),"URL"]}),d.jsxs("button",{type:"button",onClick:()=>A(T=>({...T,imageType:"upload"})),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${v.imageType==="upload"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(G1,{className:"w-4 h-4"}),"Upload"]})]}),v.imageType==="url"?d.jsx("input",{type:"url",placeholder:"Enter image URL",value:v.thumbnail_url,onChange:T=>A({...v,thumbnail_url:T.target.value}),className:"w-full px-3 py-2 border rounded-md"}):d.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"w-full px-3 py-2 border rounded-md"}),v.thumbnail_url&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:v.thumbnail_url,alt:"Preview",className:"w-full h-32 object-cover rounded-md"})})]})]}),d.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:l,onChange:T=>h(T.target.checked),className:"rounded border-amber-400 text-amber-600 focus:ring-amber-500"}),d.jsx(tp,{className:"w-4 h-4 text-amber-600"}),d.jsx("span",{className:"text-sm font-medium text-amber-800",children:"This is my original content"})]}),d.jsx("p",{className:"mt-1 text-xs text-amber-600 ml-6",children:"Check this if you created this content (e.g., your blog post, podcast, video)"})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Format"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:wB.map(({emoji:T,label:F})=>d.jsxs("button",{type:"button",onClick:()=>a(j=>j.includes(T)?j.filter($=>$!==T):[T]),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${i.includes(T)?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:T}),F]},T))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Topics"}),d.jsxs("button",{type:"button",onClick:()=>m(!p),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[d.jsx(cc,{className:"w-4 h-4"}),"Add Topic"]})]}),p&&d.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Topic name",value:E.name,onChange:T=>_({...E,name:T.target.value}),className:"flex-1 px-3 py-1 text-sm border rounded"}),d.jsx("input",{type:"color",value:E.color,onChange:T=>_({...E,color:T.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{type:"button",onClick:b,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(T=>d.jsx("button",{type:"button",onClick:()=>u(F=>F.includes(T.id)?F.filter(j=>j!==T.id):[...F,T.id]),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${o.includes(T.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${T.color}15`,color:T.color,borderColor:o.includes(T.id)?T.color:"transparent"},children:T.name},T.id))})]}),d.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[d.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{onClick:()=>e(i,o,l,{...v.url?{url:v.url}:{},title:v.title,description:v.description,thumbnail_url:v.thumbnail_url}),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Share"})]})]})]})})}function IB({link:t,onToggleSelect:e,onShare:r}){return d.jsx("div",{className:`bg-white p-4 rounded-lg border hover:shadow-md transition-shadow ${t.selected?"ring-2 ring-blue-500":""}`,children:d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:e,className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:t.selected?d.jsx(hD,{className:"w-5 h-5"}):d.jsx(pD,{className:"w-5 h-5"})}),t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{children:[d.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 flex items-center gap-1",children:[t.title,d.jsx(uc,{className:"w-3.5 h-3.5"})]}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:t.description})]}),d.jsx("button",{onClick:r,className:"px-3 py-1.5 text-sm text-blue-600 hover:text-blue-700 border border-blue-600 rounded-md hover:bg-blue-50",children:"Share"})]})})]})})}var CB={exports:{}};(function(t){var e=function(r){var n=Object.prototype,s=n.hasOwnProperty,i=Object.defineProperty||function(B,V,Y){B[V]=Y.value},a,o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function p(B,V,Y){return Object.defineProperty(B,V,{value:Y,enumerable:!0,configurable:!0,writable:!0}),B[V]}try{p({},"")}catch{p=function(V,Y,se){return V[Y]=se}}function m(B,V,Y,se){var U=V&&V.prototype instanceof T?V:T,G=Object.create(U.prototype),le=new de(se||[]);return i(G,"_invoke",{value:O(B,Y,le)}),G}r.wrap=m;function E(B,V,Y){try{return{type:"normal",arg:B.call(V,Y)}}catch(se){return{type:"throw",arg:se}}}var _="suspendedStart",v="suspendedYield",A="executing",x="completed",b={};function T(){}function F(){}function j(){}var $={};p($,u,function(){return this});var D=Object.getPrototypeOf,w=D&&D(D(me([])));w&&w!==n&&s.call(w,u)&&($=w);var k=j.prototype=T.prototype=Object.create($);F.prototype=j,i(k,"constructor",{value:j,configurable:!0}),i(j,"constructor",{value:F,configurable:!0}),F.displayName=p(j,h,"GeneratorFunction");function I(B){["next","throw","return"].forEach(function(V){p(B,V,function(Y){return this._invoke(V,Y)})})}r.isGeneratorFunction=function(B){var V=typeof B=="function"&&B.constructor;return V?V===F||(V.displayName||V.name)==="GeneratorFunction":!1},r.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,j):(B.__proto__=j,p(B,h,"GeneratorFunction")),B.prototype=Object.create(k),B},r.awrap=function(B){return{__await:B}};function P(B,V){function Y(G,le,ue,oe){var Te=E(B[G],B,le);if(Te.type==="throw")oe(Te.arg);else{var $e=Te.arg,ct=$e.value;return ct&&typeof ct=="object"&&s.call(ct,"__await")?V.resolve(ct.__await).then(function(Ye){Y("next",Ye,ue,oe)},function(Ye){Y("throw",Ye,ue,oe)}):V.resolve(ct).then(function(Ye){$e.value=Ye,ue($e)},function(Ye){return Y("throw",Ye,ue,oe)})}}var se;function U(G,le){function ue(){return new V(function(oe,Te){Y(G,le,oe,Te)})}return se=se?se.then(ue,ue):ue()}i(this,"_invoke",{value:U})}I(P.prototype),p(P.prototype,l,function(){return this}),r.AsyncIterator=P,r.async=function(B,V,Y,se,U){U===void 0&&(U=Promise);var G=new P(m(B,V,Y,se),U);return r.isGeneratorFunction(V)?G:G.next().then(function(le){return le.done?le.value:G.next()})};function O(B,V,Y){var se=_;return function(G,le){if(se===A)throw new Error("Generator is already running");if(se===x){if(G==="throw")throw le;return Z()}for(Y.method=G,Y.arg=le;;){var ue=Y.delegate;if(ue){var oe=N(ue,Y);if(oe){if(oe===b)continue;return oe}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(se===_)throw se=x,Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);se=A;var Te=E(B,V,Y);if(Te.type==="normal"){if(se=Y.done?x:v,Te.arg===b)continue;return{value:Te.arg,done:Y.done}}else Te.type==="throw"&&(se=x,Y.method="throw",Y.arg=Te.arg)}}}function N(B,V){var Y=V.method,se=B.iterator[Y];if(se===a)return V.delegate=null,Y==="throw"&&B.iterator.return&&(V.method="return",V.arg=a,N(B,V),V.method==="throw")||Y!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),b;var U=E(se,B.iterator,V.arg);if(U.type==="throw")return V.method="throw",V.arg=U.arg,V.delegate=null,b;var G=U.arg;if(!G)return V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,b;if(G.done)V[B.resultName]=G.value,V.next=B.nextLoc,V.method!=="return"&&(V.method="next",V.arg=a);else return G;return V.delegate=null,b}I(k),p(k,h,"Generator"),p(k,u,function(){return this}),p(k,"toString",function(){return"[object Generator]"});function Ee(B){var V={tryLoc:B[0]};1 in B&&(V.catchLoc=B[1]),2 in B&&(V.finallyLoc=B[2],V.afterLoc=B[3]),this.tryEntries.push(V)}function ee(B){var V=B.completion||{};V.type="normal",delete V.arg,B.completion=V}function de(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(Ee,this),this.reset(!0)}r.keys=function(B){var V=Object(B),Y=[];for(var se in V)Y.push(se);return Y.reverse(),function U(){for(;Y.length;){var G=Y.pop();if(G in V)return U.value=G,U.done=!1,U}return U.done=!0,U}};function me(B){if(B){var V=B[u];if(V)return V.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var Y=-1,se=function U(){for(;++Y<B.length;)if(s.call(B,Y))return U.value=B[Y],U.done=!1,U;return U.value=a,U.done=!0,U};return se.next=se}}return{next:Z}}r.values=me;function Z(){return{value:a,done:!0}}return de.prototype={constructor:de,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(ee),!B)for(var V in this)V.charAt(0)==="t"&&s.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=a)},stop:function(){this.done=!0;var B=this.tryEntries[0],V=B.completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var V=this;function Y(oe,Te){return G.type="throw",G.arg=B,V.next=oe,Te&&(V.method="next",V.arg=a),!!Te}for(var se=this.tryEntries.length-1;se>=0;--se){var U=this.tryEntries[se],G=U.completion;if(U.tryLoc==="root")return Y("end");if(U.tryLoc<=this.prev){var le=s.call(U,"catchLoc"),ue=s.call(U,"finallyLoc");if(le&&ue){if(this.prev<U.catchLoc)return Y(U.catchLoc,!0);if(this.prev<U.finallyLoc)return Y(U.finallyLoc)}else if(le){if(this.prev<U.catchLoc)return Y(U.catchLoc,!0)}else if(ue){if(this.prev<U.finallyLoc)return Y(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,V){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var se=this.tryEntries[Y];if(se.tryLoc<=this.prev&&s.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var U=se;break}}U&&(B==="break"||B==="continue")&&U.tryLoc<=V&&V<=U.finallyLoc&&(U=null);var G=U?U.completion:{};return G.type=B,G.arg=V,U?(this.method="next",this.next=U.finallyLoc,b):this.complete(G)},complete:function(B,V){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&V&&(this.next=V),b},finish:function(B){for(var V=this.tryEntries.length-1;V>=0;--V){var Y=this.tryEntries[V];if(Y.finallyLoc===B)return this.complete(Y.completion,Y.afterLoc),ee(Y),b}},catch:function(B){for(var V=this.tryEntries.length-1;V>=0;--V){var Y=this.tryEntries[V];if(Y.tryLoc===B){var se=Y.completion;if(se.type==="throw"){var U=se.arg;ee(Y)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(B,V,Y){return this.delegate={iterator:me(B),resultName:V,nextLoc:Y},this.method==="next"&&(this.arg=a),b}},r}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(CB);var W1=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const DB=W1;let Mv=0;var gD=({id:t,action:e,payload:r={}})=>{let n=t;return typeof n>"u"&&(n=DB("Job",Mv),Mv+=1),{id:n,action:e,payload:r}},cu={};let K1=!1;cu.logging=K1;cu.setLogging=t=>{K1=t};cu.log=(...t)=>K1?console.log.apply(void 0,t):null;const SB=gD,{log:Rd}=cu,NB=W1;let jv=0;var RB=()=>{const t=NB("Scheduler",jv),e={},r={};let n=[];jv+=1;const s=()=>n.length,i=()=>Object.keys(e).length,a=()=>{if(n.length!==0){const p=Object.keys(e);for(let m=0;m<p.length;m+=1)if(typeof r[p[m]]>"u"){n[0](e[p[m]]);break}}},o=(p,m)=>new Promise((E,_)=>{const v=SB({action:p,payload:m});n.push(async A=>{n.shift(),r[A.id]=v;try{E(await A[p].apply(void 0,[...m,v.id]))}catch(x){_(x)}finally{delete r[A.id],a()}}),Rd(`[${t}]: Add ${v.id} to JobQueue`),Rd(`[${t}]: JobQueue length=${n.length}`),a()});return{addWorker:p=>(e[p.id]=p,Rd(`[${t}]: Add ${p.id}`),Rd(`[${t}]: Number of workers=${i()}`),a(),p.id),addJob:async(p,...m)=>{if(i()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return o(p,m)},terminate:async()=>{Object.keys(e).forEach(async p=>{await e[p].terminate()}),n=[]},getQueueLen:s,getNumWorkers:i}};function kB(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function PB(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var OB=PB;const LB=OB;var FB=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":LB()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof kB=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const BB=FB("type")==="browser",MB=BB?t=>new URL(t,window.location.href).href:t=>t;var jB=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(e[r]=MB(e[r]))}),e},UB=t=>{const e=[],r=[],n=[],s=[],i=[];return t.blocks&&t.blocks.forEach(a=>{a.paragraphs.forEach(o=>{o.lines.forEach(u=>{u.words.forEach(l=>{l.symbols.forEach(h=>{i.push({...h,page:t,block:a,paragraph:o,line:u,word:l})}),s.push({...l,page:t,block:a,paragraph:o,line:u})}),n.push({...u,page:t,block:a,paragraph:o})}),r.push({...o,page:t,block:a})}),e.push({...a,page:t})}),{...t,blocks:e,paragraphs:r,lines:n,words:s,symbols:i}},ED={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const VB="tesseract.js",qB="5.1.1",HB="Pure Javascript Multilingual OCR",$B="src/index.js",zB="src/index.d.ts",GB="dist/tesseract.min.js",WB="dist/tesseract.min.js",KB={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},YB={"./src/worker/node/index.js":"./src/worker/browser/index.js"},QB="",XB=["jeromewu"],JB="Apache-2.0",ZB={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},eM={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.1","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},tM={"@rollup/pluginutils":"^5.0.2"},rM={type:"git",url:"https://github.com/naptha/tesseract.js.git"},nM={url:"https://github.com/naptha/tesseract.js/issues"},sM="https://github.com/naptha/tesseract.js",iM={type:"opencollective",url:"https://opencollective.com/tesseractjs"},aM={name:VB,version:qB,description:HB,main:$B,types:zB,unpkg:GB,jsdelivr:WB,scripts:KB,browser:YB,author:QB,contributors:XB,license:JB,devDependencies:ZB,dependencies:eM,overrides:tM,repository:rM,bugs:nM,homepage:sM,collective:iM};var oM={workerBlobURL:!0,logger:()=>{}};const uM=aM.version,lM=oM;var cM={...lM,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${uM}/dist/worker.min.js`},dM=({workerPath:t,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const n=new Blob([`importScripts("${t}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(t);return r},hM=t=>{t.terminate()},fM=(t,e)=>{t.onmessage=({data:r})=>{e(r)}},pM=async(t,e)=>{t.postMessage(e)};const Rm=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},n.readAsArrayBuffer(t)}),bg=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await bg(t.src)),t.tagName==="VIDEO"&&(e=await bg(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async n=>{e=await Rm(n),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();e=await Rm(r)}else(t instanceof File||t instanceof Blob)&&(e=await Rm(t));return new Uint8Array(e)};var mM=bg;const gM=cM,EM=dM,yM=hM,_M=fM,bM=pM,vM=mM;var TM={defaultOptions:gM,spawnWorker:EM,terminateWorker:yM,onMessage:_M,send:bM,loadImage:vM};const AM=jB,xM=UB,Qr=gD,{log:Uv}=cu,wM=W1,vi=ED,{defaultOptions:IM,spawnWorker:CM,terminateWorker:DM,onMessage:SM,loadImage:Vv,send:NM}=TM;let qv=0;var yD=async(t="eng",e=vi.LSTM_ONLY,r={},n={})=>{const s=wM("Worker",qv),{logger:i,errorHandler:a,...o}=AM({...IM,...r}),u={},l={},h=typeof t=="string"?t.split("+"):t;let p=e,m=n;const E=[vi.DEFAULT,vi.LSTM_ONLY].includes(e)&&!o.legacyCore;let _,v;const A=new Promise((U,G)=>{v=U,_=G}),x=U=>{_(U.message)};let b=CM(o);b.onerror=x,qv+=1;const T=(U,G)=>{u[U]=G},F=(U,G)=>{l[U]=G},j=({id:U,action:G,payload:le})=>new Promise((ue,oe)=>{Uv(`[${s}]: Start ${U}, action=${G}`);const Te=`${G}-${U}`;T(Te,ue),F(Te,oe),NM(b,{workerId:s,jobId:U,action:G,payload:le})}),$=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),D=U=>j(Qr({id:U,action:"load",payload:{options:{lstmOnly:E,corePath:o.corePath,logging:o.logging}}})),w=(U,G,le)=>j(Qr({id:le,action:"FS",payload:{method:"writeFile",args:[U,G]}})),k=(U,G)=>j(Qr({id:G,action:"FS",payload:{method:"readFile",args:[U,{encoding:"utf8"}]}})),I=(U,G)=>j(Qr({id:G,action:"FS",payload:{method:"unlink",args:[U]}})),P=(U,G,le)=>j(Qr({id:le,action:"FS",payload:{method:U,args:G}})),O=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),N=(U,G)=>j(Qr({id:G,action:"loadLanguage",payload:{langs:U,options:{langPath:o.langPath,dataPath:o.dataPath,cachePath:o.cachePath,cacheMethod:o.cacheMethod,gzip:o.gzip,lstmOnly:[vi.DEFAULT,vi.LSTM_ONLY].includes(p)&&!o.legacyLang}}})),Ee=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),ee=(U,G,le,ue)=>j(Qr({id:ue,action:"initialize",payload:{langs:U,oem:G,config:le}})),de=(U="eng",G,le,ue)=>{if(E&&[vi.TESSERACT_ONLY,vi.TESSERACT_LSTM_COMBINED].includes(G))throw Error("Legacy model requested but code missing.");const oe=G||p;p=oe;const Te=le||m;m=Te;const ct=(typeof U=="string"?U.split("+"):U).filter(Ye=>!h.includes(Ye));return h.push(...ct),ct.length>0?N(ct,ue).then(()=>ee(U,oe,Te,ue)):ee(U,oe,Te,ue)},me=(U={},G)=>j(Qr({id:G,action:"setParameters",payload:{params:U}})),Z=async(U,G={},le={blocks:!0,text:!0,hocr:!0,tsv:!0},ue)=>j(Qr({id:ue,action:"recognize",payload:{image:await Vv(U),options:G,output:le}})),B=(U="Tesseract OCR Result",G=!1,le)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),j(Qr({id:le,action:"getPDF",payload:{title:U,textonly:G}}))),V=async(U,G)=>{if(E)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return j(Qr({id:G,action:"detect",payload:{image:await Vv(U)}}))},Y=async()=>(b!==null&&(DM(b),b=null),Promise.resolve());SM(b,({workerId:U,jobId:G,status:le,action:ue,data:oe})=>{const Te=`${ue}-${G}`;if(le==="resolve"){Uv(`[${U}]: Complete ${G}`);let $e=oe;ue==="recognize"?$e=xM(oe):ue==="getPDF"&&($e=Array.from({...oe,length:Object.keys(oe).length})),u[Te]({jobId:G,data:$e})}else if(le==="reject")if(l[Te](oe),ue==="load"&&_(oe),a)a(oe);else throw Error(oe);else le==="progress"&&i({...oe,userJobId:G})});const se={id:s,worker:b,setResolve:T,setReject:F,load:$,writeText:w,readText:k,removeFile:I,FS:P,loadLanguage:O,initialize:Ee,reinitialize:de,setParameters:me,recognize:Z,getPDF:B,detect:V,terminate:Y};return D().then(()=>N(t)).then(()=>ee(t,e,n)).then(()=>v(se)).catch(()=>{}),A};const _D=yD,RM=async(t,e,r)=>{const n=await _D(e,1,r);return n.recognize(t).finally(async()=>{await n.terminate()})},kM=async(t,e)=>{const r=await _D("osd",0,e);return r.detect(t).finally(async()=>{await r.terminate()})};var PM={recognize:RM,detect:kM},OM={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},LM={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const FM=RB,BM=yD,MM=PM,jM=OM,UM=ED,VM=LM,{setLogging:qM}=cu;var HM={languages:jM,OEM:UM,PSM:VM,createScheduler:FM,createWorker:BM,setLogging:qM,...MM};const Hv="[a-fA-F\\d:]",Ls=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${Hv})|(?<=${Hv})(?=\\s|$))`:"",en="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",gt="[a-fA-F\\d]{1,4}",np=`
(?:
(?:${gt}:){7}(?:${gt}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${gt}:){6}(?:${en}|:${gt}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${gt}:){5}(?::${en}|(?::${gt}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${gt}:){4}(?:(?::${gt}){0,1}:${en}|(?::${gt}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${gt}:){3}(?:(?::${gt}){0,2}:${en}|(?::${gt}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${gt}:){2}(?:(?::${gt}){0,3}:${en}|(?::${gt}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${gt}:){1}(?:(?::${gt}){0,4}:${en}|(?::${gt}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${gt}){0,5}:${en}|(?::${gt}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),$M=new RegExp(`(?:^${en}$)|(?:^${np}$)`),zM=new RegExp(`^${en}$`),GM=new RegExp(`^${np}$`),Y1=t=>t&&t.exact?$M:new RegExp(`(?:${Ls(t)}${en}${Ls(t)})|(?:${Ls(t)}${np}${Ls(t)})`,"g");Y1.v4=t=>t&&t.exact?zM:new RegExp(`${Ls(t)}${en}${Ls(t)}`,"g");Y1.v6=t=>t&&t.exact?GM:new RegExp(`${Ls(t)}${np}${Ls(t)}`,"g");var WM=Y1;const KM=["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermgensberater","vermgensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],YM={},QM=Object.freeze(Object.defineProperty({__proto__:null,default:YM},Symbol.toStringTag,{value:"Module"})),XM=Fg(QM),bD=WM,JM=KM,ZM=bD.v4().source,ej=bD.v6().source,tj="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",rj="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",nj="(?:[a-z\\u00a1-\\uffff]{2,})",sj=`(?:${JM.sort((t,e)=>e.length-t.length).join("|")})`,ij="(?::\\d{2,5})?";let $u,$v;var aj=t=>{t={re2:!0,exact:!1,strict:!1,auth:!1,localhost:!0,parens:!1,apostrophes:!1,trailingPeriod:!1,ipv4:!0,ipv6:!0,returnString:!1,...t};const e=t.re2&&$v!==!1?(()=>{if(typeof $u=="function")return $u;try{return $u=XM,typeof $u=="function"?$u:RegExp}catch{return $v=!1,RegExp}})():RegExp,r=`(?:(?:[a-z]+:)?//)${t.strict?"":"?"}`,n=t.auth?"(?:\\S+(?::\\S*)?@)?":"",s=`(?:\\.${t.strict?nj:t.tlds?`(?:${t.tlds.sort((u,l)=>l.length-u.length).join("|")})`:sj})${t.trailingPeriod?"\\.?":""}`;let i='\\s"';t.parens||(i+="\\)"),t.apostrophes||(i+="'");const a=t.trailingPeriod?`(?:[/?#][^${i}]*)?`:`(?:(?:[/?#][^${i}]*[^${i}.?!])|[/])?`;let o=`(?:${r}|www\\.)${n}(?:`;return t.localhost&&(o+="localhost|"),t.ipv4&&(o+=`${ZM}|`),t.ipv6&&(o+=`${ej}|`),o+=`${tj}${rj}${s})${ij}${a}`,t.returnString?o:t.exact?new e(`(?:^${o}$)`,"i"):new e(o,"ig")};const oj=zo(aj);var Gt={},sp={},du={},tf={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */tf.exports;(function(t,e){(function(r){var n=e,s=t&&t.exports==n&&t,i=typeof be=="object"&&be;(i.global===i||i.window===i)&&(r=i);var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[\x01-\x7F]/g,u=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,l=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,h={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},p=/["&'<>`]/g,m={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},E=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,_=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,A={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},x={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},b={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},T=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],F=String.fromCharCode,j={},$=j.hasOwnProperty,D=function(B,V){return $.call(B,V)},w=function(B,V){for(var Y=-1,se=B.length;++Y<se;)if(B[Y]==V)return!0;return!1},k=function(B,V){if(!B)return V;var Y={},se;for(se in V)Y[se]=D(B,se)?B[se]:V[se];return Y},I=function(B,V){var Y="";return B>=55296&&B<=57343||B>1114111?(V&&N("character reference outside the permissible Unicode range"),""):D(b,B)?(V&&N("disallowed character reference"),b[B]):(V&&w(T,B)&&N("disallowed character reference"),B>65535&&(B-=65536,Y+=F(B>>>10&1023|55296),B=56320|B&1023),Y+=F(B),Y)},P=function(B){return"&#x"+B.toString(16).toUpperCase()+";"},O=function(B){return"&#"+B+";"},N=function(B){throw Error("Parse error: "+B)},Ee=function(B,V){V=k(V,Ee.options);var Y=V.strict;Y&&_.test(B)&&N("forbidden code point");var se=V.encodeEverything,U=V.useNamedReferences,G=V.allowUnsafeSymbols,le=V.decimal?O:P,ue=function(oe){return le(oe.charCodeAt(0))};return se?(B=B.replace(o,function(oe){return U&&D(h,oe)?"&"+h[oe]+";":ue(oe)}),U&&(B=B.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),U&&(B=B.replace(l,function(oe){return"&"+h[oe]+";"}))):U?(G||(B=B.replace(p,function(oe){return"&"+h[oe]+";"})),B=B.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),B=B.replace(l,function(oe){return"&"+h[oe]+";"})):G||(B=B.replace(p,ue)),B.replace(a,function(oe){var Te=oe.charCodeAt(0),$e=oe.charCodeAt(1),ct=(Te-55296)*1024+$e-56320+65536;return le(ct)}).replace(u,ue)};Ee.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var ee=function(B,V){V=k(V,ee.options);var Y=V.strict;return Y&&E.test(B)&&N("malformed character reference"),B.replace(v,function(se,U,G,le,ue,oe,Te,$e,ct){var Ye,cr,dr,Lr,dn,mi;return U?(dn=U,A[dn]):G?(dn=G,mi=le,mi&&V.isAttributeValue?(Y&&mi=="="&&N("`&` did not start a character reference"),se):(Y&&N("named character reference was not terminated by a semicolon"),x[dn]+(mi||""))):ue?(dr=ue,cr=oe,Y&&!cr&&N("character reference was not terminated by a semicolon"),Ye=parseInt(dr,10),I(Ye,Y)):Te?(Lr=Te,cr=$e,Y&&!cr&&N("character reference was not terminated by a semicolon"),Ye=parseInt(Lr,16),I(Ye,Y)):(Y&&N("named character reference was not terminated by a semicolon"),se)})};ee.options={isAttributeValue:!1,strict:!1};var de=function(B){return B.replace(p,function(V){return m[V]})},me={version:"1.2.0",encode:Ee,decode:ee,escape:de,unescape:ee};if(n&&!n.nodeType)if(s)s.exports=me;else for(var Z in me)D(me,Z)&&(n[Z]=me[Z]);else r.he=me})(be)})(tf,tf.exports);var Q1=tf.exports;Object.defineProperty(du,"__esModule",{value:!0});var zv=Q1,uj=function(){function t(e,r){e===void 0&&(e=null),this.parentNode=e,this.childNodes=[],Object.defineProperty(this,"range",{enumerable:!1,writable:!0,configurable:!0,value:r??[-1,-1]})}return t.prototype.remove=function(){var e=this;if(this.parentNode){var r=this.parentNode.childNodes;this.parentNode.childNodes=r.filter(function(n){return e!==n}),this.parentNode=null}return this},Object.defineProperty(t.prototype,"innerText",{get:function(){return this.rawText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return(0,zv.decode)(this.rawText)},set:function(e){this.rawText=(0,zv.encode)(e)},enumerable:!1,configurable:!0}),t}();du.default=uj;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});var vg;(function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE"})(vg||(vg={}));ma.default=vg;var lj=be&&be.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vD=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});var cj=vD(du),dj=vD(ma),hj=function(t){lj(e,t);function e(r,n,s,i){n===void 0&&(n=null),i===void 0&&(i="!--");var a=t.call(this,n,s)||this;return a.rawText=r,a.rawTagName=i,a.nodeType=dj.default.COMMENT_NODE,a}return e.prototype.clone=function(){return new e(this.rawText,null,void 0,this.rawTagName)},Object.defineProperty(e.prototype,"text",{get:function(){return this.rawText},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"<!--".concat(this.rawText,"-->")},e}(cj.default);sp.default=hj;var is={},ga={},Be;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(Be||(Be={}));function fj(t){return t.type===Be.Tag||t.type===Be.Script||t.type===Be.Style}const pj=Be.Root,mj=Be.Text,gj=Be.Directive,Ej=Be.Comment,yj=Be.Script,_j=Be.Style,bj=Be.Tag,vj=Be.CDATA,Tj=Be.Doctype;class TD{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(e){this.parent=e}get previousSibling(){return this.prev}set previousSibling(e){this.prev=e}get nextSibling(){return this.next}set nextSibling(e){this.next=e}cloneNode(e=!1){return rf(this,e)}}class X1 extends TD{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class hc extends X1{constructor(){super(...arguments),this.type=Be.Text}get nodeType(){return 3}}class J1 extends X1{constructor(){super(...arguments),this.type=Be.Comment}get nodeType(){return 8}}class Z1 extends X1{constructor(e,r){super(r),this.name=e,this.type=Be.Directive}get nodeType(){return 1}}class eE extends TD{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class AD extends eE{constructor(){super(...arguments),this.type=Be.CDATA}get nodeType(){return 4}}class ia extends eE{constructor(){super(...arguments),this.type=Be.Root}get nodeType(){return 9}}let tE=class extends eE{constructor(e,r,n=[],s=e==="script"?Be.Script:e==="style"?Be.Style:Be.Tag){super(n),this.name=e,this.attribs=r,this.type=s}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var r,n;return{name:e,value:this.attribs[e],namespace:(r=this["x-attribsNamespace"])===null||r===void 0?void 0:r[e],prefix:(n=this["x-attribsPrefix"])===null||n===void 0?void 0:n[e]}})}};function xe(t){return fj(t)}function ip(t){return t.type===Be.CDATA}function In(t){return t.type===Be.Text}function ap(t){return t.type===Be.Comment}function Tg(t){return t.type===Be.Directive}function Ea(t){return t.type===Be.Root}function kt(t){return Object.prototype.hasOwnProperty.call(t,"children")}function rf(t,e=!1){let r;if(In(t))r=new hc(t.data);else if(ap(t))r=new J1(t.data);else if(xe(t)){const n=e?km(t.children):[],s=new tE(t.name,{...t.attribs},n);n.forEach(i=>i.parent=s),t.namespace!=null&&(s.namespace=t.namespace),t["x-attribsNamespace"]&&(s["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(s["x-attribsPrefix"]={...t["x-attribsPrefix"]}),r=s}else if(ip(t)){const n=e?km(t.children):[],s=new AD(n);n.forEach(i=>i.parent=s),r=s}else if(Ea(t)){const n=e?km(t.children):[],s=new ia(n);n.forEach(i=>i.parent=s),t["x-mode"]&&(s["x-mode"]=t["x-mode"]),r=s}else if(Tg(t)){const n=new Z1(t.name,t.data);t["x-name"]!=null&&(n["x-name"]=t["x-name"],n["x-publicId"]=t["x-publicId"],n["x-systemId"]=t["x-systemId"]),r=n}else throw new Error(`Not implemented yet: ${t.type}`);return r.startIndex=t.startIndex,r.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(r.sourceCodeLocation=t.sourceCodeLocation),r}function km(t){const e=t.map(r=>rf(r,!0));for(let r=1;r<e.length;r++)e[r].prev=e[r-1],e[r-1].next=e[r];return e}const Gv={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Aj{constructor(e,r,n){this.dom=[],this.root=new ia(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof r=="function"&&(n=r,r=Gv),typeof e=="object"&&(r=e,e=void 0),this.callback=e??null,this.options=r??Gv,this.elementCB=n??null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new ia(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,r){const n=this.options.xmlMode?Be.Tag:void 0,s=new tE(e,r,void 0,n);this.addNode(s),this.tagStack.push(s)}ontext(e){const{lastNode:r}=this;if(r&&r.type===Be.Text)r.data+=e,this.options.withEndIndices&&(r.endIndex=this.parser.endIndex);else{const n=new hc(e);this.addNode(n),this.lastNode=n}}oncomment(e){if(this.lastNode&&this.lastNode.type===Be.Comment){this.lastNode.data+=e;return}const r=new J1(e);this.addNode(r),this.lastNode=r}oncommentend(){this.lastNode=null}oncdatastart(){const e=new hc(""),r=new AD([e]);this.addNode(r),e.parent=r,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,r){const n=new Z1(e,r);this.addNode(n)}handleCallback(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e}addNode(e){const r=this.tagStack[this.tagStack.length-1],n=r.children[r.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),r.children.push(e),n&&(e.prev=n,n.next=e),e.parent=r,this.lastNode=null}}const rE=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),xD=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var Pm;const xj=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Ag=(Pm=String.fromCodePoint)!==null&&Pm!==void 0?Pm:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function wD(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=xj.get(t))!==null&&e!==void 0?e:t}var St;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(St||(St={}));const wj=32;var nn;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(nn||(nn={}));function xg(t){return t>=St.ZERO&&t<=St.NINE}function Ij(t){return t>=St.UPPER_A&&t<=St.UPPER_F||t>=St.LOWER_A&&t<=St.LOWER_F}function Cj(t){return t>=St.UPPER_A&&t<=St.UPPER_Z||t>=St.LOWER_A&&t<=St.LOWER_Z||xg(t)}function Dj(t){return t===St.EQUALS||Cj(t)}var It;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(It||(It={}));var Vn;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Vn||(Vn={}));class ID{constructor(e,r,n){this.decodeTree=e,this.emitCodePoint=r,this.errors=n,this.state=It.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Vn.Strict}startEntity(e){this.decodeMode=e,this.state=It.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case It.EntityStart:return e.charCodeAt(r)===St.NUM?(this.state=It.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=It.NamedEntity,this.stateNamedEntity(e,r));case It.NumericStart:return this.stateNumericStart(e,r);case It.NumericDecimal:return this.stateNumericDecimal(e,r);case It.NumericHex:return this.stateNumericHex(e,r);case It.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|wj)===St.LOWER_X?(this.state=It.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=It.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,n,s){if(r!==n){const i=n-r;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(r,i),s),this.consumed+=i}}stateNumericHex(e,r){const n=r;for(;r<e.length;){const s=e.charCodeAt(r);if(xg(s)||Ij(s))r+=1;else return this.addToNumericResult(e,n,r,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,n,r,16),-1}stateNumericDecimal(e,r){const n=r;for(;r<e.length;){const s=e.charCodeAt(r);if(xg(s))r+=1;else return this.addToNumericResult(e,n,r,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,n,r,10),-1}emitNumericEntity(e,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===St.SEMI)this.consumed+=1;else if(this.decodeMode===Vn.Strict)return 0;return this.emitCodePoint(wD(this.result),this.consumed),this.errors&&(e!==St.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&nn.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){const a=e.charCodeAt(r);if(this.treeIndex=DD(n,s,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return this.result===0||this.decodeMode===Vn.Attribute&&(i===0||Dj(a))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&nn.VALUE_LENGTH)>>14,i!==0){if(a===St.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Vn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:r,decodeTree:n}=this,s=(n[r]&nn.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,n){const{decodeTree:s}=this;return this.emitCodePoint(r===1?s[e]&~nn.VALUE_LENGTH:s[e+1],n),r===3&&this.emitCodePoint(s[e+2],n),n}end(){var e;switch(this.state){case It.NamedEntity:return this.result!==0&&(this.decodeMode!==Vn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case It.NumericDecimal:return this.emitNumericEntity(0,2);case It.NumericHex:return this.emitNumericEntity(0,3);case It.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case It.EntityStart:return 0}}}function CD(t){let e="";const r=new ID(t,n=>e+=Ag(n));return function(s,i){let a=0,o=0;for(;(o=s.indexOf("&",o))>=0;){e+=s.slice(a,o),r.startEntity(i);const l=r.write(s,o+1);if(l<0){a=o+r.end();break}a=o+l,o=l===0?a+1:a}const u=e+s.slice(a);return e="",u}}function DD(t,e,r,n){const s=(e&nn.BRANCH_LENGTH)>>7,i=e&nn.JUMP_TABLE;if(s===0)return i!==0&&n===i?r:-1;if(i){const u=n-i;return u<0||u>=s?-1:t[r+u]-1}let a=r,o=a+s-1;for(;a<=o;){const u=a+o>>>1,l=t[u];if(l<n)a=u+1;else if(l>n)o=u-1;else return t[u+s]}return-1}CD(rE);CD(xD);const Wv=/["&'<>$\x80-\uFFFF]/g,Sj=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),Nj=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function SD(t){let e="",r=0,n;for(;(n=Wv.exec(t))!==null;){const s=n.index,i=t.charCodeAt(s),a=Sj.get(i);a!==void 0?(e+=t.substring(r,s)+a,r=s+1):(e+=`${t.substring(r,s)}&#x${Nj(t,s).toString(16)};`,r=Wv.lastIndex+=+((i&64512)===55296))}return e+t.substr(r)}function ND(t,e){return function(n){let s,i=0,a="";for(;s=t.exec(n);)i!==s.index&&(a+=n.substring(i,s.index)),a+=e.get(s[0].charCodeAt(0)),i=s.index+1;return a+n.substring(i)}}const RD=ND(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),kD=ND(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),Rj=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),kj=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Pj=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function Oj(t){return t.replace(/"/g,"&quot;")}function Lj(t,e){var r;if(!t)return;const n=((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)===!1?Oj:e.xmlMode||e.encodeEntities!=="utf8"?SD:RD;return Object.keys(t).map(s=>{var i,a;const o=(i=t[s])!==null&&i!==void 0?i:"";return e.xmlMode==="foreign"&&(s=(a=kj.get(s))!==null&&a!==void 0?a:s),!e.emptyAttrs&&!e.xmlMode&&o===""?s:`${s}="${n(o)}"`}).join(" ")}const Kv=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function op(t,e={}){const r="length"in t?t:[t];let n="";for(let s=0;s<r.length;s++)n+=Fj(r[s],e);return n}function Fj(t,e){switch(t.type){case pj:return op(t.children,e);case Tj:case gj:return Uj(t);case Ej:return Hj(t);case vj:return qj(t);case yj:case _j:case bj:return jj(t,e);case mj:return Vj(t,e)}}const Bj=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Mj=new Set(["svg","math"]);function jj(t,e){var r;e.xmlMode==="foreign"&&(t.name=(r=Rj.get(t.name))!==null&&r!==void 0?r:t.name,t.parent&&Bj.has(t.parent.name)&&(e={...e,xmlMode:!1})),!e.xmlMode&&Mj.has(t.name)&&(e={...e,xmlMode:"foreign"});let n=`<${t.name}`;const s=Lj(t.attribs,e);return s&&(n+=` ${s}`),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&Kv.has(t.name))?(e.xmlMode||(n+=" "),n+="/>"):(n+=">",t.children.length>0&&(n+=op(t.children,e)),(e.xmlMode||!Kv.has(t.name))&&(n+=`</${t.name}>`)),n}function Uj(t){return`<${t.data}>`}function Vj(t,e){var r;let n=t.data||"";return((r=e.encodeEntities)!==null&&r!==void 0?r:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&Pj.has(t.parent.name))&&(n=e.xmlMode||e.encodeEntities!=="utf8"?SD(n):kD(n)),n}function qj(t){return`<![CDATA[${t.children[0].data}]]>`}function Hj(t){return`<!--${t.data}-->`}function PD(t,e){return op(t,e)}function $j(t,e){return kt(t)?t.children.map(r=>PD(r,e)).join(""):""}function uh(t){return Array.isArray(t)?t.map(uh).join(""):xe(t)?t.name==="br"?`
`:uh(t.children):ip(t)?uh(t.children):In(t)?t.data:""}function Vo(t){return Array.isArray(t)?t.map(Vo).join(""):kt(t)&&!ap(t)?Vo(t.children):In(t)?t.data:""}function nf(t){return Array.isArray(t)?t.map(nf).join(""):kt(t)&&(t.type===Be.Tag||ip(t))?nf(t.children):In(t)?t.data:""}function up(t){return kt(t)?t.children:[]}function OD(t){return t.parent||null}function LD(t){const e=OD(t);if(e!=null)return up(e);const r=[t];let{prev:n,next:s}=t;for(;n!=null;)r.unshift(n),{prev:n}=n;for(;s!=null;)r.push(s),{next:s}=s;return r}function zj(t,e){var r;return(r=t.attribs)===null||r===void 0?void 0:r[e]}function Gj(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}function Wj(t){return t.name}function nE(t){let{next:e}=t;for(;e!==null&&!xe(e);)({next:e}=e);return e}function sE(t){let{prev:e}=t;for(;e!==null&&!xe(e);)({prev:e}=e);return e}function ya(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){const e=t.parent.children,r=e.lastIndexOf(t);r>=0&&e.splice(r,1)}t.next=null,t.prev=null,t.parent=null}function Kj(t,e){const r=e.prev=t.prev;r&&(r.next=e);const n=e.next=t.next;n&&(n.prev=e);const s=e.parent=t.parent;if(s){const i=s.children;i[i.lastIndexOf(t)]=e,t.parent=null}}function Yj(t,e){if(ya(e),e.next=null,e.parent=t,t.children.push(e)>1){const r=t.children[t.children.length-2];r.next=e,e.prev=r}else e.prev=null}function Qj(t,e){ya(e);const{parent:r}=t,n=t.next;if(e.next=n,e.prev=t,t.next=e,e.parent=r,n){if(n.prev=e,r){const s=r.children;s.splice(s.lastIndexOf(n),0,e)}}else r&&r.children.push(e)}function Xj(t,e){if(ya(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){const r=t.children[1];r.prev=e,e.next=r}else e.next=null}function Jj(t,e){ya(e);const{parent:r}=t;if(r){const n=r.children;n.splice(n.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}function lp(t,e,r=!0,n=1/0){return iE(t,Array.isArray(e)?e:[e],r,n)}function iE(t,e,r,n){const s=[],i=[e],a=[0];for(;;){if(a[0]>=i[0].length){if(a.length===1)return s;i.shift(),a.shift();continue}const o=i[0][a[0]++];if(t(o)&&(s.push(o),--n<=0))return s;r&&kt(o)&&o.children.length>0&&(a.unshift(0),i.unshift(o.children))}}function Zj(t,e){return e.find(t)}function aE(t,e,r=!0){let n=null;for(let s=0;s<e.length&&!n;s++){const i=e[s];if(xe(i))t(i)?n=i:r&&i.children.length>0&&(n=aE(t,i.children,!0));else continue}return n}function FD(t,e){return e.some(r=>xe(r)&&(t(r)||FD(t,r.children)))}function e7(t,e){const r=[],n=[e],s=[0];for(;;){if(s[0]>=n[0].length){if(n.length===1)return r;n.shift(),s.shift();continue}const i=n[0][s[0]++];xe(i)&&(t(i)&&r.push(i),i.children.length>0&&(s.unshift(0),n.unshift(i.children)))}}const sf={tag_name(t){return typeof t=="function"?e=>xe(e)&&t(e.name):t==="*"?xe:e=>xe(e)&&e.name===t},tag_type(t){return typeof t=="function"?e=>t(e.type):e=>e.type===t},tag_contains(t){return typeof t=="function"?e=>In(e)&&t(e.data):e=>In(e)&&e.data===t}};function BD(t,e){return typeof e=="function"?r=>xe(r)&&e(r.attribs[t]):r=>xe(r)&&r.attribs[t]===e}function t7(t,e){return r=>t(r)||e(r)}function MD(t){const e=Object.keys(t).map(r=>{const n=t[r];return Object.prototype.hasOwnProperty.call(sf,r)?sf[r](n):BD(r,n)});return e.length===0?null:e.reduce(t7)}function r7(t,e){const r=MD(t);return r?r(e):!0}function n7(t,e,r,n=1/0){const s=MD(t);return s?lp(s,e,r,n):[]}function s7(t,e,r=!0){return Array.isArray(e)||(e=[e]),aE(BD("id",t),e,r)}function hu(t,e,r=!0,n=1/0){return lp(sf.tag_name(t),e,r,n)}function i7(t,e,r=!0,n=1/0){return lp(sf.tag_type(t),e,r,n)}function a7(t){let e=t.length;for(;--e>=0;){const r=t[e];if(e>0&&t.lastIndexOf(r,e-1)>=0){t.splice(e,1);continue}for(let n=r.parent;n;n=n.parent)if(t.includes(n)){t.splice(e,1);break}}return t}var Br;(function(t){t[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY"})(Br||(Br={}));function jD(t,e){const r=[],n=[];if(t===e)return 0;let s=kt(t)?t:t.parent;for(;s;)r.unshift(s),s=s.parent;for(s=kt(e)?e:e.parent;s;)n.unshift(s),s=s.parent;const i=Math.min(r.length,n.length);let a=0;for(;a<i&&r[a]===n[a];)a++;if(a===0)return Br.DISCONNECTED;const o=r[a-1],u=o.children,l=r[a],h=n[a];return u.indexOf(l)>u.indexOf(h)?o===e?Br.FOLLOWING|Br.CONTAINED_BY:Br.FOLLOWING:o===t?Br.PRECEDING|Br.CONTAINS:Br.PRECEDING}function fu(t){return t=t.filter((e,r,n)=>!n.includes(e,r+1)),t.sort((e,r)=>{const n=jD(e,r);return n&Br.PRECEDING?-1:n&Br.FOLLOWING?1:0}),t}function o7(t){const e=af(h7,t);return e?e.name==="feed"?u7(e):l7(e):null}function u7(t){var e;const r=t.children,n={type:"atom",items:hu("entry",r).map(a=>{var o;const{children:u}=a,l={media:UD(u)};mr(l,"id","id",u),mr(l,"title","title",u);const h=(o=af("link",u))===null||o===void 0?void 0:o.attribs.href;h&&(l.link=h);const p=Fs("summary",u)||Fs("content",u);p&&(l.description=p);const m=Fs("updated",u);return m&&(l.pubDate=new Date(m)),l})};mr(n,"id","id",r),mr(n,"title","title",r);const s=(e=af("link",r))===null||e===void 0?void 0:e.attribs.href;s&&(n.link=s),mr(n,"description","subtitle",r);const i=Fs("updated",r);return i&&(n.updated=new Date(i)),mr(n,"author","email",r,!0),n}function l7(t){var e,r;const n=(r=(e=af("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&r!==void 0?r:[],s={type:t.name.substr(0,3),id:"",items:hu("item",t.children).map(a=>{const{children:o}=a,u={media:UD(o)};mr(u,"id","guid",o),mr(u,"title","title",o),mr(u,"link","link",o),mr(u,"description","description",o);const l=Fs("pubDate",o)||Fs("dc:date",o);return l&&(u.pubDate=new Date(l)),u})};mr(s,"title","title",n),mr(s,"link","link",n),mr(s,"description","description",n);const i=Fs("lastBuildDate",n);return i&&(s.updated=new Date(i)),mr(s,"author","managingEditor",n,!0),s}const c7=["url","type","lang"],d7=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function UD(t){return hu("media:content",t).map(e=>{const{attribs:r}=e,n={medium:r.medium,isDefault:!!r.isDefault};for(const s of c7)r[s]&&(n[s]=r[s]);for(const s of d7)r[s]&&(n[s]=parseInt(r[s],10));return r.expression&&(n.expression=r.expression),n})}function af(t,e){return hu(t,e,!0,1)[0]}function Fs(t,e,r=!1){return Vo(hu(t,e,r,1)).trim()}function mr(t,e,r,n,s=!1){const i=Fs(r,n,s);i&&(t[e]=i)}function h7(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}const oE=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return Br},append:Qj,appendChild:Yj,compareDocumentPosition:jD,existsOne:FD,filter:lp,find:iE,findAll:e7,findOne:aE,findOneChild:Zj,getAttributeValue:zj,getChildren:up,getElementById:s7,getElements:n7,getElementsByTagName:hu,getElementsByTagType:i7,getFeed:o7,getInnerHTML:$j,getName:Wj,getOuterHTML:PD,getParent:OD,getSiblings:LD,getText:uh,hasAttrib:Gj,hasChildren:kt,innerText:nf,isCDATA:ip,isComment:ap,isDocument:Ea,isTag:xe,isText:In,nextElementSibling:nE,prepend:Jj,prependChild:Xj,prevElementSibling:sE,removeElement:ya,removeSubsets:a7,replaceElement:Kj,testElement:r7,textContent:Vo,uniqueSort:fu},Symbol.toStringTag,{value:"Module"})),f7=Fg(oE);var as={trueFunc:function(){return!0},falseFunc:function(){return!1}},Zs={},Ie;(function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"})(Ie||(Ie={}));const p7={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var Je;(function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"})(Je||(Je={}));const Yv=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,m7=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,g7=new Map([[126,Je.Element],[94,Je.Start],[36,Je.End],[42,Je.Any],[33,Je.Not],[124,Je.Hyphen]]),E7=new Set(["has","not","matches","is","where","host","host-context"]);function go(t){switch(t.type){case Ie.Adjacent:case Ie.Child:case Ie.Descendant:case Ie.Parent:case Ie.Sibling:case Ie.ColumnCombinator:return!0;default:return!1}}const y7=new Set(["contains","icontains"]);function _7(t,e,r){const n=parseInt(e,16)-65536;return n!==n||r?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function zu(t){return t.replace(m7,_7)}function Om(t){return t===39||t===34}function Qv(t){return t===32||t===9||t===10||t===12||t===13}function cp(t){const e=[],r=VD(e,`${t}`,0);if(r<t.length)throw new Error(`Unmatched selector: ${t.slice(r)}`);return e}function VD(t,e,r){let n=[];function s(m){const E=e.slice(r+m).match(Yv);if(!E)throw new Error(`Expected name, found ${e.slice(r)}`);const[_]=E;return r+=m+_.length,zu(_)}function i(m){for(r+=m;r<e.length&&Qv(e.charCodeAt(r));)r++}function a(){r+=1;const m=r;let E=1;for(;E>0&&r<e.length;r++)e.charCodeAt(r)===40&&!o(r)?E++:e.charCodeAt(r)===41&&!o(r)&&E--;if(E)throw new Error("Parenthesis not matched");return zu(e.slice(m,r-1))}function o(m){let E=0;for(;e.charCodeAt(--m)===92;)E++;return(E&1)===1}function u(){if(n.length>0&&go(n[n.length-1]))throw new Error("Did not expect successive traversals.")}function l(m){if(n.length>0&&n[n.length-1].type===Ie.Descendant){n[n.length-1].type=m;return}u(),n.push({type:m})}function h(m,E){n.push({type:Ie.Attribute,name:m,action:E,value:s(1),namespace:null,ignoreCase:"quirks"})}function p(){if(n.length&&n[n.length-1].type===Ie.Descendant&&n.pop(),n.length===0)throw new Error("Empty sub-selector");t.push(n)}if(i(0),e.length===r)return r;e:for(;r<e.length;){const m=e.charCodeAt(r);switch(m){case 32:case 9:case 10:case 12:case 13:{(n.length===0||n[0].type!==Ie.Descendant)&&(u(),n.push({type:Ie.Descendant})),i(1);break}case 62:{l(Ie.Child),i(1);break}case 60:{l(Ie.Parent),i(1);break}case 126:{l(Ie.Sibling),i(1);break}case 43:{l(Ie.Adjacent),i(1);break}case 46:{h("class",Je.Element);break}case 35:{h("id",Je.Equals);break}case 91:{i(1);let E,_=null;e.charCodeAt(r)===124?E=s(1):e.startsWith("*|",r)?(_="*",E=s(2)):(E=s(0),e.charCodeAt(r)===124&&e.charCodeAt(r+1)!==61&&(_=E,E=s(1))),i(0);let v=Je.Exists;const A=g7.get(e.charCodeAt(r));if(A){if(v=A,e.charCodeAt(r+1)!==61)throw new Error("Expected `=`");i(2)}else e.charCodeAt(r)===61&&(v=Je.Equals,i(1));let x="",b=null;if(v!=="exists"){if(Om(e.charCodeAt(r))){const j=e.charCodeAt(r);let $=r+1;for(;$<e.length&&(e.charCodeAt($)!==j||o($));)$+=1;if(e.charCodeAt($)!==j)throw new Error("Attribute value didn't end");x=zu(e.slice(r+1,$)),r=$+1}else{const j=r;for(;r<e.length&&(!Qv(e.charCodeAt(r))&&e.charCodeAt(r)!==93||o(r));)r+=1;x=zu(e.slice(j,r))}i(0);const F=e.charCodeAt(r)|32;F===115?(b=!1,i(1)):F===105&&(b=!0,i(1))}if(e.charCodeAt(r)!==93)throw new Error("Attribute selector didn't terminate");r+=1;const T={type:Ie.Attribute,name:E,action:v,value:x,namespace:_,ignoreCase:b};n.push(T);break}case 58:{if(e.charCodeAt(r+1)===58){n.push({type:Ie.PseudoElement,name:s(2).toLowerCase(),data:e.charCodeAt(r)===40?a():null});continue}const E=s(1).toLowerCase();let _=null;if(e.charCodeAt(r)===40)if(E7.has(E)){if(Om(e.charCodeAt(r+1)))throw new Error(`Pseudo-selector ${E} cannot be quoted`);if(_=[],r=VD(_,e,r+1),e.charCodeAt(r)!==41)throw new Error(`Missing closing parenthesis in :${E} (${e})`);r+=1}else{if(_=a(),y7.has(E)){const v=_.charCodeAt(0);v===_.charCodeAt(_.length-1)&&Om(v)&&(_=_.slice(1,-1))}_=zu(_)}n.push({type:Ie.Pseudo,name:E,data:_});break}case 44:{p(),n=[],i(1);break}default:{if(e.startsWith("/*",r)){const v=e.indexOf("*/",r+2);if(v<0)throw new Error("Comment was not terminated");r=v+2,n.length===0&&i(0);break}let E=null,_;if(m===42)r+=1,_="*";else if(m===124){if(_="",e.charCodeAt(r+1)===124){l(Ie.ColumnCombinator),i(2);break}}else if(Yv.test(e.slice(r)))_=s(0);else break e;e.charCodeAt(r)===124&&e.charCodeAt(r+1)!==124&&(E=_,e.charCodeAt(r+1)===42?(_="*",r+=2):_=s(1)),n.push(_==="*"?{type:Ie.Universal,namespace:E}:{type:Ie.Tag,name:_,namespace:E})}}}return p(),r}const qD=["\\",'"'],HD=[...qD,"(",")"],b7=new Set(qD.map(t=>t.charCodeAt(0))),Xv=new Set(HD.map(t=>t.charCodeAt(0))),Ja=new Set([...HD,"~","^","$","*","+","!","|",":","[","]"," ","."].map(t=>t.charCodeAt(0)));function $D(t){return t.map(e=>e.map(v7).join("")).join(", ")}function v7(t,e,r){switch(t.type){case Ie.Child:return e===0?"> ":" > ";case Ie.Parent:return e===0?"< ":" < ";case Ie.Sibling:return e===0?"~ ":" ~ ";case Ie.Adjacent:return e===0?"+ ":" + ";case Ie.Descendant:return" ";case Ie.ColumnCombinator:return e===0?"|| ":" || ";case Ie.Universal:return t.namespace==="*"&&e+1<r.length&&"name"in r[e+1]?"":`${zD(t.namespace)}*`;case Ie.Tag:return Jv(t);case Ie.PseudoElement:return`::${Mn(t.name,Ja)}${t.data===null?"":`(${Mn(t.data,Xv)})`}`;case Ie.Pseudo:return`:${Mn(t.name,Ja)}${t.data===null?"":`(${typeof t.data=="string"?Mn(t.data,Xv):$D(t.data)})`}`;case Ie.Attribute:{if(t.name==="id"&&t.action===Je.Equals&&t.ignoreCase==="quirks"&&!t.namespace)return`#${Mn(t.value,Ja)}`;if(t.name==="class"&&t.action===Je.Element&&t.ignoreCase==="quirks"&&!t.namespace)return`.${Mn(t.value,Ja)}`;const n=Jv(t);return t.action===Je.Exists?`[${n}]`:`[${n}${T7(t.action)}="${Mn(t.value,b7)}"${t.ignoreCase===null?"":t.ignoreCase?" i":" s"}]`}}}function T7(t){switch(t){case Je.Equals:return"";case Je.Element:return"~";case Je.Start:return"^";case Je.End:return"$";case Je.Any:return"*";case Je.Not:return"!";case Je.Hyphen:return"|";case Je.Exists:throw new Error("Shouldn't be here")}}function Jv(t){return`${zD(t.namespace)}${Mn(t.name,Ja)}`}function zD(t){return t!==null?`${t==="*"?"*":Mn(t,Ja)}|`:""}function Mn(t,e){let r=0,n="";for(let s=0;s<t.length;s++)e.has(t.charCodeAt(s))&&(n+=`${t.slice(r,s)}\\${t.charAt(s)}`,r=s+1);return n.length>0?n+t.slice(r):t}const A7=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return Je},IgnoreCaseMode:p7,get SelectorType(){return Ie},isTraversal:go,parse:cp,stringify:$D},Symbol.toStringTag,{value:"Module"})),dp=Fg(A7);var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.isTraversal=void 0;var wr=dp,GD=new Map([[wr.SelectorType.Universal,50],[wr.SelectorType.Tag,30],[wr.SelectorType.Attribute,1],[wr.SelectorType.Pseudo,0]]);function x7(t){return!GD.has(t.type)}pu.isTraversal=x7;var w7=new Map([[wr.AttributeAction.Exists,10],[wr.AttributeAction.Equals,8],[wr.AttributeAction.Not,7],[wr.AttributeAction.Start,6],[wr.AttributeAction.End,6],[wr.AttributeAction.Any,5]]);function I7(t){for(var e=t.map(WD),r=1;r<t.length;r++){var n=e[r];if(!(n<0))for(var s=r-1;s>=0&&n<e[s];s--){var i=t[s+1];t[s+1]=t[s],t[s]=i,e[s+1]=e[s],e[s]=n}}}pu.default=I7;function WD(t){var e,r,n=(e=GD.get(t.type))!==null&&e!==void 0?e:-1;return t.type===wr.SelectorType.Attribute?(n=(r=w7.get(t.action))!==null&&r!==void 0?r:4,t.action===wr.AttributeAction.Equals&&t.name==="id"&&(n=9),t.ignoreCase&&(n>>=1)):t.type===wr.SelectorType.Pseudo&&(t.data?t.name==="has"||t.name==="contains"?n=0:Array.isArray(t.data)?(n=Math.min.apply(Math,t.data.map(function(s){return Math.min.apply(Math,s.map(WD))})),n<0&&(n=0)):n=2:n=3),n}var hp={},fp={},C7=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fp,"__esModule",{value:!0});fp.attributeRules=void 0;var kd=C7(as),D7=/[-[\]{}()*+?.,\\^$|#\s]/g;function Zv(t){return t.replace(D7,"\\$&")}var S7=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Ti(t,e){return typeof t.ignoreCase=="boolean"?t.ignoreCase:t.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&S7.has(t.name)}fp.attributeRules={equals:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;return Ti(e,r)?(i=i.toLowerCase(),function(a){var o=n.getAttributeValue(a,s);return o!=null&&o.length===i.length&&o.toLowerCase()===i&&t(a)}):function(a){return n.getAttributeValue(a,s)===i&&t(a)}},hyphen:function(t,e,r){var n=r.adapter,s=e.name,i=e.value,a=i.length;return Ti(e,r)?(i=i.toLowerCase(),function(u){var l=n.getAttributeValue(u,s);return l!=null&&(l.length===a||l.charAt(a)==="-")&&l.substr(0,a).toLowerCase()===i&&t(u)}):function(u){var l=n.getAttributeValue(u,s);return l!=null&&(l.length===a||l.charAt(a)==="-")&&l.substr(0,a)===i&&t(u)}},element:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;if(/\s/.test(i))return kd.default.falseFunc;var a=new RegExp("(?:^|\\s)".concat(Zv(i),"(?:$|\\s)"),Ti(e,r)?"i":"");return function(u){var l=n.getAttributeValue(u,s);return l!=null&&l.length>=i.length&&a.test(l)&&t(u)}},exists:function(t,e,r){var n=e.name,s=r.adapter;return function(i){return s.hasAttrib(i,n)&&t(i)}},start:function(t,e,r){var n=r.adapter,s=e.name,i=e.value,a=i.length;return a===0?kd.default.falseFunc:Ti(e,r)?(i=i.toLowerCase(),function(o){var u=n.getAttributeValue(o,s);return u!=null&&u.length>=a&&u.substr(0,a).toLowerCase()===i&&t(o)}):function(o){var u;return!!(!((u=n.getAttributeValue(o,s))===null||u===void 0)&&u.startsWith(i))&&t(o)}},end:function(t,e,r){var n=r.adapter,s=e.name,i=e.value,a=-i.length;return a===0?kd.default.falseFunc:Ti(e,r)?(i=i.toLowerCase(),function(o){var u;return((u=n.getAttributeValue(o,s))===null||u===void 0?void 0:u.substr(a).toLowerCase())===i&&t(o)}):function(o){var u;return!!(!((u=n.getAttributeValue(o,s))===null||u===void 0)&&u.endsWith(i))&&t(o)}},any:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;if(i==="")return kd.default.falseFunc;if(Ti(e,r)){var a=new RegExp(Zv(i),"i");return function(u){var l=n.getAttributeValue(u,s);return l!=null&&l.length>=i.length&&a.test(l)&&t(u)}}return function(o){var u;return!!(!((u=n.getAttributeValue(o,s))===null||u===void 0)&&u.includes(i))&&t(o)}},not:function(t,e,r){var n=r.adapter,s=e.name,i=e.value;return i===""?function(a){return!!n.getAttributeValue(a,s)&&t(a)}:Ti(e,r)?(i=i.toLowerCase(),function(a){var o=n.getAttributeValue(a,s);return(o==null||o.length!==i.length||o.toLowerCase()!==i)&&t(a)}):function(a){return n.getAttributeValue(a,s)!==i&&t(a)}}};var uE={},KD={},YD={},pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.parse=void 0;var N7=new Set([9,10,12,13,32]),eT=48,R7=57;function k7(t){if(t=t.trim().toLowerCase(),t==="even")return[2,0];if(t==="odd")return[2,1];var e=0,r=0,n=i(),s=a();if(e<t.length&&t.charAt(e)==="n"&&(e++,r=n*(s??1),o(),e<t.length?(n=i(),o(),s=a()):n=s=0),s===null||e<t.length)throw new Error("n-th rule couldn't be parsed ('".concat(t,"')"));return[r,n*s];function i(){return t.charAt(e)==="-"?(e++,-1):(t.charAt(e)==="+"&&e++,1)}function a(){for(var u=e,l=0;e<t.length&&t.charCodeAt(e)>=eT&&t.charCodeAt(e)<=R7;)l=l*10+(t.charCodeAt(e)-eT),e++;return e===u?null:l}function o(){for(;e<t.length&&N7.has(t.charCodeAt(e));)e++}}pp.parse=k7;var qo={},P7=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qo,"__esModule",{value:!0});qo.generate=qo.compile=void 0;var tT=P7(as);function O7(t){var e=t[0],r=t[1]-1;if(r<0&&e<=0)return tT.default.falseFunc;if(e===-1)return function(i){return i<=r};if(e===0)return function(i){return i===r};if(e===1)return r<0?tT.default.trueFunc:function(i){return i>=r};var n=Math.abs(e),s=(r%n+n)%n;return e>1?function(i){return i>=r&&i%n===s}:function(i){return i<=r&&i%n===s}}qo.compile=O7;function L7(t){var e=t[0],r=t[1]-1,n=0;if(e<0){var s=-e,i=(r%s+s)%s;return function(){var a=i+s*n++;return a>r?null:a}}return e===0?r<0?function(){return null}:function(){return n++===0?r:null}:(r<0&&(r+=e*Math.ceil(-r/e)),function(){return e*n+++r})}qo.generate=L7;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sequence=t.generate=t.compile=t.parse=void 0;var e=pp;Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return e.parse}});var r=qo;Object.defineProperty(t,"compile",{enumerable:!0,get:function(){return r.compile}}),Object.defineProperty(t,"generate",{enumerable:!0,get:function(){return r.generate}});function n(i){return(0,r.compile)((0,e.parse)(i))}t.default=n;function s(i){return(0,r.generate)((0,e.parse)(i))}t.sequence=s})(YD);(function(t){var e=be&&be.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.filters=void 0;var r=e(YD),n=e(as);function s(a,o){return function(u){var l=o.getParent(u);return l!=null&&o.isTag(l)&&a(u)}}t.filters={contains:function(a,o,u){var l=u.adapter;return function(p){return a(p)&&l.getText(p).includes(o)}},icontains:function(a,o,u){var l=u.adapter,h=o.toLowerCase();return function(m){return a(m)&&l.getText(m).toLowerCase().includes(h)}},"nth-child":function(a,o,u){var l=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,l):function(E){for(var _=l.getSiblings(E),v=0,A=0;A<_.length&&!h(E,_[A]);A++)l.isTag(_[A])&&v++;return p(v)&&a(E)}},"nth-last-child":function(a,o,u){var l=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,l):function(E){for(var _=l.getSiblings(E),v=0,A=_.length-1;A>=0&&!h(E,_[A]);A--)l.isTag(_[A])&&v++;return p(v)&&a(E)}},"nth-of-type":function(a,o,u){var l=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,l):function(E){for(var _=l.getSiblings(E),v=0,A=0;A<_.length;A++){var x=_[A];if(h(E,x))break;l.isTag(x)&&l.getName(x)===l.getName(E)&&v++}return p(v)&&a(E)}},"nth-last-of-type":function(a,o,u){var l=u.adapter,h=u.equals,p=(0,r.default)(o);return p===n.default.falseFunc?n.default.falseFunc:p===n.default.trueFunc?s(a,l):function(E){for(var _=l.getSiblings(E),v=0,A=_.length-1;A>=0;A--){var x=_[A];if(h(E,x))break;l.isTag(x)&&l.getName(x)===l.getName(E)&&v++}return p(v)&&a(E)}},root:function(a,o,u){var l=u.adapter;return function(h){var p=l.getParent(h);return(p==null||!l.isTag(p))&&a(h)}},scope:function(a,o,u,l){var h=u.equals;return!l||l.length===0?t.filters.root(a,o,u):l.length===1?function(p){return h(l[0],p)&&a(p)}:function(p){return l.includes(p)&&a(p)}},hover:i("isHovered"),visited:i("isVisited"),active:i("isActive")};function i(a){return function(u,l,h){var p=h.adapter,m=p[a];return typeof m!="function"?n.default.falseFunc:function(_){return m(_)&&u(_)}}}})(KD);var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.verifyPseudoArgs=Ho.pseudos=void 0;Ho.pseudos={empty:function(t,e){var r=e.adapter;return!r.getChildren(t).some(function(n){return r.isTag(n)||r.getText(n)!==""})},"first-child":function(t,e){var r=e.adapter,n=e.equals;if(r.prevElementSibling)return r.prevElementSibling(t)==null;var s=r.getSiblings(t).find(function(i){return r.isTag(i)});return s!=null&&n(t,s)},"last-child":function(t,e){for(var r=e.adapter,n=e.equals,s=r.getSiblings(t),i=s.length-1;i>=0;i--){if(n(t,s[i]))return!0;if(r.isTag(s[i]))break}return!1},"first-of-type":function(t,e){for(var r=e.adapter,n=e.equals,s=r.getSiblings(t),i=r.getName(t),a=0;a<s.length;a++){var o=s[a];if(n(t,o))return!0;if(r.isTag(o)&&r.getName(o)===i)break}return!1},"last-of-type":function(t,e){for(var r=e.adapter,n=e.equals,s=r.getSiblings(t),i=r.getName(t),a=s.length-1;a>=0;a--){var o=s[a];if(n(t,o))return!0;if(r.isTag(o)&&r.getName(o)===i)break}return!1},"only-of-type":function(t,e){var r=e.adapter,n=e.equals,s=r.getName(t);return r.getSiblings(t).every(function(i){return n(t,i)||!r.isTag(i)||r.getName(i)!==s})},"only-child":function(t,e){var r=e.adapter,n=e.equals;return r.getSiblings(t).every(function(s){return n(t,s)||!r.isTag(s)})}};function F7(t,e,r,n){if(r===null){if(t.length>n)throw new Error("Pseudo-class :".concat(e," requires an argument"))}else if(t.length===n)throw new Error("Pseudo-class :".concat(e," doesn't have any arguments"))}Ho.verifyPseudoArgs=F7;var mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.aliases=void 0;mp.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var gp={};(function(t){var e=be&&be.__spreadArray||function(l,h,p){if(p||arguments.length===2)for(var m=0,E=h.length,_;m<E;m++)(_||!(m in h))&&(_||(_=Array.prototype.slice.call(h,0,m)),_[m]=h[m]);return l.concat(_||Array.prototype.slice.call(h))},r=be&&be.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.subselects=t.getNextSiblings=t.ensureIsTag=t.PLACEHOLDER_ELEMENT=void 0;var n=r(as),s=pu;t.PLACEHOLDER_ELEMENT={};function i(l,h){return l===n.default.falseFunc?n.default.falseFunc:function(p){return h.isTag(p)&&l(p)}}t.ensureIsTag=i;function a(l,h){var p=h.getSiblings(l);if(p.length<=1)return[];var m=p.indexOf(l);return m<0||m===p.length-1?[]:p.slice(m+1).filter(h.isTag)}t.getNextSiblings=a;function o(l){return{xmlMode:!!l.xmlMode,lowerCaseAttributeNames:!!l.lowerCaseAttributeNames,lowerCaseTags:!!l.lowerCaseTags,quirksMode:!!l.quirksMode,cacheResults:!!l.cacheResults,pseudos:l.pseudos,adapter:l.adapter,equals:l.equals}}var u=function(l,h,p,m,E){var _=E(h,o(p),m);return _===n.default.trueFunc?l:_===n.default.falseFunc?n.default.falseFunc:function(v){return _(v)&&l(v)}};t.subselects={is:u,matches:u,where:u,not:function(l,h,p,m,E){var _=E(h,o(p),m);return _===n.default.falseFunc?l:_===n.default.trueFunc?n.default.falseFunc:function(v){return!_(v)&&l(v)}},has:function(l,h,p,m,E){var _=p.adapter,v=o(p);v.relativeSelector=!0;var A=h.some(function(j){return j.some(s.isTraversal)})?[t.PLACEHOLDER_ELEMENT]:void 0,x=E(h,v,A);if(x===n.default.falseFunc)return n.default.falseFunc;var b=i(x,_);if(A&&x!==n.default.trueFunc){var T=x.shouldTestNextSiblings,F=T===void 0?!1:T;return function(j){if(!l(j))return!1;A[0]=j;var $=_.getChildren(j),D=F?e(e([],$,!0),a(j,_),!0):$;return _.existsOne(b,D)}}return function(j){return l(j)&&_.existsOne(b,_.getChildren(j))}}}})(gp);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.compilePseudoSelector=t.aliases=t.pseudos=t.filters=void 0;var e=dp,r=KD;Object.defineProperty(t,"filters",{enumerable:!0,get:function(){return r.filters}});var n=Ho;Object.defineProperty(t,"pseudos",{enumerable:!0,get:function(){return n.pseudos}});var s=mp;Object.defineProperty(t,"aliases",{enumerable:!0,get:function(){return s.aliases}});var i=gp;function a(o,u,l,h,p){var m,E=u.name,_=u.data;if(Array.isArray(_)){if(!(E in i.subselects))throw new Error("Unknown pseudo-class :".concat(E,"(").concat(_,")"));return i.subselects[E](o,_,l,h,p)}var v=(m=l.pseudos)===null||m===void 0?void 0:m[E],A=typeof v=="string"?v:s.aliases[E];if(typeof A=="string"){if(_!=null)throw new Error("Pseudo ".concat(E," doesn't have any arguments"));var x=(0,e.parse)(A);return i.subselects.is(o,x,l,h,p)}if(typeof v=="function")return(0,n.verifyPseudoArgs)(v,E,_,1),function(T){return v(T,_)&&o(T)};if(E in r.filters)return r.filters[E](o,_,l,h);if(E in n.pseudos){var b=n.pseudos[E];return(0,n.verifyPseudoArgs)(b,E,_,2),function(T){return b(T,l,_)&&o(T)}}throw new Error("Unknown pseudo-class :".concat(E))}t.compilePseudoSelector=a})(uE);Object.defineProperty(hp,"__esModule",{value:!0});hp.compileGeneralSelector=void 0;var B7=fp,M7=uE,Xr=dp;function Lm(t,e){var r=e.getParent(t);return r&&e.isTag(r)?r:null}function j7(t,e,r,n,s){var i=r.adapter,a=r.equals;switch(e.type){case Xr.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case Xr.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case Xr.SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!r.xmlMode||r.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),B7.attributeRules[e.action](t,e,r)}case Xr.SelectorType.Pseudo:return(0,M7.compilePseudoSelector)(t,e,r,n,s);case Xr.SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var o=e.name;return(!r.xmlMode||r.lowerCaseTags)&&(o=o.toLowerCase()),function(h){return i.getName(h)===o&&t(h)}}case Xr.SelectorType.Descendant:{if(r.cacheResults===!1||typeof WeakSet>"u")return function(h){for(var p=h;p=Lm(p,i);)if(t(p))return!0;return!1};var u=new WeakSet;return function(h){for(var p=h;p=Lm(p,i);)if(!u.has(p)){if(i.isTag(p)&&t(p))return!0;u.add(p)}return!1}}case"_flexibleDescendant":return function(h){var p=h;do if(t(p))return!0;while(p=Lm(p,i));return!1};case Xr.SelectorType.Parent:return function(h){return i.getChildren(h).some(function(p){return i.isTag(p)&&t(p)})};case Xr.SelectorType.Child:return function(h){var p=i.getParent(h);return p!=null&&i.isTag(p)&&t(p)};case Xr.SelectorType.Sibling:return function(h){for(var p=i.getSiblings(h),m=0;m<p.length;m++){var E=p[m];if(a(h,E))break;if(i.isTag(E)&&t(E))return!0}return!1};case Xr.SelectorType.Adjacent:return i.prevElementSibling?function(h){var p=i.prevElementSibling(h);return p!=null&&t(p)}:function(h){for(var p=i.getSiblings(h),m,E=0;E<p.length;E++){var _=p[E];if(a(h,_))break;i.isTag(_)&&(m=_)}return!!m&&t(m)};case Xr.SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return t}}}hp.compileGeneralSelector=j7;var U7=be&&be.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),V7=be&&be.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),q7=be&&be.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&U7(e,t,r);return V7(e,t),e},H7=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.compileToken=Zs.compileUnsafe=Zs.compile=void 0;var Kn=dp,Bs=H7(as),wg=q7(pu),$7=hp,QD=gp;function z7(t,e,r){var n=XD(t,e,r);return(0,QD.ensureIsTag)(n,e.adapter)}Zs.compile=z7;function XD(t,e,r){var n=typeof t=="string"?(0,Kn.parse)(t):t;return lE(n,e,r)}Zs.compileUnsafe=XD;function JD(t){return t.type===Kn.SelectorType.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some(function(e){return e.some(JD)}))}var G7={type:Kn.SelectorType.Descendant},W7={type:"_flexibleDescendant"},K7={type:Kn.SelectorType.Pseudo,name:"scope",data:null};function Y7(t,e,r){for(var n=e.adapter,s=!!(r!=null&&r.every(function(u){var l=n.isTag(u)&&n.getParent(u);return u===QD.PLACEHOLDER_ELEMENT||l&&n.isTag(l)})),i=0,a=t;i<a.length;i++){var o=a[i];if(!(o.length>0&&(0,wg.isTraversal)(o[0])&&o[0].type!==Kn.SelectorType.Descendant))if(s&&!o.some(JD))o.unshift(G7);else continue;o.unshift(K7)}}function lE(t,e,r){var n;t.forEach(wg.default),r=(n=e.context)!==null&&n!==void 0?n:r;var s=Array.isArray(r),i=r&&(Array.isArray(r)?r:[r]);if(e.relativeSelector!==!1)Y7(t,e,i);else if(t.some(function(u){return u.length>0&&(0,wg.isTraversal)(u[0])}))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");var a=!1,o=t.map(function(u){if(u.length>=2){var l=u[0],h=u[1];l.type!==Kn.SelectorType.Pseudo||l.name!=="scope"||(s&&h.type===Kn.SelectorType.Descendant?u[1]=W7:(h.type===Kn.SelectorType.Adjacent||h.type===Kn.SelectorType.Sibling)&&(a=!0))}return Q7(u,e,i)}).reduce(X7,Bs.default.falseFunc);return o.shouldTestNextSiblings=a,o}Zs.compileToken=lE;function Q7(t,e,r){var n;return t.reduce(function(s,i){return s===Bs.default.falseFunc?Bs.default.falseFunc:(0,$7.compileGeneralSelector)(s,i,e,r,lE)},(n=e.rootFunc)!==null&&n!==void 0?n:Bs.default.trueFunc)}function X7(t,e){return e===Bs.default.falseFunc||t===Bs.default.trueFunc?t:t===Bs.default.falseFunc||e===Bs.default.trueFunc?e:function(n){return t(n)||e(n)}}(function(t){var e=be&&be.__createBinding||(Object.create?function(b,T,F,j){j===void 0&&(j=F);var $=Object.getOwnPropertyDescriptor(T,F);(!$||("get"in $?!T.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return T[F]}}),Object.defineProperty(b,j,$)}:function(b,T,F,j){j===void 0&&(j=F),b[j]=T[F]}),r=be&&be.__setModuleDefault||(Object.create?function(b,T){Object.defineProperty(b,"default",{enumerable:!0,value:T})}:function(b,T){b.default=T}),n=be&&be.__importStar||function(b){if(b&&b.__esModule)return b;var T={};if(b!=null)for(var F in b)F!=="default"&&Object.prototype.hasOwnProperty.call(b,F)&&e(T,b,F);return r(T,b),T},s=be&&be.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.aliases=t.pseudos=t.filters=t.is=t.selectOne=t.selectAll=t.prepareContext=t._compileToken=t._compileUnsafe=t.compile=void 0;var i=n(f7),a=s(as),o=Zs,u=gp,l=function(b,T){return b===T},h={adapter:i,equals:l};function p(b){var T,F,j,$,D=b??h;return(T=D.adapter)!==null&&T!==void 0||(D.adapter=i),(F=D.equals)!==null&&F!==void 0||(D.equals=($=(j=D.adapter)===null||j===void 0?void 0:j.equals)!==null&&$!==void 0?$:l),D}function m(b){return function(F,j,$){var D=p(j);return b(F,D,$)}}t.compile=m(o.compile),t._compileUnsafe=m(o.compileUnsafe),t._compileToken=m(o.compileToken);function E(b){return function(F,j,$){var D=p($);typeof F!="function"&&(F=(0,o.compileUnsafe)(F,D,j));var w=_(j,D.adapter,F.shouldTestNextSiblings);return b(F,w,D)}}function _(b,T,F){return F===void 0&&(F=!1),F&&(b=v(b,T)),Array.isArray(b)?T.removeSubsets(b):T.getChildren(b)}t.prepareContext=_;function v(b,T){for(var F=Array.isArray(b)?b.slice(0):[b],j=F.length,$=0;$<j;$++){var D=(0,u.getNextSiblings)(F[$],T);F.push.apply(F,D)}return F}t.selectAll=E(function(b,T,F){return b===a.default.falseFunc||!T||T.length===0?[]:F.adapter.findAll(b,T)}),t.selectOne=E(function(b,T,F){return b===a.default.falseFunc||!T||T.length===0?null:F.adapter.findOne(b,T)});function A(b,T,F){var j=p(F);return(typeof T=="function"?T:(0,o.compile)(T,j))(b)}t.is=A,t.default=t.selectAll;var x=uE;Object.defineProperty(t,"filters",{enumerable:!0,get:function(){return x.filters}}),Object.defineProperty(t,"pseudos",{enumerable:!0,get:function(){return x.pseudos}}),Object.defineProperty(t,"aliases",{enumerable:!0,get:function(){return x.aliases}})})(ga);var cE={};Object.defineProperty(cE,"__esModule",{value:!0});function J7(t){return t[t.length-1]}cE.default=J7;var dE={},Z7=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dE,"__esModule",{value:!0});var eU=Z7(ma);function Ep(t){return t&&t.nodeType===eU.default.ELEMENT_NODE}function ZD(t,e){return Ep(t)?t.getAttribute(e):void 0}function tU(t){return(t&&t.rawTagName||"").toLowerCase()}function jc(t){return t&&t.childNodes}function hE(t){return t?t.parentNode:null}function rU(t){return t.text}function nU(t){for(var e=t.length,r,n,s;--e>-1;){for(r=n=t[e],t[e]=null,s=!0;n;){if(t.indexOf(n)>-1){s=!1,t.splice(e,1);break}n=hE(n)}s&&(t[e]=r)}return t}function eS(t,e){return e.some(function(r){return Ep(r)?t(r)||eS(t,jc(r)):!1})}function sU(t){var e=hE(t);return e?jc(e):[]}function iU(t,e){return ZD(t,e)!==void 0}function tS(t,e){for(var r=null,n=0,s=e==null?void 0:e.length;n<s&&!r;n++){var i=e[n];if(t(i))r=i;else{var a=jc(i);a&&a.length>0&&(r=tS(t,a))}}return r}function rS(t,e){for(var r=[],n=0,s=e.length;n<s;n++)if(Ep(e[n])){t(e[n])&&r.push(e[n]);var i=jc(e[n]);i&&(r=r.concat(rS(t,i)))}return r}dE.default={isTag:Ep,getAttributeValue:ZD,getName:tU,getChildren:jc,getParent:hE,getText:rU,removeSubsets:nU,existsOne:eS,getSiblings:sU,hasAttrib:iU,findOne:tS,findAll:rS};var fE={};Object.defineProperty(fE,"__esModule",{value:!0});var aU=function(){function t(e,r){e===void 0&&(e=!1),this.addClosingSlash=e,Array.isArray(r)?this.voidTags=r.reduce(function(n,s){return n.add(s.toLowerCase()).add(s.toUpperCase()).add(s)},new Set):this.voidTags=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].reduce(function(n,s){return n.add(s.toLowerCase()).add(s.toUpperCase()).add(s)},new Set)}return t.prototype.formatNode=function(e,r,n){var s=this.addClosingSlash,i=s&&r&&!r.endsWith(" ")?" ":"",a=s?"".concat(i,"/"):"";return this.isVoidElement(e.toLowerCase())?"<".concat(e).concat(r).concat(a,">"):"<".concat(e).concat(r,">").concat(n,"</").concat(e,">")},t.prototype.isVoidElement=function(e){return this.voidTags.has(e)},t}();fE.default=aU;var yp={},oU=be&&be.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nS=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yp,"__esModule",{value:!0});var uU=Q1,lU=nS(du),cU=nS(ma),dU=function(t){oU(e,t);function e(r,n,s){n===void 0&&(n=null);var i=t.call(this,n,s)||this;return i.nodeType=cU.default.TEXT_NODE,i.rawTagName="",i._rawText=r,i}return e.prototype.clone=function(){return new e(this._rawText,null)},Object.defineProperty(e.prototype,"rawText",{get:function(){return this._rawText},set:function(r){this._rawText=r,this._trimmedRawText=void 0,this._trimmedText=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trimmedRawText",{get:function(){return this._trimmedRawText!==void 0?this._trimmedRawText:(this._trimmedRawText=rT(this.rawText),this._trimmedRawText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trimmedText",{get:function(){return this._trimmedText!==void 0?this._trimmedText:(this._trimmedText=rT(this.text),this._trimmedText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return(0,uU.decode)(this.rawText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWhitespace",{get:function(){return/^(\s|&nbsp;)*$/.test(this.rawText)},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.rawText},e}(lU.default);yp.default=dU;function rT(t){for(var e=0,r,n;e>=0&&e<t.length;)/\S/.test(t[e])&&(r===void 0?(r=e,e=t.length):(n=e,e=void 0)),r===void 0?e++:e--;r===void 0&&(r=0),n===void 0&&(n=t.length-1);var s=r>0&&/[^\S\r\n]/.test(t[r-1]),i=n<t.length-1&&/[^\S\r\n]/.test(t[n+1]);return(s?" ":"")+t.slice(r,n+1)+(i?" ":"")}var hU=be&&be.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Za=be&&be.__assign||function(){return Za=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Za.apply(this,arguments)},Gu=be&&be.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},fi=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(is,"__esModule",{value:!0});is.parse=is.base_parse=void 0;var Fm=ga,fU=fi(Q1),eo=fi(cE),Bm=fi(dE),sS=fi(fE),pU=fi(sp),Mm=fi(du),to=fi(yp),fn=fi(ma);function Wu(t){return JSON.parse(JSON.stringify(fU.default.decode(t)))}var mU=["h1","h2","h3","h4","h5","h6","header","hgroup"],gU=["details","dialog","dd","div","dt"],EU=["fieldset","figcaption","figure","footer","form"],yU=["table","td","tr"],_U=["address","article","aside","blockquote","br","hr","li","main","nav","ol","p","pre","section","ul"],Ig=new Set;function bU(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=function(a){for(var o=0;o<a.length;o++){var u=a[o];Ig.add(u),Ig.add(u.toUpperCase())}},n=0,s=t;n<s.length;n++){var i=s[n];r(i)}}bU(mU,gU,EU,yU,_U);var vU=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r=function(){return null}),this._set=new Set(e),this._afterUpdate=r}return t.prototype._validate=function(e){if(/\s/.test(e))throw new Error("DOMException in DOMTokenList.add: The token '".concat(e,"' contains HTML space characters, which are not valid in tokens."))},t.prototype.add=function(e){this._validate(e),this._set.add(e),this._afterUpdate(this)},t.prototype.replace=function(e,r){this._validate(r),this._set.delete(e),this._set.add(r),this._afterUpdate(this)},t.prototype.remove=function(e){this._set.delete(e)&&this._afterUpdate(this)},t.prototype.toggle=function(e){this._validate(e),this._set.has(e)?this._set.delete(e):this._set.add(e),this._afterUpdate(this)},t.prototype.contains=function(e){return this._set.has(e)},Object.defineProperty(t.prototype,"length",{get:function(){return this._set.size},enumerable:!1,configurable:!0}),t.prototype.values=function(){return this._set.values()},Object.defineProperty(t.prototype,"value",{get:function(){return Array.from(this._set.values())},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return Array.from(this._set.values()).join(" ")},t}(),Cg=function(t){hU(e,t);function e(r,n,s,i,a,o,u){s===void 0&&(s=""),i===void 0&&(i=null),o===void 0&&(o=new sS.default),u===void 0&&(u={});var l=t.call(this,i,a)||this;if(l.rawAttrs=s,l.voidTag=o,l.nodeType=fn.default.ELEMENT_NODE,l.rawTagName=r,l.rawAttrs=s||"",l.id=n.id||"",l.childNodes=[],l._parseOptions=u,l.classList=new vU(n.class?n.class.split(/\s+/):[],function(p){return l.setAttribute("class",p.toString())}),n.id&&(s||(l.rawAttrs='id="'.concat(n.id,'"'))),n.class&&!s){var h='class="'.concat(l.classList.toString(),'"');l.rawAttrs?l.rawAttrs+=" ".concat(h):l.rawAttrs=h}return l}return e.prototype.quoteAttribute=function(r){return r==null?"null":JSON.stringify(r.replace(/"/g,"&quot;")).replace(/\\t/g,"	").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\/g,"")},e.prototype.removeChild=function(r){return this.childNodes=this.childNodes.filter(function(n){return n!==r}),this},e.prototype.exchangeChild=function(r,n){var s=this.childNodes;return this.childNodes=s.map(function(i){return i===r?n:i}),this},Object.defineProperty(e.prototype,"tagName",{get:function(){return this.rawTagName?this.rawTagName.toUpperCase():this.rawTagName},set:function(r){this.rawTagName=r.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.rawTagName.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVoidElement",{get:function(){return this.voidTag.isVoidElement(this.localName)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawText",{get:function(){return/^br$/i.test(this.rawTagName)?`
`:this.childNodes.reduce(function(r,n){return r+=n.rawText},"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){return Wu(this.rawText)},set:function(r){var n=[new to.default(r,this)];this.childNodes=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return Wu(this.rawText)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"structuredText",{get:function(){var r=[],n=[r];function s(i){if(i.nodeType===fn.default.ELEMENT_NODE)Ig.has(i.rawTagName)?(r.length>0&&n.push(r=[]),i.childNodes.forEach(s),r.length>0&&n.push(r=[])):i.childNodes.forEach(s);else if(i.nodeType===fn.default.TEXT_NODE)if(i.isWhitespace)r.prependWhitespace=!0;else{var a=i.trimmedText;r.prependWhitespace&&(a=" ".concat(a),r.prependWhitespace=!1),r.push(a)}}return s(this),n.map(function(i){return i.join("").replace(/\s{2,}/g," ")}).join(`
`).replace(/\s+$/,"")},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var r=this.rawTagName;if(r){var n=this.rawAttrs?" ".concat(this.rawAttrs):"";return this.voidTag.formatNode(r,n,this.innerHTML)}return this.innerHTML},Object.defineProperty(e.prototype,"innerHTML",{get:function(){return this.childNodes.map(function(r){return r.toString()}).join("")},set:function(r){var n=Ba(r,this._parseOptions),s=n.childNodes.length?n.childNodes:[new to.default(r,this)];Ln(s,this),Ln(this.childNodes,null),this.childNodes=s},enumerable:!1,configurable:!0}),e.prototype.set_content=function(r,n){if(n===void 0&&(n={}),r instanceof Mm.default)r=[r];else if(typeof r=="string"){n=Za(Za({},this._parseOptions),n);var s=Ba(r,n);r=s.childNodes.length?s.childNodes:[new to.default(s.innerHTML,this)]}return Ln(this.childNodes,null),Ln(r,this),this.childNodes=r,this},e.prototype.replaceWith=function(){for(var r=this,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=this.parentNode,a=n.map(function(u){if(u instanceof Mm.default)return[u];if(typeof u=="string"){var l=Ba(u,r._parseOptions);return l.childNodes.length?l.childNodes:[new to.default(u,r)]}return[]}).flat(),o=i.childNodes.findIndex(function(u){return u===r});return Ln([this],null),i.childNodes=Gu(Gu(Gu([],i.childNodes.slice(0,o),!0),Ln(a,i),!0),i.childNodes.slice(o+1),!0),this},Object.defineProperty(e.prototype,"outerHTML",{get:function(){return this.toString()},enumerable:!1,configurable:!0}),e.prototype.trimRight=function(r){for(var n=0;n<this.childNodes.length;n++){var s=this.childNodes[n];if(s.nodeType===fn.default.ELEMENT_NODE)s.trimRight(r);else{var i=s.rawText.search(r);i>-1&&(s.rawText=s.rawText.substr(0,i),this.childNodes.length=n+1)}}return this},Object.defineProperty(e.prototype,"structure",{get:function(){var r=[],n=0;function s(a){r.push("  ".repeat(n)+a)}function i(a){var o=a.id?"#".concat(a.id):"",u=a.classList.length?".".concat(a.classList.value.join(".")):"";s("".concat(a.rawTagName).concat(o).concat(u)),n++,a.childNodes.forEach(function(l){l.nodeType===fn.default.ELEMENT_NODE?i(l):l.nodeType===fn.default.TEXT_NODE&&(l.isWhitespace||s("#text"))}),n--}return i(this),r.join(`
`)},enumerable:!1,configurable:!0}),e.prototype.removeWhitespace=function(){var r=this,n=0;return this.childNodes.forEach(function(s){if(s.nodeType===fn.default.TEXT_NODE){if(s.isWhitespace)return;s.rawText=s.trimmedRawText}else s.nodeType===fn.default.ELEMENT_NODE&&s.removeWhitespace();r.childNodes[n++]=s}),this.childNodes.length=n,this},e.prototype.querySelectorAll=function(r){return(0,Fm.selectAll)(r,this,{xmlMode:!0,adapter:Bm.default})},e.prototype.querySelector=function(r){return(0,Fm.selectOne)(r,this,{xmlMode:!0,adapter:Bm.default})},e.prototype.getElementsByTagName=function(r){for(var n=r.toUpperCase(),s=[],i=[],a=this,o=0;o!==void 0;){var u=void 0;do u=a.childNodes[o++];while(o<a.childNodes.length&&u===void 0);if(u===void 0){a=a.parentNode,o=i.pop();continue}u.nodeType===fn.default.ELEMENT_NODE&&((r==="*"||u.tagName===n)&&s.push(u),u.childNodes.length>0&&(i.push(o),a=u,o=0))}return s},e.prototype.getElementById=function(r){for(var n=[],s=this,i=0;i!==void 0;){var a=void 0;do a=s.childNodes[i++];while(i<s.childNodes.length&&a===void 0);if(a===void 0){s=s.parentNode,i=n.pop();continue}if(a.nodeType===fn.default.ELEMENT_NODE){if(a.id===r)return a;a.childNodes.length>0&&(n.push(i),s=a,i=0)}}return null},e.prototype.closest=function(r){var n=new Map,s=this,i=null;function a(u,l){for(var h=null,p=0,m=l.length;p<m&&!h;p++){var E=l[p];if(u(E))h=E;else{var _=n.get(E);_&&(h=a(u,[_]))}}return h}for(;s;)n.set(s,i),i=s,s=s.parentNode;for(s=this;s;){var o=(0,Fm.selectOne)(r,s,{xmlMode:!0,adapter:Za(Za({},Bm.default),{getChildren:function(u){var l=n.get(u);return l&&[l]},getSiblings:function(u){return[u]},findOne:a,findAll:function(){return[]}})});if(o)return o;s=s.parentNode}return null},e.prototype.appendChild=function(r){return r.remove(),this.childNodes.push(r),r.parentNode=this,r},Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return(0,eo.default)(this.childNodes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attrs",{get:function(){if(this._attrs)return this._attrs;this._attrs={};var r=this.rawAttributes;for(var n in r){var s=r[n]||"";this._attrs[n.toLowerCase()]=Wu(s)}return this._attrs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var r={},n=this.rawAttributes;for(var s in n){var i=n[s]||"";r[s]=Wu(i)}return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawAttributes",{get:function(){if(this._rawAttrs)return this._rawAttrs;var r={};if(this.rawAttrs)for(var n=/([a-zA-Z()[\]#@$.?:][a-zA-Z0-9-_:()[\]#]*)(?:\s*=\s*((?:'[^']*')|(?:"[^"]*")|\S+))?/g,s=void 0;s=n.exec(this.rawAttrs);){var i=s[1],a=s[2]||null;a&&(a[0]==="'"||a[0]==='"')&&(a=a.slice(1,a.length-1)),r[i]=r[i]||a}return this._rawAttrs=r,r},enumerable:!1,configurable:!0}),e.prototype.removeAttribute=function(r){var n=this,s=this.rawAttributes;return delete s[r],this._attrs&&delete this._attrs[r],this.rawAttrs=Object.keys(s).map(function(i){var a=n.quoteAttribute(s[i]);return a==="null"||a==='""'?i:"".concat(i,"=").concat(a)}).join(" "),r==="id"&&(this.id=""),this},e.prototype.hasAttribute=function(r){return r.toLowerCase()in this.attrs},e.prototype.getAttribute=function(r){return this.attrs[r.toLowerCase()]},e.prototype.setAttribute=function(r,n){var s=this;if(arguments.length<2)throw new Error("Failed to execute 'setAttribute' on 'Element'");var i=r.toLowerCase(),a=this.rawAttributes;for(var o in a)if(o.toLowerCase()===i){r=o;break}return a[r]=String(n),this._attrs&&(this._attrs[i]=Wu(a[r])),this.rawAttrs=Object.keys(a).map(function(u){var l=s.quoteAttribute(a[u]);return l==="null"||l==='""'?u:"".concat(u,"=").concat(l)}).join(" "),r==="id"&&(this.id=n),this},e.prototype.setAttributes=function(r){var n=this;return this._attrs&&delete this._attrs,this._rawAttrs&&delete this._rawAttrs,this.rawAttrs=Object.keys(r).map(function(s){var i=r[s];return i==="null"||i==='""'?s:"".concat(s,"=").concat(n.quoteAttribute(String(i)))}).join(" "),this},e.prototype.insertAdjacentHTML=function(r,n){var s,i,a,o=this;if(arguments.length<2)throw new Error("2 arguments required");var u=Ba(n,this._parseOptions);if(r==="afterend"){var l=this.parentNode.childNodes.findIndex(function(h){return h===o});Ln(u.childNodes,this.parentNode),(s=this.parentNode.childNodes).splice.apply(s,Gu([l+1,0],u.childNodes,!1))}else if(r==="afterbegin")Ln(u.childNodes,this),(i=this.childNodes).unshift.apply(i,u.childNodes);else if(r==="beforeend")u.childNodes.forEach(function(h){o.appendChild(h)});else if(r==="beforebegin"){var l=this.parentNode.childNodes.findIndex(function(p){return p===o});Ln(u.childNodes,this.parentNode),(a=this.parentNode.childNodes).splice.apply(a,Gu([l,0],u.childNodes,!1))}else throw new Error("The value provided ('".concat(r,"') is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'"));return this},Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=0;n<r.length;){var s=r[n++];if(this===s)return r[n]||null}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextElementSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=0,s=!1;n<r.length;){var i=r[n++];if(s){if(i instanceof e)return i||null}else this===i&&(s=!0)}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=r.length;n>0;){var s=r[--n];if(this===s)return r[n-1]||null}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousElementSibling",{get:function(){if(this.parentNode){for(var r=this.parentNode.childNodes,n=r.length,s=!1;n>0;){var i=r[--n];if(s){if(i instanceof e)return i||null}else this===i&&(s=!0)}return null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){return this.classList.toString()},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return Ba(this.toString(),this._parseOptions).firstChild},e}(Mm.default);is.default=Cg;var On=/<!--[\s\S]*?-->|<(\/?)([a-zA-Z][-.:0-9_a-zA-Z]*)((?:\s+[^>]*?(?:(?:'[^']*')|(?:"[^"]*"))?)*)\s*(\/?)>/g,TU=/(?:^|\s)(id|class)\s*=\s*((?:'[^']*')|(?:"[^"]*")|\S+)/gi,nT={li:{li:!0,LI:!0},LI:{li:!0,LI:!0},p:{p:!0,div:!0,P:!0,DIV:!0},P:{p:!0,div:!0,P:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},td:{td:!0,th:!0,TD:!0,TH:!0},TD:{td:!0,th:!0,TD:!0,TH:!0},th:{td:!0,th:!0,TD:!0,TH:!0},TH:{td:!0,th:!0,TD:!0,TH:!0},h1:{h1:!0,H1:!0},H1:{h1:!0,H1:!0},h2:{h2:!0,H2:!0},H2:{h2:!0,H2:!0},h3:{h3:!0,H3:!0},H3:{h3:!0,H3:!0},h4:{h4:!0,H4:!0},H4:{h4:!0,H4:!0},h5:{h5:!0,H5:!0},H5:{h5:!0,H5:!0},h6:{h6:!0,H6:!0},H6:{h6:!0,H6:!0}},sT={li:{ul:!0,ol:!0,UL:!0,OL:!0},LI:{ul:!0,ol:!0,UL:!0,OL:!0},a:{div:!0,DIV:!0},A:{div:!0,DIV:!0},b:{div:!0,DIV:!0},B:{div:!0,DIV:!0},i:{div:!0,DIV:!0},I:{div:!0,DIV:!0},p:{div:!0,DIV:!0},P:{div:!0,DIV:!0},td:{tr:!0,table:!0,TR:!0,TABLE:!0},TD:{tr:!0,table:!0,TR:!0,TABLE:!0},th:{tr:!0,table:!0,TR:!0,TABLE:!0},TH:{tr:!0,table:!0,TR:!0,TABLE:!0}},Ku="documentfragmentcontainer";function iS(t,e){var r,n;e===void 0&&(e={});var s=new sS.default((r=e==null?void 0:e.voidTag)===null||r===void 0?void 0:r.closingSlash,(n=e==null?void 0:e.voidTag)===null||n===void 0?void 0:n.tags),i=e.blockTextElements||{script:!0,noscript:!0,style:!0,pre:!0},a=Object.keys(i),o=a.map(function(ue){return new RegExp("^".concat(ue,"$"),"i")}),u=a.filter(function(ue){return!!i[ue]}).map(function(ue){return new RegExp("^".concat(ue,"$"),"i")});function l(ue){return u.some(function(oe){return oe.test(ue)})}function h(ue){return o.some(function(oe){return oe.test(ue)})}var p=function(ue,oe){return[ue-j,oe-j]},m=new Cg(null,{},"",null,[0,t.length],s,e),E=m,_=[m],v=-1,A=void 0,x;t="<".concat(Ku,">").concat(t,"</").concat(Ku,">");for(var b=e.lowerCaseTagName,T=e.fixNestedATags,F=t.length-(Ku.length+2),j=Ku.length+2;x=On.exec(t);){var $=x[0],D=x[1],w=x[2],k=x[3],I=x[4],P=$.length,O=On.lastIndex-P,N=On.lastIndex;if(v>-1&&v+P<N){var Ee=t.substring(v,O);E.appendChild(new to.default(Ee,E,p(v,O)))}if(v=On.lastIndex,w!==Ku){if($[1]==="!"){if(e.comment){var Ee=t.substring(O+4,N-3);E.appendChild(new pU.default(Ee,E,p(O,N)))}continue}if(b&&(w=w.toLowerCase()),!D){for(var ee={},de=void 0;de=TU.exec(k);){var me=de[1],Z=de[2],B=Z[0]==="'"||Z[0]==='"';ee[me.toLowerCase()]=B?Z.slice(1,Z.length-1):Z}var V=E.rawTagName;!I&&nT[V]&&nT[V][w]&&(_.pop(),E=(0,eo.default)(_)),T&&(w==="a"||w==="A")&&(A!==void 0&&(_.splice(A),E=(0,eo.default)(_)),A=_.length);var Y=On.lastIndex,se=Y-P;if(E=E.appendChild(new Cg(w,ee,k.slice(1),null,p(se,Y),s,e)),_.push(E),h(w)){var U="</".concat(w,">"),G=b?t.toLocaleLowerCase().indexOf(U,On.lastIndex):t.indexOf(U,On.lastIndex),le=G===-1?F:G;if(l(w)){var Ee=t.substring(Y,le);Ee.length>0&&/\S/.test(Ee)&&E.appendChild(new to.default(Ee,E,p(Y,le)))}G===-1?v=On.lastIndex=t.length+1:(v=On.lastIndex=G+U.length,D="/")}}if(D||I||s.isVoidElement(w))for(;;)if(A!=null&&(w==="a"||w==="A")&&(A=void 0),E.rawTagName===w){E.range[1]=p(-1,Math.max(v,N))[1],_.pop(),E=(0,eo.default)(_);break}else{var V=E.tagName;if(sT[V]&&sT[V][w]){_.pop(),E=(0,eo.default)(_);continue}break}}}return _}is.base_parse=iS;function Ba(t,e){e===void 0&&(e={});for(var r=iS(t,e),n=r[0],s=function(){var i=r.pop(),a=(0,eo.default)(r);i.parentNode&&i.parentNode.parentNode&&(i.parentNode===a&&i.tagName===a.tagName?e.parseNoneClosedTags!==!0&&(a.removeChild(i),i.childNodes.forEach(function(o){a.parentNode.appendChild(o)}),r.pop()):e.parseNoneClosedTags!==!0&&(a.removeChild(i),i.childNodes.forEach(function(o){a.appendChild(o)})))};r.length>1;)s();return n}is.parse=Ba;function Ln(t,e){return t.map(function(r){return r.parentNode=e,r})}var aS={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=is;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.parse}})})(aS);var pE={};Object.defineProperty(pE,"__esModule",{value:!0});var AU=is;function xU(t,e){e===void 0&&(e={});var r=(0,AU.base_parse)(t,e);return r.length===1}pE.default=xU;var _a=be&&be.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.NodeType=Gt.TextNode=Gt.Node=Gt.valid=Gt.CommentNode=Gt.HTMLElement=pS=Gt.parse=void 0;var oS=_a(sp);Gt.CommentNode=oS.default;var uS=_a(is);Gt.HTMLElement=uS.default;var lS=_a(du);Gt.Node=lS.default;var cS=_a(yp);Gt.TextNode=cS.default;var dS=_a(ma);Gt.NodeType=dS.default;var hS=_a(aS),fS=_a(pE);Gt.valid=fS.default;function cs(t,e){return e===void 0&&(e={}),(0,hS.default)(t,e)}Gt.default=cs;var pS=Gt.parse=cs;cs.parse=hS.default;cs.HTMLElement=uS.default;cs.CommentNode=oS.default;cs.valid=fS.default;cs.Node=lS.default;cs.TextNode=cS.default;cs.NodeType=dS.default;const mE={xml:!1,decodeEntities:!0},iT={_useHtmlParser2:!0,xmlMode:!0};function Dg(t){return t!=null&&t.xml?typeof t.xml=="boolean"?iT:{...iT,...t.xml}:t??void 0}function mS(t,e,r){return t?t(e??t._root.children,null,void 0,r).toString():""}function wU(t,e){return typeof t=="object"&&t!=null&&!("length"in t)&&!("type"in t)}function IU(t,e){const r=wU(t)?(e=t,void 0):t,n={...mE,...this===null||this===void 0?void 0:this._options,...Dg(e??{})};return mS(this,r,n)}function CU(t){const e={...this._options,xmlMode:!0};return mS(this,t,e)}function fc(t){const e=t||(this?this.root():[]);let r="";for(let n=0;n<e.length;n++)r+=Vo(e[n]);return r}function DU(t,e,r=typeof e=="boolean"?e:!1){if(!t||typeof t!="string")return null;typeof e=="boolean"&&(r=e);const n=this.load(t,mE,!1);return r||n("script").remove(),n.root()[0].children.slice()}function SU(){return this(this._root)}function gS(t,e){if(e===t)return!1;let r=e;for(;r&&r!==r.parent;)if(r=r.parent,r===t)return!0;return!1}function NU(t,e){if(!aT(t)||!aT(e))return;let r=t.length;const n=+e.length;for(let s=0;s<n;s++)t[r++]=e[s];return t.length=r,t}function aT(t){if(Array.isArray(t))return!0;if(typeof t!="object"||!Object.prototype.hasOwnProperty.call(t,"length")||typeof t.length!="number"||t.length<0)return!1;for(let e=0;e<t.length;e++)if(!(e in t))return!1;return!0}const RU=Object.freeze(Object.defineProperty({__proto__:null,contains:gS,html:IU,merge:NU,parseHTML:DU,root:SU,text:fc,xml:CU},Symbol.toStringTag,{value:"Module"}));function Cn(t){return t.cheerio!=null}function kU(t){return t.replace(/[_.-](\w|$)/g,(e,r)=>r.toUpperCase())}function PU(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function lt(t,e){const r=t.length;for(let n=0;n<r;n++)e(t[n],n);return t}function Sg(t){const e="length"in t?Array.prototype.map.call(t,n=>rf(n,!0)):[rf(t,!0)],r=new ia(e);return e.forEach(n=>{n.parent=r}),e}var Ri;(function(t){t[t.LowerA=97]="LowerA",t[t.LowerZ=122]="LowerZ",t[t.UpperA=65]="UpperA",t[t.UpperZ=90]="UpperZ",t[t.Exclamation=33]="Exclamation"})(Ri||(Ri={}));function Ng(t){const e=t.indexOf("<");if(e<0||e>t.length-3)return!1;const r=t.charCodeAt(e+1);return(r>=Ri.LowerA&&r<=Ri.LowerZ||r>=Ri.UpperA&&r<=Ri.UpperZ||r===Ri.Exclamation)&&t.includes(">",e+2)}const Eo=Object.prototype.hasOwnProperty,pc=/\s+/,jm="data-",oT={null:null,true:!0,false:!1},gE=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,OU=/^{[^]*}$|^\[[^]*]$/;function of(t,e,r){var n;if(!(!t||!xe(t))){if((n=t.attribs)!==null&&n!==void 0||(t.attribs={}),!e)return t.attribs;if(Eo.call(t.attribs,e))return!r&&gE.test(e)?e:t.attribs[e];if(t.name==="option"&&e==="value")return fc(t.children);if(t.name==="input"&&(t.attribs.type==="radio"||t.attribs.type==="checkbox")&&e==="value")return"on"}}function yo(t,e,r){r===null?ES(t,e):t.attribs[e]=`${r}`}function LU(t,e){if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t!="string")throw new Error("Bad combination of arguments.");return lt(this,(r,n)=>{xe(r)&&yo(r,t,e.call(r,n,r.attribs[t]))})}return lt(this,r=>{xe(r)&&(typeof t=="object"?Object.keys(t).forEach(n=>{const s=t[n];yo(r,n,s)}):yo(r,t,e))})}return arguments.length>1?this:of(this[0],t,this.options.xmlMode)}function uT(t,e,r){return e in t?t[e]:!r&&gE.test(e)?of(t,e,!1)!==void 0:of(t,e,r)}function Um(t,e,r,n){e in t?t[e]=r:yo(t,e,!n&&gE.test(e)?r?"":null:`${r}`)}function FU(t,e){var r;if(typeof t=="string"&&e===void 0){const n=this[0];if(!n||!xe(n))return;switch(t){case"style":{const s=this.css(),i=Object.keys(s);return i.forEach((a,o)=>{s[o]=a}),s.length=i.length,s}case"tagName":case"nodeName":return n.name.toUpperCase();case"href":case"src":{const s=(r=n.attribs)===null||r===void 0?void 0:r[t];return typeof URL<"u"&&(t==="href"&&(n.tagName==="a"||n.name==="link")||t==="src"&&(n.tagName==="img"||n.tagName==="iframe"||n.tagName==="audio"||n.tagName==="video"||n.tagName==="source"))&&s!==void 0&&this.options.baseURI?new URL(s,this.options.baseURI).href:s}case"innerText":return nf(n);case"textContent":return Vo(n);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return uT(n,t,this.options.xmlMode)}}if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t=="object")throw new Error("Bad combination of arguments.");return lt(this,(n,s)=>{xe(n)&&Um(n,t,e.call(n,s,uT(n,t,this.options.xmlMode)),this.options.xmlMode)})}return lt(this,n=>{xe(n)&&(typeof t=="object"?Object.keys(t).forEach(s=>{const i=t[s];Um(n,s,i,this.options.xmlMode)}):Um(n,t,e,this.options.xmlMode))})}}function lT(t,e,r){var n;const s=t;(n=s.data)!==null&&n!==void 0||(s.data={}),typeof e=="object"?Object.assign(s.data,e):typeof e=="string"&&r!==void 0&&(s.data[e]=r)}function cT(t,e){let r,n,s;e==null?(r=Object.keys(t.attribs).filter(i=>i.startsWith(jm)),n=r.map(i=>kU(i.slice(jm.length)))):(r=[jm+PU(e)],n=[e]);for(let i=0;i<r.length;++i){const a=r[i],o=n[i];if(Eo.call(t.attribs,a)&&!Eo.call(t.data,o)){if(s=t.attribs[a],Eo.call(oT,s))s=oT[s];else if(s===String(Number(s)))s=Number(s);else if(OU.test(s))try{s=JSON.parse(s)}catch{}t.data[o]=s}}return e==null?t.data:s}function BU(t,e){var r;const n=this[0];if(!n||!xe(n))return;const s=n;return(r=s.data)!==null&&r!==void 0||(s.data={}),t?typeof t=="object"||e!==void 0?(lt(this,i=>{xe(i)&&(typeof t=="object"?lT(i,t):lT(i,t,e))}),this):Eo.call(s.data,t)?s.data[t]:cT(s,t):cT(s)}function MU(t){const e=arguments.length===0,r=this[0];if(!r||!xe(r))return e?void 0:this;switch(r.name){case"textarea":return this.text(t);case"select":{const n=this.find("option:selected");if(!e){if(this.attr("multiple")==null&&typeof t=="object")return this;this.find("option").removeAttr("selected");const s=typeof t!="object"?[t]:t;for(let i=0;i<s.length;i++)this.find(`option[value="${s[i]}"]`).attr("selected","");return this}return this.attr("multiple")?n.toArray().map(s=>fc(s.children)):n.attr("value")}case"input":case"option":return e?this.attr("value"):this.attr("value",t)}}function ES(t,e){!t.attribs||!Eo.call(t.attribs,e)||delete t.attribs[e]}function uf(t){return t?t.trim().split(pc):[]}function jU(t){const e=uf(t);for(let r=0;r<e.length;r++)lt(this,n=>{xe(n)&&ES(n,e[r])});return this}function UU(t){return this.toArray().some(e=>{const r=xe(e)&&e.attribs.class;let n=-1;if(r&&t.length)for(;(n=r.indexOf(t,n+1))>-1;){const s=n+t.length;if((n===0||pc.test(r[n-1]))&&(s===r.length||pc.test(r[s])))return!0}return!1})}function yS(t){if(typeof t=="function")return lt(this,(n,s)=>{if(xe(n)){const i=n.attribs.class||"";yS.call([n],t.call(n,s,i))}});if(!t||typeof t!="string")return this;const e=t.split(pc),r=this.length;for(let n=0;n<r;n++){const s=this[n];if(!xe(s))continue;const i=of(s,"class",!1);if(!i)yo(s,"class",e.join(" ").trim());else{let a=` ${i} `;for(let o=0;o<e.length;o++){const u=`${e[o]} `;a.includes(` ${u}`)||(a+=u)}yo(s,"class",a.trim())}}return this}function _S(t){if(typeof t=="function")return lt(this,(s,i)=>{xe(s)&&_S.call([s],t.call(s,i,s.attribs.class||""))});const e=uf(t),r=e.length,n=arguments.length===0;return lt(this,s=>{if(xe(s))if(n)s.attribs.class="";else{const i=uf(s.attribs.class);let a=!1;for(let o=0;o<r;o++){const u=i.indexOf(e[o]);u>=0&&(i.splice(u,1),a=!0,o--)}a&&(s.attribs.class=i.join(" "))}})}function bS(t,e){if(typeof t=="function")return lt(this,(a,o)=>{xe(a)&&bS.call([a],t.call(a,o,a.attribs.class||"",e),e)});if(!t||typeof t!="string")return this;const r=t.split(pc),n=r.length,s=typeof e=="boolean"?e?1:-1:0,i=this.length;for(let a=0;a<i;a++){const o=this[a];if(!xe(o))continue;const u=uf(o.attribs.class);for(let l=0;l<n;l++){const h=u.indexOf(r[l]);s>=0&&h<0?u.push(r[l]):s<=0&&h>=0&&u.splice(h,1)}o.attribs.class=u.join(" ")}return this}const VU=Object.freeze(Object.defineProperty({__proto__:null,addClass:yS,attr:LU,data:BU,hasClass:UU,prop:FU,removeAttr:jU,removeClass:_S,toggleClass:bS,val:MU},Symbol.toStringTag,{value:"Module"})),qU=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function lf(t){return t.type!=="pseudo"?!1:qU.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(e=>e.some(lf)):!1}function HU(t,e,r){const n=e!=null?parseInt(e,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(n)?n>=0?n+1:1/0:0;case"lt":return isFinite(n)?n>=0?Math.min(n,r):1/0:0;case"gt":return isFinite(n)?1/0:0;case"odd":return 2*r;case"even":return 2*r-1;case"last":case"not":return 1/0}}function $U(t){for(;t.parent;)t=t.parent;return t}function EE(t){const e=[],r=[];for(const n of t)n.some(lf)?e.push(n):r.push(n);return[r,e]}const zU={type:Ie.Universal,namespace:null},GU={type:Ie.Pseudo,name:"scope",data:null};function vS(t,e,r={}){return TS([t],e,r)}function TS(t,e,r={}){if(typeof e=="function")return t.some(e);const[n,s]=EE(cp(e));return n.length>0&&t.some(ga._compileToken(n,r))||s.some(i=>wS(i,t,r).length>0)}function WU(t,e,r,n){const s=typeof r=="string"?parseInt(r,10):NaN;switch(t){case"first":case"lt":return e;case"last":return e.length>0?[e[e.length-1]]:e;case"nth":case"eq":return isFinite(s)&&Math.abs(s)<e.length?[s<0?e[e.length+s]:e[s]]:[];case"gt":return isFinite(s)?e.slice(s+1):[];case"even":return e.filter((i,a)=>a%2===0);case"odd":return e.filter((i,a)=>a%2===1);case"not":{const i=new Set(xS(r,e,n));return e.filter(a=>!i.has(a))}}}function AS(t,e,r={}){return xS(cp(t),e,r)}function xS(t,e,r){if(e.length===0)return[];const[n,s]=EE(t);let i;if(n.length){const a=kg(e,n,r);if(s.length===0)return a;a.length&&(i=new Set(a))}for(let a=0;a<s.length&&(i==null?void 0:i.size)!==e.length;a++){const o=s[a];if((i?e.filter(h=>xe(h)&&!i.has(h)):e).length===0)break;const l=wS(o,e,r);if(l.length)if(i)l.forEach(h=>i.add(h));else{if(a===s.length-1)return l;i=new Set(l)}}return typeof i<"u"?i.size===e.length?e:e.filter(a=>i.has(a)):[]}function wS(t,e,r){var n;if(t.some(go)){const s=(n=r.root)!==null&&n!==void 0?n:$U(e[0]),i={...r,context:e,relativeSelector:!1};return t.push(GU),cf(s,t,i,!0,e.length)}return cf(e,t,r,!1,e.length)}function KU(t,e,r={},n=1/0){if(typeof t=="function")return IS(e,t);const[s,i]=EE(cp(t)),a=i.map(o=>cf(e,o,r,!0,n));return s.length&&a.push(Rg(e,s,r,n)),a.length===0?[]:a.length===1?a[0]:fu(a.reduce((o,u)=>[...o,...u]))}function cf(t,e,r,n,s){const i=e.findIndex(lf),a=e.slice(0,i),o=e[i],u=e.length-1===i?s:1/0,l=HU(o.name,o.data,u);if(l===0)return[];const p=(a.length===0&&!Array.isArray(t)?up(t).filter(xe):a.length===0?(Array.isArray(t)?t:[t]).filter(xe):n||a.some(go)?Rg(t,[a],r,l):kg(t,[a],r)).slice(0,l);let m=WU(o.name,p,o.data,r);if(m.length===0||e.length===i+1)return m;const E=e.slice(i+1),_=E.some(go);if(_){if(go(E[0])){const{type:v}=E[0];(v===Ie.Sibling||v===Ie.Adjacent)&&(m=ga.prepareContext(m,oE,!0)),E.unshift(zU)}r={...r,relativeSelector:!1,rootFunc:v=>m.includes(v)}}else r.rootFunc&&r.rootFunc!==as.trueFunc&&(r={...r,rootFunc:as.trueFunc});return E.some(lf)?cf(m,E,r,!1,s):_?Rg(m,[E],r,s):kg(m,[E],r)}function Rg(t,e,r,n){const s=ga._compileToken(e,r,t);return IS(t,s,n)}function IS(t,e,r=1/0){const n=ga.prepareContext(t,oE,e.shouldTestNextSiblings);return iE(s=>xe(s)&&e(s),n,!0,r)}function kg(t,e,r){const n=(Array.isArray(t)?t:[t]).filter(xe);if(n.length===0)return n;const s=ga._compileToken(e,r);return s===as.trueFunc?n:n.filter(s)}const YU=/^\s*[~+]/;function QU(t){var e;if(!t)return this._make([]);const r=this.toArray();if(typeof t!="string"){const i=Cn(t)?t.toArray():[t];return this._make(i.filter(a=>r.some(o=>gS(o,a))))}const n=YU.test(t)?r:this.children().toArray(),s={context:r,root:(e=this._root)===null||e===void 0?void 0:e[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(KU(t,n,s))}function yE(t){return function(e,...r){return function(n){var s;let i=t(e,this);return n&&(i=vE(i,n,this.options.xmlMode,(s=this._root)===null||s===void 0?void 0:s[0])),this._make(this.length>1&&i.length>1?r.reduce((a,o)=>o(a),i):i)}}}const Uc=yE((t,e)=>{const r=[];for(let n=0;n<e.length;n++){const s=t(e[n]);r.push(s)}return new Array().concat(...r)}),_E=yE((t,e)=>{const r=[];for(let n=0;n<e.length;n++){const s=t(e[n]);s!==null&&r.push(s)}return r});function bE(t,...e){let r=null;const n=yE((s,i)=>{const a=[];return lt(i,o=>{for(let u;(u=s(o))&&!(r!=null&&r(u,a.length));o=u)a.push(u)}),a})(t,...e);return function(s,i){r=typeof s=="string"?o=>vS(o,s,this.options):s?Vc(s):null;const a=n.call(this,i);return r=null,a}}function mu(t){return Array.from(new Set(t))}const XU=_E(({parent:t})=>t&&!Ea(t)?t:null,mu),JU=Uc(t=>{const e=[];for(;t.parent&&!Ea(t.parent);)e.push(t.parent),t=t.parent;return e},fu,t=>t.reverse()),ZU=bE(({parent:t})=>t&&!Ea(t)?t:null,fu,t=>t.reverse());function eV(t){var e;const r=[];if(!t)return this._make(r);const n={xmlMode:this.options.xmlMode,root:(e=this._root)===null||e===void 0?void 0:e[0]},s=typeof t=="string"?i=>vS(i,t,n):Vc(t);return lt(this,i=>{for(;i&&xe(i);){if(s(i,0)){r.includes(i)||r.push(i);break}i=i.parent}}),this._make(r)}const tV=_E(t=>nE(t)),rV=Uc(t=>{const e=[];for(;t.next;)t=t.next,xe(t)&&e.push(t);return e},mu),nV=bE(t=>nE(t),mu),sV=_E(t=>sE(t)),iV=Uc(t=>{const e=[];for(;t.prev;)t=t.prev,xe(t)&&e.push(t);return e},mu),aV=bE(t=>sE(t),mu),oV=Uc(t=>LD(t).filter(e=>xe(e)&&e!==t),fu),uV=Uc(t=>up(t).filter(xe),mu);function lV(){const t=this.toArray().reduce((e,r)=>kt(r)?e.concat(r.children):e,[]);return this._make(t)}function cV(t){let e=0;const r=this.length;for(;e<r&&t.call(this[e],e,this[e])!==!1;)++e;return this}function dV(t){let e=[];for(let r=0;r<this.length;r++){const n=this[r],s=t.call(n,r,n);s!=null&&(e=e.concat(s))}return this._make(e)}function Vc(t){return typeof t=="function"?(e,r)=>t.call(e,r,e):Cn(t)?e=>Array.prototype.includes.call(t,e):function(e){return t===e}}function hV(t){var e;return this._make(vE(this.toArray(),t,this.options.xmlMode,(e=this._root)===null||e===void 0?void 0:e[0]))}function vE(t,e,r,n){return typeof e=="string"?AS(e,t,{xmlMode:r,root:n}):t.filter(Vc(e))}function fV(t){const e=this.toArray();return typeof t=="string"?TS(e.filter(xe),t,this.options):t?e.some(Vc(t)):!1}function pV(t){let e=this.toArray();if(typeof t=="string"){const r=new Set(AS(t,e,this.options));e=e.filter(n=>!r.has(n))}else{const r=Vc(t);e=e.filter((n,s)=>!r(n,s))}return this._make(e)}function mV(t){return this.filter(typeof t=="string"?`:has(${t})`:(e,r)=>this._make(r).find(t).length>0)}function gV(){return this.length>1?this._make(this[0]):this}function EV(){return this.length>0?this._make(this[this.length-1]):this}function yV(t){var e;return t=+t,t===0&&this.length<=1?this:(t<0&&(t=this.length+t),this._make((e=this[t])!==null&&e!==void 0?e:[]))}function _V(t){return t==null?this.toArray():this[t<0?this.length+t:t]}function bV(){return Array.prototype.slice.call(this)}function vV(t){let e,r;return t==null?(e=this.parent().children(),r=this[0]):typeof t=="string"?(e=this._make(t),r=this[0]):(e=this,r=Cn(t)?t[0]:t),Array.prototype.indexOf.call(e,r)}function TV(t,e){return this._make(Array.prototype.slice.call(this,t,e))}function AV(){var t;return(t=this.prevObject)!==null&&t!==void 0?t:this._make([])}function xV(t,e){const r=this._make(t,e),n=fu([...this.get(),...r.get()]);return this._make(n)}function wV(t){return this.prevObject?this.add(t?this.prevObject.filter(t):this.prevObject):this}const IV=Object.freeze(Object.defineProperty({__proto__:null,add:xV,addBack:wV,children:uV,closest:eV,contents:lV,each:cV,end:AV,eq:yV,filter:hV,filterArray:vE,find:QU,first:gV,get:_V,has:mV,index:vV,is:fV,last:EV,map:dV,next:tV,nextAll:rV,nextUntil:nV,not:pV,parent:XU,parents:JU,parentsUntil:ZU,prev:sV,prevAll:iV,prevUntil:aV,siblings:oV,slice:TV,toArray:bV},Symbol.toStringTag,{value:"Module"}));function CV(t){return function(r,n,s,i){if(typeof Buffer<"u"&&Buffer.isBuffer(r)&&(r=r.toString()),typeof r=="string")return t(r,n,s,i);const a=r;if(!Array.isArray(a)&&Ea(a))return a;const o=new ia([]);return aa(a,o),o}}function aa(t,e){const r=Array.isArray(t)?t:[t];e?e.children=r:e=null;for(let n=0;n<r.length;n++){const s=r[n];s.parent&&s.parent.children!==r&&ya(s),e?(s.prev=r[n-1]||null,s.next=r[n+1]||null):s.prev=s.next=null,s.parent=e}return e}function DV(t,e){return t==null?[]:Cn(t)?e?Sg(t.get()):t.get():Array.isArray(t)?t.reduce((r,n)=>r.concat(this._makeDomArray(n,e)),[]):typeof t=="string"?this._parse(t,this.options,!1,null).children:e?Sg([t]):[t]}function CS(t){return function(...e){const r=this.length-1;return lt(this,(n,s)=>{if(!kt(n))return;const i=typeof e[0]=="function"?e[0].call(n,s,this._render(n.children)):e,a=this._makeDomArray(i,s<r);t(a,n.children,n)})}}function pi(t,e,r,n,s){var i,a;const o=[e,r,...n],u=e===0?null:t[e-1],l=e+r>=t.length?null:t[e+r];for(let h=0;h<n.length;++h){const p=n[h],m=p.parent;if(m){const _=m.children.indexOf(p);_>-1&&(m.children.splice(_,1),s===m&&e>_&&o[0]--)}p.parent=s,p.prev&&(p.prev.next=(i=p.next)!==null&&i!==void 0?i:null),p.next&&(p.next.prev=(a=p.prev)!==null&&a!==void 0?a:null),p.prev=h===0?u:n[h-1],p.next=h===n.length-1?l:n[h+1]}return u&&(u.next=n[0]),l&&(l.prev=n[n.length-1]),t.splice(...o)}function SV(t){return(Cn(t)?t:this._make(t)).append(this),this}function NV(t){return(Cn(t)?t:this._make(t)).prepend(this),this}const RV=CS((t,e,r)=>{pi(e,e.length,0,t,r)}),kV=CS((t,e,r)=>{pi(e,0,0,t,r)});function DS(t){return function(e){const r=this.length-1,n=this.parents().last();for(let s=0;s<this.length;s++){const i=this[s],a=typeof e=="function"?e.call(i,s,i):typeof e=="string"&&!Ng(e)?n.find(e).clone():e,[o]=this._makeDomArray(a,s<r);if(!o||!kt(o))continue;let u=o,l=0;for(;l<u.children.length;){const h=u.children[l];xe(h)?(u=h,l=0):l++}t(i,u,[o])}return this}}const PV=DS((t,e,r)=>{const{parent:n}=t;if(!n)return;const s=n.children,i=s.indexOf(t);aa([t],e),pi(s,i,0,r,n)}),OV=DS((t,e,r)=>{kt(t)&&(aa(t.children,e),aa(r,t))});function LV(t){return this.parent(t).not("body").each((e,r)=>{this._make(r).replaceWith(r.children)}),this}function FV(t){const e=this[0];if(e){const r=this._make(typeof t=="function"?t.call(e,0,e):t).insertBefore(e);let n;for(let i=0;i<r.length;i++)r[i].type==="tag"&&(n=r[i]);let s=0;for(;n&&s<n.children.length;){const i=n.children[s];i.type==="tag"?(n=i,s=0):s++}n&&this._make(n).append(this)}return this}function BV(...t){const e=this.length-1;return lt(this,(r,n)=>{const{parent:s}=r;if(!kt(r)||!s)return;const i=s.children,a=i.indexOf(r);if(a<0)return;const o=typeof t[0]=="function"?t[0].call(r,n,this._render(r.children)):t,u=this._makeDomArray(o,n<e);pi(i,a+1,0,u,s)})}function MV(t){typeof t=="string"&&(t=this._make(t)),this.remove();const e=[];return this._makeDomArray(t).forEach(r=>{const n=this.clone().toArray(),{parent:s}=r;if(!s)return;const i=s.children,a=i.indexOf(r);a<0||(pi(i,a+1,0,n,s),e.push(...n))}),this._make(e)}function jV(...t){const e=this.length-1;return lt(this,(r,n)=>{const{parent:s}=r;if(!kt(r)||!s)return;const i=s.children,a=i.indexOf(r);if(a<0)return;const o=typeof t[0]=="function"?t[0].call(r,n,this._render(r.children)):t,u=this._makeDomArray(o,n<e);pi(i,a,0,u,s)})}function UV(t){const e=this._make(t);this.remove();const r=[];return lt(e,n=>{const s=this.clone().toArray(),{parent:i}=n;if(!i)return;const a=i.children,o=a.indexOf(n);o<0||(pi(a,o,0,s,i),r.push(...s))}),this._make(r)}function VV(t){const e=t?this.filter(t):this;return lt(e,r=>{ya(r),r.prev=r.next=r.parent=null}),this}function qV(t){return lt(this,(e,r)=>{const{parent:n}=e;if(!n)return;const s=n.children,i=typeof t=="function"?t.call(e,r,e):t,a=this._makeDomArray(i);aa(a,null);const o=s.indexOf(e);pi(s,o,1,a,n),a.includes(e)||(e.parent=e.prev=e.next=null)})}function HV(){return lt(this,t=>{kt(t)&&(t.children.forEach(e=>{e.next=e.prev=e.parent=null}),t.children.length=0)})}function $V(t){if(t===void 0){const e=this[0];return!e||!kt(e)?null:this._render(e.children)}return lt(this,e=>{if(!kt(e))return;e.children.forEach(n=>{n.next=n.prev=n.parent=null});const r=Cn(t)?t.toArray():this._parse(`${t}`,this.options,!1,e).children;aa(r,e)})}function zV(){return this._render(this)}function GV(t){return t===void 0?fc(this):typeof t=="function"?lt(this,(e,r)=>this._make(e).text(t.call(e,r,fc([e])))):lt(this,e=>{if(!kt(e))return;e.children.forEach(n=>{n.next=n.prev=n.parent=null});const r=new hc(`${t}`);aa(r,e)})}function WV(){return this._make(Sg(this.get()))}const KV=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray:DV,after:BV,append:RV,appendTo:SV,before:jV,clone:WV,empty:HV,html:$V,insertAfter:MV,insertBefore:UV,prepend:kV,prependTo:NV,remove:VV,replaceWith:qV,text:GV,toString:zV,unwrap:LV,wrap:PV,wrapAll:FV,wrapInner:OV},Symbol.toStringTag,{value:"Module"}));function YV(t,e){if(t!=null&&e!=null||typeof t=="object"&&!Array.isArray(t))return lt(this,(r,n)=>{xe(r)&&SS(r,t,e,n)});if(this.length!==0)return NS(this[0],t)}function SS(t,e,r,n){if(typeof e=="string"){const s=NS(t),i=typeof r=="function"?r.call(t,n,s[e]):r;i===""?delete s[e]:i!=null&&(s[e]=i),t.attribs.style=QV(s)}else typeof e=="object"&&Object.keys(e).forEach((s,i)=>{SS(t,s,e[s],i)})}function NS(t,e){if(!t||!xe(t))return;const r=XV(t.attribs.style);if(typeof e=="string")return r[e];if(Array.isArray(e)){const n={};return e.forEach(s=>{r[s]!=null&&(n[s]=r[s])}),n}return r}function QV(t){return Object.keys(t).reduce((e,r)=>`${e}${e?" ":""}${r}: ${t[r]};`,"")}function XV(t){if(t=(t||"").trim(),!t)return{};const e={};let r;for(const n of t.split(";")){const s=n.indexOf(":");if(s<1||s===n.length-1){const i=n.trimEnd();i.length>0&&r!==void 0&&(e[r]+=`;${i}`)}else r=n.slice(0,s).trim(),e[r]=n.slice(s+1).trim()}return e}const JV=Object.freeze(Object.defineProperty({__proto__:null,css:YV},Symbol.toStringTag,{value:"Module"})),dT="input,select,textarea,keygen",ZV=/%20/g,hT=/\r?\n/g;function eq(){return this.serializeArray().map(r=>`${encodeURIComponent(r.name)}=${encodeURIComponent(r.value)}`).join("&").replace(ZV,"+")}function tq(){return this.map((t,e)=>{const r=this._make(e);return xe(e)&&e.name==="form"?r.find(dT).toArray():r.filter(dT).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((t,e)=>{var r;const n=this._make(e),s=n.attr("name"),i=(r=n.val())!==null&&r!==void 0?r:"";return Array.isArray(i)?i.map(a=>({name:s,value:a.replace(hT,`\r
`)})):{name:s,value:i.replace(hT,`\r
`)}}).toArray()}const rq=Object.freeze(Object.defineProperty({__proto__:null,serialize:eq,serializeArray:tq},Symbol.toStringTag,{value:"Module"}));class qc{constructor(e,r,n){if(this.length=0,this.options=n,this._root=r,e){for(let s=0;s<e.length;s++)this[s]=e[s];this.length=e.length}}}qc.prototype.cheerio="[cheerio object]";qc.prototype.splice=Array.prototype.splice;qc.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Object.assign(qc.prototype,VU,IV,KV,JV,rq);function nq(t,e){return function r(n,s,i=!0){if(n==null)throw new Error("cheerio.load() expects a string");const a={...mE,...Dg(s)},o=t(n,a,i,null);class u extends qc{_make(p,m){const E=l(p,m);return E.prevObject=this,E}_parse(p,m,E,_){return t(p,m,E,_)}_render(p){return e(p,this.options)}}function l(h,p,m=o,E){if(h&&Cn(h))return h;const _={...a,...Dg(E)},v=typeof m=="string"?[t(m,_,!1,null)]:"length"in m?m:[m],A=Cn(v)?v:new u(v,null,_);if(A._root=A,!h)return new u(void 0,A,_);const x=typeof h=="string"&&Ng(h)?t(h,_,!1,null).children:sq(h)?[h]:Array.isArray(h)?h:void 0,b=new u(x,A,_);if(x)return b;if(typeof h!="string")throw new Error("Unexpected type of selector");let T=h;const F=p?typeof p=="string"?Ng(p)?new u([t(p,_,!1,null)],A,_):(T=`${p} ${T}`,A):Cn(p)?p:new u(Array.isArray(p)?p:[p],A,_):A;return F?F.find(T):b}return Object.assign(l,RU,{load:r,_root:o,_options:a,fn:u.prototype,prototype:u.prototype}),l}}function sq(t){return!!t.name||t.type==="root"||t.type==="text"||t.type==="comment"}const iq=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Qe="";var S;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(S||(S={}));const hr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function RS(t){return t>=55296&&t<=57343}function aq(t){return t>=56320&&t<=57343}function oq(t,e){return(t-55296)*1024+9216+e}function kS(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function PS(t){return t>=64976&&t<=65007||iq.has(t)}var K;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(K||(K={}));const uq=65536;class lq{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=uq,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,r){const{line:n,col:s,offset:i}=this,a=s+r,o=i+r;return{code:e,startLine:n,endLine:n,startCol:a,endCol:a,startOffset:o,endOffset:o}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(aq(r))return this.pos++,this._addGap(),oq(e,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,S.EOF;return this._err(K.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,r){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,r){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==e.charCodeAt(n))return!1;return!0}peek(e){const r=this.pos+e;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,S.EOF;const n=this.html.charCodeAt(r);return n===S.CARRIAGE_RETURN?S.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,S.EOF;let e=this.html.charCodeAt(this.pos);return e===S.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,S.LINE_FEED):e===S.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,RS(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===S.LINE_FEED||e===S.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){kS(e)?this._err(K.controlCharacterInInputStream):PS(e)&&this._err(K.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Pe;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Pe||(Pe={}));function OS(t,e){for(let r=t.attrs.length-1;r>=0;r--)if(t.attrs[r].name===e)return t.attrs[r].value;return null}var J;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(J||(J={}));var Ui;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Ui||(Ui={}));var Ir;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Ir||(Ir={}));var q;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(q||(q={}));var f;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(f||(f={}));const cq=new Map([[q.A,f.A],[q.ADDRESS,f.ADDRESS],[q.ANNOTATION_XML,f.ANNOTATION_XML],[q.APPLET,f.APPLET],[q.AREA,f.AREA],[q.ARTICLE,f.ARTICLE],[q.ASIDE,f.ASIDE],[q.B,f.B],[q.BASE,f.BASE],[q.BASEFONT,f.BASEFONT],[q.BGSOUND,f.BGSOUND],[q.BIG,f.BIG],[q.BLOCKQUOTE,f.BLOCKQUOTE],[q.BODY,f.BODY],[q.BR,f.BR],[q.BUTTON,f.BUTTON],[q.CAPTION,f.CAPTION],[q.CENTER,f.CENTER],[q.CODE,f.CODE],[q.COL,f.COL],[q.COLGROUP,f.COLGROUP],[q.DD,f.DD],[q.DESC,f.DESC],[q.DETAILS,f.DETAILS],[q.DIALOG,f.DIALOG],[q.DIR,f.DIR],[q.DIV,f.DIV],[q.DL,f.DL],[q.DT,f.DT],[q.EM,f.EM],[q.EMBED,f.EMBED],[q.FIELDSET,f.FIELDSET],[q.FIGCAPTION,f.FIGCAPTION],[q.FIGURE,f.FIGURE],[q.FONT,f.FONT],[q.FOOTER,f.FOOTER],[q.FOREIGN_OBJECT,f.FOREIGN_OBJECT],[q.FORM,f.FORM],[q.FRAME,f.FRAME],[q.FRAMESET,f.FRAMESET],[q.H1,f.H1],[q.H2,f.H2],[q.H3,f.H3],[q.H4,f.H4],[q.H5,f.H5],[q.H6,f.H6],[q.HEAD,f.HEAD],[q.HEADER,f.HEADER],[q.HGROUP,f.HGROUP],[q.HR,f.HR],[q.HTML,f.HTML],[q.I,f.I],[q.IMG,f.IMG],[q.IMAGE,f.IMAGE],[q.INPUT,f.INPUT],[q.IFRAME,f.IFRAME],[q.KEYGEN,f.KEYGEN],[q.LABEL,f.LABEL],[q.LI,f.LI],[q.LINK,f.LINK],[q.LISTING,f.LISTING],[q.MAIN,f.MAIN],[q.MALIGNMARK,f.MALIGNMARK],[q.MARQUEE,f.MARQUEE],[q.MATH,f.MATH],[q.MENU,f.MENU],[q.META,f.META],[q.MGLYPH,f.MGLYPH],[q.MI,f.MI],[q.MO,f.MO],[q.MN,f.MN],[q.MS,f.MS],[q.MTEXT,f.MTEXT],[q.NAV,f.NAV],[q.NOBR,f.NOBR],[q.NOFRAMES,f.NOFRAMES],[q.NOEMBED,f.NOEMBED],[q.NOSCRIPT,f.NOSCRIPT],[q.OBJECT,f.OBJECT],[q.OL,f.OL],[q.OPTGROUP,f.OPTGROUP],[q.OPTION,f.OPTION],[q.P,f.P],[q.PARAM,f.PARAM],[q.PLAINTEXT,f.PLAINTEXT],[q.PRE,f.PRE],[q.RB,f.RB],[q.RP,f.RP],[q.RT,f.RT],[q.RTC,f.RTC],[q.RUBY,f.RUBY],[q.S,f.S],[q.SCRIPT,f.SCRIPT],[q.SEARCH,f.SEARCH],[q.SECTION,f.SECTION],[q.SELECT,f.SELECT],[q.SOURCE,f.SOURCE],[q.SMALL,f.SMALL],[q.SPAN,f.SPAN],[q.STRIKE,f.STRIKE],[q.STRONG,f.STRONG],[q.STYLE,f.STYLE],[q.SUB,f.SUB],[q.SUMMARY,f.SUMMARY],[q.SUP,f.SUP],[q.TABLE,f.TABLE],[q.TBODY,f.TBODY],[q.TEMPLATE,f.TEMPLATE],[q.TEXTAREA,f.TEXTAREA],[q.TFOOT,f.TFOOT],[q.TD,f.TD],[q.TH,f.TH],[q.THEAD,f.THEAD],[q.TITLE,f.TITLE],[q.TR,f.TR],[q.TRACK,f.TRACK],[q.TT,f.TT],[q.U,f.U],[q.UL,f.UL],[q.SVG,f.SVG],[q.VAR,f.VAR],[q.WBR,f.WBR],[q.XMP,f.XMP]]);function _p(t){var e;return(e=cq.get(t))!==null&&e!==void 0?e:f.UNKNOWN}const te=f,dq={[J.HTML]:new Set([te.ADDRESS,te.APPLET,te.AREA,te.ARTICLE,te.ASIDE,te.BASE,te.BASEFONT,te.BGSOUND,te.BLOCKQUOTE,te.BODY,te.BR,te.BUTTON,te.CAPTION,te.CENTER,te.COL,te.COLGROUP,te.DD,te.DETAILS,te.DIR,te.DIV,te.DL,te.DT,te.EMBED,te.FIELDSET,te.FIGCAPTION,te.FIGURE,te.FOOTER,te.FORM,te.FRAME,te.FRAMESET,te.H1,te.H2,te.H3,te.H4,te.H5,te.H6,te.HEAD,te.HEADER,te.HGROUP,te.HR,te.HTML,te.IFRAME,te.IMG,te.INPUT,te.LI,te.LINK,te.LISTING,te.MAIN,te.MARQUEE,te.MENU,te.META,te.NAV,te.NOEMBED,te.NOFRAMES,te.NOSCRIPT,te.OBJECT,te.OL,te.P,te.PARAM,te.PLAINTEXT,te.PRE,te.SCRIPT,te.SECTION,te.SELECT,te.SOURCE,te.STYLE,te.SUMMARY,te.TABLE,te.TBODY,te.TD,te.TEMPLATE,te.TEXTAREA,te.TFOOT,te.TH,te.THEAD,te.TITLE,te.TR,te.TRACK,te.UL,te.WBR,te.XMP]),[J.MATHML]:new Set([te.MI,te.MO,te.MN,te.MS,te.MTEXT,te.ANNOTATION_XML]),[J.SVG]:new Set([te.TITLE,te.FOREIGN_OBJECT,te.DESC]),[J.XLINK]:new Set,[J.XML]:new Set,[J.XMLNS]:new Set},Pg=new Set([te.H1,te.H2,te.H3,te.H4,te.H5,te.H6]),hq=new Set([q.STYLE,q.SCRIPT,q.XMP,q.IFRAME,q.NOEMBED,q.NOFRAMES,q.PLAINTEXT]);function fq(t,e){return hq.has(t)||e&&t===q.NOSCRIPT}var R;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(R||(R={}));const Er={DATA:R.DATA,RCDATA:R.RCDATA,RAWTEXT:R.RAWTEXT,SCRIPT_DATA:R.SCRIPT_DATA,PLAINTEXT:R.PLAINTEXT,CDATA_SECTION:R.CDATA_SECTION};function pq(t){return t>=S.DIGIT_0&&t<=S.DIGIT_9}function ul(t){return t>=S.LATIN_CAPITAL_A&&t<=S.LATIN_CAPITAL_Z}function mq(t){return t>=S.LATIN_SMALL_A&&t<=S.LATIN_SMALL_Z}function ys(t){return mq(t)||ul(t)}function fT(t){return ys(t)||pq(t)}function Pd(t){return t+32}function LS(t){return t===S.SPACE||t===S.LINE_FEED||t===S.TABULATION||t===S.FORM_FEED}function pT(t){return LS(t)||t===S.SOLIDUS||t===S.GREATER_THAN_SIGN}function gq(t){return t===S.NULL?K.nullCharacterReference:t>1114111?K.characterReferenceOutsideUnicodeRange:RS(t)?K.surrogateCharacterReference:PS(t)?K.noncharacterCharacterReference:kS(t)||t===S.CARRIAGE_RETURN?K.controlCharacterReference:null}let Eq=class{constructor(e,r){this.options=e,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=R.DATA,this.returnState=R.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new lq(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new ID(rE,(n,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(K.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(K.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const s=gq(n);s&&this._err(s,1)}}:void 0)}_err(e,r=0){var n,s;(s=(n=this.handler).onParseError)===null||s===void 0||s.call(n,this.preprocessor.getError(e,r))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,r,n){this.active=!0,this.preprocessor.write(e,r),this._runParsingLoop(),this.paused||n==null||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let r=0;r<e;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,r){return this.preprocessor.startsWith(e,r)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Pe.START_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Pe.END_TAG,tagName:"",tagID:f.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Pe.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Pe.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,r){this.currentCharacterToken={type:e,chars:r,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,r;const n=this.currentToken;if(OS(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const s=(e=(r=n.location).attrs)!==null&&e!==void 0?e:r.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(K.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=_p(e.tagName),e.type===Pe.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(K.endTagWithAttributes),e.selfClosing&&this._err(K.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Pe.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Pe.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Pe.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Pe.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,r)}_emitCodePoint(e){const r=LS(e)?Pe.WHITESPACE_CHARACTER:e===S.NULL?Pe.NULL_CHARACTER:Pe.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Pe.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=R.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Vn.Attribute:Vn.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===R.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===R.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===R.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case R.DATA:{this._stateData(e);break}case R.RCDATA:{this._stateRcdata(e);break}case R.RAWTEXT:{this._stateRawtext(e);break}case R.SCRIPT_DATA:{this._stateScriptData(e);break}case R.PLAINTEXT:{this._statePlaintext(e);break}case R.TAG_OPEN:{this._stateTagOpen(e);break}case R.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case R.TAG_NAME:{this._stateTagName(e);break}case R.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case R.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case R.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case R.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case R.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case R.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case R.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case R.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case R.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case R.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case R.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case R.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case R.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case R.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case R.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case R.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case R.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case R.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case R.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case R.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case R.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case R.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case R.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case R.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case R.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case R.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case R.BOGUS_COMMENT:{this._stateBogusComment(e);break}case R.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case R.COMMENT_START:{this._stateCommentStart(e);break}case R.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case R.COMMENT:{this._stateComment(e);break}case R.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case R.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case R.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case R.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case R.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case R.COMMENT_END:{this._stateCommentEnd(e);break}case R.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case R.DOCTYPE:{this._stateDoctype(e);break}case R.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case R.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case R.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case R.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case R.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case R.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case R.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case R.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case R.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case R.CDATA_SECTION:{this._stateCdataSection(e);break}case R.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case R.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case R.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case R.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case S.LESS_THAN_SIGN:{this.state=R.TAG_OPEN;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitCodePoint(e);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case S.AMPERSAND:{this._startCharacterReference();break}case S.LESS_THAN_SIGN:{this.state=R.RCDATA_LESS_THAN_SIGN;break}case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitChars(Qe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case S.LESS_THAN_SIGN:{this.state=R.RAWTEXT_LESS_THAN_SIGN;break}case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitChars(Qe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_LESS_THAN_SIGN;break}case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitChars(Qe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitChars(Qe);break}case S.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(ys(e))this._createStartTagToken(),this.state=R.TAG_NAME,this._stateTagName(e);else switch(e){case S.EXCLAMATION_MARK:{this.state=R.MARKUP_DECLARATION_OPEN;break}case S.SOLIDUS:{this.state=R.END_TAG_OPEN;break}case S.QUESTION_MARK:{this._err(K.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=R.BOGUS_COMMENT,this._stateBogusComment(e);break}case S.EOF:{this._err(K.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(K.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=R.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(ys(e))this._createEndTagToken(),this.state=R.TAG_NAME,this._stateTagName(e);else switch(e){case S.GREATER_THAN_SIGN:{this._err(K.missingEndTagName),this.state=R.DATA;break}case S.EOF:{this._err(K.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(K.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=R.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_ATTRIBUTE_NAME;break}case S.SOLIDUS:{this.state=R.SELF_CLOSING_START_TAG;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentTagToken();break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.tagName+=Qe;break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(ul(e)?Pd(e):e)}}_stateRcdataLessThanSign(e){e===S.SOLIDUS?this.state=R.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=R.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){ys(e)?(this.state=R.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=R.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=R.BEFORE_ATTRIBUTE_NAME,!1;case S.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=R.SELF_CLOSING_START_TAG,!1;case S.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=R.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===S.SOLIDUS?this.state=R.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=R.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){ys(e)?(this.state=R.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=R.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case S.SOLIDUS:{this.state=R.SCRIPT_DATA_END_TAG_OPEN;break}case S.EXCLAMATION_MARK:{this.state=R.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=R.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){ys(e)?(this.state=R.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===S.HYPHEN_MINUS?(this.state=R.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===S.HYPHEN_MINUS?(this.state=R.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=R.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitChars(Qe);break}case S.EOF:{this._err(K.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_ESCAPED,this._emitChars(Qe);break}case S.EOF:{this._err(K.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case S.HYPHEN_MINUS:{this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case S.GREATER_THAN_SIGN:{this.state=R.SCRIPT_DATA,this._emitChars(">");break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_ESCAPED,this._emitChars(Qe);break}case S.EOF:{this._err(K.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===S.SOLIDUS?this.state=R.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ys(e)?(this._emitChars("<"),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){ys(e)?(this.state=R.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(hr.SCRIPT,!1)&&pT(this.preprocessor.peek(hr.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<hr.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=R.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.NULL:{this._err(K.unexpectedNullCharacter),this._emitChars(Qe);break}case S.EOF:{this._err(K.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case S.HYPHEN_MINUS:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Qe);break}case S.EOF:{this._err(K.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case S.HYPHEN_MINUS:{this._emitChars("-");break}case S.LESS_THAN_SIGN:{this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case S.GREATER_THAN_SIGN:{this.state=R.SCRIPT_DATA,this._emitChars(">");break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Qe);break}case S.EOF:{this._err(K.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===S.SOLIDUS?(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(hr.SCRIPT,!1)&&pT(this.preprocessor.peek(hr.SCRIPT.length))){this._emitCodePoint(e);for(let r=0;r<hr.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=R.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=R.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.SOLIDUS:case S.GREATER_THAN_SIGN:case S.EOF:{this.state=R.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case S.EQUALS_SIGN:{this._err(K.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=R.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=R.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:case S.SOLIDUS:case S.GREATER_THAN_SIGN:case S.EOF:{this._leaveAttrName(),this.state=R.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case S.EQUALS_SIGN:{this._leaveAttrName(),this.state=R.BEFORE_ATTRIBUTE_VALUE;break}case S.QUOTATION_MARK:case S.APOSTROPHE:case S.LESS_THAN_SIGN:{this._err(K.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.currentAttr.name+=Qe;break}default:this.currentAttr.name+=String.fromCodePoint(ul(e)?Pd(e):e)}}_stateAfterAttributeName(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.SOLIDUS:{this.state=R.SELF_CLOSING_START_TAG;break}case S.EQUALS_SIGN:{this.state=R.BEFORE_ATTRIBUTE_VALUE;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=R.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{this.state=R.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this.state=R.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(K.missingAttributeValue),this.state=R.DATA,this.emitCurrentTagToken();break}default:this.state=R.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case S.QUOTATION_MARK:{this.state=R.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.currentAttr.value+=Qe;break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case S.APOSTROPHE:{this.state=R.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.currentAttr.value+=Qe;break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this._leaveAttrValue(),this.state=R.BEFORE_ATTRIBUTE_NAME;break}case S.AMPERSAND:{this._startCharacterReference();break}case S.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=R.DATA,this.emitCurrentTagToken();break}case S.NULL:{this._err(K.unexpectedNullCharacter),this.currentAttr.value+=Qe;break}case S.QUOTATION_MARK:case S.APOSTROPHE:case S.LESS_THAN_SIGN:case S.EQUALS_SIGN:case S.GRAVE_ACCENT:{this._err(K.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this._leaveAttrValue(),this.state=R.BEFORE_ATTRIBUTE_NAME;break}case S.SOLIDUS:{this._leaveAttrValue(),this.state=R.SELF_CLOSING_START_TAG;break}case S.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=R.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:this._err(K.missingWhitespaceBetweenAttributes),this.state=R.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case S.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=R.DATA,this.emitCurrentTagToken();break}case S.EOF:{this._err(K.eofInTag),this._emitEOFToken();break}default:this._err(K.unexpectedSolidusInTag),this.state=R.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const r=this.currentToken;switch(e){case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentComment(r);break}case S.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.data+=Qe;break}default:r.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(hr.DASH_DASH,!0)?(this._createCommentToken(hr.DASH_DASH.length+1),this.state=R.COMMENT_START):this._consumeSequenceIfMatch(hr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(hr.DOCTYPE.length+1),this.state=R.DOCTYPE):this._consumeSequenceIfMatch(hr.CDATA_START,!0)?this.inForeignNode?this.state=R.CDATA_SECTION:(this._err(K.cdataInHtmlContent),this._createCommentToken(hr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=R.BOGUS_COMMENT):this._ensureHibernation()||(this._err(K.incorrectlyOpenedComment),this._createCommentToken(2),this.state=R.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case S.HYPHEN_MINUS:{this.state=R.COMMENT_START_DASH;break}case S.GREATER_THAN_SIGN:{this._err(K.abruptClosingOfEmptyComment),this.state=R.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=R.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{this.state=R.COMMENT_END;break}case S.GREATER_THAN_SIGN:{this._err(K.abruptClosingOfEmptyComment),this.state=R.DATA,this.emitCurrentComment(r);break}case S.EOF:{this._err(K.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=R.COMMENT,this._stateComment(e)}}_stateComment(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{this.state=R.COMMENT_END_DASH;break}case S.LESS_THAN_SIGN:{r.data+="<",this.state=R.COMMENT_LESS_THAN_SIGN;break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.data+=Qe;break}case S.EOF:{this._err(K.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const r=this.currentToken;switch(e){case S.EXCLAMATION_MARK:{r.data+="!",this.state=R.COMMENT_LESS_THAN_SIGN_BANG;break}case S.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=R.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===S.HYPHEN_MINUS?this.state=R.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=R.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===S.HYPHEN_MINUS?this.state=R.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=R.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==S.GREATER_THAN_SIGN&&e!==S.EOF&&this._err(K.nestedComment),this.state=R.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{this.state=R.COMMENT_END;break}case S.EOF:{this._err(K.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=R.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const r=this.currentToken;switch(e){case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentComment(r);break}case S.EXCLAMATION_MARK:{this.state=R.COMMENT_END_BANG;break}case S.HYPHEN_MINUS:{r.data+="-";break}case S.EOF:{this._err(K.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=R.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const r=this.currentToken;switch(e){case S.HYPHEN_MINUS:{r.data+="--!",this.state=R.COMMENT_END_DASH;break}case S.GREATER_THAN_SIGN:{this._err(K.incorrectlyClosedComment),this.state=R.DATA,this.emitCurrentComment(r);break}case S.EOF:{this._err(K.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=R.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this.state=R.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case S.EOF:{this._err(K.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingWhitespaceBeforeDoctypeName),this.state=R.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(ul(e))this._createDoctypeToken(String.fromCharCode(Pd(e))),this.state=R.DOCTYPE_NAME;else switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.NULL:{this._err(K.unexpectedNullCharacter),this._createDoctypeToken(Qe),this.state=R.DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this._err(K.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.EOF:{this._err(K.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=R.DOCTYPE_NAME}}_stateDoctypeName(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.AFTER_DOCTYPE_NAME;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.name+=Qe;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(ul(e)?Pd(e):e)}}_stateAfterDoctypeName(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(hr.PUBLIC,!1)?this.state=R.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(hr.SYSTEM,!1)?this.state=R.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(K.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.QUOTATION_MARK:{this._err(K.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(K.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(K.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{r.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{r.publicId="",this.state=R.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(K.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case S.QUOTATION_MARK:{this.state=R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.publicId+=Qe;break}case S.GREATER_THAN_SIGN:{this._err(K.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case S.APOSTROPHE:{this.state=R.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.publicId+=Qe;break}case S.GREATER_THAN_SIGN:{this._err(K.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case S.GREATER_THAN_SIGN:{this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.QUOTATION_MARK:{this._err(K.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(K.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.QUOTATION_MARK:{r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:{this.state=R.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.QUOTATION_MARK:{this._err(K.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{this._err(K.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(K.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.QUOTATION_MARK:{r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case S.APOSTROPHE:{r.systemId="",this.state=R.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case S.GREATER_THAN_SIGN:{this._err(K.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=R.DATA,this.emitCurrentDoctype(r);break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const r=this.currentToken;switch(e){case S.QUOTATION_MARK:{this.state=R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.systemId+=Qe;break}case S.GREATER_THAN_SIGN:{this._err(K.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const r=this.currentToken;switch(e){case S.APOSTROPHE:{this.state=R.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case S.NULL:{this._err(K.unexpectedNullCharacter),r.systemId+=Qe;break}case S.GREATER_THAN_SIGN:{this._err(K.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const r=this.currentToken;switch(e){case S.SPACE:case S.LINE_FEED:case S.TABULATION:case S.FORM_FEED:break;case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.EOF:{this._err(K.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(K.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=R.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const r=this.currentToken;switch(e){case S.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=R.DATA;break}case S.NULL:{this._err(K.unexpectedNullCharacter);break}case S.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case S.RIGHT_SQUARE_BRACKET:{this.state=R.CDATA_SECTION_BRACKET;break}case S.EOF:{this._err(K.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===S.RIGHT_SQUARE_BRACKET?this.state=R.CDATA_SECTION_END:(this._emitChars("]"),this.state=R.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case S.GREATER_THAN_SIGN:{this.state=R.DATA;break}case S.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=R.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(S.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&fT(this.preprocessor.peek(1))?R.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){fT(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===S.SEMICOLON&&this._err(K.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}};const FS=new Set([f.DD,f.DT,f.LI,f.OPTGROUP,f.OPTION,f.P,f.RB,f.RP,f.RT,f.RTC]),mT=new Set([...FS,f.CAPTION,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]),df=new Set([f.APPLET,f.CAPTION,f.HTML,f.MARQUEE,f.OBJECT,f.TABLE,f.TD,f.TEMPLATE,f.TH]),yq=new Set([...df,f.OL,f.UL]),_q=new Set([...df,f.BUTTON]),gT=new Set([f.ANNOTATION_XML,f.MI,f.MN,f.MO,f.MS,f.MTEXT]),ET=new Set([f.DESC,f.FOREIGN_OBJECT,f.TITLE]),bq=new Set([f.TR,f.TEMPLATE,f.HTML]),vq=new Set([f.TBODY,f.TFOOT,f.THEAD,f.TEMPLATE,f.HTML]),Tq=new Set([f.TABLE,f.TEMPLATE,f.HTML]),Aq=new Set([f.TD,f.TH]);class xq{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=f.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===f.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===J.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,r){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,r,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,r){const n=this._indexOf(e);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(e,r,n){const s=this._indexOf(e)+1;this.items.splice(s,0,r),this.tagIDs.splice(s,0,n),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(e,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==J.HTML);this.shortenToLength(r<0?0:r)}shortenToLength(e){for(;this.stackTop>=e;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<e)}}popUntilElementPopped(e){const r=this._indexOf(e);this.shortenToLength(r<0?0:r)}popUntilPopped(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n<0?0:n)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Pg,J.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Aq,J.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,r){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(e,r){const n=this._indexOfTagNames(e,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(Tq,J.HTML)}clearBackToTableBodyContext(){this.clearBackTo(vq,J.HTML)}clearBackToTableRowContext(){this.clearBackTo(bq,J.HTML)}remove(e){const r=this._indexOf(e);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===f.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const r=this._indexOf(e)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===f.HTML}hasInDynamicScope(e,r){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case J.HTML:{if(s===e)return!0;if(r.has(s))return!1;break}case J.SVG:{if(ET.has(s))return!1;break}case J.MATHML:{if(gT.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,df)}hasInListItemScope(e){return this.hasInDynamicScope(e,yq)}hasInButtonScope(e){return this.hasInDynamicScope(e,_q)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const r=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case J.HTML:{if(Pg.has(r))return!0;if(df.has(r))return!1;break}case J.SVG:{if(ET.has(r))return!1;break}case J.MATHML:{if(gT.has(r))return!1;break}}}return!0}hasInTableScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===J.HTML)switch(this.tagIDs[r]){case e:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===J.HTML)switch(this.tagIDs[e]){case f.TBODY:case f.THEAD:case f.TFOOT:return!0;case f.TABLE:case f.HTML:return!1}return!0}hasInSelectScope(e){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===J.HTML)switch(this.tagIDs[r]){case e:return!0;case f.OPTION:case f.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;FS.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;mT.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&mT.has(this.currentTagId);)this.pop()}}const Vm=3;var mn;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(mn||(mn={}));const yT={type:mn.Marker};class wq{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,r){const n=[],s=r.length,i=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let o=0;o<this.entries.length;o++){const u=this.entries[o];if(u.type===mn.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===i&&this.treeAdapter.getNamespaceURI(l)===a){const h=this.treeAdapter.getAttrList(l);h.length===s&&n.push({idx:o,attrs:h})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<Vm)return;const r=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,r);if(n.length<Vm)return;const s=new Map(r.map(a=>[a.name,a.value]));let i=0;for(let a=0;a<n.length;a++){const o=n[a];o.attrs.every(u=>s.get(u.name)===u.value)&&(i+=1,i>=Vm&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(yT)}pushElement(e,r){this._ensureNoahArkCondition(e),this.entries.unshift({type:mn.Element,element:e,token:r})}insertElementAfterBookmark(e,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:mn.Element,element:e,token:r})}removeEntry(e){const r=this.entries.indexOf(e);r>=0&&this.entries.splice(r,1)}clearToLastMarker(){const e=this.entries.indexOf(yT);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const r=this.entries.find(n=>n.type===mn.Marker||this.treeAdapter.getTagName(n.element)===e);return r&&r.type===mn.Element?r:null}getElementEntry(e){return this.entries.find(r=>r.type===mn.Element&&r.element===e)}}const jn={createDocument(){return{nodeName:"#document",mode:Ir.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,r){return{nodeName:t,tagName:t,attrs:r,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,r){const n=t.childNodes.indexOf(r);t.childNodes.splice(n,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,r,n){const s=t.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=e,s.publicId=r,s.systemId=n;else{const i={nodeName:"#documentType",name:e,publicId:r,systemId:n,parentNode:null};jn.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const r=t.childNodes[t.childNodes.length-1];if(jn.isTextNode(r)){r.value+=e;return}}jn.appendChild(t,jn.createTextNode(e))},insertTextBefore(t,e,r){const n=t.childNodes[t.childNodes.indexOf(r)-1];n&&jn.isTextNode(n)?n.value+=e:jn.insertBefore(t,jn.createTextNode(e),r)},adoptAttributes(t,e){const r=new Set(t.attrs.map(n=>n.name));for(let n=0;n<e.length;n++)r.has(e[n].name)||t.attrs.push(e[n])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},BS="html",Iq="about:legacy-compat",Cq="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",MS=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Dq=[...MS,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Sq=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),jS=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Nq=[...jS,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function _T(t,e){return e.some(r=>t.startsWith(r))}function Rq(t){return t.name===BS&&t.publicId===null&&(t.systemId===null||t.systemId===Iq)}function kq(t){if(t.name!==BS)return Ir.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===Cq)return Ir.QUIRKS;let{publicId:r}=t;if(r!==null){if(r=r.toLowerCase(),Sq.has(r))return Ir.QUIRKS;let n=e===null?Dq:MS;if(_T(r,n))return Ir.QUIRKS;if(n=e===null?jS:Nq,_T(r,n))return Ir.LIMITED_QUIRKS}return Ir.NO_QUIRKS}const bT={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Pq="definitionurl",Oq="definitionURL",Lq=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Fq=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:J.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:J.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:J.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:J.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:J.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:J.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:J.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:J.XML}],["xml:space",{prefix:"xml",name:"space",namespace:J.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:J.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:J.XMLNS}]]),Bq=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Mq=new Set([f.B,f.BIG,f.BLOCKQUOTE,f.BODY,f.BR,f.CENTER,f.CODE,f.DD,f.DIV,f.DL,f.DT,f.EM,f.EMBED,f.H1,f.H2,f.H3,f.H4,f.H5,f.H6,f.HEAD,f.HR,f.I,f.IMG,f.LI,f.LISTING,f.MENU,f.META,f.NOBR,f.OL,f.P,f.PRE,f.RUBY,f.S,f.SMALL,f.SPAN,f.STRONG,f.STRIKE,f.SUB,f.SUP,f.TABLE,f.TT,f.U,f.UL,f.VAR]);function jq(t){const e=t.tagID;return e===f.FONT&&t.attrs.some(({name:n})=>n===Ui.COLOR||n===Ui.SIZE||n===Ui.FACE)||Mq.has(e)}function US(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Pq){t.attrs[e].name=Oq;break}}function VS(t){for(let e=0;e<t.attrs.length;e++){const r=Lq.get(t.attrs[e].name);r!=null&&(t.attrs[e].name=r)}}function TE(t){for(let e=0;e<t.attrs.length;e++){const r=Fq.get(t.attrs[e].name);r&&(t.attrs[e].prefix=r.prefix,t.attrs[e].name=r.name,t.attrs[e].namespace=r.namespace)}}function Uq(t){const e=Bq.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=_p(t.tagName))}function Vq(t,e){return e===J.MATHML&&(t===f.MI||t===f.MO||t===f.MN||t===f.MS||t===f.MTEXT)}function qq(t,e,r){if(e===J.MATHML&&t===f.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===Ui.ENCODING){const s=r[n].value.toLowerCase();return s===bT.TEXT_HTML||s===bT.APPLICATION_XML}}return e===J.SVG&&(t===f.FOREIGN_OBJECT||t===f.DESC||t===f.TITLE)}function Hq(t,e,r,n){return(!n||n===J.HTML)&&qq(t,e,r)||(!n||n===J.MATHML)&&Vq(t,e)}const $q="hidden",zq=8,Gq=3;var L;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(L||(L={}));const Wq={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},qS=new Set([f.TABLE,f.TBODY,f.TFOOT,f.THEAD,f.TR]),vT={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:jn,onParseError:null};let HS=class{constructor(e,r,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=L.INITIAL,this.originalInsertionMode=L.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...vT,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new Eq(this.options,this),this.activeFormattingElements=new wq(this.treeAdapter),this.fragmentContextID=n?_p(this.treeAdapter.getTagName(n)):f.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new xq(this.document,this.treeAdapter,this)}static parse(e,r){const n=new this(r);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,r){const n={...vT,...r};e??(e=n.treeAdapter.createElement(q.TEMPLATE,J.HTML,[]));const s=n.treeAdapter.createElement("documentmock",J.HTML,[]),i=new this(n,s,e);return i.fragmentContextID===f.TEMPLATE&&i.tmplInsertionModeStack.unshift(L.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,r),r}_err(e,r,n){var s;if(!this.onParseError)return;const i=(s=e.location)!==null&&s!==void 0?s:Wq,a={code:r,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(a)}onItemPush(e,r,n){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,r)}onItemPop(e,r){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(n=this.treeAdapter).onItemPop)===null||s===void 0||s.call(n,e,this.openElements.current),r){let i,a;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,a=this.fragmentContextID):{current:i,currentTagId:a}=this.openElements,this._setContextModes(i,a)}}_setContextModes(e,r){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===J.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(r,e)}_switchToTextParsing(e,r){this._insertElement(e,J.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=L.TEXT}switchToPlaintextParsing(){this.insertionMode=L.TEXT,this.originalInsertionMode=L.IN_BODY,this.tokenizer.state=Er.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===q.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==J.HTML))switch(this.fragmentContextID){case f.TITLE:case f.TEXTAREA:{this.tokenizer.state=Er.RCDATA;break}case f.STYLE:case f.XMP:case f.IFRAME:case f.NOEMBED:case f.NOFRAMES:case f.NOSCRIPT:{this.tokenizer.state=Er.RAWTEXT;break}case f.SCRIPT:{this.tokenizer.state=Er.SCRIPT_DATA;break}case f.PLAINTEXT:{this.tokenizer.state=Er.PLAINTEXT;break}}}_setDocumentType(e){const r=e.name||"",n=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,s),e.location){const a=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));a&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}}_attachElementToTree(e,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n,e)}}_appendElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,r){const n=this.treeAdapter.createElement(e.tagName,r,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,r){const n=this.treeAdapter.createElement(e,J.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(e){const r=this.treeAdapter.createElement(e.tagName,J.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(q.HTML,J.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,f.HTML)}_appendCommentNode(e,r){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,e.chars,n):this.treeAdapter.insertText(r,e.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(r),i=n?s.lastIndexOf(n):s.length,a=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:u,endCol:l,endOffset:h}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:u,endCol:l,endOffset:h})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,r){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(e,r){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&r.location){const n=r.location,s=this.treeAdapter.getTagName(e),i=r.type===Pe.END_TAG&&s===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,e.tagID===f.SVG&&this.treeAdapter.getTagName(r)===q.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===J.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===f.MGLYPH||e.tagID===f.MALIGNMARK)&&!this._isIntegrationPoint(n,r,J.HTML)}_processToken(e){switch(e.type){case Pe.CHARACTER:{this.onCharacter(e);break}case Pe.NULL_CHARACTER:{this.onNullCharacter(e);break}case Pe.COMMENT:{this.onComment(e);break}case Pe.DOCTYPE:{this.onDoctype(e);break}case Pe.START_TAG:{this._processStartTag(e);break}case Pe.END_TAG:{this.onEndTag(e);break}case Pe.EOF:{this.onEof(e);break}case Pe.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,r,n){const s=this.treeAdapter.getNamespaceURI(r),i=this.treeAdapter.getAttrList(r);return Hq(e,s,i,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const r=this.activeFormattingElements.entries.findIndex(s=>s.type===mn.Marker||this.openElements.contains(s.element)),n=r<0?e-1:r-1;for(let s=n;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=L.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(f.P),this.openElements.popUntilTagNamePopped(f.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case f.TR:{this.insertionMode=L.IN_ROW;return}case f.TBODY:case f.THEAD:case f.TFOOT:{this.insertionMode=L.IN_TABLE_BODY;return}case f.CAPTION:{this.insertionMode=L.IN_CAPTION;return}case f.COLGROUP:{this.insertionMode=L.IN_COLUMN_GROUP;return}case f.TABLE:{this.insertionMode=L.IN_TABLE;return}case f.BODY:{this.insertionMode=L.IN_BODY;return}case f.FRAMESET:{this.insertionMode=L.IN_FRAMESET;return}case f.SELECT:{this._resetInsertionModeForSelect(e);return}case f.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case f.HTML:{this.insertionMode=this.headElement?L.AFTER_HEAD:L.BEFORE_HEAD;return}case f.TD:case f.TH:{if(e>0){this.insertionMode=L.IN_CELL;return}break}case f.HEAD:{if(e>0){this.insertionMode=L.IN_HEAD;return}break}}this.insertionMode=L.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let r=e-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===f.TEMPLATE)break;if(n===f.TABLE){this.insertionMode=L.IN_SELECT_IN_TABLE;return}}this.insertionMode=L.IN_SELECT}_isElementCausesFosterParenting(e){return qS.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const r=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case f.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===J.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case f.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,e,r.beforeElement):this.treeAdapter.appendChild(r.parent,e)}_isSpecialElement(e,r){const n=this.treeAdapter.getNamespaceURI(e);return dq[n].has(r)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){A$(this,e);return}switch(this.insertionMode){case L.INITIAL:{Yu(this,e);break}case L.BEFORE_HTML:{xl(this,e);break}case L.BEFORE_HEAD:{wl(this,e);break}case L.IN_HEAD:{Il(this,e);break}case L.IN_HEAD_NO_SCRIPT:{Cl(this,e);break}case L.AFTER_HEAD:{Dl(this,e);break}case L.IN_BODY:case L.IN_CAPTION:case L.IN_CELL:case L.IN_TEMPLATE:{zS(this,e);break}case L.TEXT:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case L.IN_TABLE:case L.IN_TABLE_BODY:case L.IN_ROW:{qm(this,e);break}case L.IN_TABLE_TEXT:{XS(this,e);break}case L.IN_COLUMN_GROUP:{hf(this,e);break}case L.AFTER_BODY:{ff(this,e);break}case L.AFTER_AFTER_BODY:{lh(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){T$(this,e);return}switch(this.insertionMode){case L.INITIAL:{Yu(this,e);break}case L.BEFORE_HTML:{xl(this,e);break}case L.BEFORE_HEAD:{wl(this,e);break}case L.IN_HEAD:{Il(this,e);break}case L.IN_HEAD_NO_SCRIPT:{Cl(this,e);break}case L.AFTER_HEAD:{Dl(this,e);break}case L.TEXT:{this._insertCharacters(e);break}case L.IN_TABLE:case L.IN_TABLE_BODY:case L.IN_ROW:{qm(this,e);break}case L.IN_COLUMN_GROUP:{hf(this,e);break}case L.AFTER_BODY:{ff(this,e);break}case L.AFTER_AFTER_BODY:{lh(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){Og(this,e);return}switch(this.insertionMode){case L.INITIAL:case L.BEFORE_HTML:case L.BEFORE_HEAD:case L.IN_HEAD:case L.IN_HEAD_NO_SCRIPT:case L.AFTER_HEAD:case L.IN_BODY:case L.IN_TABLE:case L.IN_CAPTION:case L.IN_COLUMN_GROUP:case L.IN_TABLE_BODY:case L.IN_ROW:case L.IN_CELL:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:case L.IN_TEMPLATE:case L.IN_FRAMESET:case L.AFTER_FRAMESET:{Og(this,e);break}case L.IN_TABLE_TEXT:{Qu(this,e);break}case L.AFTER_BODY:{eH(this,e);break}case L.AFTER_AFTER_BODY:case L.AFTER_AFTER_FRAMESET:{tH(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case L.INITIAL:{rH(this,e);break}case L.BEFORE_HEAD:case L.IN_HEAD:case L.IN_HEAD_NO_SCRIPT:case L.AFTER_HEAD:{this._err(e,K.misplacedDoctype);break}case L.IN_TABLE_TEXT:{Qu(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,K.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?x$(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case L.INITIAL:{Yu(this,e);break}case L.BEFORE_HTML:{nH(this,e);break}case L.BEFORE_HEAD:{iH(this,e);break}case L.IN_HEAD:{cn(this,e);break}case L.IN_HEAD_NO_SCRIPT:{uH(this,e);break}case L.AFTER_HEAD:{cH(this,e);break}case L.IN_BODY:{Xt(this,e);break}case L.IN_TABLE:{$o(this,e);break}case L.IN_TABLE_TEXT:{Qu(this,e);break}case L.IN_CAPTION:{a$(this,e);break}case L.IN_COLUMN_GROUP:{wE(this,e);break}case L.IN_TABLE_BODY:{Tp(this,e);break}case L.IN_ROW:{Ap(this,e);break}case L.IN_CELL:{l$(this,e);break}case L.IN_SELECT:{eN(this,e);break}case L.IN_SELECT_IN_TABLE:{d$(this,e);break}case L.IN_TEMPLATE:{f$(this,e);break}case L.AFTER_BODY:{m$(this,e);break}case L.IN_FRAMESET:{g$(this,e);break}case L.AFTER_FRAMESET:{y$(this,e);break}case L.AFTER_AFTER_BODY:{b$(this,e);break}case L.AFTER_AFTER_FRAMESET:{v$(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?w$(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case L.INITIAL:{Yu(this,e);break}case L.BEFORE_HTML:{sH(this,e);break}case L.BEFORE_HEAD:{aH(this,e);break}case L.IN_HEAD:{oH(this,e);break}case L.IN_HEAD_NO_SCRIPT:{lH(this,e);break}case L.AFTER_HEAD:{dH(this,e);break}case L.IN_BODY:{vp(this,e);break}case L.TEXT:{QH(this,e);break}case L.IN_TABLE:{mc(this,e);break}case L.IN_TABLE_TEXT:{Qu(this,e);break}case L.IN_CAPTION:{o$(this,e);break}case L.IN_COLUMN_GROUP:{u$(this,e);break}case L.IN_TABLE_BODY:{Lg(this,e);break}case L.IN_ROW:{ZS(this,e);break}case L.IN_CELL:{c$(this,e);break}case L.IN_SELECT:{tN(this,e);break}case L.IN_SELECT_IN_TABLE:{h$(this,e);break}case L.IN_TEMPLATE:{p$(this,e);break}case L.AFTER_BODY:{nN(this,e);break}case L.IN_FRAMESET:{E$(this,e);break}case L.AFTER_FRAMESET:{_$(this,e);break}case L.AFTER_AFTER_BODY:{lh(this,e);break}}}onEof(e){switch(this.insertionMode){case L.INITIAL:{Yu(this,e);break}case L.BEFORE_HTML:{xl(this,e);break}case L.BEFORE_HEAD:{wl(this,e);break}case L.IN_HEAD:{Il(this,e);break}case L.IN_HEAD_NO_SCRIPT:{Cl(this,e);break}case L.AFTER_HEAD:{Dl(this,e);break}case L.IN_BODY:case L.IN_TABLE:case L.IN_CAPTION:case L.IN_COLUMN_GROUP:case L.IN_TABLE_BODY:case L.IN_ROW:case L.IN_CELL:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:{YS(this,e);break}case L.TEXT:{XH(this,e);break}case L.IN_TABLE_TEXT:{Qu(this,e);break}case L.IN_TEMPLATE:{rN(this,e);break}case L.AFTER_BODY:case L.IN_FRAMESET:case L.AFTER_FRAMESET:case L.AFTER_AFTER_BODY:case L.AFTER_AFTER_FRAMESET:{xE(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===S.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case L.IN_HEAD:case L.IN_HEAD_NO_SCRIPT:case L.AFTER_HEAD:case L.TEXT:case L.IN_COLUMN_GROUP:case L.IN_SELECT:case L.IN_SELECT_IN_TABLE:case L.IN_FRAMESET:case L.AFTER_FRAMESET:{this._insertCharacters(e);break}case L.IN_BODY:case L.IN_CAPTION:case L.IN_CELL:case L.IN_TEMPLATE:case L.AFTER_BODY:case L.AFTER_AFTER_BODY:case L.AFTER_AFTER_FRAMESET:{$S(this,e);break}case L.IN_TABLE:case L.IN_TABLE_BODY:case L.IN_ROW:{qm(this,e);break}case L.IN_TABLE_TEXT:{QS(this,e);break}}}};function Kq(t,e){let r=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return r?t.openElements.contains(r.element)?t.openElements.hasInScope(e.tagID)||(r=null):(t.activeFormattingElements.removeEntry(r),r=null):KS(t,e),r}function Yq(t,e){let r=null,n=t.openElements.stackTop;for(;n>=0;n--){const s=t.openElements.items[n];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[n])&&(r=s)}return r||(t.openElements.shortenToLength(n<0?0:n),t.activeFormattingElements.removeEntry(e)),r}function Qq(t,e,r){let n=e,s=t.openElements.getCommonAncestor(e);for(let i=0,a=s;a!==r;i++,a=s){s=t.openElements.getCommonAncestor(a);const o=t.activeFormattingElements.getElementEntry(a),u=o&&i>=Gq;!o||u?(u&&t.activeFormattingElements.removeEntry(o),t.openElements.remove(a)):(a=Xq(t,o),n===e&&(t.activeFormattingElements.bookmark=o),t.treeAdapter.detachNode(n),t.treeAdapter.appendChild(a,n),n=a)}return n}function Xq(t,e){const r=t.treeAdapter.getNamespaceURI(e.element),n=t.treeAdapter.createElement(e.token.tagName,r,e.token.attrs);return t.openElements.replace(e.element,n),e.element=n,n}function Jq(t,e,r){const n=t.treeAdapter.getTagName(e),s=_p(n);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(r);else{const i=t.treeAdapter.getNamespaceURI(e);s===f.TEMPLATE&&i===J.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,r)}}function Zq(t,e,r){const n=t.treeAdapter.getNamespaceURI(r.element),{token:s}=r,i=t.treeAdapter.createElement(s.tagName,n,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,s),t.activeFormattingElements.removeEntry(r),t.openElements.remove(r.element),t.openElements.insertAfter(e,i,s.tagID)}function AE(t,e){for(let r=0;r<zq;r++){const n=Kq(t,e);if(!n)break;const s=Yq(t,n);if(!s)break;t.activeFormattingElements.bookmark=n;const i=Qq(t,s,n.element),a=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(i),a&&Jq(t,a,i),Zq(t,s,n)}}function Og(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function eH(t,e){t._appendCommentNode(e,t.openElements.items[0])}function tH(t,e){t._appendCommentNode(e,t.document)}function xE(t,e){if(t.stopped=!0,e.location){const r=t.fragmentContext?0:2;for(let n=t.openElements.stackTop;n>=r;n--)t._setEndLocation(t.openElements.items[n],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const n=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(n);if(s&&!s.endTag&&(t._setEndLocation(n,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(i);a&&!a.endTag&&t._setEndLocation(i,e)}}}}function rH(t,e){t._setDocumentType(e);const r=e.forceQuirks?Ir.QUIRKS:kq(e);Rq(e)||t._err(e,K.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,r),t.insertionMode=L.BEFORE_HTML}function Yu(t,e){t._err(e,K.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Ir.QUIRKS),t.insertionMode=L.BEFORE_HTML,t._processToken(e)}function nH(t,e){e.tagID===f.HTML?(t._insertElement(e,J.HTML),t.insertionMode=L.BEFORE_HEAD):xl(t,e)}function sH(t,e){const r=e.tagID;(r===f.HTML||r===f.HEAD||r===f.BODY||r===f.BR)&&xl(t,e)}function xl(t,e){t._insertFakeRootElement(),t.insertionMode=L.BEFORE_HEAD,t._processToken(e)}function iH(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.HEAD:{t._insertElement(e,J.HTML),t.headElement=t.openElements.current,t.insertionMode=L.IN_HEAD;break}default:wl(t,e)}}function aH(t,e){const r=e.tagID;r===f.HEAD||r===f.BODY||r===f.HTML||r===f.BR?wl(t,e):t._err(e,K.endTagWithoutMatchingOpenElement)}function wl(t,e){t._insertFakeElement(q.HEAD,f.HEAD),t.headElement=t.openElements.current,t.insertionMode=L.IN_HEAD,t._processToken(e)}function cn(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:{t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.TITLE:{t._switchToTextParsing(e,Er.RCDATA);break}case f.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Er.RAWTEXT):(t._insertElement(e,J.HTML),t.insertionMode=L.IN_HEAD_NO_SCRIPT);break}case f.NOFRAMES:case f.STYLE:{t._switchToTextParsing(e,Er.RAWTEXT);break}case f.SCRIPT:{t._switchToTextParsing(e,Er.SCRIPT_DATA);break}case f.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=L.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(L.IN_TEMPLATE);break}case f.HEAD:{t._err(e,K.misplacedStartTagForHeadElement);break}default:Il(t,e)}}function oH(t,e){switch(e.tagID){case f.HEAD:{t.openElements.pop(),t.insertionMode=L.AFTER_HEAD;break}case f.BODY:case f.BR:case f.HTML:{Il(t,e);break}case f.TEMPLATE:{ba(t,e);break}default:t._err(e,K.endTagWithoutMatchingOpenElement)}}function ba(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==f.TEMPLATE&&t._err(e,K.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(f.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,K.endTagWithoutMatchingOpenElement)}function Il(t,e){t.openElements.pop(),t.insertionMode=L.AFTER_HEAD,t._processToken(e)}function uH(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.BASEFONT:case f.BGSOUND:case f.HEAD:case f.LINK:case f.META:case f.NOFRAMES:case f.STYLE:{cn(t,e);break}case f.NOSCRIPT:{t._err(e,K.nestedNoscriptInHead);break}default:Cl(t,e)}}function lH(t,e){switch(e.tagID){case f.NOSCRIPT:{t.openElements.pop(),t.insertionMode=L.IN_HEAD;break}case f.BR:{Cl(t,e);break}default:t._err(e,K.endTagWithoutMatchingOpenElement)}}function Cl(t,e){const r=e.type===Pe.EOF?K.openElementsLeftAfterEof:K.disallowedContentInNoscriptInHead;t._err(e,r),t.openElements.pop(),t.insertionMode=L.IN_HEAD,t._processToken(e)}function cH(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.BODY:{t._insertElement(e,J.HTML),t.framesetOk=!1,t.insertionMode=L.IN_BODY;break}case f.FRAMESET:{t._insertElement(e,J.HTML),t.insertionMode=L.IN_FRAMESET;break}case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{t._err(e,K.abandonedHeadElementChild),t.openElements.push(t.headElement,f.HEAD),cn(t,e),t.openElements.remove(t.headElement);break}case f.HEAD:{t._err(e,K.misplacedStartTagForHeadElement);break}default:Dl(t,e)}}function dH(t,e){switch(e.tagID){case f.BODY:case f.HTML:case f.BR:{Dl(t,e);break}case f.TEMPLATE:{ba(t,e);break}default:t._err(e,K.endTagWithoutMatchingOpenElement)}}function Dl(t,e){t._insertFakeElement(q.BODY,f.BODY),t.insertionMode=L.IN_BODY,bp(t,e)}function bp(t,e){switch(e.type){case Pe.CHARACTER:{zS(t,e);break}case Pe.WHITESPACE_CHARACTER:{$S(t,e);break}case Pe.COMMENT:{Og(t,e);break}case Pe.START_TAG:{Xt(t,e);break}case Pe.END_TAG:{vp(t,e);break}case Pe.EOF:{YS(t,e);break}}}function $S(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function zS(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function hH(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function fH(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(r,e.attrs))}function pH(t,e){const r=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&r&&(t.treeAdapter.detachNode(r),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_FRAMESET)}function mH(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML)}function gH(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),Pg.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,J.HTML)}function EH(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function yH(t,e){const r=t.openElements.tmplCount>0;(!t.formElement||r)&&(t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),r||(t.formElement=t.openElements.current))}function _H(t,e){t.framesetOk=!1;const r=e.tagID;for(let n=t.openElements.stackTop;n>=0;n--){const s=t.openElements.tagIDs[n];if(r===f.LI&&s===f.LI||(r===f.DD||r===f.DT)&&(s===f.DD||s===f.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==f.ADDRESS&&s!==f.DIV&&s!==f.P&&t._isSpecialElement(t.openElements.items[n],s))break}t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML)}function bH(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),t.tokenizer.state=Er.PLAINTEXT}function vH(t,e){t.openElements.hasInScope(f.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.framesetOk=!1}function TH(t,e){const r=t.activeFormattingElements.getElementEntryInScopeWithTagName(q.A);r&&(AE(t,e),t.openElements.remove(r.element),t.activeFormattingElements.removeEntry(r)),t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function AH(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function xH(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(f.NOBR)&&(AE(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,J.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function wH(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function IH(t,e){t.treeAdapter.getDocumentMode(t.document)!==Ir.QUIRKS&&t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,J.HTML),t.framesetOk=!1,t.insertionMode=L.IN_TABLE}function GS(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,J.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function WS(t){const e=OS(t,Ui.TYPE);return e!=null&&e.toLowerCase()===$q}function CH(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,J.HTML),WS(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function DH(t,e){t._appendElement(e,J.HTML),e.ackSelfClosing=!0}function SH(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._appendElement(e,J.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function NH(t,e){e.tagName=q.IMG,e.tagID=f.IMG,GS(t,e)}function RH(t,e){t._insertElement(e,J.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Er.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=L.TEXT}function kH(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Er.RAWTEXT)}function PH(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Er.RAWTEXT)}function TT(t,e){t._switchToTextParsing(e,Er.RAWTEXT)}function OH(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===L.IN_TABLE||t.insertionMode===L.IN_CAPTION||t.insertionMode===L.IN_TABLE_BODY||t.insertionMode===L.IN_ROW||t.insertionMode===L.IN_CELL?L.IN_SELECT_IN_TABLE:L.IN_SELECT}function LH(t,e){t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML)}function FH(t,e){t.openElements.hasInScope(f.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,J.HTML)}function BH(t,e){t.openElements.hasInScope(f.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(f.RTC),t._insertElement(e,J.HTML)}function MH(t,e){t._reconstructActiveFormattingElements(),US(e),TE(e),e.selfClosing?t._appendElement(e,J.MATHML):t._insertElement(e,J.MATHML),e.ackSelfClosing=!0}function jH(t,e){t._reconstructActiveFormattingElements(),VS(e),TE(e),e.selfClosing?t._appendElement(e,J.SVG):t._insertElement(e,J.SVG),e.ackSelfClosing=!0}function AT(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,J.HTML)}function Xt(t,e){switch(e.tagID){case f.I:case f.S:case f.B:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.SMALL:case f.STRIKE:case f.STRONG:{AH(t,e);break}case f.A:{TH(t,e);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{gH(t,e);break}case f.P:case f.DL:case f.OL:case f.UL:case f.DIV:case f.DIR:case f.NAV:case f.MAIN:case f.MENU:case f.ASIDE:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.DETAILS:case f.ADDRESS:case f.ARTICLE:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{mH(t,e);break}case f.LI:case f.DD:case f.DT:{_H(t,e);break}case f.BR:case f.IMG:case f.WBR:case f.AREA:case f.EMBED:case f.KEYGEN:{GS(t,e);break}case f.HR:{SH(t,e);break}case f.RB:case f.RTC:{FH(t,e);break}case f.RT:case f.RP:{BH(t,e);break}case f.PRE:case f.LISTING:{EH(t,e);break}case f.XMP:{kH(t,e);break}case f.SVG:{jH(t,e);break}case f.HTML:{hH(t,e);break}case f.BASE:case f.LINK:case f.META:case f.STYLE:case f.TITLE:case f.SCRIPT:case f.BGSOUND:case f.BASEFONT:case f.TEMPLATE:{cn(t,e);break}case f.BODY:{fH(t,e);break}case f.FORM:{yH(t,e);break}case f.NOBR:{xH(t,e);break}case f.MATH:{MH(t,e);break}case f.TABLE:{IH(t,e);break}case f.INPUT:{CH(t,e);break}case f.PARAM:case f.TRACK:case f.SOURCE:{DH(t,e);break}case f.IMAGE:{NH(t,e);break}case f.BUTTON:{vH(t,e);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{wH(t,e);break}case f.IFRAME:{PH(t,e);break}case f.SELECT:{OH(t,e);break}case f.OPTION:case f.OPTGROUP:{LH(t,e);break}case f.NOEMBED:case f.NOFRAMES:{TT(t,e);break}case f.FRAMESET:{pH(t,e);break}case f.TEXTAREA:{RH(t,e);break}case f.NOSCRIPT:{t.options.scriptingEnabled?TT(t,e):AT(t,e);break}case f.PLAINTEXT:{bH(t,e);break}case f.COL:case f.TH:case f.TD:case f.TR:case f.HEAD:case f.FRAME:case f.TBODY:case f.TFOOT:case f.THEAD:case f.CAPTION:case f.COLGROUP:break;default:AT(t,e)}}function UH(t,e){if(t.openElements.hasInScope(f.BODY)&&(t.insertionMode=L.AFTER_BODY,t.options.sourceCodeLocationInfo)){const r=t.openElements.tryPeekProperlyNestedBodyElement();r&&t._setEndLocation(r,e)}}function VH(t,e){t.openElements.hasInScope(f.BODY)&&(t.insertionMode=L.AFTER_BODY,nN(t,e))}function qH(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r))}function HH(t){const e=t.openElements.tmplCount>0,{formElement:r}=t;e||(t.formElement=null),(r||e)&&t.openElements.hasInScope(f.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(f.FORM):r&&t.openElements.remove(r))}function $H(t){t.openElements.hasInButtonScope(f.P)||t._insertFakeElement(q.P,f.P),t._closePElement()}function zH(t){t.openElements.hasInListItemScope(f.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(f.LI),t.openElements.popUntilTagNamePopped(f.LI))}function GH(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r))}function WH(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function KH(t,e){const r=e.tagID;t.openElements.hasInScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker())}function YH(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(q.BR,f.BR),t.openElements.pop(),t.framesetOk=!1}function KS(t,e){const r=e.tagName,n=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const i=t.openElements.items[s],a=t.openElements.tagIDs[s];if(n===a&&(n!==f.UNKNOWN||t.treeAdapter.getTagName(i)===r)){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(i,a))break}}function vp(t,e){switch(e.tagID){case f.A:case f.B:case f.I:case f.S:case f.U:case f.EM:case f.TT:case f.BIG:case f.CODE:case f.FONT:case f.NOBR:case f.SMALL:case f.STRIKE:case f.STRONG:{AE(t,e);break}case f.P:{$H(t);break}case f.DL:case f.UL:case f.OL:case f.DIR:case f.DIV:case f.NAV:case f.PRE:case f.MAIN:case f.MENU:case f.ASIDE:case f.BUTTON:case f.CENTER:case f.FIGURE:case f.FOOTER:case f.HEADER:case f.HGROUP:case f.DIALOG:case f.ADDRESS:case f.ARTICLE:case f.DETAILS:case f.SEARCH:case f.SECTION:case f.SUMMARY:case f.LISTING:case f.FIELDSET:case f.BLOCKQUOTE:case f.FIGCAPTION:{qH(t,e);break}case f.LI:{zH(t);break}case f.DD:case f.DT:{GH(t,e);break}case f.H1:case f.H2:case f.H3:case f.H4:case f.H5:case f.H6:{WH(t);break}case f.BR:{YH(t);break}case f.BODY:{UH(t,e);break}case f.HTML:{VH(t,e);break}case f.FORM:{HH(t);break}case f.APPLET:case f.OBJECT:case f.MARQUEE:{KH(t,e);break}case f.TEMPLATE:{ba(t,e);break}default:KS(t,e)}}function YS(t,e){t.tmplInsertionModeStack.length>0?rN(t,e):xE(t,e)}function QH(t,e){var r;e.tagID===f.SCRIPT&&((r=t.scriptHandler)===null||r===void 0||r.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function XH(t,e){t._err(e,K.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function qm(t,e){if(qS.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=L.IN_TABLE_TEXT,e.type){case Pe.CHARACTER:{XS(t,e);break}case Pe.WHITESPACE_CHARACTER:{QS(t,e);break}}else Hc(t,e)}function JH(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_CAPTION}function ZH(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_COLUMN_GROUP}function e$(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(q.COLGROUP,f.COLGROUP),t.insertionMode=L.IN_COLUMN_GROUP,wE(t,e)}function t$(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_TABLE_BODY}function r$(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(q.TBODY,f.TBODY),t.insertionMode=L.IN_TABLE_BODY,Tp(t,e)}function n$(t,e){t.openElements.hasInTableScope(f.TABLE)&&(t.openElements.popUntilTagNamePopped(f.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function s$(t,e){WS(e)?t._appendElement(e,J.HTML):Hc(t,e),e.ackSelfClosing=!0}function i$(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,J.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function $o(t,e){switch(e.tagID){case f.TD:case f.TH:case f.TR:{r$(t,e);break}case f.STYLE:case f.SCRIPT:case f.TEMPLATE:{cn(t,e);break}case f.COL:{e$(t,e);break}case f.FORM:{i$(t,e);break}case f.TABLE:{n$(t,e);break}case f.TBODY:case f.TFOOT:case f.THEAD:{t$(t,e);break}case f.INPUT:{s$(t,e);break}case f.CAPTION:{JH(t,e);break}case f.COLGROUP:{ZH(t,e);break}default:Hc(t,e)}}function mc(t,e){switch(e.tagID){case f.TABLE:{t.openElements.hasInTableScope(f.TABLE)&&(t.openElements.popUntilTagNamePopped(f.TABLE),t._resetInsertionMode());break}case f.TEMPLATE:{ba(t,e);break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:Hc(t,e)}}function Hc(t,e){const r=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,bp(t,e),t.fosterParentingEnabled=r}function QS(t,e){t.pendingCharacterTokens.push(e)}function XS(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Qu(t,e){let r=0;if(t.hasNonWhitespacePendingCharacterToken)for(;r<t.pendingCharacterTokens.length;r++)Hc(t,t.pendingCharacterTokens[r]);else for(;r<t.pendingCharacterTokens.length;r++)t._insertCharacters(t.pendingCharacterTokens[r]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const JS=new Set([f.CAPTION,f.COL,f.COLGROUP,f.TBODY,f.TD,f.TFOOT,f.TH,f.THEAD,f.TR]);function a$(t,e){const r=e.tagID;JS.has(r)?t.openElements.hasInTableScope(f.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=L.IN_TABLE,$o(t,e)):Xt(t,e)}function o$(t,e){const r=e.tagID;switch(r){case f.CAPTION:case f.TABLE:{t.openElements.hasInTableScope(f.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=L.IN_TABLE,r===f.TABLE&&mc(t,e));break}case f.BODY:case f.COL:case f.COLGROUP:case f.HTML:case f.TBODY:case f.TD:case f.TFOOT:case f.TH:case f.THEAD:case f.TR:break;default:vp(t,e)}}function wE(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.COL:{t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.TEMPLATE:{cn(t,e);break}default:hf(t,e)}}function u$(t,e){switch(e.tagID){case f.COLGROUP:{t.openElements.currentTagId===f.COLGROUP&&(t.openElements.pop(),t.insertionMode=L.IN_TABLE);break}case f.TEMPLATE:{ba(t,e);break}case f.COL:break;default:hf(t,e)}}function hf(t,e){t.openElements.currentTagId===f.COLGROUP&&(t.openElements.pop(),t.insertionMode=L.IN_TABLE,t._processToken(e))}function Tp(t,e){switch(e.tagID){case f.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_ROW;break}case f.TH:case f.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(q.TR,f.TR),t.insertionMode=L.IN_ROW,Ap(t,e);break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE,$o(t,e));break}default:$o(t,e)}}function Lg(t,e){const r=e.tagID;switch(e.tagID){case f.TBODY:case f.TFOOT:case f.THEAD:{t.openElements.hasInTableScope(r)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE);break}case f.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE,mc(t,e));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:case f.TR:break;default:mc(t,e)}}function Ap(t,e){switch(e.tagID){case f.TH:case f.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,J.HTML),t.insertionMode=L.IN_CELL,t.activeFormattingElements.insertMarker();break}case f.CAPTION:case f.COL:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY,Tp(t,e));break}default:$o(t,e)}}function ZS(t,e){switch(e.tagID){case f.TR:{t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY);break}case f.TABLE:{t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY,Lg(t,e));break}case f.TBODY:case f.TFOOT:case f.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(f.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=L.IN_TABLE_BODY,Lg(t,e));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:case f.TD:case f.TH:break;default:mc(t,e)}}function l$(t,e){const r=e.tagID;JS.has(r)?(t.openElements.hasInTableScope(f.TD)||t.openElements.hasInTableScope(f.TH))&&(t._closeTableCell(),Ap(t,e)):Xt(t,e)}function c$(t,e){const r=e.tagID;switch(r){case f.TD:case f.TH:{t.openElements.hasInTableScope(r)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(r),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=L.IN_ROW);break}case f.TABLE:case f.TBODY:case f.TFOOT:case f.THEAD:case f.TR:{t.openElements.hasInTableScope(r)&&(t._closeTableCell(),ZS(t,e));break}case f.BODY:case f.CAPTION:case f.COL:case f.COLGROUP:case f.HTML:break;default:vp(t,e)}}function eN(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.OPTION:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t._insertElement(e,J.HTML);break}case f.OPTGROUP:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t.openElements.currentTagId===f.OPTGROUP&&t.openElements.pop(),t._insertElement(e,J.HTML);break}case f.HR:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop(),t.openElements.currentTagId===f.OPTGROUP&&t.openElements.pop(),t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.INPUT:case f.KEYGEN:case f.TEXTAREA:case f.SELECT:{t.openElements.hasInSelectScope(f.SELECT)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),e.tagID!==f.SELECT&&t._processStartTag(e));break}case f.SCRIPT:case f.TEMPLATE:{cn(t,e);break}}}function tN(t,e){switch(e.tagID){case f.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===f.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===f.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===f.OPTGROUP&&t.openElements.pop();break}case f.OPTION:{t.openElements.currentTagId===f.OPTION&&t.openElements.pop();break}case f.SELECT:{t.openElements.hasInSelectScope(f.SELECT)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode());break}case f.TEMPLATE:{ba(t,e);break}}}function d$(t,e){const r=e.tagID;r===f.CAPTION||r===f.TABLE||r===f.TBODY||r===f.TFOOT||r===f.THEAD||r===f.TR||r===f.TD||r===f.TH?(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),t._processStartTag(e)):eN(t,e)}function h$(t,e){const r=e.tagID;r===f.CAPTION||r===f.TABLE||r===f.TBODY||r===f.TFOOT||r===f.THEAD||r===f.TR||r===f.TD||r===f.TH?t.openElements.hasInTableScope(r)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),t.onEndTag(e)):tN(t,e)}function f$(t,e){switch(e.tagID){case f.BASE:case f.BASEFONT:case f.BGSOUND:case f.LINK:case f.META:case f.NOFRAMES:case f.SCRIPT:case f.STYLE:case f.TEMPLATE:case f.TITLE:{cn(t,e);break}case f.CAPTION:case f.COLGROUP:case f.TBODY:case f.TFOOT:case f.THEAD:{t.tmplInsertionModeStack[0]=L.IN_TABLE,t.insertionMode=L.IN_TABLE,$o(t,e);break}case f.COL:{t.tmplInsertionModeStack[0]=L.IN_COLUMN_GROUP,t.insertionMode=L.IN_COLUMN_GROUP,wE(t,e);break}case f.TR:{t.tmplInsertionModeStack[0]=L.IN_TABLE_BODY,t.insertionMode=L.IN_TABLE_BODY,Tp(t,e);break}case f.TD:case f.TH:{t.tmplInsertionModeStack[0]=L.IN_ROW,t.insertionMode=L.IN_ROW,Ap(t,e);break}default:t.tmplInsertionModeStack[0]=L.IN_BODY,t.insertionMode=L.IN_BODY,Xt(t,e)}}function p$(t,e){e.tagID===f.TEMPLATE&&ba(t,e)}function rN(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(f.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):xE(t,e)}function m$(t,e){e.tagID===f.HTML?Xt(t,e):ff(t,e)}function nN(t,e){var r;if(e.tagID===f.HTML){if(t.fragmentContext||(t.insertionMode=L.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===f.HTML){t._setEndLocation(t.openElements.items[0],e);const n=t.openElements.items[1];n&&!(!((r=t.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&t._setEndLocation(n,e)}}else ff(t,e)}function ff(t,e){t.insertionMode=L.IN_BODY,bp(t,e)}function g$(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.FRAMESET:{t._insertElement(e,J.HTML);break}case f.FRAME:{t._appendElement(e,J.HTML),e.ackSelfClosing=!0;break}case f.NOFRAMES:{cn(t,e);break}}}function E$(t,e){e.tagID===f.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==f.FRAMESET&&(t.insertionMode=L.AFTER_FRAMESET))}function y$(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.NOFRAMES:{cn(t,e);break}}}function _$(t,e){e.tagID===f.HTML&&(t.insertionMode=L.AFTER_AFTER_FRAMESET)}function b$(t,e){e.tagID===f.HTML?Xt(t,e):lh(t,e)}function lh(t,e){t.insertionMode=L.IN_BODY,bp(t,e)}function v$(t,e){switch(e.tagID){case f.HTML:{Xt(t,e);break}case f.NOFRAMES:{cn(t,e);break}}}function T$(t,e){e.chars=Qe,t._insertCharacters(e)}function A$(t,e){t._insertCharacters(e),t.framesetOk=!1}function sN(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==J.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function x$(t,e){if(jq(e))sN(t),t._startTagOutsideForeignContent(e);else{const r=t._getAdjustedCurrentElement(),n=t.treeAdapter.getNamespaceURI(r);n===J.MATHML?US(e):n===J.SVG&&(Uq(e),VS(e)),TE(e),e.selfClosing?t._appendElement(e,n):t._insertElement(e,n),e.ackSelfClosing=!0}}function w$(t,e){if(e.tagID===f.P||e.tagID===f.BR){sN(t),t._endTagOutsideForeignContent(e);return}for(let r=t.openElements.stackTop;r>0;r--){const n=t.openElements.items[r];if(t.treeAdapter.getNamespaceURI(n)===J.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(n);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(r);break}}}const I$=new Set([q.AREA,q.BASE,q.BASEFONT,q.BGSOUND,q.BR,q.COL,q.EMBED,q.FRAME,q.HR,q.IMG,q.INPUT,q.KEYGEN,q.LINK,q.META,q.PARAM,q.SOURCE,q.TRACK,q.WBR]);function C$(t,e){return e.treeAdapter.isElementNode(t)&&e.treeAdapter.getNamespaceURI(t)===J.HTML&&I$.has(e.treeAdapter.getTagName(t))}const D$={treeAdapter:jn,scriptingEnabled:!0};function S$(t,e){const r={...D$,...e};return iN(t,r)}function N$(t,e){let r="";const n=e.treeAdapter.isElementNode(t)&&e.treeAdapter.getTagName(t)===q.TEMPLATE&&e.treeAdapter.getNamespaceURI(t)===J.HTML?e.treeAdapter.getTemplateContent(t):t,s=e.treeAdapter.getChildNodes(n);if(s)for(const i of s)r+=iN(i,e);return r}function iN(t,e){return e.treeAdapter.isElementNode(t)?R$(t,e):e.treeAdapter.isTextNode(t)?P$(t,e):e.treeAdapter.isCommentNode(t)?O$(t,e):e.treeAdapter.isDocumentTypeNode(t)?L$(t,e):""}function R$(t,e){const r=e.treeAdapter.getTagName(t);return`<${r}${k$(t,e)}>${C$(t,e)?"":`${N$(t,e)}</${r}>`}`}function k$(t,{treeAdapter:e}){let r="";for(const n of e.getAttrList(t)){if(r+=" ",n.namespace)switch(n.namespace){case J.XML:{r+=`xml:${n.name}`;break}case J.XMLNS:{n.name!=="xmlns"&&(r+="xmlns:"),r+=n.name;break}case J.XLINK:{r+=`xlink:${n.name}`;break}default:r+=`${n.prefix}:${n.name}`}else r+=n.name;r+=`="${RD(n.value)}"`}return r}function P$(t,e){const{treeAdapter:r}=e,n=r.getTextNodeContent(t),s=r.getParentNode(t),i=s&&r.isElementNode(s)&&r.getTagName(s);return i&&r.getNamespaceURI(s)===J.HTML&&fq(i,e.scriptingEnabled)?n:kD(n)}function O$(t,{treeAdapter:e}){return`<!--${e.getCommentNodeContent(t)}-->`}function L$(t,{treeAdapter:e}){return`<!DOCTYPE ${e.getDocumentTypeNodeName(t)}>`}function F$(t,e){return HS.parse(t,e)}function B$(t,e,r){typeof t=="string"&&(r=e,e=t,t=null);const n=HS.getFragmentParser(t,r);return n.tokenizer.write(e,!0),n.getFragment()}function xT(t){const e=t.includes('"')?"'":'"';return e+t+e}function M$(t,e,r){let n="!DOCTYPE ";return t&&(n+=t),e?n+=` PUBLIC ${xT(e)}`:r&&(n+=" SYSTEM"),r&&(n+=` ${xT(r)}`),n}const vs={isCommentNode:ap,isElementNode:xe,isTextNode:In,createDocument(){const t=new ia([]);return t["x-mode"]=Ir.NO_QUIRKS,t},createDocumentFragment(){return new ia([])},createElement(t,e,r){const n=Object.create(null),s=Object.create(null),i=Object.create(null);for(let o=0;o<r.length;o++){const u=r[o].name;n[u]=r[o].value,s[u]=r[o].namespace,i[u]=r[o].prefix}const a=new tE(t,n,[]);return a.namespace=e,a["x-attribsNamespace"]=s,a["x-attribsPrefix"]=i,a},createCommentNode(t){return new J1(t)},createTextNode(t){return new hc(t)},appendChild(t,e){const r=t.children[t.children.length-1];r&&(r.next=e,e.prev=r),t.children.push(e),e.parent=t},insertBefore(t,e,r){const n=t.children.indexOf(r),{prev:s}=r;s&&(s.next=e,e.prev=s),r.prev=e,e.next=r,t.children.splice(n,0,e),e.parent=t},setTemplateContent(t,e){vs.appendChild(t,e)},getTemplateContent(t){return t.children[0]},setDocumentType(t,e,r,n){const s=M$(e,r,n);let i=t.children.find(a=>Tg(a)&&a.name==="!doctype");i?i.data=s??null:(i=new Z1("!doctype",s),vs.appendChild(t,i)),i["x-name"]=e,i["x-publicId"]=r,i["x-systemId"]=n},setDocumentMode(t,e){t["x-mode"]=e},getDocumentMode(t){return t["x-mode"]},detachNode(t){if(t.parent){const e=t.parent.children.indexOf(t),{prev:r,next:n}=t;t.prev=null,t.next=null,r&&(r.next=n),n&&(n.prev=r),t.parent.children.splice(e,1),t.parent=null}},insertText(t,e){const r=t.children[t.children.length-1];r&&In(r)?r.data+=e:vs.appendChild(t,vs.createTextNode(e))},insertTextBefore(t,e,r){const n=t.children[t.children.indexOf(r)-1];n&&In(n)?n.data+=e:vs.insertBefore(t,vs.createTextNode(e),r)},adoptAttributes(t,e){for(let r=0;r<e.length;r++){const n=e[r].name;t.attribs[n]===void 0&&(t.attribs[n]=e[r].value,t["x-attribsNamespace"][n]=e[r].namespace,t["x-attribsPrefix"][n]=e[r].prefix)}},getFirstChild(t){return t.children[0]},getChildNodes(t){return t.children},getParentNode(t){return t.parent},getAttrList(t){return t.attributes},getTagName(t){return t.name},getNamespaceURI(t){return t.namespace},getTextNodeContent(t){return t.data},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){var e;return(e=t["x-name"])!==null&&e!==void 0?e:""},getDocumentTypeNodePublicId(t){var e;return(e=t["x-publicId"])!==null&&e!==void 0?e:""},getDocumentTypeNodeSystemId(t){var e;return(e=t["x-systemId"])!==null&&e!==void 0?e:""},isDocumentTypeNode(t){return Tg(t)&&t.name==="!doctype"},setNodeSourceCodeLocation(t,e){e&&(t.startIndex=e.startOffset,t.endIndex=e.endOffset),t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){e.endOffset!=null&&(t.endIndex=e.endOffset),t.sourceCodeLocation={...t.sourceCodeLocation,...e}}};function j$(t,e,r,n){const s={scriptingEnabled:typeof e.scriptingEnabled=="boolean"?e.scriptingEnabled:!0,treeAdapter:vs,sourceCodeLocationInfo:e.sourceCodeLocationInfo};return r?F$(t,s):B$(n,t,s)}const U$={treeAdapter:vs};function V$(t){const e="length"in t?t:[t];for(let n=0;n<e.length;n+=1){const s=e[n];Ea(s)&&Array.prototype.splice.call(e,n,1,...s.children)}let r="";for(let n=0;n<e.length;n+=1){const s=e[n];r+=S$(s,U$)}return r}var he;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(he||(he={}));var X;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.SpecialStartSequence=23]="SpecialStartSequence",t[t.InSpecialTag=24]="InSpecialTag",t[t.BeforeEntity=25]="BeforeEntity",t[t.BeforeNumericEntity=26]="BeforeNumericEntity",t[t.InNamedEntity=27]="InNamedEntity",t[t.InNumericEntity=28]="InNumericEntity",t[t.InHexEntity=29]="InHexEntity"})(X||(X={}));function Fn(t){return t===he.Space||t===he.NewLine||t===he.Tab||t===he.FormFeed||t===he.CarriageReturn}function Od(t){return t===he.Slash||t===he.Gt||Fn(t)}function wT(t){return t>=he.Zero&&t<=he.Nine}function q$(t){return t>=he.LowerA&&t<=he.LowerZ||t>=he.UpperA&&t<=he.UpperZ}function H$(t){return t>=he.UpperA&&t<=he.UpperF||t>=he.LowerA&&t<=he.LowerF}var En;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(En||(En={}));const fr={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class $${constructor({xmlMode:e=!1,decodeEntities:r=!0},n){this.cbs=n,this.state=X.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=X.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=r,this.entityTrie=e?xD:rE}reset(){this.state=X.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=X.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===he.Lt||!this.decodeEntities&&this.fastForwardTo(he.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=X.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===he.Amp&&(this.state=X.BeforeEntity)}stateSpecialStartSequence(e){const r=this.sequenceIndex===this.currentSequence.length;if(!(r?Od(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!r){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=X.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===he.Gt||Fn(e)){const r=this.index-this.currentSequence.length;if(this.sectionStart<r){const n=this.index;this.index=r,this.cbs.ontext(this.sectionStart,r),this.index=n}this.isSpecial=!1,this.sectionStart=r+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===fr.TitleEnd?this.decodeEntities&&e===he.Amp&&(this.state=X.BeforeEntity):this.fastForwardTo(he.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===he.Lt)}stateCDATASequence(e){e===fr.Cdata[this.sequenceIndex]?++this.sequenceIndex===fr.Cdata.length&&(this.state=X.InCommentLike,this.currentSequence=fr.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=X.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===fr.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=X.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!Od(e):q$(e)}startSpecial(e,r){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=r,this.state=X.SpecialStartSequence}stateBeforeTagName(e){if(e===he.ExclamationMark)this.state=X.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===he.Questionmark)this.state=X.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const r=e|32;this.sectionStart=this.index,!this.xmlMode&&r===fr.TitleEnd[2]?this.startSpecial(fr.TitleEnd,3):this.state=!this.xmlMode&&r===fr.ScriptEnd[2]?X.BeforeSpecialS:X.InTagName}else e===he.Slash?this.state=X.BeforeClosingTagName:(this.state=X.Text,this.stateText(e))}stateInTagName(e){Od(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){Fn(e)||(e===he.Gt?this.state=X.Text:(this.state=this.isTagStartChar(e)?X.InClosingTagName:X.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===he.Gt||Fn(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=X.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===he.Gt||this.fastForwardTo(he.Gt))&&(this.state=X.Text,this.baseState=X.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===he.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=X.InSpecialTag,this.sequenceIndex=0):this.state=X.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===he.Slash?this.state=X.InSelfClosingTag:Fn(e)||(this.state=X.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===he.Gt?(this.cbs.onselfclosingtag(this.index),this.state=X.Text,this.baseState=X.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Fn(e)||(this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===he.Eq||Od(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=X.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===he.Eq?this.state=X.BeforeAttributeValue:e===he.Slash||e===he.Gt?(this.cbs.onattribend(En.NoValue,this.index),this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e)):Fn(e)||(this.cbs.onattribend(En.NoValue,this.index),this.state=X.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===he.DoubleQuote?(this.state=X.InAttributeValueDq,this.sectionStart=this.index+1):e===he.SingleQuote?(this.state=X.InAttributeValueSq,this.sectionStart=this.index+1):Fn(e)||(this.sectionStart=this.index,this.state=X.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,r){e===r||!this.decodeEntities&&this.fastForwardTo(r)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r===he.DoubleQuote?En.Double:En.Single,this.index),this.state=X.BeforeAttributeName):this.decodeEntities&&e===he.Amp&&(this.baseState=this.state,this.state=X.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,he.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,he.SingleQuote)}stateInAttributeValueNoQuotes(e){Fn(e)||e===he.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(En.Unquoted,this.index),this.state=X.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===he.Amp&&(this.baseState=this.state,this.state=X.BeforeEntity)}stateBeforeDeclaration(e){e===he.OpeningSquareBracket?(this.state=X.CDATASequence,this.sequenceIndex=0):this.state=e===he.Dash?X.BeforeComment:X.InDeclaration}stateInDeclaration(e){(e===he.Gt||this.fastForwardTo(he.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=X.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===he.Gt||this.fastForwardTo(he.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=X.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===he.Dash?(this.state=X.InCommentLike,this.currentSequence=fr.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=X.InDeclaration}stateInSpecialComment(e){(e===he.Gt||this.fastForwardTo(he.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=X.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const r=e|32;r===fr.ScriptEnd[3]?this.startSpecial(fr.ScriptEnd,4):r===fr.StyleEnd[3]?this.startSpecial(fr.StyleEnd,4):(this.state=X.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===he.Number?this.state=X.BeforeNumericEntity:e===he.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=X.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=DD(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const r=this.trieCurrent&nn.VALUE_LENGTH;if(r){const n=(r>>14)-1;if(!this.allowLegacyEntity()&&e!==he.Semi)this.trieIndex+=n;else{const s=this.index-this.entityExcess+1;s>this.sectionStart&&this.emitPartial(this.sectionStart,s),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,n===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&nn.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~nn.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(e|32)===he.LowerX?(this.entityExcess++,this.state=X.InHexEntity):(this.state=X.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const r=this.index-this.entityExcess-1;r+2+ +(this.state===X.InHexEntity)!==this.index&&(r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.sectionStart=this.index+Number(e),this.emitCodePoint(wD(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===he.Semi?this.emitNumericEntity(!0):wT(e)?(this.entityResult=this.entityResult*10+(e-he.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===he.Semi?this.emitNumericEntity(!0):wT(e)?(this.entityResult=this.entityResult*16+(e-he.Zero),this.entityExcess++):H$(e)?(this.entityResult=this.entityResult*16+((e|32)-he.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===X.Text||this.baseState===X.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===X.Text||this.state===X.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===X.InAttributeValueDq||this.state===X.InAttributeValueSq||this.state===X.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case X.Text:{this.stateText(e);break}case X.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case X.InSpecialTag:{this.stateInSpecialTag(e);break}case X.CDATASequence:{this.stateCDATASequence(e);break}case X.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case X.InAttributeName:{this.stateInAttributeName(e);break}case X.InCommentLike:{this.stateInCommentLike(e);break}case X.InSpecialComment:{this.stateInSpecialComment(e);break}case X.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case X.InTagName:{this.stateInTagName(e);break}case X.InClosingTagName:{this.stateInClosingTagName(e);break}case X.BeforeTagName:{this.stateBeforeTagName(e);break}case X.AfterAttributeName:{this.stateAfterAttributeName(e);break}case X.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case X.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case X.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case X.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case X.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case X.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case X.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case X.InDeclaration:{this.stateInDeclaration(e);break}case X.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case X.BeforeComment:{this.stateBeforeComment(e);break}case X.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case X.InNamedEntity:{this.stateInNamedEntity(e);break}case X.BeforeEntity:{this.stateBeforeEntity(e);break}case X.InHexEntity:{this.stateInHexEntity(e);break}case X.InNumericEntity:{this.stateInNumericEntity(e);break}default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===X.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===X.InCommentLike?this.currentSequence===fr.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===X.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===X.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===X.InTagName||this.state===X.BeforeAttributeName||this.state===X.BeforeAttributeValue||this.state===X.AfterAttributeName||this.state===X.InAttributeName||this.state===X.InAttributeValueSq||this.state===X.InAttributeValueDq||this.state===X.InAttributeValueNq||this.state===X.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,r){this.baseState!==X.Text&&this.baseState!==X.InSpecialTag?this.cbs.onattribdata(e,r):this.cbs.ontext(e,r)}emitCodePoint(e){this.baseState!==X.Text&&this.baseState!==X.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const Ra=new Set(["input","option","optgroup","select","button","datalist","textarea"]),Ue=new Set(["p"]),IT=new Set(["thead","tbody"]),CT=new Set(["dd","dt"]),DT=new Set(["rt","rp"]),z$=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",Ue],["h1",Ue],["h2",Ue],["h3",Ue],["h4",Ue],["h5",Ue],["h6",Ue],["select",Ra],["input",Ra],["output",Ra],["button",Ra],["datalist",Ra],["textarea",Ra],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",CT],["dt",CT],["address",Ue],["article",Ue],["aside",Ue],["blockquote",Ue],["details",Ue],["div",Ue],["dl",Ue],["fieldset",Ue],["figcaption",Ue],["figure",Ue],["footer",Ue],["form",Ue],["header",Ue],["hr",Ue],["main",Ue],["nav",Ue],["ol",Ue],["pre",Ue],["section",Ue],["table",Ue],["ul",Ue],["rt",DT],["rp",DT],["tbody",IT],["tfoot",IT]]),G$=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),ST=new Set(["math","svg"]),NT=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),W$=/\s|\//;class K${constructor(e,r={}){var n,s,i,a,o;this.options=r,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(n=r.lowerCaseTags)!==null&&n!==void 0?n:!r.xmlMode,this.lowerCaseAttributeNames=(s=r.lowerCaseAttributeNames)!==null&&s!==void 0?s:!r.xmlMode,this.tokenizer=new((i=r.Tokenizer)!==null&&i!==void 0?i:$$)(this.options,this),(o=(a=this.cbs).onparserinit)===null||o===void 0||o.call(a,this)}ontext(e,r){var n,s;const i=this.getSlice(e,r);this.endIndex=r-1,(s=(n=this.cbs).ontext)===null||s===void 0||s.call(n,i),this.startIndex=r}ontextentity(e){var r,n;const s=this.tokenizer.getSectionStart();this.endIndex=s-1,(n=(r=this.cbs).ontext)===null||n===void 0||n.call(r,Ag(e)),this.startIndex=s}isVoidElement(e){return!this.options.xmlMode&&G$.has(e)}onopentagname(e,r){this.endIndex=r;let n=this.getSlice(e,r);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)}emitOpenTag(e){var r,n,s,i;this.openTagStart=this.startIndex,this.tagname=e;const a=!this.options.xmlMode&&z$.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const o=this.stack.pop();(n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,o,!0)}this.isVoidElement(e)||(this.stack.push(e),ST.has(e)?this.foreignContext.push(!0):NT.has(e)&&this.foreignContext.push(!1)),(i=(s=this.cbs).onopentagname)===null||i===void 0||i.call(s,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var r,n;this.startIndex=this.openTagStart,this.attribs&&((n=(r=this.cbs).onopentag)===null||n===void 0||n.call(r,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,r){var n,s,i,a,o,u;this.endIndex=r;let l=this.getSlice(e,r);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(ST.has(l)||NT.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&l==="br"&&((s=(n=this.cbs).onopentagname)===null||s===void 0||s.call(n,"br"),(a=(i=this.cbs).onopentag)===null||a===void 0||a.call(i,"br",{},!0),(u=(o=this.cbs).onclosetag)===null||u===void 0||u.call(o,"br",!1));else{const h=this.stack.lastIndexOf(l);if(h!==-1)if(this.cbs.onclosetag){let p=this.stack.length-h;for(;p--;)this.cbs.onclosetag(this.stack.pop(),p!==0)}else this.stack.length=h;else!this.options.xmlMode&&l==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=r+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var r,n;const s=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===s&&((n=(r=this.cbs).onclosetag)===null||n===void 0||n.call(r,s,!e),this.stack.pop())}onattribname(e,r){this.startIndex=e;const n=this.getSlice(e,r);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n}onattribdata(e,r){this.attribvalue+=this.getSlice(e,r)}onattribentity(e){this.attribvalue+=Ag(e)}onattribend(e,r){var n,s;this.endIndex=r,(s=(n=this.cbs).onattribute)===null||s===void 0||s.call(n,this.attribname,this.attribvalue,e===En.Double?'"':e===En.Single?"'":e===En.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const r=e.search(W$);let n=r<0?e:e.substr(0,r);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n}ondeclaration(e,r){this.endIndex=r;const n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(n);this.cbs.onprocessinginstruction(`!${s}`,`!${n}`)}this.startIndex=r+1}onprocessinginstruction(e,r){this.endIndex=r;const n=this.getSlice(e,r);if(this.cbs.onprocessinginstruction){const s=this.getInstructionName(n);this.cbs.onprocessinginstruction(`?${s}`,`?${n}`)}this.startIndex=r+1}oncomment(e,r,n){var s,i,a,o;this.endIndex=r,(i=(s=this.cbs).oncomment)===null||i===void 0||i.call(s,this.getSlice(e,r-n)),(o=(a=this.cbs).oncommentend)===null||o===void 0||o.call(a),this.startIndex=r+1}oncdata(e,r,n){var s,i,a,o,u,l,h,p,m,E;this.endIndex=r;const _=this.getSlice(e,r-n);this.options.xmlMode||this.options.recognizeCDATA?((i=(s=this.cbs).oncdatastart)===null||i===void 0||i.call(s),(o=(a=this.cbs).ontext)===null||o===void 0||o.call(a,_),(l=(u=this.cbs).oncdataend)===null||l===void 0||l.call(u)):((p=(h=this.cbs).oncomment)===null||p===void 0||p.call(h,`[CDATA[${_}]]`),(E=(m=this.cbs).oncommentend)===null||E===void 0||E.call(m)),this.startIndex=r+1}onend(){var e,r;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}(r=(e=this.cbs).onend)===null||r===void 0||r.call(e)}reset(){var e,r,n,s;(r=(e=this.cbs).onreset)===null||r===void 0||r.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(s=(n=this.cbs).onparserinit)===null||s===void 0||s.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,r){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let n=this.buffers[0].slice(e-this.bufferOffset,r-this.bufferOffset);for(;r-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,r-this.bufferOffset);return n}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)}end(e){var r,n;if(this.ended){(n=(r=this.cbs).onerror)===null||n===void 0||n.call(r,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}function Y$(t,e){const r=new Aj(void 0,e);return new K$(r,e).end(t),r.root}const Q$=CV((t,e,r,n)=>e.xmlMode||e._useHtmlParser2?Y$(t,e):j$(t,e,r,n)),aN=nq(Q$,(t,e)=>e.xmlMode||e._useHtmlParser2?op(t,e):V$(t));aN([]);const X$=[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([^&]+)/,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^?]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([^?]+)/],J$=t=>{for(const e of X$){const r=t.match(e);if(r&&r[1])return r[1]}return null},Z$=async t=>{try{const e=await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${t}&format=json`);if(!e.ok)throw new Error("Failed to fetch YouTube metadata");const r=await e.json();return{title:r.title,description:r.author_name,thumbnail_url:`https://img.youtube.com/vi/${t}/maxresdefault.jpg`}}catch(e){return console.error("YouTube metadata fetch error:",e),{title:"YouTube Video",description:"Video description unavailable",thumbnail_url:`https://img.youtube.com/vi/${t}/hqdefault.jpg`}}};async function oN(t){var e,r,n,s,i;try{t.match(/^https?:\/\//i)||(t="https://"+t);try{new URL(t)}catch{throw new Error("Invalid URL")}const a=J$(t);if(a)return Z$(a);const o=[E=>`https://api.allorigins.win/raw?url=${encodeURIComponent(E)}`,E=>`https://corsproxy.io/?${encodeURIComponent(E)}`,E=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(E)}`];let u="",l=null;for(const E of o)try{const _=new AbortController,v=setTimeout(()=>_.abort(),1e4),A=await fetch(E(t),{signal:_.signal,headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}});if(clearTimeout(v),!A.ok)throw new Error(`HTTP error! status: ${A.status}`);if(u=await A.text(),u)break}catch(_){l=_;continue}if(!u)throw l||new Error("Failed to fetch URL content");const h=pS(u),p=aN(u),m={title:p('meta[property="og:title"]').attr("content")||p('meta[name="twitter:title"]').attr("content")||p("title").text()||((e=h.querySelector("title"))==null?void 0:e.text)||new URL(t).hostname,description:p('meta[property="og:description"]').attr("content")||p('meta[name="twitter:description"]').attr("content")||p('meta[name="description"]').attr("content")||((r=h.querySelector('meta[name="description"]'))==null?void 0:r.getAttribute("content"))||p("p").first().text()||"No description available",thumbnail_url:p('meta[property="og:image"]').attr("content")||p('meta[name="twitter:image"]').attr("content")||((n=h.querySelector('meta[property="og:image"]'))==null?void 0:n.getAttribute("content"))||p('img[src^="http"]').first().attr("src")||void 0};if(m.title=((s=m.title)==null?void 0:s.trim())||new URL(t).hostname,m.description=((i=m.description)==null?void 0:i.trim())||"No description available",m.thumbnail_url&&!m.thumbnail_url.startsWith("http")){const E=new URL(t);m.thumbnail_url=new URL(m.thumbnail_url,E.origin).toString()}if(m.thumbnail_url)try{new URL(m.thumbnail_url)}catch{m.thumbnail_url=void 0}return m}catch(a){console.error("Error fetching link preview:",a);try{return{title:new URL(t).hostname,description:"No description available"}}catch{return{title:t,description:"No description available"}}}}async function uN(t){const e=t.match(oj())||[];return[...new Set(e)].map(r=>r.match(/^https?:\/\//i)?r:`https://${r}`)}async function ez(t){const e=await HM.createWorker(),{data:{text:r}}=await e.recognize(t);return await e.terminate(),uN(r)}async function RT(t){return(await Promise.all(t.map(async r=>{try{const n=await oN(r);return{url:r,title:n.title||new URL(r).hostname,description:n.description||"No description available",thumbnail_url:n.thumbnail_url,selected:!0}}catch(n){return console.error(`Error fetching preview for ${r}:`,n),{url:r,title:new URL(r).hostname,description:"No description available",selected:!0}}}))).filter(r=>r!==null&&typeof r.title=="string"&&typeof r.description=="string")}function lN(){const{supercurations:t}=rp(),{addLink:e}=lu(),[r,n]=M.useState(!1),[s,i]=M.useState(null),[a,o]=M.useState([]),[u,l]=M.useState(!1),[h,p]=M.useState(null),[m,E]=M.useState(null),[_,v]=M.useState(null),[A,x]=M.useState(!1),b=M.useRef(null),T=async I=>{var O;const P=(O=I.target.files)==null?void 0:O[0];if(P)try{n(!0),i(null);const N=await ez(P),Ee=await RT(N);o(Ee.map(ee=>({...ee,selected:!0})))}catch(N){console.error("Error processing image:",N),i("Failed to extract text from image")}finally{n(!1)}},F=async()=>{try{n(!0),i(null);const I=await navigator.clipboard.readText(),P=await uN(I);if(P.length===0){i("No URLs found in the pasted text");return}const O=await RT(P);o(O.map(N=>({...N,selected:!0})))}catch(I){console.error("Error processing text:",I),i("Failed to process pasted text")}finally{n(!1)}},j=()=>{const I=a.every(P=>P.selected);o(P=>P.map(O=>({...O,selected:!I})))},$=I=>{o(P=>P.map(O=>O.url===I?{...O,selected:!O.selected}:O))},D=async I=>{p(I),l(!0)},w=async()=>{if(!m&&!_&&A){i("Please select a supercuration or format, or enable adding to main feed");return}try{n(!0),i(null);const I=a.filter(P=>P.selected);for(const P of I)await e({url:P.url,title:P.title,description:P.description,thumbnail_url:P.thumbnail_url,emoji_tags:_?[_]:[],topic_ids:[],is_original_content:!1,supercuration_ids:m?[m]:void 0,publish_to_feed:!A});o([]),E(null),v(null),x(!1)}catch(I){console.error("Error sharing links:",I),i("Failed to share links")}finally{n(!1)}},k=a.filter(I=>I.selected).length;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("button",{onClick:()=>{var I;return(I=b.current)==null?void 0:I.click()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border rounded-lg hover:bg-gray-50",children:[d.jsx(G1,{className:"w-5 h-5 text-gray-400"}),d.jsx("span",{className:"text-gray-700",children:"Upload Screenshot"})]}),d.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:T,className:"hidden"}),d.jsxs("button",{onClick:F,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border rounded-lg hover:bg-gray-50",children:[d.jsx(tB,{className:"w-5 h-5 text-gray-400"}),d.jsx("span",{className:"text-gray-700",children:"Paste Text"})]})]}),r&&d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx(lc,{className:"w-8 h-8 animate-spin text-blue-600"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Processing..."})]})}),s&&d.jsx("div",{className:"p-4 bg-red-50 text-red-600 rounded-lg",children:s}),a.length>0&&d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:j,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[a.every(I=>I.selected)?d.jsx(hD,{className:"w-5 h-5"}):d.jsx(pD,{className:"w-5 h-5"}),d.jsx("span",{children:"Select All"})]}),d.jsxs("span",{className:"text-sm text-gray-500",children:[k," of ",a.length," selected"]})]})}),k>0&&d.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"font-medium",children:"Batch Settings"}),d.jsx("button",{onClick:w,disabled:r||!m&&!_&&A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Sharing...":`Share Selected (${k})`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add All Selected Items to Supercuration"}),d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:m||"",onChange:I=>E(I.target.value||null),className:"w-full appearance-none pl-8 pr-4 py-2 bg-white border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Select a supercuration..."}),t.map(I=>d.jsx("option",{value:I.id,children:I.title},I.id))]}),d.jsx(rB,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})]}),d.jsx("div",{className:"flex items-center",children:d.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[d.jsx("input",{type:"checkbox",checked:A,onChange:I=>x(I.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("span",{className:"text-gray-600",children:"Don't add to main feed"})]})})]}),d.jsx("div",{className:"grid gap-4",children:a.map(I=>d.jsx(IB,{link:I,onToggleSelect:()=>$(I.url),onShare:()=>D(I)},I.url))})]}),u&&h&&d.jsx(mD,{suggestedTags:[],onClose:()=>{l(!1),p(null)},onSave:async(I,P,O,N)=>{try{await e({...N,emoji_tags:I,topic_ids:P,is_original_content:O,supercuration_ids:m?[m]:void 0,publish_to_feed:!A}),l(!1),p(null),o(Ee=>Ee.filter(ee=>ee.url!==h.url))}catch(Ee){console.error("Error sharing link:",Ee),i("Failed to share link")}},preview:h})]})}function cN({isOpen:t,onClose:e,onConfirm:r}){return t?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Link"}),d.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this link? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete"})]})]})]})}):null}function dN({onShare:t}){const[e,r]=M.useState(""),[n,s]=M.useState(!1),[i,a]=M.useState(null),[o,u]=M.useState(null);M.useEffect(()=>{const p=setTimeout(async()=>{if(!e.trim()){u(null);return}try{s(!0),a(null);const m=await oN(e);u(m)}catch(m){console.error("Error fetching preview:",m),a("Failed to fetch link preview"),u(null)}finally{s(!1)}},500);return()=>clearTimeout(p)},[e]);const l=()=>{!e.trim()||!o||(t({url:e.trim(),...o}),r(""),u(null))};return d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"url",value:e,onChange:h=>r(h.target.value),placeholder:"Enter URL to share...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),d.jsx(uc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),d.jsx("button",{onClick:l,disabled:!e.trim()||n||!o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Share"})]}),(n||o)&&d.jsx("div",{className:"mt-4 border rounded-lg overflow-hidden",children:n?d.jsx("div",{className:"p-4 flex items-center justify-center",children:d.jsx(lc,{className:"w-5 h-5 animate-spin text-blue-600"})}):o&&d.jsxs("div",{className:"flex gap-4 p-4",children:[o.thumbnail_url&&d.jsx("img",{src:o.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:o.title}),d.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:o.description})]})]})}),i&&d.jsx("p",{className:"mt-2 text-sm text-red-600",children:i})]})}function tz({isOpen:t,onClose:e,linkId:r}){const{links:n,updateLink:s,updateLinkTopics:i,updateLinkFormats:a}=lu(),{topics:o,addTopic:u}=hi(),l=n.find(I=>I.id===r),[h,p]=M.useState({title:(l==null?void 0:l.title)||"",description:(l==null?void 0:l.description)||"",is_original_content:(l==null?void 0:l.is_original_content)||!1,thumbnail_url:(l==null?void 0:l.thumbnail_url)||"",topic_ids:(l==null?void 0:l.topic_ids)||[],emoji_tags:(l==null?void 0:l.emoji_tags)||[]}),[m,E]=M.useState("url"),[_,v]=M.useState(!1),[A,x]=M.useState({name:"",color:"#2563eb"}),[b,T]=M.useState(!1),F=[{emoji:"",label:"Article"},{emoji:"",label:"Video"},{emoji:"",label:"Podcast"},{emoji:"",label:"Newsletter"},{emoji:"",label:"Tool"},{emoji:"",label:"Tutorial"},{emoji:"",label:"Design"},{emoji:"",label:"AI"},{emoji:"",label:"Dev"},{emoji:"",label:"Other"}];if(!t||!l)return null;const j=I=>{var O;const P=(O=I.target.files)==null?void 0:O[0];if(P){const N=new FileReader;N.onloadend=()=>{p(Ee=>({...Ee,thumbnail_url:N.result}))},N.readAsDataURL(P)}},$=I=>{p(P=>({...P,topic_ids:P.topic_ids.includes(I)?P.topic_ids.filter(O=>O!==I):[...P.topic_ids,I]}))},D=I=>{p(P=>({...P,emoji_tags:P.emoji_tags.includes(I)?P.emoji_tags.filter(O=>O!==I):[I]}))},w=()=>{if(A.name.trim()){const I=u(A.name.trim(),A.color);p(P=>({...P,topic_ids:[...P.topic_ids,I.id]})),x({name:"",color:"#2563eb"}),v(!1)}},k=async I=>{I.preventDefault();try{T(!0),await s(r,{title:h.title,description:h.description,is_original_content:h.is_original_content,thumbnail_url:h.thumbnail_url}),await Promise.all([i(r,h.topic_ids),a(r,h.emoji_tags)]),e()}catch(P){console.error("Failed to update link:",P)}finally{T(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Post"}),d.jsxs("form",{onSubmit:k,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:h.title,onChange:I=>p({...h,title:I.target.value}),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{value:h.description,onChange:I=>p({...h,description:I.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail Image"}),d.jsxs("div",{className:"flex gap-2 mb-3",children:[d.jsxs("button",{type:"button",onClick:()=>E("url"),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${m==="url"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(uc,{className:"w-4 h-4"}),"URL"]}),d.jsxs("button",{type:"button",onClick:()=>E("upload"),className:`flex-1 py-2 px-3 text-sm rounded-md flex items-center justify-center gap-2 ${m==="upload"?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700"}`,children:[d.jsx(G1,{className:"w-4 h-4"}),"Upload"]})]}),m==="url"?d.jsx("input",{type:"url",placeholder:"Enter image URL",value:h.thumbnail_url,onChange:I=>p({...h,thumbnail_url:I.target.value}),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"}):d.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500"}),h.thumbnail_url&&d.jsx("div",{className:"mt-2",children:d.jsx("img",{src:h.thumbnail_url,alt:"Preview",className:"w-full h-32 object-cover rounded-md"})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Format"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.map(({emoji:I,label:P})=>d.jsxs("button",{type:"button",onClick:()=>D(I),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${h.emoji_tags.includes(I)?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:I}),P]},I))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Topics"}),d.jsxs("button",{type:"button",onClick:()=>v(!_),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[d.jsx(cc,{className:"w-4 h-4"}),"Add Topic"]})]}),_&&d.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Topic name",value:A.name,onChange:I=>x({...A,name:I.target.value}),className:"flex-1 px-3 py-1 text-sm border rounded"}),d.jsx("input",{type:"color",value:A.color,onChange:I=>x({...A,color:I.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{type:"button",onClick:w,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(I=>d.jsx("button",{type:"button",onClick:()=>$(I.id),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${h.topic_ids.includes(I.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${I.color}15`,color:I.color,borderColor:h.topic_ids.includes(I.id)?I.color:"transparent"},children:I.name},I.id))})]}),d.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:h.is_original_content,onChange:I=>p({...h,is_original_content:I.target.checked}),className:"rounded border-amber-400 text-amber-600 focus:ring-amber-500"}),d.jsx(tp,{className:"w-4 h-4 text-amber-600"}),d.jsx("span",{className:"text-sm font-medium text-amber-800",children:"This is my original content"})]}),d.jsx("p",{className:"mt-1 text-xs text-amber-600 ml-6",children:"Check this if you created this content (e.g., your blog post, podcast, video)"})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:b,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:b?"Saving...":"Save Changes"})]})]})]})]})})}function rz(){const{user:t}=Wr(),{topics:e}=hi(),{links:r,toggleLike:n,removeLink:s,fetchLinks:i,addLink:a}=lu(),[o,u]=M.useState("all"),[l,h]=M.useState(null),[p,m]=M.useState(null),[E,_]=M.useState(!1),[v,A]=M.useState(!1),[x,b]=M.useState(null),[T,F]=M.useState(null),[j,$]=M.useState(!1);M.useEffect(()=>{(async()=>{try{console.log("Fetching links..."),await i(),console.log("Links after fetch:",r)}catch(N){console.error("Error fetching links:",N)}})()},[i]),M.useEffect(()=>{if(r&&!j){const O=r.filter(N=>!N.id);O.length>0&&(console.warn("Found links without IDs:",O),$(!0),yB().then(N=>{N>0&&(console.log(`Cleaned up ${N} invalid links`),i())}).catch(N=>{console.error("Failed to cleanup invalid links:",N)}).finally(()=>{$(!1)}))}},[r]);const D=async O=>{try{await s(O),m(null)}catch(N){console.error("Failed to delete link:",N)}},w=async O=>{F(O),_(!0)},k=[{emoji:"",label:"Article"},{emoji:"",label:"Video"},{emoji:"",label:"Podcast"},{emoji:"",label:"Newsletter"},{emoji:"",label:"Tool"},{emoji:"",label:"Tutorial"},{emoji:"",label:"Design"},{emoji:"",label:"AI"},{emoji:"",label:"Dev"},{emoji:"",label:"Other"}],I=()=>{if(console.log("Current filters:",{timeFilter:o,formatFilter:l}),!Array.isArray(r))return console.error("Links is not an array:",r),[];let N=[...r.filter(Ee=>Ee.id?Ee.created_at?!0:(console.warn("Link missing created_at:",Ee),!1):(console.warn("Link missing ID:",Ee),!1))];if(l&&(N=N.filter(Ee=>{if(!Array.isArray(Ee.emoji_tags))return console.warn(`Link ${Ee.id} has invalid emoji_tags:`,Ee.emoji_tags),!1;const ee=Ee.emoji_tags.includes(l);return console.log(`Link ${Ee.id} has format ${l}:`,ee),ee})),o!=="all"){const Ee=new Date;switch(o){case"today":N=N.filter(me=>new Date(me.created_at).toDateString()===Ee.toDateString());break;case"week":const ee=new Date;ee.setDate(ee.getDate()-7),N=N.filter(me=>new Date(me.created_at)>=ee);break;case"month":const de=new Date;de.setMonth(de.getMonth()-1),N=N.filter(me=>new Date(me.created_at)>=de);break}}return console.log("Filtered results:",N),N},P=I();return console.log("Filtered Links:",P),d.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx(dN,{onShare:w}),d.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-500",children:d.jsx("button",{onClick:()=>A(!0),className:"text-blue-600 hover:text-blue-700",children:"Import multiple URLs from text or image"})}),v&&d.jsx("div",{className:"mt-4",children:d.jsx(lN,{})})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 space-y-4",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsx("div",{className:"flex items-center gap-3",children:d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:o,onChange:O=>u(O.target.value),className:"appearance-none pl-8 pr-4 py-1.5 bg-white border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All time"}),d.jsx("option",{value:"today",children:"Today"}),d.jsx("option",{value:"week",children:"This week"}),d.jsx("option",{value:"month",children:"This month"})]}),d.jsx(q1,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})})}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("button",{onClick:()=>h(null),className:`px-3 py-1.5 rounded-full text-sm ${l?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:"All Formats"}),k.map(({emoji:O,label:N})=>d.jsxs("button",{onClick:()=>h(l===O?null:O),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${l===O?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:O}),N]},O))]})]}),d.jsx("div",{className:"space-y-4",children:I().map(O=>{var N,Ee,ee;return O.id?d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[O.thumbnail_url&&d.jsx("img",{src:O.thumbnail_url,alt:"",className:"w-16 h-16 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{children:[O.url?d.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 flex items-center gap-1 group",children:[O.title,d.jsx(Zh,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}):d.jsx("h3",{className:"font-medium text-gray-900",children:O.title}),O.is_original_content&&d.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 text-xs bg-amber-100 text-amber-800 rounded-full font-medium ml-2",children:[d.jsx(tp,{className:"w-3 h-3 mr-1"}),"ORIGINAL"]}),d.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:O.description}),d.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400",children:[d.jsxs(yt,{to:`/profile/${O.created_by}`,className:"hover:text-blue-600",children:["Shared by ",O.created_by===(t==null?void 0:t.id)?"you":(N=O.user)==null?void 0:N.name]}),d.jsx("span",{children:new Date(O.created_at).toLocaleDateString()})]})]}),O.created_by===(t==null?void 0:t.id)&&d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("button",{onClick:()=>b(O),className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:d.jsx(ep,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(O.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",children:d.jsx(mo,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>n(O.id),className:`flex items-center gap-1 text-sm ${O.liked?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[d.jsx(fD,{className:`w-3.5 h-3.5 ${O.liked?"fill-current":""}`}),d.jsx("span",{children:O.likes})]}),(Ee=O.emoji_tags)==null?void 0:Ee.map(de=>d.jsx("span",{className:"text-base",children:de},de)),(ee=O.topic_ids)==null?void 0:ee.map(de=>{const me=e.find(Z=>Z.id===de);return me?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${me.color}15`,color:me.color},children:me.name},me.id):null})]})]})]})})},O.id):(console.error("Attempting to render link without ID:",O),null)})}),E&&T&&d.jsx(mD,{suggestedTags:[],onClose:()=>{_(!1),F(null)},onSave:async(O,N,Ee)=>{try{await a({...T,emoji_tags:O,topic_ids:N,is_original_content:Ee,publish_to_feed:!0}),_(!1),F(null)}catch(ee){console.error("Error sharing link:",ee)}},preview:T}),p&&d.jsx(cN,{isOpen:!0,onClose:()=>m(null),onConfirm:()=>D(p)}),x&&d.jsx(tz,{isOpen:!0,onClose:()=>b(null),linkId:x.id})]})}const Hm=["#2563eb","#dc2626","#059669","#7c3aed","#db2777","#ea580c","#ca8a04","#4f46e5","#0891b2","#be123c"];function nz({isOpen:t,onClose:e}){const{topics:r,addTopic:n,removeTopic:s,updateTopic:i}=hi(),{removeTopicFromLinks:a}=lu(),[o,u]=M.useState({name:"",color:Hm[0]}),[l,h]=M.useState(null);if(!t)return null;const p=v=>{v.preventDefault(),o.name.trim()&&(n(o.name.trim(),o.color),u({name:"",color:Hm[0]}))},m=v=>{l===v.id?h(null):(h(v.id),u({name:v.name,color:v.color}))},E=v=>{i(v,o),h(null),u({name:"",color:Hm[0]})},_=v=>{s(v),a(v)};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Manage Topics"}),d.jsx("form",{onSubmit:p,className:"mb-6",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"New topic name...",className:"flex-1 px-3 py-2 border rounded-md",value:o.name,onChange:v=>u({...o,name:v.target.value})}),d.jsx("div",{className:"relative",children:d.jsx("input",{type:"color",value:o.color,onChange:v=>u({...o,color:v.target.value}),className:"w-10 h-10 p-1 border rounded-md cursor-pointer"})}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:d.jsx(sa,{className:"w-5 h-5"})})]})}),d.jsx("div",{className:"space-y-2",children:r.map(v=>d.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:l===v.id?d.jsxs("div",{className:"flex gap-2 flex-1",children:[d.jsx("input",{type:"text",value:o.name,onChange:A=>u({...o,name:A.target.value}),className:"flex-1 px-2 py-1 border rounded"}),d.jsx("input",{type:"color",value:o.color,onChange:A=>u({...o,color:A.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{onClick:()=>E(v.id),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Save"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.color}}),d.jsx("span",{children:v.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>m(v),className:"p-1 text-gray-400 hover:text-gray-600",children:d.jsx(ep,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>_(v.id),className:"p-1 text-gray-400 hover:text-red-600",children:d.jsx(kr,{className:"w-4 h-4"})})]})]})},v.id))})]})]})})}const sz=[{emoji:"",label:"Article"},{emoji:"",label:"Video"},{emoji:"",label:"Podcast"},{emoji:"",label:"Newsletter"},{emoji:"",label:"Tool"},{emoji:"",label:"Tutorial"},{emoji:"",label:"Design"},{emoji:"",label:"AI"},{emoji:"",label:"Dev"},{emoji:"",label:"Other"}];function iz({link:t,onClose:e,onSave:r}){const[n,s]=M.useState(t.emoji_tags||[]),[i,a]=M.useState(!1),o=l=>{s(h=>h.includes(l)?h.filter(p=>p!==l):[l])},u=async l=>{l.preventDefault();try{a(!0),await r(n),e()}catch(h){console.error("Failed to update formats:",h)}finally{a(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Format"}),d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]})]})}),d.jsxs("form",{onSubmit:u,children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Format"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:sz.map(({emoji:l,label:h})=>d.jsxs("button",{type:"button",onClick:()=>o(l),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm ${n.includes(l)?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:l}),h]},l))})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:i,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Format"})]})]})]})]})})}const kT=["#2563eb","#dc2626","#059669","#7c3aed","#db2777","#ea580c","#ca8a04","#4f46e5","#0891b2","#be123c"];function az({link:t,onClose:e,onSave:r}){const{topics:n,addTopic:s}=hi(),[i,a]=M.useState(t.topic_ids||[]),[o,u]=M.useState(!1),[l,h]=M.useState(!1),[p,m]=M.useState({name:"",color:kT[0]}),E=A=>{a(x=>x.includes(A)?x.filter(b=>b!==A):[...x,A])},_=()=>{if(p.name.trim()){const A=s(p.name.trim(),p.color);a(x=>[...x,A.id]),m({name:"",color:kT[0]}),h(!1)}},v=async A=>{A.preventDefault();try{u(!0),await r(i)}catch(x){console.error("Failed to update topics:",x)}};return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Edit Topics"}),d.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-4",children:[t.thumbnail_url&&d.jsx("img",{src:t.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:t.description})]})]})}),d.jsxs("form",{onSubmit:v,children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Topics"}),d.jsxs("button",{type:"button",onClick:()=>h(!l),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[d.jsx(sa,{className:"w-4 h-4"}),"Add Topic"]})]}),l&&d.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"New topic name",value:p.name,onChange:A=>m({...p,name:A.target.value}),className:"flex-1 px-3 py-1 text-sm border rounded"}),d.jsx("input",{type:"color",value:p.color,onChange:A=>m({...p,color:A.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{type:"button",onClick:_,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Add"})]})}),d.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(A=>d.jsx("button",{type:"button",onClick:()=>E(A.id),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${i.includes(A.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${A.color}15`,color:A.color,borderColor:i.includes(A.id)?A.color:"transparent"},children:A.name},A.id))})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",disabled:o,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Saving...":"Save Topics"})]})]})]})]})})}function hN({topics:t,selectedTopics:e,onTopicToggle:r}){const[n,s]=M.useState(!1),[i,a]=M.useState(""),o=t.filter(l=>!e.includes(l.id)),u=o.filter(l=>l.name.toLowerCase().includes(i.toLowerCase()));return d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Filter by Topic"}),d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-1 px-3 py-1.5 text-blue-600 hover:text-blue-700 border border-blue-200 rounded-md",children:[d.jsx(sa,{className:"w-4 h-4"}),"Add Filter",d.jsx(ZF,{className:"w-4 h-4"})]}),n&&o.length>0&&d.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:[d.jsx("div",{className:"p-2 border-b border-gray-100",children:d.jsx("input",{type:"text",value:i,onChange:l=>a(l.target.value),placeholder:"Search topics...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:l=>l.stopPropagation()})}),d.jsx("div",{className:"py-1 max-h-[200px] overflow-y-auto",children:u.length>0?u.map(l=>d.jsxs("button",{onClick:()=>{r(l.id),s(!1),a("")},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex justify-between items-center",children:[d.jsx("span",{children:l.name}),d.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:l.count})]},l.id)):d.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No topics found"})})]})]})]}),e.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(l=>{const h=t.find(p=>p.id===l);return h?d.jsxs("button",{onClick:()=>r(h.id),className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm ring-1 group",style:{backgroundColor:`${h.color}15`,color:h.color,borderColor:h.color},children:[d.jsx("span",{children:h.name}),d.jsx("span",{className:"mx-1.5 opacity-50",children:""}),d.jsx("span",{className:"opacity-75",children:h.count}),d.jsx(kr,{className:"w-3 h-3 ml-1.5 opacity-50 group-hover:opacity-100"})]},h.id):null})})]})}function oz(){const{topics:t}=hi(),e=t.map(ee=>({id:ee.id,name:ee.name,color:ee.color,count:0})),{toggleLike:r,updateLinkFormats:n,updateLinkTopics:s,removeLink:i}=lu(),[a,o]=M.useState([]),[u,l]=M.useState(!0),[h,p]=M.useState(null),[m,E]=M.useState("all"),[_,v]=M.useState([]),[A,x]=M.useState("shared"),[b,T]=M.useState(!1),[F,j]=M.useState(null),[$,D]=M.useState(null),[w,k]=M.useState(null),[I,P]=M.useState(null),O=[{emoji:"",label:"Article"},{emoji:"",label:"Video"},{emoji:"",label:"Podcast"},{emoji:"",label:"Newsletter"},{emoji:"",label:"Tool"},{emoji:"",label:"Tutorial"},{emoji:"",label:"Design"},{emoji:"",label:"AI"},{emoji:"",label:"Dev"},{emoji:"",label:"Other"}];M.useEffect(()=>{(async()=>{try{l(!0),p(null);const de=pt.currentUser;if(!de)return;let me;A==="shared"?me=Kt(At(_e,"links"),Bt("created_by","==",de.uid),Jh("created_at","desc")):me=Kt(At(_e,"links"),Bt("created_by","==",de.uid),Bt("original_post_id","!=",null),Jh("created_at","desc"));const B=(await sr(me)).docs.map(V=>{var Y,se,U;return{id:V.id,...V.data(),created_at:((U=(se=(Y=V.data().created_at)==null?void 0:Y.toDate)==null?void 0:se.call(Y))==null?void 0:U.toISOString())||new Date().toISOString(),liked:!1,likes:V.data().likes||0}});o(B)}catch(de){console.error("Error fetching links:",de),p(de instanceof Error?de.message:"Failed to load links")}finally{l(!1)}})()},[A]);const N=async ee=>{try{await i(ee),o(de=>de.filter(me=>me.id!==ee)),k(null)}catch(de){console.error("Failed to delete link:",de)}},Ee=()=>{let ee=[...a];_.length>0&&(ee=ee.filter(me=>_.some(Z=>{var B;return(B=me.topic_ids)==null?void 0:B.includes(Z)}))),I&&(ee=ee.filter(me=>Array.isArray(me.emoji_tags)&&me.emoji_tags.includes(I)));const de=new Date;switch(m){case"today":ee=ee.filter(B=>new Date(B.created_at).toDateString()===de.toDateString());break;case"week":const me=new Date(de.setDate(de.getDate()-7));ee=ee.filter(B=>new Date(B.created_at)>=me);break;case"month":const Z=new Date(de.setMonth(de.getMonth()-1));ee=ee.filter(B=>new Date(B.created_at)>=Z);break}return ee};return u?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsx("div",{className:"max-w-4xl mx-auto px-4",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"My Feed"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>x("shared"),className:`px-4 py-2 rounded-md text-sm font-medium ${A==="shared"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Shared by me"}),d.jsx("button",{onClick:()=>x("reposts"),className:`px-4 py-2 rounded-md text-sm font-medium ${A==="reposts"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"My Reposts"})]})]}),d.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-3",children:d.jsxs("div",{className:"relative",children:[d.jsxs("select",{value:m,onChange:ee=>E(ee.target.value),className:"appearance-none pl-8 pr-4 py-1.5 bg-white border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All time"}),d.jsx("option",{value:"today",children:"Today"}),d.jsx("option",{value:"week",children:"This week"}),d.jsx("option",{value:"month",children:"This month"})]}),d.jsx(q1,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})}),d.jsxs("button",{onClick:()=>T(!0),className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[d.jsx(cc,{className:"w-4 h-4"}),"Manage Topics"]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("button",{onClick:()=>P(null),className:`px-3 py-1.5 rounded-full text-sm ${I?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:"All Formats"}),O.map(({emoji:ee,label:de})=>d.jsxs("button",{onClick:()=>P(I===ee?null:ee),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm ${I===ee?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx("span",{children:ee}),de]},ee))]}),d.jsx(hN,{topics:e,selectedTopics:_,onTopicToggle:ee=>{v(de=>de.includes(ee)?de.filter(me=>me!==ee):[...de,ee])}})]}),d.jsx("div",{className:"space-y-4",children:h?d.jsx("p",{className:"text-center text-red-600 py-8",children:h}):Ee().length===0?d.jsx("p",{className:"text-center text-gray-500 py-8",children:A==="shared"?"You haven't shared any links yet":"No reposts yet"}):Ee().map(ee=>{var de,me;return d.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden p-4",children:d.jsxs("div",{className:"flex gap-4",children:[ee.thumbnail_url&&d.jsx("img",{src:ee.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsxs("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 block mb-1",children:[ee.title,d.jsx(Zh,{className:"inline-block w-3.5 h-3.5 ml-1 opacity-50"})]}),d.jsx("p",{className:"text-sm text-gray-500 mb-2",children:ee.description}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[d.jsx("span",{className:"text-gray-400",children:new Date(ee.created_at).toLocaleDateString()}),d.jsxs("button",{onClick:()=>r(ee.id),className:`flex items-center gap-1 ${ee.liked?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[d.jsx(fD,{className:`w-3.5 h-3.5 ${ee.liked?"fill-current":""}`}),d.jsx("span",{children:ee.likes})]}),ee.is_original_content&&d.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 rounded-full text-xs font-medium flex items-center gap-1",children:[d.jsx(tp,{className:"w-3 h-3"}),"ORIGINAL"]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>j(ee),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Edit format",children:d.jsx(ep,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>D(ee),className:"p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",title:"Edit topics",children:d.jsx(cc,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>k(ee.id),className:"p-1 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Delete",children:d.jsx(mo,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"mt-3 flex flex-wrap gap-1.5",children:[(de=ee.emoji_tags)==null?void 0:de.map(Z=>d.jsx("span",{className:"text-lg",children:Z},Z)),(me=ee.topic_ids)==null?void 0:me.map(Z=>{const B=e.find(V=>V.id===Z);return B?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${B.color}15`,color:B.color},children:B.name},B.id):null})]})]})]})},ee.id)})}),b&&d.jsx(nz,{isOpen:!0,onClose:()=>T(!1)}),F&&d.jsx(iz,{link:F,onClose:()=>j(null),onSave:async ee=>{try{await n(F.id,ee),j(null),o(de=>de.map(me=>me.id===F.id?{...me,emoji_tags:ee}:me))}catch(de){console.error("Error updating formats:",de),p("Failed to update formats")}}}),$&&d.jsx(az,{link:$,onClose:()=>D(null),onSave:async ee=>{try{await s($.id,ee),D(null),o(de=>de.map(me=>me.id===$.id?{...me,topic_ids:ee}:me))}catch(de){console.error("Error updating topics:",de),p("Failed to update topics")}}}),w&&d.jsx(cN,{isOpen:!0,onClose:()=>k(null),onConfirm:()=>N(w)})]})})}const fN=Mc((t,e)=>({subscriptions:[],loading:!1,error:null,isSubscribed:r=>{const n=pt.currentUser;return n?e().subscriptions.some(s=>s.publisher_id===r&&s.subscriber_id===n.uid):!1},subscribe:async r=>{try{const n=pt.currentUser;if(!n){t({error:"You must be logged in to subscribe"});return}if(e().isSubscribed(r))return;const s={subscriber_id:n.uid,publisher_id:r,subscriber_email:n.email,subscriber_name:n.displayName||n.email.split("@")[0],created_at:new Date().toISOString()},i=await U1(At(_e,"subscriptions"),s);await Promise.all([Os(Ve(_e,"users",n.uid),{subscriptions_count:Li(1)}),Os(Ve(_e,"users",r),{subscribers_count:Li(1)})]),t(a=>({subscriptions:[...a.subscriptions,{id:i.id,...s}],error:null}))}catch(n){throw console.error("Error subscribing:",n),t({error:"Failed to subscribe"}),n}},unsubscribe:async r=>{try{const n=pt.currentUser;if(!n){t({error:"You must be logged in to unsubscribe"});return}const s=e().subscriptions.find(i=>i.publisher_id===r&&i.subscriber_id===n.uid);if(!s)return;await jo(Ve(_e,"subscriptions",s.id)),await Promise.all([Os(Ve(_e,"users",n.uid),{subscriptions_count:Li(-1)}),Os(Ve(_e,"users",r),{subscribers_count:Li(-1)})]),t(i=>({subscriptions:i.subscriptions.filter(a=>a.id!==s.id),error:null}))}catch(n){throw console.error("Error unsubscribing:",n),t({error:"Failed to unsubscribe"}),n}},fetchSubscriptions:async()=>{try{const r=pt.currentUser;if(!r)return;t({loading:!0});const n=Kt(At(_e,"subscriptions"),Bt("subscriber_id","==",r.uid)),i=(await sr(n)).docs.map(a=>({id:a.id,...a.data()}));t({subscriptions:i,error:null})}catch(r){console.error("Error fetching subscriptions:",r),t({error:"Failed to fetch subscriptions"})}finally{t({loading:!1})}},fetchSubscribers:async()=>{try{const r=pt.currentUser;if(!r)return[];const n=Kt(At(_e,"subscriptions"),Bt("publisher_id","==",r.uid));return(await sr(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){return console.error("Error fetching subscribers:",r),[]}}}));function uz(){const{id:t}=L2(),{user:e}=Wr(),{isSubscribed:r,subscribe:n,unsubscribe:s}=fN(),[i,a]=M.useState(null),[o,u]=M.useState([]),[l,h]=M.useState(!0),[p,m]=M.useState(null),[E,_]=M.useState(!1),[v,A]=M.useState("grid");M.useEffect(()=>{(async()=>{if(t)try{h(!0),m(null);const T=await Js(Ve(_e,"users",t));if(!T.exists())throw new Error("User not found");const F=T.data();a(F);const j=Kt(At(_e,"supercurations"),Bt("created_by","==",t),Bt("is_public","==",!0)),D=(await sr(j)).docs.map(w=>({id:w.id,...w.data()}));u(D)}catch(T){console.error("Error fetching profile:",T),m(T instanceof Error?T.message:"Failed to load profile")}finally{h(!1)}})()},[t]);const x=async()=>{if(!(!i||!e))try{_(!0),r(i.id)?await s(i.id):await n(i.id)}catch(b){console.error("Subscription error:",b)}finally{_(!1)}};return l?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p||!i?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-red-600",children:p||"User not found"})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:d.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[d.jsx("img",{src:i.avatar_url,alt:i.name,className:"w-32 h-32 rounded-full border-4 border-white/10"}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:i.name}),d.jsx("p",{className:"text-gray-400",children:i.email})]}),e&&e.id!==i.id&&d.jsxs("button",{onClick:x,disabled:E,className:`px-6 py-2 rounded-full font-medium text-sm flex items-center gap-2 transition-colors ${r(i.id)?"bg-gray-700 text-white hover:bg-gray-600":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[d.jsx(z1,{className:"w-4 h-4"}),E?"Processing...":r(i.id)?"Unsubscribe":"Subscribe"]})]}),i.bio&&d.jsx("p",{className:"text-lg text-gray-300 mb-6",children:i.bio}),d.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-gray-400",children:[i.location&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(iB,{className:"w-4 h-4"}),i.location]}),i.website&&d.jsxs("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-400 hover:text-blue-300",children:[d.jsx(na,{className:"w-4 h-4"}),new URL(i.website).hostname]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(q1,{className:"w-4 h-4"}),"Joined ",new Date(i.created_at).toLocaleDateString()]})]})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Public Supercurations"}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-full p-1 bg-white",children:[d.jsx("button",{onClick:()=>A("grid"),className:`p-1.5 rounded-full ${v==="grid"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(H1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>A("list"),className:`p-1.5 rounded-full ${v==="list"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx($1,{className:"w-4 h-4"})})]})]}),o.length===0?d.jsx("div",{className:"text-center py-12 bg-white rounded-lg",children:d.jsx("p",{className:"text-gray-500",children:"No public supercurations yet"})}):v==="grid"?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(b=>d.jsxs(yt,{to:`/s/${b.slug}`,className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[b.thumbnail_url&&d.jsx("img",{src:b.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-medium text-lg mb-2",children:b.title}),d.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:b.description}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[d.jsxs("span",{children:[b.links_count||0," links"]}),d.jsx("span",{children:new Date(b.created_at).toLocaleDateString()})]})]})]},b.id))}):d.jsx("div",{className:"space-y-4",children:o.map(b=>d.jsx(yt,{to:`/s/${b.slug}`,className:"block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-medium text-lg mb-2",children:b.title}),d.jsx("p",{className:"text-sm text-gray-500 mb-4",children:b.description}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[d.jsxs("span",{children:[b.links_count||0," links"]}),d.jsx("span",{children:new Date(b.created_at).toLocaleDateString()})]})]})},b.id))})]})]})}function lz(){const{fetchSubscribers:t}=fN(),[e,r]=M.useState([]),[n,s]=M.useState(!0);M.useEffect(()=>{(async()=>{try{s(!0);const o=await t();r(o)}finally{s(!1)}})()},[t]);const i=()=>{const a=["Name","Email","Subscribed Date"].join(","),o=e.map(m=>[m.subscriber_name,m.subscriber_email,new Date(m.created_at).toLocaleDateString()].join(",")),u=[a,...o].join(`
`),l=new Blob([u],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(l),p=document.createElement("a");p.setAttribute("href",h),p.setAttribute("download",`subscribers-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(p),p.click(),document.body.removeChild(p)};return n?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Subscriber Dashboard"}),d.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-900",children:[d.jsx(eB,{className:"w-4 h-4"}),"Export CSV"]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b bg-gray-50",children:d.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[d.jsx(z1,{className:"w-5 h-5"}),d.jsxs("span",{className:"font-medium",children:[e.length," Subscribers"]})]})}),d.jsx("div",{className:"divide-y",children:e.length===0?d.jsx("div",{className:"p-8 text-center text-gray-500",children:"No subscribers yet"}):e.map(a=>d.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:a.subscriber_name}),d.jsx("p",{className:"text-sm text-gray-500",children:a.subscriber_email})]}),d.jsxs("div",{className:"text-sm text-gray-400",children:["Subscribed ",new Date(a.created_at).toLocaleDateString()]})]},a.id))})]})]})}function cz(){const{user:t}=Wr(),{supercurations:e,loading:r,error:n,fetchSupercurations:s}=rp(),{topics:i}=hi(),[a,o]=M.useState([]);M.useEffect(()=>{s()},[s]);const u=_=>{o(v=>v.includes(_)?v.filter(A=>A!==_):[...v,_])},l=(e==null?void 0:e.filter(_=>_.created_by===(t==null?void 0:t.id)))||[],h=(e==null?void 0:e.filter(_=>_.created_by!==(t==null?void 0:t.id)&&_.is_public))||[];console.log("All Supercurations:",e),console.log("Personal Supercurations:",l),console.log("Public Supercurations:",h);const p=_=>!_||a.length===0?_||[]:_.filter(v=>a.some(A=>{var x;return(x=v.topics)==null?void 0:x.includes(A)})),E=(()=>{const _={};i.forEach(A=>{_[A.id]=0});const v=[...l,...h];return console.log("Topics:",i),console.log("Initial Counts:",_),v.forEach(A=>{var x;console.log("Processing supercuration:",{id:A.id,title:A.title,topics:A.topics}),(x=A.topics)==null||x.forEach(b=>{_[b]!==void 0&&_[b]++})}),console.log("Final Topic Counts:",_),_})();return r?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?d.jsx("div",{className:"text-center py-8 text-red-600",children:n}):d.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"My Supercurations"}),d.jsxs(yt,{to:"/supercurations/new",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[d.jsx(sa,{className:"w-4 h-4"}),"New Supercuration"]})]}),d.jsx(hN,{topics:i.map(_=>({..._,count:E[_.id]||0})),selectedTopics:a,onTopicToggle:u}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p(l).map(_=>{var v;return d.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[_.thumbnail_url&&d.jsx("img",{src:_.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h2",{className:"font-medium text-lg",children:_.title}),d.jsx("div",{className:"flex items-center gap-1 text-sm",children:_.is_public?d.jsxs("span",{className:"flex items-center gap-1 text-blue-500 px-2 py-0.5 bg-blue-50 rounded-full",children:[d.jsx(na,{className:"w-3.5 h-3.5"}),"Public"]}):d.jsxs("span",{className:"flex items-center gap-1 text-gray-500 px-2 py-0.5 bg-gray-50 rounded-full",children:[d.jsx(Zf,{className:"w-3.5 h-3.5"}),"Private"]})})]}),d.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:_.description}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[d.jsxs("span",{children:[_.links_count||0," links"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[_.is_public&&_.slug&&d.jsxs(yt,{to:`/s/${_.slug}`,className:"flex items-center gap-1 px-3 py-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:[d.jsx(na,{className:"w-4 h-4"}),"Preview"]}),d.jsxs(yt,{to:`/supercurations/${_.id}`,className:"flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:bg-gray-50 rounded-md transition-colors",children:[d.jsx(oB,{className:"w-4 h-4"}),"Edit"]})]})]}),((v=_.topics)==null?void 0:v.length)>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:_.topics.map(A=>{const x=i.find(b=>b.id===A);return x?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${x.color}15`,color:x.color},children:x.name},x.id):null})})]})]},_.id)})}),h.length>0&&d.jsxs("div",{className:"mt-12",children:[d.jsx("h2",{className:"text-xl font-bold mb-6",children:"Public Supercurations"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p(h).map(_=>{var v,A;return d.jsxs(yt,{to:`/supercurations/${_.id}`,className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[_.thumbnail_url&&d.jsx("img",{src:_.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("h2",{className:"font-medium text-lg mb-2",children:_.title}),d.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:_.description}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[d.jsxs("span",{children:[_.links_count||0," links"]}),d.jsxs("span",{children:["by ",(v=_.user)==null?void 0:v.name]})]}),((A=_.topics)==null?void 0:A.length)>0&&d.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5",children:_.topics.map(x=>{const b=i.find(T=>T.id===x);return b?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${b.color}15`,color:b.color},children:b.name},b.id):null})})]})]},_.id)})})]})]})}function dz(){const t=Jo(),{addSupercuration:e}=rp(),{topics:r}=hi(),[n,s]=M.useState(!1),[i,a]=M.useState(null),[o,u]=M.useState({title:"",description:"",thumbnail_url:"",topics:[],is_public:!1,slug:""}),l=m=>m.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),h=m=>{u(E=>({...E,title:m,slug:l(m)}))},p=async m=>{m.preventDefault();try{if(s(!0),a(null),!o.title.trim())throw new Error("Title is required");await e({...o,slug:o.is_public?o.slug:void 0}),t("/supercurations")}catch(E){console.error("Failed to create supercuration:",E),a(E instanceof Error?E.message:"Failed to create supercuration")}finally{s(!1)}};return d.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[d.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create New Supercuration"}),d.jsxs("form",{onSubmit:p,className:"space-y-6 bg-white rounded-lg p-6 shadow-sm",children:[i&&d.jsx("div",{className:"p-4 text-sm text-red-600 bg-red-50 rounded-lg",children:i}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),d.jsx("input",{type:"text",value:o.title,onChange:m=>h(m.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Best Resources for Learning React",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("textarea",{value:o.description,onChange:m=>u({...o,description:m.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe what this supercuration is about..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{type:"button",onClick:()=>u(m=>({...m,is_public:!0})),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md ${o.is_public?"bg-blue-50 text-blue-700 ring-1 ring-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[d.jsx(na,{className:"w-4 h-4"}),"Public"]}),d.jsxs("button",{type:"button",onClick:()=>u(m=>({...m,is_public:!1})),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md ${o.is_public?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-blue-50 text-blue-700 ring-1 ring-blue-700"}`,children:[d.jsx(Zf,{className:"w-4 h-4"}),"Private"]})]})]}),o.is_public&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Slug"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-gray-500",children:"supercurators.com/s/"}),d.jsx("input",{type:"text",value:o.slug,onChange:m=>u(E=>({...E,slug:m.target.value})),className:"flex-1 px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500",pattern:"[a-z0-9-]+",title:"Only lowercase letters, numbers, and hyphens are allowed",required:o.is_public})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topics"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(m=>d.jsx("button",{type:"button",onClick:()=>u(E=>({...E,topics:E.topics.includes(m.id)?E.topics.filter(_=>_!==m.id):[...E.topics,m.id]})),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm ${o.topics.includes(m.id)?"ring-1":"hover:bg-opacity-20"}`,style:{backgroundColor:`${m.color}15`,color:m.color,borderColor:o.topics.includes(m.id)?m.color:"transparent"},children:m.name},m.id))})]}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>t("/supercurations"),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:n?"Creating...":"Create Supercuration"})]})]})]})}function hz({isOpen:t,onClose:e,categories:r,onSave:n}){const[s,i]=M.useState(r),[a,o]=M.useState(null),[u,l]=M.useState(""),h=()=>{const v={id:Math.random().toString(36).substr(2,9),name:"New Category",color:"#"+Math.floor(Math.random()*16777215).toString(16),tags:[]};i([...s,v]),o(v.id)},p=(v,A)=>{i(x=>x.map(b=>b.id===v?{...b,...A}:b))},m=v=>{i(A=>A.filter(x=>x.id!==v))},E=v=>{if(!u.trim())return;const A=s.find(x=>x.id===v);A&&(p(v,{tags:[...A.tags,u.trim()]}),l(""))},_=(v,A)=>{const x=s.find(b=>b.id===v);x&&p(v,{tags:x.tags.filter(b=>b!==A)})};return t?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-lg transform rounded-lg bg-white p-6 shadow-xl",children:[d.jsx("div",{className:"absolute right-4 top-4",children:d.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:d.jsx(kr,{className:"h-6 w-6"})})}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Manage Tag Categories"}),d.jsxs("div",{className:"space-y-4",children:[s.map(v=>d.jsxs("div",{className:"border rounded-lg p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a===v.id?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:v.name,onChange:A=>p(v.id,{name:A.target.value}),className:"px-2 py-1 border rounded"}),d.jsx("input",{type:"color",value:v.color,onChange:A=>p(v.id,{color:A.target.value}),className:"w-8 h-8 p-1 border rounded cursor-pointer"}),d.jsx("button",{onClick:()=>o(null),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Save"})]}):d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.color}}),d.jsx("span",{className:"font-medium",children:v.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>o(v.id),className:"p-1 text-gray-400 hover:text-gray-600",children:d.jsx(ep,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>m(v.id),className:"p-1 text-gray-400 hover:text-red-600",children:d.jsx(mo,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Add tag...",value:u,onChange:A=>l(A.target.value),onKeyDown:A=>A.key==="Enter"&&E(v.id),className:"flex-1 px-3 py-1.5 text-sm border rounded"}),d.jsx("button",{onClick:()=>E(v.id),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Add"})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map(A=>d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm rounded",style:{backgroundColor:`${v.color}15`,color:v.color},children:[A,d.jsx("button",{onClick:()=>_(v.id,A),className:"p-0.5 hover:text-red-600",children:d.jsx(kr,{className:"w-3 h-3"})})]},A))})]})]},v.id)),d.jsx("button",{onClick:h,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:text-gray-700 hover:border-gray-400",children:d.jsx(sa,{className:"w-5 h-5 mx-auto"})})]}),d.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{onClick:()=>{n(s),e()},className:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700",children:"Save Changes"})]})]})]})}):null}function fz(){var se;const{id:t}=L2(),e=Jo(),{user:r}=Wr(),{updateSupercuration:n}=rp(),[s,i]=M.useState(null),[a,o]=M.useState([]),[u,l]=M.useState(!0),[h,p]=M.useState(null),[m,E]=M.useState("grid"),[_,v]=M.useState(!1),[A,x]=M.useState([]),[b,T]=M.useState(!1),[F,j]=M.useState(!1),[$,D]=M.useState(null),[w,k]=M.useState([]),[I,P]=M.useState(!1),[O,N]=M.useState(!1),Ee=U=>{x(G=>G.includes(U)?G.filter(le=>le!==U):[...G,U])};M.useEffect(()=>{(async()=>{if(t)try{l(!0),p(null);const G=await Js(Ve(_e,"supercurations",t));if(!G.exists())throw new Error("Supercuration not found");const le={id:G.id,...G.data()};i(le);const ue=At(_e,"links"),oe=Kt(ue,Bt("supercuration_ids","array-contains",t)),$e=(await sr(oe)).docs.map(ct=>({id:ct.id,...ct.data()}));o($e)}catch(G){console.error("Error fetching supercuration:",G),p(G instanceof Error?G.message:"Failed to load supercuration")}finally{l(!1)}})()},[t]);const ee=A.length>0?a.filter(U=>{var le;const G=((le=U.supercuration_tags)==null?void 0:le[t||""])||[];return A.some(ue=>G.includes(ue))}):a,de=(r==null?void 0:r.id)===(s==null?void 0:s.created_by),me=async U=>{if(!(!t||!(r!=null&&r.id)))try{const G={...U,supercuration_ids:[t],created_at:new Date().toISOString(),created_by:r.id};await Pv(_e,async le=>{const ue=Ve(_e,"supercurations",t),oe=await le.get(ue);if(!oe.exists())throw new Error("Supercuration not found");const Te=At(_e,"links"),$e=Kt(Te,Bt("url","==",U.url),Bt("supercuration_ids","array-contains",t));if(!(await sr($e)).empty)throw new Error("This link has already been added to this supercuration");const Ye=Kt(Te,Bt("url","==",U.url)),cr=await sr(Ye);let dr;if(cr.empty)dr=Ve(At(_e,"links")),le.set(dr,G),G.id=dr.id;else{const Lr=cr.docs[0];dr=Ve(_e,"links",Lr.id);const dn=Lr.data();le.update(dr,{supercuration_ids:[...new Set([...dn.supercuration_ids||[],t])]}),G.id=Lr.id}le.update(ue,{links_count:(oe.data().links_count||0)+1}),o(Lr=>[...Lr,G])}),T(!1)}catch(G){console.error("Error adding resource:",G),alert(G instanceof Error?G.message:"Failed to add resource")}},Z=async U=>{if(t)try{await Pv(_e,async G=>{var cr;const le=Ve(_e,"supercurations",t),ue=Ve(_e,"links",U),[oe,Te]=await Promise.all([G.get(le),G.get(ue)]);if(!oe.exists())throw new Error("Supercuration not found");if(!Te.exists())throw new Error("Link not found");const $e=Te.data(),Ye={supercuration_ids:($e.supercuration_ids||[]).filter(dr=>dr!==t)};(cr=$e.supercuration_tags)!=null&&cr[t]&&(Ye[`supercuration_tags.${t}`]=mF()),G.update(ue,Ye),G.update(le,{links_count:Math.max(0,(oe.data().links_count||0)-1)})}),o(G=>G.filter(le=>le.id!==U)),D(null)}catch(G){console.error("Error removing resource:",G),alert(G instanceof Error?G.message:"Failed to remove resource")}},B=async()=>{if(t)try{await jo(Ve(_e,"supercurations",t)),e("/supercurations")}catch(U){console.error("Error deleting supercuration:",U)}},V=async()=>{if(!(!(r!=null&&r.id)||!t))try{P(!0);const U=At(_e,"links"),G=Kt(U,Bt("created_by","==",r.id)),oe=(await sr(G)).docs.map(Te=>({id:Te.id,...Te.data()})).filter(Te=>{var $e;return!(($e=Te.supercuration_ids)!=null&&$e.includes(t||""))});k(oe)}catch(U){console.error("Error fetching saved links:",U)}finally{P(!1)}};M.useEffect(()=>{b&&V()},[b]);const Y=U=>{const G={...U,id:"",created_at:new Date().toISOString(),created_by:(r==null?void 0:r.id)||"",supercuration_ids:[],emoji_tags:[],topic_ids:[],is_original_content:!1,supercuration_tags:{},user:{id:(r==null?void 0:r.id)||"",name:(r==null?void 0:r.name)||"",avatar_url:(r==null?void 0:r.avatar_url)||""},liked:!1,likes:0,reposts_count:0};me(G)};return u?d.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):h||!s?d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-red-600",children:h||"Supercuration not found"})}):d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h1",{className:"text-2xl font-bold",children:s.title}),!s.is_public&&d.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-400/10 text-yellow-500",children:[d.jsx(Zf,{className:"w-3 h-3 mr-1"}),"Private"]})]}),de&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 text-red-700 bg-red-50 rounded-lg hover:bg-red-100",children:[d.jsx(mo,{className:"w-4 h-4"}),"Delete Supercuration"]}),d.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100",children:[d.jsx(cc,{className:"w-4 h-4"}),"Edit Tags"]})]})]}),d.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),s.is_public&&s.slug&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[d.jsx(na,{className:"w-4 h-4"}),d.jsx("span",{children:"Public URL:"}),d.jsxs("a",{href:`/s/${s.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:["supercurators.com/s/",s.slug]})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[ee.length," Resources"]}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-full p-1 bg-white",children:[d.jsx("button",{onClick:()=>E("grid"),className:`p-1.5 rounded-full ${m==="grid"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(H1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>E("list"),className:`p-1.5 rounded-full ${m==="list"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx($1,{className:"w-4 h-4"})})]})]}),(se=s.tagCategories)==null?void 0:se.map(U=>d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:U.name}),d.jsx("div",{className:"flex flex-wrap gap-2",children:U.tags.map(G=>d.jsx("button",{onClick:()=>Ee(G),className:`px-3 py-1 rounded-full text-sm ${A.includes(G)?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:G},G))})]},U.name)),m==="grid"?d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[de&&d.jsxs("button",{onClick:()=>T(!0),className:"flex flex-col items-center justify-center h-full bg-white rounded-lg shadow-sm p-8 border-2 border-dashed border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors group",children:[d.jsx(sa,{className:"w-8 h-8 text-gray-400 group-hover:text-gray-500 mb-2"}),d.jsx("span",{className:"text-sm font-medium text-gray-600 group-hover:text-gray-700",children:"Add New Resource"})]}),ee.map(U=>{var G;return d.jsx("div",{className:"group bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:d.jsxs("div",{className:"relative",children:[de&&d.jsx("button",{onClick:()=>D(U.id),className:"absolute top-2 right-2 z-10 p-2 bg-white rounded-full shadow-sm text-gray-400 hover:text-red-600 hover:bg-gray-100",title:"Remove from supercuration",children:d.jsx(mo,{className:"w-4 h-4"})}),d.jsxs("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"block",children:[U.thumbnail_url&&d.jsx("img",{src:U.thumbnail_url,alt:"",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors mb-2",children:U.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-4",children:U.description}),(((G=U.supercuration_tags)==null?void 0:G[t||""])??[]).map(le=>{var oe;const ue=(oe=s.tagCategories)==null?void 0:oe.find(Te=>Te.tags.includes(le));return ue?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${ue.color}15`,color:ue.color},children:le},le):null})]})]})]})},U.id)})]}):d.jsxs("div",{className:"space-y-4",children:[de&&d.jsxs("button",{onClick:()=>T(!0),className:"w-full flex items-center justify-center bg-white rounded-lg shadow-sm p-4 border-2 border-dashed border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors group",children:[d.jsx(sa,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-500 mr-2"}),d.jsx("span",{className:"text-sm font-medium text-gray-600 group-hover:text-gray-700",children:"Add New Resource"})]}),ee.map(U=>{var G,le;return d.jsx("div",{className:"block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex gap-4",children:[U.thumbnail_url&&d.jsx("img",{src:U.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 hover:text-blue-600 transition-colors",children:U.title}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:U.description})]}),de&&d.jsx("button",{onClick:()=>D(U.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-100",title:"Remove from supercuration",children:d.jsx(mo,{className:"w-4 h-4"})})]}),(((G=U.supercuration_tags)==null?void 0:G[t||""])??[]).length>0&&d.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:(((le=U.supercuration_tags)==null?void 0:le[t||""])??[]).map(ue=>{var Te;const oe=(Te=s.tagCategories)==null?void 0:Te.find($e=>$e.tags.includes(ue));return oe?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${oe.color}15`,color:oe.color},children:ue},ue):null})})]})]})})},U.id)})]}),_&&d.jsx(hz,{isOpen:!0,onClose:()=>v(!1),categories:s.tagCategories||[],onSave:async U=>{try{await n(s.id,{...s,tagCategories:U}),v(!1);const G=await Js(Ve(_e,"supercurations",s.id));i({id:G.id,...G.data()})}catch(G){console.error("Failed to update tag categories:",G)}}}),b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Add New Resource"}),d.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(kr,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Add from your saved posts"}),d.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:I?d.jsx("div",{className:"flex justify-center py-4",children:d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):w.length===0?d.jsx("p",{className:"text-center text-gray-500 py-4",children:"No saved links available to add"}):w.map(U=>d.jsxs("button",{onClick:()=>me(U),className:"w-full flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 text-left group",children:[U.thumbnail_url&&d.jsx("img",{src:U.thumbnail_url,alt:"",className:"w-16 h-16 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-blue-600",children:U.title}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:U.description})]})]},U.id))})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-200"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Add a new link"}),d.jsx(dN,{onShare:Y,onCancel:()=>T(!1)}),d.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-500",children:d.jsx("button",{onClick:()=>N(!0),className:"text-blue-600 hover:text-blue-700",children:"Import multiple URLs from text or image"})})]}),O&&d.jsxs("div",{className:"mt-4 border-t pt-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Import Multiple URLs"}),d.jsx(lN,{})]})]})]})}),$&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Remove Resource"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to remove this resource from the supercuration?"}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>D(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{onClick:()=>Z($),className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700",children:"Remove"})]})]})}),F&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Delete Supercuration"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this supercuration? This will permanently delete all associated data and cannot be undone."}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),d.jsx("button",{onClick:B,className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}const pz=[{id:"article",label:"Article",color:"#FEE2E2"},{id:"tutorial",label:"Tutorial",color:"#FEE2E2"},{id:"video",label:"Video",color:"#FEE2E2"},{id:"tool",label:"Tool",color:"#FEE2E2"},{id:"resource",label:"Resource",color:"#FEE2E2"}],mz=[{id:"beginner",label:"Beginner",color:"#DCFCE7"},{id:"intermediate",label:"Intermediate",color:"#DCFCE7"},{id:"advanced",label:"Advanced",color:"#DCFCE7"}],gz=[{id:"generaliste",label:"Gnraliste"},{id:"tech-politique",label:"Tech & Politique"},{id:"tech-social",label:"Tech & Social"},{id:"tech-retail",label:"Tech & Retail"},{id:"ia",label:"IA"},{id:"silicon-valley",label:"Silicon Valley"},{id:"ia-audio-video",label:"IA Audio/Video"},{id:"strategie-innovation",label:"Stratgie & Innovation"},{id:"futur-of-work",label:"Futur of Work"},{id:"creator-economy",label:"Creator Economy"},{id:"marketing",label:"Marketing"},{id:"tourisme",label:"Tourisme"},{id:"product-management",label:"Product Management"},{id:"growth",label:"Growth"},{id:"medias",label:"Mdias"},{id:"dystopie",label:"Dystopie"},{id:"culturetech",label:"CultureTech"},{id:"chine",label:"Chine"},{id:"us",label:"US"},{id:"neuroscience",label:"Neuroscience"}];function Ez({onFilterChange:t}){const[e,r]=M.useState([]),n=s=>{const i=e.includes(s)?e.filter(a=>a!==s):[...e,s];r(i),t(i)};return d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:d.jsxs("div",{className:"flex flex-wrap gap-2",children:[pz.map(s=>d.jsx("button",{onClick:()=>n(s.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${e.includes(s.id)?"bg-red-100 text-red-800 ring-1 ring-red-200":"bg-white text-gray-600 hover:bg-red-50"}`,children:s.label},s.id)),mz.map(s=>d.jsx("button",{onClick:()=>n(s.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${e.includes(s.id)?"bg-green-100 text-green-800 ring-1 ring-green-200":"bg-white text-gray-600 hover:bg-green-50"}`,children:s.label},s.id))]})}),d.jsx("div",{className:"w-64 bg-white rounded-lg shadow-sm",children:d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Categories"}),d.jsx("div",{className:"space-y-1",children:gz.map(s=>d.jsx("button",{onClick:()=>n(s.id),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${e.includes(s.id)?"bg-gray-100 text-gray-900 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:s.label},s.id))})]})})]})}function pN({title:t="Subscribe to Updates",description:e="Get the latest content directly in your inbox"}){const[r,n]=M.useState(""),[s,i]=M.useState("idle"),a=async o=>{if(o.preventDefault(),!!r)try{i("loading"),await new Promise(u=>setTimeout(u,1e3)),i("success"),n("")}catch{i("error")}};return d.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:d.jsx(z1,{className:"w-5 h-5 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:t}),d.jsx("p",{className:"text-sm text-gray-500",children:e})]})]}),d.jsxs("form",{onSubmit:a,className:"space-y-4",children:[d.jsx("div",{className:"relative",children:d.jsx("input",{type:"email",value:r,onChange:o=>n(o.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 bg-white rounded-lg border-0 focus:ring-2 focus:ring-blue-500",disabled:s==="loading"||s==="success"})}),d.jsx("button",{type:"submit",disabled:!r||s==="loading"||s==="success",className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s==="loading"?"Subscribing...":s==="success"?"Subscribed!":"Subscribe"}),s==="error"&&d.jsx("p",{className:"text-sm text-red-600",children:"Something went wrong. Please try again."})]})]})}function yz(){const{slug:t}=L2(),[e,r]=M.useState(null),[n,s]=M.useState([]),[i,a]=M.useState(!0),[o,u]=M.useState(null),[l,h]=M.useState("grid"),[p,m]=M.useState([]);M.useEffect(()=>{(async()=>{if(t)try{a(!0),u(null);const v=At(_e,"supercurations"),A=Kt(v,Bt("slug","==",t)),x=await sr(A);if(x.empty)throw new Error("Supercuration not found");const b={id:x.docs[0].id,...x.docs[0].data()};r(b);const T=At(_e,"links"),F=Kt(T,Bt("supercuration_ids","array-contains",b.id)),$=(await sr(F)).docs.map(D=>({id:D.id,...D.data()}));s($)}catch(v){console.error("Error fetching supercuration:",v),u(v instanceof Error?v.message:"Failed to load supercuration")}finally{a(!1)}})()},[t]);const E=p.length>0?n.filter(_=>{var A;const v=((A=_.supercuration_tags)==null?void 0:A[(e==null?void 0:e.id)||""])||[];return p.some(x=>v.includes(x))}):n;return i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o||!e?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),d.jsx("p",{className:"text-gray-600",children:"This supercuration doesn't exist or is private"})]})}):d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs(cw,{children:[d.jsxs("title",{children:[e.title," | Supercurators"]}),d.jsx("meta",{name:"description",content:e.description}),e.thumbnail_url&&d.jsx("meta",{property:"og:image",content:e.thumbnail_url})]}),d.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[!e.is_public&&d.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-400/10 text-yellow-500",children:[d.jsx(Zf,{className:"w-3 h-3 mr-1"}),"Private"]}),d.jsxs("span",{className:"text-sm text-gray-400",children:["Updated ",new Date(e.created_at).toLocaleDateString()]})]}),d.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.title}),d.jsx("p",{className:"text-xl text-gray-300 mb-8",children:e.description}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("img",{src:e.user.avatar_url,alt:e.user.name,className:"w-12 h-12 rounded-full"}),d.jsxs("div",{children:[d.jsxs("h2",{className:"font-medium",children:["Curated by"," ",d.jsx(yt,{to:`/profile/${e.user.id}`,className:"text-blue-400 hover:text-blue-300 transition-colors",children:e.user.name})]}),e.user.bio&&d.jsx("p",{className:"text-sm text-gray-400",children:e.user.bio})]})]})]}),d.jsx("div",{className:"lg:pl-12",children:d.jsx(pN,{title:`Subscribe to ${e.title}`,description:"Get notified when new resources are added to this collection"})})]})})}),d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs("div",{className:"flex gap-8",children:[d.jsx("div",{className:"w-64 flex-shrink-0",children:d.jsx(Ez,{onFilterChange:m})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:[E.length," Resources"]}),d.jsxs("div",{className:"flex items-center gap-2 border rounded-full p-1 bg-white",children:[d.jsx("button",{onClick:()=>h("grid"),className:`p-1.5 rounded-full ${l==="grid"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx(H1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>h("list"),className:`p-1.5 rounded-full ${l==="list"?"bg-gray-100 text-gray-900":"text-gray-400 hover:text-gray-600"}`,children:d.jsx($1,{className:"w-4 h-4"})})]})]}),l==="grid"?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(_=>{var v;return d.jsxs("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"group bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[_.thumbnail_url&&d.jsx("div",{className:"aspect-video",children:d.jsx("img",{src:_.thumbnail_url,alt:"",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"p-4",children:[d.jsxs("h3",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors mb-2",children:[_.title,d.jsx(Zh,{className:"inline-block w-3.5 h-3.5 ml-1 opacity-50"})]}),d.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 mb-4",children:_.description}),_.supercuration_tags&&e.id&&((v=_.supercuration_tags[e.id])==null?void 0:v.length)>0&&d.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:(_.supercuration_tags[e.id]||[]).map(A=>{var b;const x=(b=e.tagCategories)==null?void 0:b.find(T=>T.tags.includes(A));return x?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${x.color}15`,color:x.color},children:A},A):null})})]})]},_.id)})}):d.jsx("div",{className:"space-y-4",children:E.map(_=>{var v;return d.jsx("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex gap-4",children:[_.thumbnail_url&&d.jsx("img",{src:_.thumbnail_url,alt:"",className:"w-24 h-24 rounded object-cover flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("h3",{className:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors mb-2",children:[_.title,d.jsx(Zh,{className:"inline-block w-3.5 h-3.5 ml-1 opacity-50"})]}),d.jsx("p",{className:"text-sm text-gray-500",children:_.description}),_.supercuration_tags&&e.id&&((v=_.supercuration_tags[e.id])==null?void 0:v.length)>0&&d.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:(_.supercuration_tags[e.id]||[]).map(A=>{var b;const x=(b=e.tagCategories)==null?void 0:b.find(T=>T.tags.includes(A));return x?d.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:`${x.color}15`,color:x.color},children:A},A):null})})]})]})})},_.id)})})]})]})})]})}function _z(){return d.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Discover Amazing Supercurations"}),d.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Explore curated collections of the best resources, handpicked by experts and enthusiasts across various topics."}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[d.jsx(na,{className:"w-4 h-4"}),d.jsxs("span",{children:[new Date().toLocaleDateString(),"  Updated daily"]})]})]}),d.jsx("div",{className:"lg:pl-12",children:d.jsx(pN,{title:"Never miss new supercurations",description:"Get weekly updates about the best new curated collections"})})]})})})}function bz({supercurations:t}){return t.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 mb-3",children:d.jsx(na,{className:"w-6 h-6 text-gray-400"})}),d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No supercurations found"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search or filters"})]}):d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:t.map(e=>d.jsxs(yt,{to:`/s/${e.slug}`,className:"group bg-white rounded-md border border-gray-100 overflow-hidden hover:shadow-sm transition-all duration-300 flex flex-col h-full",children:[e.thumbnail_url?d.jsx("div",{className:"h-20 overflow-hidden",children:d.jsx("img",{src:e.thumbnail_url,alt:"",className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300"})}):d.jsx("div",{className:"h-20 bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:d.jsx(XF,{className:"w-4 h-4 text-white opacity-50"})}),d.jsxs("div",{className:"flex-1 p-1.5 flex flex-col",children:[d.jsx("h3",{className:"font-medium text-[11px] text-gray-900 group-hover:text-blue-600 transition-colors mb-0.5 line-clamp-2",children:e.title}),d.jsx("p",{className:"text-[10px] text-gray-500 line-clamp-1 mb-1",children:e.description}),d.jsxs("div",{className:"flex items-center gap-1 mt-auto",children:[d.jsx("img",{src:e.user.avatar_url,alt:e.user.name,className:"w-3 h-3 rounded-full"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("span",{className:"text-[9px] text-gray-600 font-medium truncate block",children:e.user.name}),d.jsxs("span",{className:"text-[9px] text-gray-400",children:[e.links_count||0," links"]})]}),d.jsx(YF,{className:"w-2.5 h-2.5 text-gray-400 group-hover:text-blue-600 transition-colors flex-shrink-0"})]})]})]},e.id))})}function vz(){return d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2",children:[...Array(24)].map((t,e)=>d.jsxs("div",{className:"bg-white rounded-md border border-gray-100 overflow-hidden animate-pulse flex flex-col",children:[d.jsx("div",{className:"h-20 bg-gray-200"}),d.jsxs("div",{className:"p-1.5",children:[d.jsx("div",{className:"h-2.5 w-3/4 bg-gray-200 rounded mb-1"}),d.jsx("div",{className:"h-2 w-full bg-gray-200 rounded mb-1"}),d.jsx("div",{className:"h-2 w-2/3 bg-gray-200 rounded mb-1.5"}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-200"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"h-1.5 w-12 bg-gray-200 rounded mb-0.5"}),d.jsx("div",{className:"h-1.5 w-10 bg-gray-200 rounded"})]})]})]})]},e))})}function Tz(){const[t,e]=M.useState([]),[r,n]=M.useState(!0),[s,i]=M.useState(""),[a,o]=M.useState(null);M.useEffect(()=>{(async()=>{try{n(!0);const h=Kt(At(_e,"supercurations"),Bt("is_public","==",!0)),m=(await sr(h)).docs.map(E=>({id:E.id,...E.data()}));e(m)}catch(h){console.error("Error fetching supercurations:",h)}finally{n(!1)}})()},[]);const u=t.filter(l=>{var m;const h=!s||l.title.toLowerCase().includes(s.toLowerCase())||l.description.toLowerCase().includes(s.toLowerCase()),p=!a||((m=l.topics)==null?void 0:m.includes(a));return h&&p});return d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs(cw,{children:[d.jsx("title",{children:"Discover Amazing Supercurations | Supercurators"}),d.jsx("meta",{name:"description",content:"Explore curated collections of the best resources, handpicked by experts and enthusiasts across various topics."})]}),d.jsx(_z,{}),d.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs("div",{className:"flex gap-8",children:[d.jsx("div",{className:"w-64 flex-shrink-0",children:d.jsxs("div",{className:"sticky top-4 space-y-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(uB,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Search...",value:s,onChange:l=>i(l.target.value),className:"w-full pl-9 pr-4 py-2 bg-white border-0 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500"})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Focus"}),d.jsx("div",{className:"space-y-1",children:Az.map(l=>d.jsx("button",{onClick:()=>o(l.id===a?null:l.id),className:`w-full text-left px-3 py-1.5 rounded-md text-sm transition-colors ${a===l.id?"bg-gray-900 text-white font-medium":"text-gray-600 hover:bg-gray-100"}`,children:l.name},l.id))})]})]})}),d.jsx("div",{className:"flex-1",children:r?d.jsx(vz,{}):d.jsx("div",{className:"transition-all duration-300",children:d.jsx(bz,{supercurations:u})})})]})})]})}const Az=[{id:"generaliste",name:"Gnraliste"},{id:"tech-politique",name:"Tech & Politique"},{id:"tech-social",name:"Tech & Social"},{id:"tech-retail",name:"Tech & Retail"},{id:"ia",name:"IA"},{id:"silicon-valley",name:"Silicon Valley"},{id:"ia-audio-video",name:"IA Audio/Video"},{id:"strategie-innovation",name:"Stratgie & Innovation"},{id:"futur-of-work",name:"Futur of Work"},{id:"creator-economy",name:"Creator Economy"},{id:"marketing",name:"Marketing"},{id:"tourisme",name:"Tourisme"},{id:"product-management",name:"Product Management"},{id:"growth",name:"Growth"},{id:"medias",name:"Mdias"},{id:"dystopie",name:"Dystopie"},{id:"culturetech",name:"CultureTech"},{id:"chine",name:"Chine"},{id:"us",name:"US"},{id:"neuroscience",name:"Neuroscience"}];function xz(){return lu(e=>e.isOffline)?d.jsxs("div",{className:"fixed bottom-4 right-4 bg-yellow-50 text-yellow-800 px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[d.jsx(cB,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm font-medium",children:"You are offline"})]}):null}function wz(){const t=Wr(e=>e.initialize);return M.useEffect(()=>{let e=!0;return(async()=>{try{e&&await yF()&&e&&await t()}catch(n){console.error("Initialization error:",n)}})(),()=>{e=!1}},[t]),d.jsx(lw,{children:d.jsxs(yk,{children:[d.jsxs(dk,{children:[d.jsxs(er,{element:d.jsx(zF,{}),children:[d.jsx(er,{path:"/login",element:d.jsx(mB,{})}),d.jsx(er,{path:"/register",element:d.jsx(gB,{})})]}),d.jsxs(er,{element:d.jsx(fB,{}),children:[d.jsx(er,{path:"/home",element:d.jsx(rz,{})}),d.jsx(er,{path:"/saved",element:d.jsx(oz,{})}),d.jsx(er,{path:"/dashboard",element:d.jsx(lz,{})}),d.jsx(er,{path:"/supercurations",element:d.jsx(cz,{})}),d.jsx(er,{path:"/supercurations/new",element:d.jsx(dz,{})}),d.jsx(er,{path:"/supercurations/:id",element:d.jsx(fz,{})}),d.jsx(er,{path:"/profile/:id",element:d.jsx(uz,{})})]}),d.jsx(er,{path:"/directory",element:d.jsx(Tz,{})}),d.jsx(er,{path:"/s/:slug",element:d.jsx(yz,{})}),d.jsx(er,{path:"/",element:d.jsx(pB,{})})]}),d.jsx(xz,{})]})})}const PT=document.getElementById("root");PT&&Gx(PT).render(d.jsx(M.StrictMode,{children:d.jsx(wz,{})}));
